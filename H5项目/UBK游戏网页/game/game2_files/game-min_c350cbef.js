var egret;
(function(c){c.egret_string_code={};c.egret_string_code[-1]="\u4e0d\u5b58\u5728\u7684stringId:{0}";c.egret_string_code[1E3]="Browser.isMobile\u63a5\u53e3\u53c2\u6570\u5df2\u7ecf\u53d8\u66f4\uff0c\u8bf7\u5c3d\u5feb\u8c03\u6574\u7528\u6cd5\u4e3a egret.MainContext.deviceType == egret.MainContext.DEVICE_MOBILE";c.egret_string_code[1001]="\u8be5\u65b9\u6cd5\u76ee\u524d\u4e0d\u5e94\u4f20\u5165 resolutionPolicy \u53c2\u6570\uff0c\u8bf7\u5728 docs/1.0_Final_ReleaseNote\u4e2d\u67e5\u770b\u5982\u4f55\u5347\u7ea7";c.egret_string_code[1002]=
"egret.Ticker\u662f\u6846\u67b6\u5185\u90e8\u4f7f\u7528\u7684\u5355\u4f8b\uff0c\u4e0d\u5141\u8bb8\u5728\u5916\u90e8\u5b9e\u4f8b\u5316\uff0c\u8ba1\u65f6\u5668\u8bf7\u4f7f\u7528egret.Timer\u7c7b\uff01";c.egret_string_code[1003]="Ticker#setTimeout\u65b9\u6cd5\u5373\u5c06\u5e9f\u5f03,\u8bf7\u4f7f\u7528egret.setTimeout";c.egret_string_code[1004]="ExternalInterface\u8c03\u7528\u4e86js\u6ca1\u6709\u6ce8\u518c\u7684\u65b9\u6cd5: {0}";c.egret_string_code[1005]="\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684blendMode: {0}";
c.egret_string_code[1006]="child\u4e0d\u5728\u5f53\u524d\u5bb9\u5668\u5185";c.egret_string_code[1007]="\u63d0\u4f9b\u7684\u7d22\u5f15\u8d85\u51fa\u8303\u56f4";c.egret_string_code[1008]="child\u672a\u88abaddChild\u5230\u8be5parent";c.egret_string_code[1009]="\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684\u9002\u914d\u6a21\u5f0f:{0}";c.egret_string_code[1010]="addEventListener\u4fa6\u542c\u51fd\u6570\u4e0d\u80fd\u4e3a\u7a7a";c.egret_string_code[1011]='BitmapText\u627e\u4e0d\u5230\u6587\u5b57\u6240\u5bf9\u5e94\u7684\u7eb9\u7406:"{0}"';
c.egret_string_code[1012]="egret.BitmapTextSpriteSheet\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528egret.BitmapFont\u4ee3\u66ff\u3002";c.egret_string_code[1013]="TextField.setFocus \u6ca1\u6709\u5b9e\u73b0";c.egret_string_code[1014]="Ease\u4e0d\u80fd\u88ab\u5b9e\u4f8b\u5316";c.egret_string_code[1015]="xml not found!";c.egret_string_code[1016]="{0}\u5df2\u7ecf\u5e9f\u5f03";c.egret_string_code[1017]="JSON\u6587\u4ef6\u683c\u5f0f\u4e0d\u6b63\u786e: {0}\ndata: {1}";c.egret_string_code[1018]="egret_html5_localStorage.setItem\u4fdd\u5b58\u5931\u8d25,key={0}&value={1}";
c.egret_string_code[1019]="\u7f51\u7edc\u5f02\u5e38:{0}";c.egret_string_code[1020]="\u65e0\u6cd5\u521d\u59cb\u5316\u7740\u8272\u5668";c.egret_string_code[1021]="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301webgl";c.egret_string_code[1022]="{0} ArgumentError";c.egret_string_code[1023]="\u6b64\u65b9\u6cd5\u5728ScrollView\u5185\u4e0d\u53ef\u7528!";c.egret_string_code[1024]="\u4f7f\u7528\u4e86\u5c1a\u672a\u5b9e\u73b0\u7684ScaleMode";c.egret_string_code[1025]="\u9047\u5230\u6587\u4ef6\u5c3e";c.egret_string_code[1026]=
"EncodingError! The code point {0} could not be encoded.";c.egret_string_code[1027]="DecodingError";c.egret_string_code[1028]="\u8c03\u7528\u4e86\u672a\u914d\u7f6e\u7684\u6ce8\u5165\u89c4\u5219:{0}\u3002 \u8bf7\u5148\u5728\u9879\u76ee\u521d\u59cb\u5316\u91cc\u914d\u7f6e\u6307\u5b9a\u7684\u6ce8\u5165\u89c4\u5219\uff0c\u518d\u8c03\u7528\u5bf9\u5e94\u5355\u4f8b\u3002";c.egret_string_code[1029]="Function.prototype.bind - what is trying to be bound is not callable";c.egret_string_code[1030]="\u8be5API\u5df2\u5e9f\u5f03";
c.egret_string_code[2E3]="RES.createGroup()\u4f20\u5165\u4e86\u914d\u7f6e\u4e2d\u4e0d\u5b58\u5728\u7684\u952e\u503c: {0}";c.egret_string_code[2001]='RES\u52a0\u8f7d\u4e86\u4e0d\u5b58\u5728\u6216\u7a7a\u7684\u8d44\u6e90\u7ec4:"{0}"';c.egret_string_code[3E3]="\u4e3b\u9898\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u5931\u8d25: {0}";c.egret_string_code[3001]="\u627e\u4e0d\u5230\u4e3b\u9898\u4e2d\u6240\u914d\u7f6e\u7684\u76ae\u80a4\u7c7b\u540d: {0}";c.egret_string_code[3002]='\u7d22\u5f15:"{0}"\u8d85\u51fa\u96c6\u5408\u5143\u7d20\u7d22\u5f15\u8303\u56f4';
c.egret_string_code[3003]="\u5728\u6b64\u7ec4\u4ef6\u4e2d\u4e0d\u53ef\u7528\uff0c\u82e5\u6b64\u7ec4\u4ef6\u4e3a\u5bb9\u5668\u7c7b\uff0c\u8bf7\u4f7f\u7528";c.egret_string_code[3004]="addChild(){0}addElement()\u4ee3\u66ff";c.egret_string_code[3005]="addChildAt(){0}addElementAt()\u4ee3\u66ff";c.egret_string_code[3006]="removeChild(){0}removeElement()\u4ee3\u66ff";c.egret_string_code[3007]="removeChildAt(){0}removeElementAt()\u4ee3\u66ff";c.egret_string_code[3008]="setChildIndex(){0}setElementIndex()\u4ee3\u66ff";
c.egret_string_code[3009]="swapChildren(){0}swapElements()\u4ee3\u66ff";c.egret_string_code[3010]="swapChildrenAt(){0}swapElementsAt()\u4ee3\u66ff";c.egret_string_code[3011]='\u7d22\u5f15:"{0}"\u8d85\u51fa\u53ef\u89c6\u5143\u7d20\u7d22\u5f15\u8303\u56f4';c.egret_string_code[3012]="\u6b64\u65b9\u6cd5\u5728Scroller\u7ec4\u4ef6\u5185\u4e0d\u53ef\u7528!";c.egret_string_code[3013]="UIStage\u662fGUI\u6839\u5bb9\u5668\uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u6b64\u5b9e\u4f8b\u5728\u663e\u793a\u5217\u8868\u4e2d\uff01";
c.egret_string_code[4E3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)";c.egret_string_code[4001]="Abstract class can not be instantiated!";c.egret_string_code[4002]="Unnamed data!";c.egret_string_code[4003]="Nonsupport version!";c.egret_string_code[3100]="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301WebSocket";c.egret_string_code[3101]="\u8bf7\u5148\u8fde\u63a5WebSocket";c.egret_string_code[3102]="\u8bf7\u5148\u8bbe\u7f6etype\u4e3a\u4e8c\u8fdb\u5236\u7c7b\u578b"})(egret||
(egret={}));var __extends=this.__extends||function(c,d){function b(){this.constructor=c}for(var a in d)d.hasOwnProperty(a)&&(c[a]=d[a]);b.prototype=d.prototype;c.prototype=new b};
(function(c){function d(a){for(var b=[],f=1;f<arguments.length;f++)b[f-1]=arguments[f];if(f=c.egret_string_code[a])for(var d=b.length,g=0;g<d;g++)f=f.replace("{"+g+"}",b[g]);return f}var b=function(){function a(){}a.openLogByType=function(b){null==a.logFuncs&&(a.logFuncs={error:console.error,debug:console.debug,warn:console.warn,info:console.info,log:console.log});switch(b){case a.OFF:console.error=function(){};case a.ERROR:console.warn=function(){};case a.WARN:console.info=function(){},console.log=
function(){};case a.INFO:console.debug=function(){}}switch(b){case a.ALL:console.debug=a.logFuncs.debug;case a.INFO:console.log=a.logFuncs.log,console.info=a.logFuncs.info;case a.WARN:console.warn=a.logFuncs.warn;case a.ERROR:console.error=a.logFuncs.error}};a.fatal=function(a,b){void 0===b&&(b=null);c.Logger.traceToConsole("Fatal",a,b);throw Error(c.Logger.getTraceCode("Fatal",a,b));};a.info=function(a,b){void 0===b&&(b=null);c.Logger.traceToConsole("Info",a,b)};a.warning=function(a,b){void 0===
b&&(b=null);c.Logger.traceToConsole("Warning",a,b)};a.fatalWithErrorId=function(b){for(var f=[],c=1;c<arguments.length;c++)f[c-1]=arguments[c];f.unshift(b);(f=d.apply(null,f))?a.fatal(f):a.warning(d(-1,b))};a.infoWithErrorId=function(b){for(var f=[],c=1;c<arguments.length;c++)f[c-1]=arguments[c];f.unshift(b);(f=d.apply(null,f))?a.info(f):a.warning(d(-1,b))};a.warningWithErrorId=function(b){for(var f=[],c=1;c<arguments.length;c++)f[c-1]=arguments[c];f.unshift(b);(f=d.apply(null,f))?a.warning(f):a.warning(d(-1,
b))};a.traceToConsole=function(a,b,d){console.log(c.Logger.getTraceCode(a,b,d))};a.getTraceCode=function(a,b,c){return"["+a+"]"+b+(null==c?"":":"+c)};a.ALL="all";a.DEBUG="debug";a.INFO="info";a.WARN="warn";a.ERROR="error";a.OFF="off";return a}();c.Logger=b;b.prototype.__class__="egret.Logger";c.getString=d})(egret||(egret={}));
(function(c){var d=function(){function b(){this._hashCode=b.hashCount++}Object.defineProperty(b.prototype,"hashCode",{get:function(){return this._hashCode},enumerable:!0,configurable:!0});b.hashCount=1;return b}();c.HashObject=d;d.prototype.__class__="egret.HashObject"})(egret||(egret={}));
(function(c){var d=function(b){function a(a){void 0===a&&(a=300);b.call(this);this.objectPool=[];this._length=0;1>a&&(a=1);this.autoDisposeTime=a;this.frameCount=0}__extends(a,b);var e=a.prototype;e._checkFrame=function(){this.frameCount--;0>=this.frameCount&&this.dispose()};Object.defineProperty(e,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});e.push=function(b){var e=this.objectPool;-1==e.indexOf(b)&&(e.push(b),b.__recycle&&b.__recycle(),this._length++,0==this.frameCount&&
(this.frameCount=this.autoDisposeTime,a._callBackList.push(this)))};e.pop=function(){if(0==this._length)return null;this._length--;return this.objectPool.pop()};e.dispose=function(){0<this._length&&(this.objectPool=[],this._length=0);this.frameCount=0;var b=a._callBackList,e=b.indexOf(this);-1!=e&&b.splice(e,1)};a._callBackList=[];return a}(c.HashObject);c.Recycler=d;d.prototype.__class__="egret.Recycler"})(egret||(egret={}));
(function(c){c.__START_TIME;c.getTimer=function(){return Date.now()-c.__START_TIME}})(egret||(egret={}));
(function(c){c.__callLaterFunctionList=[];c.__callLaterThisList=[];c.__callLaterArgsList=[];c.callLater=function(d,b){for(var a=[],e=2;e<arguments.length;e++)a[e-2]=arguments[e];c.__callLaterFunctionList.push(d);c.__callLaterThisList.push(b);c.__callLaterArgsList.push(a)};c.__callAsyncFunctionList=[];c.__callAsyncThisList=[];c.__callAsyncArgsList=[];c.__callAsync=function(d,b){for(var a=[],e=2;e<arguments.length;e++)a[e-2]=arguments[e];c.__callAsyncFunctionList.push(d);c.__callAsyncThisList.push(b);
c.__callAsyncArgsList.push(a)}})(egret||(egret={}));
(function(c){var d=function(){function b(){}var a=b.prototype;a.call=function(a){this.callback&&this.callback.call(this.thisObject,a)};a.dispose=function(){this.thisObject=this.callback=null;b.__freeList.push(this)};b.push=function(a,f){var d;d=b.__freeList.length?b.__freeList.pop():new c.RenderCommand;d.callback=a;d.thisObject=f;c.MainContext.__DRAW_COMMAND_LIST.push(d)};b.__freeList=[];return b}();c.RenderCommand=d;d.prototype.__class__="egret.RenderCommand"})(egret||(egret={}));
(function(c){var d=function(b){function a(a,e,c){void 0===e&&(e=!1);void 0===c&&(c=!1);b.call(this);this.data=null;this._type="";this._cancelable=this._bubbles=!1;this._eventPhase=2;this._target=this._currentTarget=null;this._isPropagationImmediateStopped=this._isPropagationStopped=this._isDefaultPrevented=!1;this.isNew=!0;this._type=a;this._bubbles=e;this._cancelable=c}__extends(a,b);var e=a.prototype;Object.defineProperty(e,"type",{get:function(){return this._type},enumerable:!0,configurable:!0});
Object.defineProperty(e,"bubbles",{get:function(){return this._bubbles},enumerable:!0,configurable:!0});Object.defineProperty(e,"cancelable",{get:function(){return this._cancelable},enumerable:!0,configurable:!0});Object.defineProperty(e,"eventPhase",{get:function(){return this._eventPhase},enumerable:!0,configurable:!0});Object.defineProperty(e,"currentTarget",{get:function(){return this._currentTarget},enumerable:!0,configurable:!0});Object.defineProperty(e,"target",{get:function(){return this._target},
enumerable:!0,configurable:!0});e.isDefaultPrevented=function(){return this._isDefaultPrevented};e.preventDefault=function(){this._cancelable&&(this._isDefaultPrevented=!0)};e.stopPropagation=function(){this._bubbles&&(this._isPropagationStopped=!0)};e.stopImmediatePropagation=function(){this._bubbles&&(this._isPropagationImmediateStopped=!0)};e._reset=function(){this.isNew?this.isNew=!1:(this._isPropagationImmediateStopped=this._isPropagationStopped=this._isDefaultPrevented=!1,this._currentTarget=
this._target=null,this._eventPhase=2)};e.__recycle=function(){this.data=this._target=this._currentTarget=null};a._dispatchByTarget=function(a,b,e,d,k,m){void 0===k&&(k=!1);void 0===m&&(m=!1);var n=a.eventRecycler;n||(n=a.eventRecycler=new c.Recycler);var p=n.pop();p?p._type=e:p=new a(e);p._bubbles=k;p._cancelable=m;if(d)for(var r in d)p[r]=d[r],null!==p[r]&&(d[r]=null);a=b.dispatchEvent(p);n.push(p);return a};a._getPropertyData=function(a){var b=a._props;b||(b=a._props={});return b};a.dispatchEvent=
function(b,e,c,d){void 0===c&&(c=!1);var k=a._getPropertyData(a);d&&(k.data=d);a._dispatchByTarget(a,b,e,k,c)};a.ADDED_TO_STAGE="addedToStage";a.REMOVED_FROM_STAGE="removedFromStage";a.ADDED="added";a.REMOVED="removed";a.COMPLETE="complete";a.LOOP_COMPLETE="loopcomplete";a.ENTER_FRAME="enterFrame";a.RENDER="render";a.FINISH_RENDER="finishRender";a.FINISH_UPDATE_TRANSFORM="finishUpdateTransform";a.LEAVE_STAGE="leaveStage";a.RESIZE="resize";a.CHANGE="change";a.ACTIVATE="activate";a.DEACTIVATE="deactivate";
a.CLOSE="close";a.CONNECT="connect";return a}(c.HashObject);c.Event=d;d.prototype.__class__="egret.Event"})(egret||(egret={}));
(function(c){var d=function(b){function a(a,f,c){void 0===f&&(f=!1);void 0===c&&(c=!1);b.call(this,a,f,c);this._status=0}__extends(a,b);Object.defineProperty(a.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0});a.dispatchHTTPStatusEvent=function(b,f){null==a.httpStatusEvent&&(a.httpStatusEvent=new a(a.HTTP_STATUS));a.httpStatusEvent._status=f;b.dispatchEvent(a.httpStatusEvent)};a.HTTP_STATUS="httpStatus";a.httpStatusEvent=null;return a}(c.Event);c.HTTPStatusEvent=
d;d.prototype.__class__="egret.HTTPStatusEvent"})(egret||(egret={}));(function(c){var d=function(b){function a(a,f,c){void 0===f&&(f=!1);void 0===c&&(c=!1);b.call(this,a,f,c)}__extends(a,b);a.dispatchIOErrorEvent=function(b){c.Event._dispatchByTarget(a,b,a.IO_ERROR)};a.IO_ERROR="ioError";return a}(c.Event);c.IOErrorEvent=d;d.prototype.__class__="egret.IOErrorEvent"})(egret||(egret={}));
(function(c){var d=function(b){function a(a,e,c,d,k,m,n,p,r,s){void 0===e&&(e=!0);void 0===c&&(c=!0);void 0===d&&(d=0);void 0===k&&(k=0);void 0===m&&(m=0);void 0===n&&(n=!1);void 0===p&&(p=!1);void 0===s&&(s=!1);b.call(this,a,e,c);this._stageY=this._stageX=0;this.touchPointID=NaN;this.touchDown=this.altKey=this.shiftKey=this.ctrlKey=!1;this.touchPointID=d;this._stageX=k;this._stageY=m;this.ctrlKey=n;this.altKey=p;this.touchDown=s}__extends(a,b);var e=a.prototype;Object.defineProperty(e,"stageX",{get:function(){return this._stageX},
enumerable:!0,configurable:!0});Object.defineProperty(e,"stageY",{get:function(){return this._stageY},enumerable:!0,configurable:!0});Object.defineProperty(e,"localX",{get:function(){return this._currentTarget.globalToLocal(this._stageX,this._stageY,c.Point.identity).x},enumerable:!0,configurable:!0});Object.defineProperty(e,"localY",{get:function(){return this._currentTarget.globalToLocal(this._stageX,this._stageY,c.Point.identity).y},enumerable:!0,configurable:!0});a.dispatchTouchEvent=function(b,
e,d,l,k,m,n,p,r){void 0===d&&(d=0);void 0===l&&(l=0);void 0===k&&(k=0);void 0===m&&(m=!1);void 0===n&&(n=!1);void 0===p&&(p=!1);void 0===r&&(r=!1);var s=c.Event._getPropertyData(a);s.touchPointID=d;s._stageX=l;s._stageY=k;s.ctrlKey=m;s.altKey=n;s.shiftKey=p;s.touchDown=r;c.Event._dispatchByTarget(a,b,e,s,!0,!0)};a.TOUCH_TAP="touchTap";a.TOUCH_MOVE="touchMove";a.TOUCH_BEGIN="touchBegin";a.TOUCH_END="touchEnd";a.TOUCH_RELEASE_OUTSIDE="touchReleaseOutside";a.TOUCH_ROLL_OUT="touchRollOut";a.TOUCH_ROLL_OVER=
"touchRollOver";a.TOUCH_OUT="touchOut";a.TOUCH_OVER="touchOver";return a}(c.Event);c.TouchEvent=d;d.prototype.__class__="egret.TouchEvent"})(egret||(egret={}));(function(c){var d=function(b){function a(a,f,c){void 0===f&&(f=!1);void 0===c&&(c=!1);b.call(this,a,f,c)}__extends(a,b);a.dispatchTimerEvent=function(b,f){c.Event._dispatchByTarget(a,b,f)};a.TIMER="timer";a.TIMER_COMPLETE="timerComplete";return a}(c.Event);c.TimerEvent=d;d.prototype.__class__="egret.TimerEvent"})(egret||(egret={}));
(function(c){var d=function(b){function a(a,f,c,d){void 0===f&&(f=!1);void 0===c&&(c=!1);void 0===d&&(d="");b.call(this,a,f,c);this.text=d}__extends(a,b);a.dispatchTextEvent=function(b,f,d){var g=c.Event._getPropertyData(a);g.text=d;c.Event._dispatchByTarget(a,b,f,g)};a.LINK="link";return a}(c.Event);c.TextEvent=d;d.prototype.__class__="egret.TextEvent"})(egret||(egret={}));
(function(c){var d=function(b){function a(a,f,c,d,l){void 0===f&&(f=!1);void 0===c&&(c=!1);void 0===d&&(d=0);void 0===l&&(l=0);b.call(this,a,f,c);this.bytesTotal=this.bytesLoaded=0;this.bytesLoaded=d;this.bytesTotal=l}__extends(a,b);a.dispatchProgressEvent=function(b,f,d,g){void 0===d&&(d=0);void 0===g&&(g=0);c.Event._dispatchByTarget(a,b,f,{bytesLoaded:d,bytesTotal:g})};a.PROGRESS="progress";a.SOCKET_DATA="socketData";return a}(c.Event);c.ProgressEvent=d;d.prototype.__class__="egret.ProgressEvent"})(egret||
(egret={}));(function(c){var d=function(){function b(){}b.CAPTURING_PHASE=1;b.AT_TARGET=2;b.BUBBLING_PHASE=3;return b}();c.EventPhase=d;d.prototype.__class__="egret.EventPhase"})(egret||(egret={}));
(function(c){var d=function(b){function a(a){void 0===a&&(a=null);b.call(this);this._captureEventsMap=this._eventsMap=this._eventTarget=null;this._eventTarget=a?a:this}__extends(a,b);var e=a.prototype;e.addEventListener=function(a,b,e,d,k){void 0===d&&(d=!1);void 0===k&&(k=0);"undefined"===typeof d&&(d=!1);"undefined"===typeof k&&(k=0);b||c.Logger.fatalWithErrorId(1010);d?(this._captureEventsMap||(this._captureEventsMap={}),d=this._captureEventsMap):(this._eventsMap||(this._eventsMap={}),d=this._eventsMap);
var m=d[a];m||(m=d[a]=[]);this._insertEventBin(m,b,e,k)};e._insertEventBin=function(a,b,e,c,d){void 0===d&&(d=void 0);for(var m=-1,n=a.length,p=0;p<n;p++){var r=a[p];if(r.listener===b&&r.thisObject===e&&r.display===d)return!1;-1==m&&r.priority<c&&(m=p)}b={listener:b,thisObject:e,priority:c};d&&(b.display=d);-1!=m?a.splice(m,0,b):a.push(b);return!0};e.removeEventListener=function(a,b,e,c){void 0===c&&(c=!1);if(c=c?this._captureEventsMap:this._eventsMap){var d=c[a];d&&(this._removeEventBin(d,b,e),0==
d.length&&delete c[a])}};e._removeEventBin=function(a,b,e,c,d){void 0===c&&(c=void 0);void 0===d&&(d=0);for(var m=a.length;d<m;d++){var n=a[d];if(n.listener===b&&n.thisObject===e&&n.display==c)return a.splice(d,1),!0}return!1};e.hasEventListener=function(a){return this._eventsMap&&this._eventsMap[a]||this._captureEventsMap&&this._captureEventsMap[a]};e.willTrigger=function(a){return this.hasEventListener(a)};e.dispatchEvent=function(a){a._reset();a._target=this._eventTarget;a._currentTarget=this._eventTarget;
return this._notifyListener(a)};e._notifyListener=function(a){var b=1==a._eventPhase?this._captureEventsMap:this._eventsMap;if(!b)return!0;b=b[a._type];if(!b)return!0;var e=b.length;if(0==e)return!0;for(var b=b.concat(),c=0;c<e;c++){var d=b[c];d.listener.call(d.thisObject,a);if(a._isPropagationImmediateStopped)break}return!a._isDefaultPrevented};e.dispatchEventWith=function(a,b,e){void 0===b&&(b=!1);c.Event.dispatchEvent(this,a,b,e)};return a}(c.HashObject);c.EventDispatcher=d;d.prototype.__class__=
"egret.EventDispatcher"})(egret||(egret={}));
(function(c){var d=function(b){function a(){b.call(this);this.stage=this.deviceContext=this.netContext=this.touchContext=this.rendererContext=null;this.reuseEvent=new c.Event("")}__extends(a,b);var e=a.prototype;e.run=function(){c.Ticker.getInstance().run();c.Ticker.getInstance().register(this.renderLoop,this,Number.NEGATIVE_INFINITY);c.Ticker.getInstance().register(this.broadcastEnterFrame,this,Number.POSITIVE_INFINITY);this.touchContext.run();this._profileInstance=c.Profiler.getInstance()};e.renderLoop=
function(b){if(0<c.__callLaterFunctionList.length){var e=c.__callLaterFunctionList;c.__callLaterFunctionList=[];var d=c.__callLaterThisList;c.__callLaterThisList=[];var l=c.__callLaterArgsList;c.__callLaterArgsList=[]}b=this.stage;var k=a.cachedEvent;k._type=c.Event.RENDER;this.dispatchEvent(k);c.Stage._invalidateRenderFlag&&(this.broadcastRender(),c.Stage._invalidateRenderFlag=!1);e&&this.doCallLaterList(e,d,l);0<c.__callAsyncFunctionList.length&&this.doCallAsyncList();e=this.rendererContext;e.onRenderStart();
e.clearScreen();a.__DRAW_COMMAND_LIST=[];a._renderLoopPhase="updateTransform";b._updateTransform();a._renderLoopPhase="draw";k._type=c.Event.FINISH_UPDATE_TRANSFORM;this.dispatchEvent(k);a.__use_new_draw?this._draw(e):b._draw(e);k._type=c.Event.FINISH_RENDER;this.dispatchEvent(k);this._profileInstance._isRunning&&this._profileInstance._drawProfiler(e);e.onRenderFinish()};e._draw=function(b){for(var e=a.__DRAW_COMMAND_LIST,c=e.length,d=0;d<c;d++){var k=e[d];k.call(b);k.dispose()}};e.broadcastEnterFrame=
function(a){a=this.reuseEvent;a._type=c.Event.ENTER_FRAME;this.dispatchEvent(a);for(var b=c.DisplayObject._enterFrameCallBackList.concat(),e=b.length,d=0;d<e;d++){var k=b[d];a._target=k.display;a._currentTarget=k.display;k.listener.call(k.thisObject,a)}b=c.Recycler._callBackList;for(d=b.length-1;0<=d;d--)b[d]._checkFrame()};e.broadcastRender=function(){var a=this.reuseEvent;a._type=c.Event.RENDER;for(var b=c.DisplayObject._renderCallBackList.concat(),e=b.length,d=0;d<e;d++){var k=b[d],m=k.display;
a._target=m;a._currentTarget=m;k.listener.call(k.thisObject,a)}};e.doCallLaterList=function(a,b,e){for(var c=a.length,d=0;d<c;d++){var m=a[d];null!=m&&m.apply(b[d],e[d])}};e.doCallAsyncList=function(){var a=c.__callAsyncFunctionList.concat(),b=c.__callAsyncThisList.concat(),e=c.__callAsyncArgsList.concat();c.__callAsyncFunctionList.length=0;c.__callAsyncThisList.length=0;for(var d=c.__callAsyncArgsList.length=0;d<a.length;d++){var k=a[d];null!=k&&k.apply(b[d],e[d])}};a.deviceType=null;a.DEVICE_PC=
"web";a.DEVICE_MOBILE="native";a.RUNTIME_HTML5="runtimeHtml5";a.RUNTIME_NATIVE="runtimeNative";a.__DRAW_COMMAND_LIST=[];a.__use_new_draw=!0;a.cachedEvent=new c.Event("");return a}(c.EventDispatcher);c.MainContext=d;d.prototype.__class__="egret.MainContext"})(egret||(egret={}));var testDeviceType=function(){if(!this.navigator)return!0;var c=navigator.userAgent.toLowerCase();return-1!=c.indexOf("mobile")||-1!=c.indexOf("android")},testRuntimeType=function(){return this.navigator?!0:!1};
egret.MainContext.instance=new egret.MainContext;egret.MainContext.deviceType=testDeviceType()?egret.MainContext.DEVICE_MOBILE:egret.MainContext.DEVICE_PC;egret.MainContext.runtimeType=testRuntimeType()?egret.MainContext.RUNTIME_HTML5:egret.MainContext.RUNTIME_NATIVE;delete testDeviceType;delete testRuntimeType;
(function(c){var d=function(){function b(){this._preDrawCount=this._updateTransformPerformanceCost=this._renderPerformanceCost=this._logicPerformanceCost=this._lastTime=0;this._calculatePreDrawCount=!0;this._txt=null;this._tick=0;this._maxDeltaTime=500;this._totalDeltaTime=0;this._isRunning=!1}var a=b.prototype;b.getInstance=function(){null==b.instance&&(b.instance=new b);return b.instance};a.stop=function(){if(this._isRunning){this._isRunning=!1;c.Ticker.getInstance().unregister(this.update,this);
var a=c.MainContext.instance;a.removeEventListener(c.Event.ENTER_FRAME,this.onEnterFrame,this);a.removeEventListener(c.Event.RENDER,this.onStartRender,this);a.removeEventListener(c.Event.FINISH_RENDER,this.onFinishRender,this);a.removeEventListener(c.Event.FINISH_UPDATE_TRANSFORM,this.onFinishUpdateTransform,this)}};a.run=function(){null==this._txt&&(this._txt=new c.TextField,this._txt.size=28,this._txt.multiline=!0,this._txt._parent=new c.DisplayObjectContainer);if(!this._isRunning){this._isRunning=
!0;c.Ticker.getInstance().register(this.update,this);var a=c.MainContext.instance;a.addEventListener(c.Event.ENTER_FRAME,this.onEnterFrame,this);a.addEventListener(c.Event.RENDER,this.onStartRender,this);a.addEventListener(c.Event.FINISH_RENDER,this.onFinishRender,this);a.addEventListener(c.Event.FINISH_UPDATE_TRANSFORM,this.onFinishUpdateTransform,this)}};a._drawProfiler=function(a){"_drawWebGL"in a&&a._drawWebGL();this._calculatePreDrawCount=!1;this._txt._updateTransform();this._txt._draw(a)};a._setTxtFontSize=
function(a){this._txt.size=a};a.onEnterFrame=function(a){this._lastTime=c.getTimer()};a.onStartRender=function(a){a=c.getTimer();this._logicPerformanceCost=a-this._lastTime;this._lastTime=a};a.onFinishUpdateTransform=function(a){a=c.getTimer();this._updateTransformPerformanceCost=a-this._lastTime;this._lastTime=a};a.onFinishRender=function(a){a=c.getTimer();this._renderPerformanceCost=a-this._lastTime;this._lastTime=a};a.update=function(a){this._tick++;this._totalDeltaTime+=a;if(this._totalDeltaTime>=
this._maxDeltaTime){a=this._preDrawCount.toString();var b=Math.ceil(this._logicPerformanceCost).toString()+","+Math.ceil(this._updateTransformPerformanceCost).toString()+","+Math.ceil(this._renderPerformanceCost).toString()+","+Math.ceil(c.MainContext.instance.rendererContext.renderCost).toString();this._txt.text="draw:"+a+"\ncost:"+b+"\nFPS:"+Math.floor(1E3*this._tick/this._totalDeltaTime).toString();this._tick=this._totalDeltaTime=0}this._preDrawCount=0;this._calculatePreDrawCount=!0};a.onDrawImage=
function(){this._calculatePreDrawCount&&this._preDrawCount++};return b}();c.Profiler=d;d.prototype.__class__="egret.Profiler"})(egret||(egret={}));
(function(c){var d=function(b){function a(){b.call(this);this._timeScale=1;this._paused=!1;this._callIndex=-1;this.callBackList=[];null!=a.instance&&c.Logger.fatalWithErrorId(1002)}__extends(a,b);var e=a.prototype;e.run=function(){c.__START_TIME=(new Date).getTime();c.MainContext.instance.deviceContext.executeMainLoop(this.update,this)};e.update=function(a){if(!this._paused){a*=this._timeScale;a*=this._timeScale;this._callList=this.callBackList.concat();for(this._callIndex=0;this._callIndex<this._callList.length;this._callIndex++){var b=
this._callList[this._callIndex];b.listener.call(b.thisObject,a)}this._callIndex=-1;this._callList=null}};e.register=function(a,b,e){void 0===e&&(e=0);this._insertEventBin(this.callBackList,a,b,e)};e.unregister=function(a,b){this._removeEventBin(this.callBackList,a,b);this._callList&&-1<this._callIndex&&this._removeEventBin(this._callList,a,b,null,this._callIndex+1)};e.setTimeout=function(a,b,e){for(var d=[],k=3;k<arguments.length;k++)d[k-3]=arguments[k];c.Logger.warningWithErrorId(1003);c.setTimeout.apply(null,
[a,b,e].concat(d))};e.setTimeScale=function(a){this._timeScale=a};e.getTimeScale=function(){return this._timeScale};e.pause=function(){this._paused=!0};e.resume=function(){this._paused=!1};a.getInstance=function(){null==a.instance&&(a.instance=new a);return a.instance};return a}(c.EventDispatcher);c.Ticker=d;d.prototype.__class__="egret.Ticker"})(egret||(egret={}));
(function(c){var d=function(){function b(){}b.LEFT="left";b.RIGHT="right";b.CENTER="center";b.JUSTIFY="justify";b.CONTENT_JUSTIFY="contentJustify";return b}();c.HorizontalAlign=d;d.prototype.__class__="egret.HorizontalAlign"})(egret||(egret={}));(function(c){var d=function(){function b(){}b.TOP="top";b.BOTTOM="bottom";b.MIDDLE="middle";b.JUSTIFY="justify";b.CONTENT_JUSTIFY="contentJustify";return b}();c.VerticalAlign=d;d.prototype.__class__="egret.VerticalAlign"})(egret||(egret={}));
(function(c){var d=function(b){function a(a,e){void 0===e&&(e=0);b.call(this);this._currentCount=0;this._running=!1;this.lastTime=0;this.delay=a;this.repeatCount=e}__extends(a,b);var e=a.prototype;Object.defineProperty(e,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0});Object.defineProperty(e,"running",{get:function(){return this._running},enumerable:!0,configurable:!0});e.reset=function(){this.stop();this._currentCount=0};e.start=function(){this._running||
(this.lastTime=c.getTimer(),c.Ticker.getInstance().register(this.onEnterFrame,this),this._running=!0)};e.stop=function(){this._running&&(c.Ticker.getInstance().unregister(this.onEnterFrame,this),this._running=!1)};e.onEnterFrame=function(a){a=c.getTimer();a-this.lastTime>this.delay&&(this.lastTime=a,this._currentCount++,c.TimerEvent.dispatchTimerEvent(this,c.TimerEvent.TIMER),0<this.repeatCount&&this._currentCount>=this.repeatCount&&(this.stop(),c.TimerEvent.dispatchTimerEvent(this,c.TimerEvent.TIMER_COMPLETE)))};
return a}(c.EventDispatcher);c.Timer=d;d.prototype.__class__="egret.Timer"})(egret||(egret={}));
(function(c){function d(b){b=b.prototype?b.prototype:Object.getPrototypeOf(b);if(b.hasOwnProperty("__class__"))return b.__class__;var a=b.constructor.toString(),e=a.indexOf("("),a=a.substring(9,e);Object.defineProperty(b,"__class__",{value:a,enumerable:!1,writable:!0});return a}c.getQualifiedClassName=d;c.getQualifiedSuperclassName=function(b){b=b.prototype?b.prototype:Object.getPrototypeOf(b);if(b.hasOwnProperty("__superclass__"))return b.__superclass__;var a=Object.getPrototypeOf(b);if(null==a)return null;
a=d(a.constructor);if(!a)return null;Object.defineProperty(b,"__superclass__",{value:a,enumerable:!1,writable:!0});return a}})(egret||(egret={}));(function(c){var d={};c.getDefinitionByName=function(b){if(!b)return null;var a=d[b];if(a)return a;for(var e=b.split("."),f=e.length,a=__global,c=0;c<f;c++)if(a=a[e[c]],!a)return null;return d[b]=a}})(egret||(egret={}));var __global=__global||this;
(function(c){function d(a){for(var f in b){var c=b[f];c.delay-=a;0>=c.delay&&(c.listener.apply(c.thisObject,c.params),delete b[f])}}var b={},a=0;c.setTimeout=function(e,f,h){for(var g=[],l=3;l<arguments.length;l++)g[l-3]=arguments[l];g={listener:e,thisObject:f,delay:h,params:g};0==a&&c.Ticker.getInstance().register(d,null);a++;b[a]=g;return a};c.clearTimeout=function(a){delete b[a]}})(egret||(egret={}));
(function(c){c.hasDefinition=function(d){return c.getDefinitionByName(d)?!0:!1}})(egret||(egret={}));(function(c){c.toColorString=function(c){if(isNaN(c)||0>c)c=0;16777215<c&&(c=16777215);for(c=c.toString(16).toUpperCase();6>c.length;)c="0"+c;return"#"+c}})(egret||(egret={}));
(function(c){var d=function(b){function a(a,e,c,d,k,m){void 0===a&&(a=1);void 0===e&&(e=0);void 0===c&&(c=0);void 0===d&&(d=1);void 0===k&&(k=0);void 0===m&&(m=0);b.call(this);this.a=a;this.b=e;this.c=c;this.d=d;this.tx=k;this.ty=m}__extends(a,b);var e=a.prototype;e.prepend=function(a,b,e,c,d,m){var n=this.tx;if(1!=a||0!=b||0!=e||1!=c){var p=this.a,r=this.c;this.a=p*a+this.b*e;this.b=p*b+this.b*c;this.c=r*a+this.d*e;this.d=r*b+this.d*c}this.tx=n*a+this.ty*e+d;this.ty=n*b+this.ty*c+m;return this};
e.append=function(a,b,e,c,d,m){var n=this.a,p=this.b,r=this.c,s=this.d;if(1!=a||0!=b||0!=e||1!=c)this.a=a*n+b*r,this.b=a*p+b*s,this.c=e*n+c*r,this.d=e*p+c*s;this.tx=d*n+m*r+this.tx;this.ty=d*p+m*s+this.ty;return this};e.prependTransform=function(a,b,e,d,k,m,n,p,r){if(k%360){var s=c.NumberUtils.cos(k);k=c.NumberUtils.sin(k)}else s=1,k=0;if(p||r)this.tx-=p,this.ty-=r;m||n?(this.prepend(s*e,k*e,-k*d,s*d,0,0),this.prepend(c.NumberUtils.cos(n),c.NumberUtils.sin(n),-c.NumberUtils.sin(m),c.NumberUtils.cos(m),
a,b)):this.prepend(s*e,k*e,-k*d,s*d,a,b);return this};e.appendTransform=function(a,b,e,d,k,m,n,p,r){if(k%360){var s=c.NumberUtils.cos(k);k=c.NumberUtils.sin(k)}else s=1,k=0;m||n?(this.append(c.NumberUtils.cos(n),c.NumberUtils.sin(n),-c.NumberUtils.sin(m),c.NumberUtils.cos(m),a,b),this.append(s*e,k*e,-k*d,s*d,0,0)):this.append(s*e,k*e,-k*d,s*d,a,b);if(p||r)this.tx-=p*this.a+r*this.c,this.ty-=p*this.b+r*this.d;return this};e.rotate=function(a){var b=Math.cos(a);a=Math.sin(a);var e=this.a,c=this.c,d=
this.tx;this.a=e*b-this.b*a;this.b=e*a+this.b*b;this.c=c*b-this.d*a;this.d=c*a+this.d*b;this.tx=d*b-this.ty*a;this.ty=d*a+this.ty*b;return this};e.skew=function(a,b){this.append(c.NumberUtils.cos(b),c.NumberUtils.sin(b),-c.NumberUtils.sin(a),c.NumberUtils.cos(a),0,0);return this};e.scale=function(a,b){this.a*=a;this.d*=b;this.c*=a;this.b*=b;this.tx*=a;this.ty*=b;return this};e.translate=function(a,b){this.tx+=a;this.ty+=b;return this};e.identity=function(){this.a=this.d=1;this.b=this.c=this.tx=this.ty=
0;return this};e.identityMatrix=function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.d=a.d;this.tx=a.tx;this.ty=a.ty;return this};e.invert=function(){var a=this.a,b=this.b,e=this.c,c=this.d,d=this.tx,m=a*c-b*e;this.a=c/m;this.b=-b/m;this.c=-e/m;this.d=a/m;this.tx=(e*this.ty-c*d)/m;this.ty=-(a*this.ty-b*d)/m;return this};a.transformCoords=function(a,b,e){var d=c.Point.identity;d.x=a.a*b+a.c*e+a.tx;d.y=a.d*e+a.b*b+a.ty;return d};e.toArray=function(a){this.array||(this.array=new Float32Array(9));a?(this.array[0]=
this.a,this.array[1]=this.b,this.array[2]=0,this.array[3]=this.c,this.array[4]=this.d,this.array[5]=0,this.array[6]=this.tx,this.array[7]=this.ty):(this.array[0]=this.a,this.array[1]=this.b,this.array[2]=this.tx,this.array[3]=this.c,this.array[4]=this.d,this.array[5]=this.ty,this.array[6]=0,this.array[7]=0);this.array[8]=1;return this.array};a.identity=new a;a.DEG_TO_RAD=Math.PI/180;return a}(c.HashObject);c.Matrix=d;d.prototype.__class__="egret.Matrix"})(egret||(egret={}));
(function(c){var d=function(b){function a(a,e){void 0===a&&(a=0);void 0===e&&(e=0);b.call(this);this.x=a;this.y=e}__extends(a,b);var e=a.prototype;e.clone=function(){return new a(this.x,this.y)};e.equals=function(a){return this.x==a.x&&this.y==a.y};a.distance=function(a,b){return Math.sqrt((a.x-b.x)*(a.x-b.x)+(a.y-b.y)*(a.y-b.y))};a.identity=new a(0,0);return a}(c.HashObject);c.Point=d;d.prototype.__class__="egret.Point"})(egret||(egret={}));
(function(c){var d=function(b){function a(a,e,c,d){void 0===a&&(a=0);void 0===e&&(e=0);void 0===c&&(c=0);void 0===d&&(d=0);b.call(this);this.x=a;this.y=e;this.width=c;this.height=d}__extends(a,b);var e=a.prototype;Object.defineProperty(e,"right",{get:function(){return this.x+this.width},set:function(a){this.width=a-this.x},enumerable:!0,configurable:!0});Object.defineProperty(e,"bottom",{get:function(){return this.y+this.height},set:function(a){this.height=a-this.y},enumerable:!0,configurable:!0});
e.initialize=function(a,b,e,c){this.x=a;this.y=b;this.width=e;this.height=c;return this};e.contains=function(a,b){return this.x<=a&&this.x+this.width>=a&&this.y<=b&&this.y+this.height>=b};e.intersects=function(a){return Math.max(this.x,a.x)<=Math.min(this.right,a.right)&&Math.max(this.y,a.y)<=Math.min(this.bottom,a.bottom)};e.setEmpty=function(){this.height=this.width=this.y=this.x=0};e.clone=function(){return new a(this.x,this.y,this.width,this.height)};e.containsPoint=function(a){return this.x<
a.x&&this.x+this.width>a.x&&this.y<a.y&&this.y+this.height>a.y?!0:!1};a.identity=new a(0,0,0,0);return a}(c.HashObject);c.Rectangle=d;d.prototype.__class__="egret.Rectangle"})(egret||(egret={}));
(function(c){var d=function(b){function a(){b.call(this);this._isSupportDOMParser=this._xmlDict=this._parser=null;this._xmlDict={};window.DOMParser?(this._isSupportDOMParser=!0,this._parser=new DOMParser):this._isSupportDOMParser=!1}__extends(a,b);var e=a.prototype;a.getInstance=function(){a._instance||(a._instance=new a);return a._instance};e.parserXML=function(a){for(var b=0;"\n"==a.charAt(b)||"\t"==a.charAt(b)||"\r"==a.charAt(b)||" "==a.charAt(b);)b++;0!=b&&(a=a.substring(b,a.length));this._isSupportDOMParser?
b=this._parser.parseFromString(a,"text/xml"):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a));null==b&&c.Logger.infoWithErrorId(1015);return b};a._instance=null;return a}(c.HashObject);c.SAXParser=d;d.prototype.__class__="egret.SAXParser"})(egret||(egret={}));
(function(c){var d=function(b){function e(){b.call(this);this._designHeight=this._designWidth=0;this._scaleY=this._scaleX=1;this._stageHeight=this._stageWidth=this._offSetY=0}__extends(e,b);var f=e.prototype;e.getInstance=function(){null==e.instance&&(a.initialize(),e.instance=new e);return e.instance};f.setDesignSize=function(a,b,e){this._designWidth=a;this._designHeight=b;e&&(c.Logger.warningWithErrorId(1001),this._setResolutionPolicy(e))};f._setResolutionPolicy=function(a){this._resolutionPolicy=
a;a.init(this);a._apply(this,this._designWidth,this._designHeight)};f.getScaleX=function(){return this._scaleX};f.getScaleY=function(){return this._scaleY};f.getOffSetY=function(){return this._offSetY};e.canvas_name="egretCanvas";e.egret_root_div="gameDiv";e.canvas_div_name="canvasDiv";return e}(c.HashObject);c.StageDelegate=d;d.prototype.__class__="egret.StageDelegate";var b=function(){function a(b,e){this._containerStrategy=b;this._contentStrategy=e}var b=a.prototype;b.init=function(a){this._containerStrategy.init(a);
this._contentStrategy.init(a)};b._apply=function(a,b,e){this._containerStrategy._apply(a,b,e);this._contentStrategy._apply(a,b,e)};return a}();c.ResolutionPolicy=b;b.prototype.__class__="egret.ResolutionPolicy";var a=function(){function a(){}var b=a.prototype;a.initialize=function(){a.EQUAL_TO_FRAME=new e};b.init=function(a){};b._apply=function(a,b,e){};b._setupContainer=function(){var a=document.body,b;a&&(b=a.style)&&(b.paddingTop=b.paddingTop||"0px",b.paddingRight=b.paddingRight||"0px",b.paddingBottom=
b.paddingBottom||"0px",b.paddingLeft=b.paddingLeft||"0px",b.borderTop=b.borderTop||"0px",b.borderRight=b.borderRight||"0px",b.borderBottom=b.borderBottom||"0px",b.borderLeft=b.borderLeft||"0px",b.marginTop=b.marginTop||"0px",b.marginRight=b.marginRight||"0px",b.marginBottom=b.marginBottom||"0px",b.marginLeft=b.marginLeft||"0px")};return a}();c.ContainerStrategy=a;a.prototype.__class__="egret.ContainerStrategy";var e=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype._apply=
function(a){this._setupContainer()};return b}(a);c.EqualToFrame=e;e.prototype.__class__="egret.EqualToFrame";b=function(){function a(){}var b=a.prototype;b.init=function(a){};b._apply=function(a,b,e){};b.setEgretSize=function(a,b,e,f,h,g){void 0===g&&(g=0);c.StageDelegate.getInstance()._stageWidth=Math.round(a);c.StageDelegate.getInstance()._stageHeight=Math.round(b);a=document.getElementById(d.canvas_div_name);b=document.getElementById(d.egret_root_div);a||(a=c.Browser.getInstance().$new("div"),
a.id=d.canvas_div_name,b.appendChild(a));a.style.width=e+"px";a.style.height=f+"px";a.style.top=g+"px";b.style.width=e+"px";b.style.height=f+"px";b.style.top=g+"px"};b._getClientWidth=function(){return document.documentElement.clientWidth};b._getClientHeight=function(){return document.documentElement.clientHeight};return a}();c.ContentStrategy=b;b.prototype.__class__="egret.ContentStrategy";var f=function(a){function b(e){void 0===e&&(e=0);a.call(this);this.minWidth=NaN;this.minWidth=e}__extends(b,
a);b.prototype._apply=function(a,b,e){b=this._getClientWidth();var f=this._getClientHeight(),c=f/e,d=b/c,h=1;0!=this.minWidth&&(h=Math.min(1,d/this.minWidth));this.setEgretSize(d/h,e,b,f*h);a._scaleX=c*h;a._scaleY=c*h};return b}(b);c.FixedHeight=f;f.prototype.__class__="egret.FixedHeight";f=function(a){function b(e){void 0===e&&(e=0);a.call(this);this.minHeight=NaN;this.minHeight=e}__extends(b,a);b.prototype._apply=function(a,b,e){e=this._getClientWidth();var f=this._getClientHeight(),c=e/b,d=f/c,
h=1;0!=this.minHeight&&(h=Math.min(1,d/this.minHeight));this.setEgretSize(b,d/h,e*h,f,e*(1-h)/2);a._scaleX=c*h;a._scaleY=c*h};return b}(b);c.FixedWidth=f;f.prototype.__class__="egret.FixedWidth";f=function(a){function b(e,f){a.call(this);this.width=e;this.height=f}__extends(b,a);b.prototype._apply=function(a,b,e){e=this.width;var f=this.height,c=e/b;this.setEgretSize(b,f/c,e,f);a._scaleX=c;a._scaleY=c};return b}(b);c.FixedSize=f;f.prototype.__class__="egret.FixedSize";f=function(a){function b(){a.call(this)}
__extends(b,a);b.prototype._apply=function(a,b,e){this.setEgretSize(b,e,b,e,Math.floor((b-b)/2));a._scaleX=1;a._scaleY=1};return b}(b);c.NoScale=f;f.prototype.__class__="egret.NoScale";f=function(a){function b(){a.call(this)}__extends(b,a);b.prototype._apply=function(a,b,e){var f=this._getClientWidth(),c=this._getClientHeight(),d=f,h=c,g=d/b<h/e?d/b:h/e,d=b*g,h=e*g,f=Math.floor((f-d)/2);a._offSetY=Math.floor((c-h)/2);this.setEgretSize(b,e/1,1*d,h,f,a._offSetY);a._scaleX=1*g;a._scaleY=1*g};return b}(b);
c.ShowAll=f;f.prototype.__class__="egret.ShowAll";b=function(a){function b(){a.call(this)}__extends(b,a);b.prototype._apply=function(a,b,e){var f=this._getClientWidth(),c=this._getClientHeight(),f=f/b,c=c/e;this.setEgretSize(b,e,b*f,e*c);a._scaleX=f;a._scaleY=c};return b}(b);c.FullScreen=b;b.prototype.__class__="egret.FullScreen"})(egret||(egret={}));
(function(c){var d=function(b){function a(){b.call(this);this._originalData={};this._drawAreaList=[]}__extends(a,b);var e=a.prototype;a.getInstance=function(){null==a.instance&&(a.instance=new a);return a.instance};e.addDrawArea=function(a){this._drawAreaList.push(a)};e.clearDrawArea=function(){this._drawAreaList=[]};e.drawImage=function(b,e,d,l,k,m,n,p,r,s,v){void 0===v&&(v=void 0);n=n||0;p=p||0;var w=e._texture_to_render;if(null!=w&&0!=m&&0!=k&&0!=r&&0!=s){var x=c.MainContext.instance.rendererContext._texture_scale_factor;
k/=x;m/=x;if(0!=this._drawAreaList.length&&c.MainContext.instance.rendererContext._cacheCanvasContext){x=c.DisplayObject.getTransformBounds(e._getSize(a.identityRectangle),e._worldTransform);e._worldBounds.initialize(x.x,x.y,x.width,x.height);x=this._originalData;x.sourceX=d;x.sourceY=l;x.sourceWidth=k;x.sourceHeight=m;x.destX=n;x.destY=p;x.destWidth=r;x.destHeight=s;for(var L=this.getDrawAreaList(),P=0;P<L.length;P++)if(!this.ignoreRender(e,L[P],x.destX,x.destY)){b.drawImage(w,d,l,k,m,n,p,r,s,v);
break}}else b.drawImage(w,d,l,k,m,n,p,r,s,v)}};e.ignoreRender=function(a,b,e,c){var d=a._worldBounds;e*=a._worldTransform.a;c*=a._worldTransform.d;return d.x+d.width+e<=b.x||d.x+e>=b.x+b.width||d.y+d.height+c<=b.y||d.y+c>=b.y+b.height?!0:!1};e.getDrawAreaList=function(){var a;0==this._drawAreaList.length?(this._defaultDrawAreaList||(this._defaultDrawAreaList=[new c.Rectangle(0,0,c.MainContext.instance.stage.stageWidth,c.MainContext.instance.stage.stageHeight)],c.MainContext.instance.stage.addEventListener(c.Event.RESIZE,
this.onResize,this)),a=this._defaultDrawAreaList):a=this._drawAreaList;return a};e.onResize=function(){c.MainContext.instance.stage.removeEventListener(c.Event.RESIZE,this.onResize,this);this._defaultDrawAreaList=null};a.identityRectangle=new c.Rectangle;return a}(c.HashObject);c.RenderFilter=d;d.prototype.__class__="egret.RenderFilter"})(egret||(egret={}));
(function(c){var d=function(){function b(){}b.mapClass=function(a,b,f){void 0===f&&(f="");a=this.getKey(a)+"#"+f;this.mapClassDic[a]=b};b.getKey=function(a){return"string"==typeof a?a:c.getQualifiedClassName(a)};b.mapValue=function(a,b,f){void 0===f&&(f="");a=this.getKey(a)+"#"+f;this.mapValueDic[a]=b};b.hasMapRule=function(a,b){void 0===b&&(b="");var f=this.getKey(a)+"#"+b;return this.mapValueDic[f]||this.mapClassDic[f]?!0:!1};b.getInstance=function(a,b){void 0===b&&(b="");var f=this.getKey(a)+"#"+
b;if(this.mapValueDic[f])return this.mapValueDic[f];var d=this.mapClassDic[f];if(d)return d=new d,this.mapValueDic[f]=d,delete this.mapClassDic[f],d;throw Error(c.getString(1028,f));};b.mapClassDic={};b.mapValueDic={};return b}();c.Injector=d;d.prototype.__class__="egret.Injector"})(egret||(egret={}));(function(c){var d=function(){return function(){this.type=null}}();c.Filter=d;d.prototype.__class__="egret.Filter"})(egret||(egret={}));
(function(c){var d=function(b){function a(a,f){b.call(this);this.blurX=a;this.blurY=f;this.type="blur"}__extends(a,b);return a}(c.Filter);c.BlurFilter=d;d.prototype.__class__="egret.BlurFilter"})(egret||(egret={}));(function(c){var d=function(){function b(){}b.NORMAL="normal";b.ADD="add";b.ERASE="erase";b.ERASE_REVERSE="eraseReverse";return b}();c.BlendMode=d;d.prototype.__class__="egret.BlendMode"})(egret||(egret={}));
(function(c){var d=function(b){function a(){b.call(this);this.__hack_local_matrix=null;this._sizeDirty=this._normalDirty=!0;this._parent=this._texture_to_render=this.name=this._sizeChangeCallTarget=this._sizeChangeCallBack=null;this._y=this._x=0;this._scaleY=this._scaleX=1;this._anchorY=this._anchorX=this._anchorOffsetY=this._anchorOffsetX=0;this._visible=!0;this._rotation=0;this._alpha=1;this._skewY=this._skewX=0;this._touchEnabled=!1;this._scrollRect=this.blendMode=null;this._explicitHeight=this._explicitWidth=
NaN;this._hasHeightSet=this._hasWidthSet=!1;this._worldBounds=this.mask=null;this.worldAlpha=1;this.needDraw=this._isContainer=!1;this._hitTestPointTexture=null;this._rectH=this._rectW=0;this._stage=null;this._cacheAsBitmap=!1;this.renderTexture=null;this._cacheDirty=!1;this._filter=this._colorTransform=null;this._worldTransform=new c.Matrix;this._worldBounds=new c.Rectangle(0,0,0,0);this._cacheBounds=new c.Rectangle(0,0,0,0)}__extends(a,b);var e=a.prototype;e._setDirty=function(){this._normalDirty=
!0};e.getDirty=function(){return this._normalDirty||this._sizeDirty};e._setParentSizeDirty=function(){var a=this._parent;!a||a._hasWidthSet||a._hasHeightSet||a._setSizeDirty()};e._setSizeDirty=function(){this._sizeDirty||(this._sizeDirty=!0,this._setDirty(),this._setCacheDirty(),this._setParentSizeDirty(),null!=this._sizeChangeCallBack&&(this._sizeChangeCallTarget==this._parent?this._sizeChangeCallBack.call(this._sizeChangeCallTarget):this._sizeChangeCallTarget=this._sizeChangeCallBack=null))};e._clearDirty=
function(){this._normalDirty=!1};e._clearSizeDirty=function(){this._sizeDirty=!1};Object.defineProperty(e,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0});e._parentChanged=function(a){this._parent=a};Object.defineProperty(e,"x",{get:function(){return this._x},set:function(a){this._setX(a)},enumerable:!0,configurable:!0});e._setX=function(a){c.NumberUtils.isNumber(a)&&this._x!=a&&(this._x=a,this._setDirty(),this._setParentSizeDirty())};Object.defineProperty(e,"y",{get:function(){return this._y},
set:function(a){this._setY(a)},enumerable:!0,configurable:!0});e._setY=function(a){c.NumberUtils.isNumber(a)&&this._y!=a&&(this._y=a,this._setDirty(),this._setParentSizeDirty())};Object.defineProperty(e,"scaleX",{get:function(){return this._scaleX},set:function(a){c.NumberUtils.isNumber(a)&&this._scaleX!=a&&(this._scaleX=a,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(e,"scaleY",{get:function(){return this._scaleY},set:function(a){c.NumberUtils.isNumber(a)&&
this._scaleY!=a&&(this._scaleY=a,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(e,"anchorOffsetX",{get:function(){return this._anchorOffsetX},set:function(a){c.NumberUtils.isNumber(a)&&this._anchorOffsetX!=a&&(this._anchorOffsetX=a,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(e,"anchorOffsetY",{get:function(){return this._anchorOffsetY},set:function(a){c.NumberUtils.isNumber(a)&&this._anchorOffsetY!=
a&&(this._anchorOffsetY=a,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(e,"anchorX",{get:function(){return this._anchorX},set:function(a){this._setAnchorX(a)},enumerable:!0,configurable:!0});e._setAnchorX=function(a){c.NumberUtils.isNumber(a)&&this._anchorX!=a&&(this._anchorX=a,this._setDirty(),this._setParentSizeDirty())};Object.defineProperty(e,"anchorY",{get:function(){return this._anchorY},set:function(a){this._setAnchorY(a)},enumerable:!0,
configurable:!0});e._setAnchorY=function(a){c.NumberUtils.isNumber(a)&&this._anchorY!=a&&(this._anchorY=a,this._setDirty(),this._setParentSizeDirty())};Object.defineProperty(e,"visible",{get:function(){return this._visible},set:function(a){this._setVisible(a)},enumerable:!0,configurable:!0});e._setVisible=function(a){this._visible!=a&&(this._visible=a,this._setSizeDirty())};Object.defineProperty(e,"rotation",{get:function(){return this._rotation},set:function(a){c.NumberUtils.isNumber(a)&&this._rotation!=
a&&(this._rotation=a,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(e,"alpha",{get:function(){return this._alpha},set:function(a){c.NumberUtils.isNumber(a)&&this._alpha!=a&&(this._alpha=a,this._setDirty(),this._setCacheDirty())},enumerable:!0,configurable:!0});Object.defineProperty(e,"skewX",{get:function(){return this._skewX},set:function(a){c.NumberUtils.isNumber(a)&&this._skewX!=a&&(this._skewX=a,this._setDirty(),this._setParentSizeDirty())},
enumerable:!0,configurable:!0});Object.defineProperty(e,"skewY",{get:function(){return this._skewY},set:function(a){c.NumberUtils.isNumber(a)&&this._skewY!=a&&(this._skewY=a,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(e,"touchEnabled",{get:function(){return this._touchEnabled},set:function(a){this._setTouchEnabled(a)},enumerable:!0,configurable:!0});e._setTouchEnabled=function(a){this._touchEnabled=a};Object.defineProperty(e,"scrollRect",{get:function(){return this._scrollRect},
set:function(a){this._setScrollRect(a)},enumerable:!0,configurable:!0});e._setScrollRect=function(a){this._scrollRect=a;this._setSizeDirty()};Object.defineProperty(e,"measuredWidth",{get:function(){return this._measureBounds().width},enumerable:!0,configurable:!0});Object.defineProperty(e,"measuredHeight",{get:function(){return this._measureBounds().height},enumerable:!0,configurable:!0});Object.defineProperty(e,"explicitWidth",{get:function(){return this._explicitWidth},enumerable:!0,configurable:!0});
Object.defineProperty(e,"explicitHeight",{get:function(){return this._explicitHeight},enumerable:!0,configurable:!0});Object.defineProperty(e,"width",{get:function(){return this._getWidth()},set:function(a){this._setWidth(a)},enumerable:!0,configurable:!0});e._getWidth=function(){return this._getSize(c.Rectangle.identity).width};Object.defineProperty(e,"height",{get:function(){return this._getHeight()},set:function(a){this._setHeight(a)},enumerable:!0,configurable:!0});e._getHeight=function(){return this._getSize(c.Rectangle.identity).height};
e._setWidth=function(a){this._setSizeDirty();this._setCacheDirty();this._explicitWidth=a;this._hasWidthSet=c.NumberUtils.isNumber(a)};e._setHeight=function(a){this._setSizeDirty();this._setCacheDirty();this._explicitHeight=a;this._hasHeightSet=c.NumberUtils.isNumber(a)};e._draw=function(a){if(this._visible&&!this.drawCacheTexture(a)){var b=c.MainContext.__use_new_draw&&this._isContainer;this._filter&&!b&&a.setGlobalFilter(this._filter);this._colorTransform&&!b&&a.setGlobalColorTransform(this._colorTransform.matrix);
a.setAlpha(this.worldAlpha,this.blendMode);a.setTransform(this._worldTransform);var e=this.mask||this._scrollRect;e&&!b&&a.pushMask(e);this._render(a);e&&!b&&a.popMask();this._colorTransform&&!b&&a.setGlobalColorTransform(null);this._filter&&!b&&a.setGlobalFilter(null)}this.destroyCacheBounds()};e._setGlobalFilter=function(a){a.setGlobalFilter(this._filter)};e._removeGlobalFilter=function(a){a.setGlobalFilter(null)};e._setGlobalColorTransform=function(a){a.setGlobalColorTransform(this._colorTransform.matrix)};
e._removeGlobalColorTransform=function(a){a.setGlobalColorTransform(null)};e._pushMask=function(a){a.setTransform(this._worldTransform);var b=this.mask||this._scrollRect;b&&a.pushMask(b)};e._popMask=function(a){a.popMask()};e.drawCacheTexture=function(a){if(!1==this._cacheAsBitmap)return!1;var b=this.getBounds(c.Rectangle.identity),e=c.MainContext.instance.rendererContext._texture_scale_factor;if(this._cacheDirty||null==this._texture_to_render||Math.round(b.width)!=Math.round(this._texture_to_render._sourceWidth*
e)||Math.round(b.height)!=Math.round(this._texture_to_render._sourceHeight*e))this._cacheDirty=!this._makeBitmapCache();if(null==this._texture_to_render)return!1;var d=this._texture_to_render,b=d._offsetX,e=d._offsetY,k=d._textureWidth,d=d._textureHeight;this._updateTransform();a.setAlpha(this.worldAlpha,this.blendMode);a.setTransform(this._worldTransform);c.RenderFilter.getInstance().drawImage(a,this,0,0,k,d,b,e,k,d);return!0};e._updateTransform=function(){this._visible&&(this._calculateWorldTransform(),
"updateTransform"==c.MainContext._renderLoopPhase&&(this.needDraw||this._texture_to_render||this._cacheAsBitmap)&&c.RenderCommand.push(this._draw,this))};e._calculateWorldTransform=function(){var a=this._worldTransform,b=this._parent;a.identityMatrix(b._worldTransform);this._getMatrix(a);var e=this._scrollRect;e&&a.append(1,0,0,1,-e.x,-e.y);this.worldAlpha=b.worldAlpha*this._alpha};e._render=function(a){};e.getBounds=function(a,b){void 0===b&&(b=!0);var e=this._measureBounds(),d=this._hasWidthSet?
this._explicitWidth:e.width,k=this._hasHeightSet?this._explicitHeight:e.height;this._rectW=e.width;this._rectH=e.height;this._clearSizeDirty();var m=e.x,e=e.y,n=0,p=0;b&&(0!=this._anchorX||0!=this._anchorY?(n=d*this._anchorX,p=k*this._anchorY):(n=this._anchorOffsetX,p=this._anchorOffsetY));this._cacheBounds.initialize(m-n,e-p,d,k);d=this._cacheBounds;a||(a=new c.Rectangle);return a.initialize(d.x,d.y,d.width,d.height)};e.destroyCacheBounds=function(){this._cacheBounds.x=0;this._cacheBounds.y=0;this._cacheBounds.width=
0;this._cacheBounds.height=0};e._getConcatenatedMatrix=function(){for(var b=a.identityMatrixForGetConcatenated.identity(),e=this;null!=e;){if(0!=e._anchorX||0!=e._anchorY){var d=e._getSize(c.Rectangle.identity);b.prependTransform(e._x,e._y,e._scaleX,e._scaleY,e._rotation,e._skewX,e._skewY,d.width*e._anchorX,d.height*e._anchorY)}else b.prependTransform(e._x,e._y,e._scaleX,e._scaleY,e._rotation,e._skewX,e._skewY,e._anchorOffsetX,e._anchorOffsetY);e._scrollRect&&b.prepend(1,0,0,1,-e._scrollRect.x,-e._scrollRect.y);
e=e._parent}return b};e.localToGlobal=function(a,b,e){void 0===a&&(a=0);void 0===b&&(b=0);var d=this._getConcatenatedMatrix();d.append(1,0,0,1,a,b);e||(e=new c.Point);e.x=d.tx;e.y=d.ty;return e};e.globalToLocal=function(a,b,e){void 0===a&&(a=0);void 0===b&&(b=0);var d=this._getConcatenatedMatrix();d.invert();d.append(1,0,0,1,a,b);e||(e=new c.Point);e.x=d.tx;e.y=d.ty;return e};e.hitTest=function(a,b,e){void 0===e&&(e=!1);if(!this._visible||!e&&!this._touchEnabled)return null;e=this.getBounds(c.Rectangle.identity,
!1);a-=e.x;b-=e.y;return 0<=a&&a<e.width&&0<=b&&b<e.height?this.mask||this._scrollRect?this._scrollRect&&a>this._scrollRect.x&&b>this._scrollRect.y&&a<this._scrollRect.x+this._scrollRect.width&&b<this._scrollRect.y+this._scrollRect.height||this.mask&&this.mask.x<=a&&a<this.mask.x+this.mask.width&&this.mask.y<=b&&b<this.mask.y+this.mask.height?this:null:this:null};e.hitTestPoint=function(a,b,e){a=this.globalToLocal(a,b);return e?(this._hitTestPointTexture||(this._hitTestPointTexture=new c.RenderTexture),
e=this._hitTestPointTexture,e.drawToTexture(this),0!=e.getPixel32(a.x-this._hitTestPointTexture._offsetX,a.y-this._hitTestPointTexture._offsetY)[3]?!0:!1):!!this.hitTest(a.x,a.y,!0)};e._getMatrix=function(a){a||(a=c.Matrix.identity.identity());var b,e;e=this._getOffsetPoint();b=e.x;e=e.y;var d=this.__hack_local_matrix;d?(a.append(d.a,d.b,d.c,d.d,d.tx,d.ty),a.append(1,0,0,1,-b,-e)):a.appendTransform(this._x,this._y,this._scaleX,this._scaleY,this._rotation,this._skewX,this._skewY,b,e);return a};e._getSize=
function(a){if(this._hasHeightSet&&this._hasWidthSet)return this._clearSizeDirty(),a.initialize(0,0,this._explicitWidth,this._explicitHeight);this._measureSize(a);this._hasWidthSet&&(a.width=this._explicitWidth);this._hasHeightSet&&(a.height=this._explicitHeight);return a};e._measureSize=function(a){this._sizeDirty?(a=this._measureBounds(),this._rectW=a.width,this._rectH=a.height,this._clearSizeDirty()):(a.width=this._rectW,a.height=this._rectH);a.x=0;a.y=0;return a};e._measureBounds=function(){return c.Rectangle.identity.initialize(0,
0,0,0)};e._getOffsetPoint=function(){var a=this._anchorOffsetX,b=this._anchorOffsetY;if(0!=this._anchorX||0!=this._anchorY)b=this._getSize(c.Rectangle.identity),a=this._anchorX*b.width,b=this._anchorY*b.height;var e=c.Point.identity;e.x=a;e.y=b;return e};e._onAddToStage=function(){this._stage=c.MainContext.instance.stage;c.DisplayObjectContainer.__EVENT__ADD_TO_STAGE_LIST.push(this)};e._onRemoveFromStage=function(){c.DisplayObjectContainer.__EVENT__REMOVE_FROM_STAGE_LIST.push(this)};Object.defineProperty(e,
"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0});e.addEventListener=function(e,d,g,l,k){void 0===l&&(l=!1);void 0===k&&(k=0);b.prototype.addEventListener.call(this,e,d,g,l,k);((l=e==c.Event.ENTER_FRAME)||e==c.Event.RENDER)&&this._insertEventBin(l?a._enterFrameCallBackList:a._renderCallBackList,d,g,k,this)};e.removeEventListener=function(e,d,g,l){void 0===l&&(l=!1);b.prototype.removeEventListener.call(this,e,d,g,l);((l=e==c.Event.ENTER_FRAME)||e==c.Event.RENDER)&&this._removeEventBin(l?
a._enterFrameCallBackList:a._renderCallBackList,d,g,this)};e.dispatchEvent=function(a){if(!a._bubbles)return b.prototype.dispatchEvent.call(this,a);for(var e=[],c=this;c;)e.push(c),c=c._parent;a._reset();this._dispatchPropagationEvent(a,e);return!a._isDefaultPrevented};e._dispatchPropagationEvent=function(a,b,e){e=b.length;for(var c=1,d=e-1;0<=d;d--){var m=b[d];a._currentTarget=m;a._target=this;a._eventPhase=c;m._notifyListener(a);if(a._isPropagationStopped||a._isPropagationImmediateStopped)return}m=
b[0];a._currentTarget=m;a._target=this;a._eventPhase=2;m._notifyListener(a);if(!a._isPropagationStopped&&!a._isPropagationImmediateStopped)for(c=3,d=1;d<e&&(m=b[d],a._currentTarget=m,a._target=this,a._eventPhase=c,m._notifyListener(a),!a._isPropagationStopped&&!a._isPropagationImmediateStopped);d++);};e.willTrigger=function(a){for(var b=this;b;){if(b.hasEventListener(a))return!0;b=b._parent}return!1};Object.defineProperty(e,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(a){!1==
c.Browser.useCacheAsBitmap&&(a=!1);(this._cacheAsBitmap=a)?c.callLater(this._makeBitmapCache,this):this._texture_to_render=null},enumerable:!0,configurable:!0});e._makeBitmapCache=function(){this.renderTexture||(this.renderTexture=new c.RenderTexture);var a=this.renderTexture.drawToTexture(this);this._texture_to_render=a?this.renderTexture:null;return a};e._setCacheDirty=function(a){void 0===a&&(a=!0);this._cacheDirty=a};a.getTransformBounds=function(a,b){var e=a.x,c=a.y,d=a.width,m=a.height;(e||
c)&&b.appendTransform(0,0,1,1,0,0,0,-e,-c);var n=d*b.a,d=d*b.b,p=m*b.c,m=m*b.d,r=b.tx,s=b.ty,v=r,w=r,x=s,L=s;(e=n+r)<v?v=e:e>w&&(w=e);(e=n+p+r)<v?v=e:e>w&&(w=e);(e=p+r)<v?v=e:e>w&&(w=e);(c=d+s)<x?x=c:c>L&&(L=c);(c=d+m+s)<x?x=c:c>L&&(L=c);(c=m+s)<x?x=c:c>L&&(L=c);return a.initialize(v,x,w-v,L-x)};Object.defineProperty(e,"colorTransform",{get:function(){return this._colorTransform},set:function(a){this._colorTransform=a},enumerable:!0,configurable:!0});Object.defineProperty(e,"filter",{get:function(){return this._filter},
set:function(a){this._filter=a},enumerable:!0,configurable:!0});a.identityMatrixForGetConcatenated=new c.Matrix;a._enterFrameCallBackList=[];a._renderCallBackList=[];return a}(c.EventDispatcher);c.DisplayObject=d;d.prototype.__class__="egret.DisplayObject";d=function(){function b(){this.matrix=null}b.prototype.updateColor=function(a,b,f,c,d,l,k,m){};return b}();c.ColorTransform=d;d.prototype.__class__="egret.ColorTransform"})(egret||(egret={}));
(function(c){var d=function(b){function a(){b.call(this);this._touchChildren=!0;this._children=[];this._isContainer=!0}__extends(a,b);var e=a.prototype;Object.defineProperty(e,"touchChildren",{get:function(){return this._touchChildren},set:function(a){this._touchChildren=a},enumerable:!0,configurable:!0});Object.defineProperty(e,"numChildren",{get:function(){return this._children.length},enumerable:!0,configurable:!0});e.setChildIndex=function(a,b){this.doSetChildIndex(a,b)};e.doSetChildIndex=function(a,
b){var e=this._children.indexOf(a);0>e&&c.Logger.fatalWithErrorId(1006);this._children.splice(e,1);0>b||this._children.length<=b?this._children.push(a):this._children.splice(b,0,a)};e.addChild=function(a){var b=this._children.length;a._parent==this&&b--;return this._doAddChild(a,b)};e.addChildAt=function(a,b){return this._doAddChild(a,b)};e._doAddChild=function(b,e,d){void 0===d&&(d=!0);if(b==this)return b;if(0>e||e>this._children.length)return c.Logger.fatalWithErrorId(1007),b;var l=b._parent;if(l==
this)return this.doSetChildIndex(b,e),b;if(l){var k=l._children.indexOf(b);0<=k&&l._doRemoveChild(k)}this._children.splice(e,0,b);b._parentChanged(this);d&&b.dispatchEventWith(c.Event.ADDED,!0);if(this._stage)for(b._onAddToStage(),e=a.__EVENT__ADD_TO_STAGE_LIST;0<e.length;)l=e.shift(),d&&l.dispatchEventWith(c.Event.ADDED_TO_STAGE);b._setDirty();this._setSizeDirty();return b};e.removeChild=function(a){a=this._children.indexOf(a);if(0<=a)return this._doRemoveChild(a);c.Logger.fatalWithErrorId(1008);
return null};e.removeChildAt=function(a){if(0<=a&&a<this._children.length)return this._doRemoveChild(a);c.Logger.fatalWithErrorId(1007);return null};e._doRemoveChild=function(b,e){void 0===e&&(e=!0);var d=this._children,l=d[b];e&&l.dispatchEventWith(c.Event.REMOVED,!0);if(this._stage){l._onRemoveFromStage();for(var k=a.__EVENT__REMOVE_FROM_STAGE_LIST;0<k.length;){var m=k.shift();e&&m.dispatchEventWith(c.Event.REMOVED_FROM_STAGE);m._stage=null}}l._parentChanged(null);d.splice(b,1);this._setSizeDirty();
return l};e.getChildAt=function(a){if(0<=a&&a<this._children.length)return this._children[a];c.Logger.fatalWithErrorId(1007);return null};e.contains=function(a){for(;a;){if(a==this)return!0;a=a._parent}return!1};e.swapChildrenAt=function(a,b){0<=a&&a<this._children.length&&0<=b&&b<this._children.length?this._swapChildrenAt(a,b):c.Logger.fatalWithErrorId(1007)};e.swapChildren=function(a,b){var e=this._children.indexOf(a),d=this._children.indexOf(b);-1==e||-1==d?c.Logger.fatalWithErrorId(1008):this._swapChildrenAt(e,
d)};e._swapChildrenAt=function(a,b){if(a!=b){var e=this._children,c=e[a];e[a]=e[b];e[b]=c}};e.getChildIndex=function(a){return this._children.indexOf(a)};e.removeChildren=function(){for(var a=this._children.length-1;0<=a;a--)this._doRemoveChild(a)};e._updateTransform=function(){if(this._visible){this._filter&&c.RenderCommand.push(this._setGlobalFilter,this);this._colorTransform&&c.RenderCommand.push(this._setGlobalColorTransform,this);var a=this.mask||this._scrollRect;a&&c.RenderCommand.push(this._pushMask,
this);b.prototype._updateTransform.call(this);if(!this._cacheAsBitmap||!this._texture_to_render)for(var e=0,d=this._children,l=d.length;e<l;e++)d[e]._updateTransform();a&&c.RenderCommand.push(this._popMask,this);this._colorTransform&&c.RenderCommand.push(this._removeGlobalColorTransform,this);this._filter&&c.RenderCommand.push(this._removeGlobalFilter,this)}};e._render=function(a){if(!c.MainContext.__use_new_draw)for(var b=0,e=this._children,d=e.length;b<d;b++)e[b]._draw(a)};e._measureBounds=function(){for(var a=
0,b=0,e=0,d=0,k=this._children,m=k.length,n=0;n<m;n++){var p=k[n];if(p._visible){var r=p.getBounds(c.Rectangle.identity,!1),s=r.x,v=r.y,w=r.width,r=r.height,p=p._getMatrix(),p=c.DisplayObject.getTransformBounds(c.Rectangle.identity.initialize(s,v,w,r),p),s=p.x,v=p.y,w=p.width+p.x,p=p.height+p.y;if(s<a||0==n)a=s;if(w>b||0==n)b=w;if(v<e||0==n)e=v;if(p>d||0==n)d=p}}return c.Rectangle.identity.initialize(a,e,b-a,d-e)};e.hitTest=function(a,e,d){void 0===d&&(d=!1);var l;if(!this._visible)return null;if(this._scrollRect){if(a<
this._scrollRect.x||e<this._scrollRect.y||a>this._scrollRect.x+this._scrollRect.width||e>this._scrollRect.y+this._scrollRect.height)return null}else if(this.mask&&(this.mask.x>a||a>this.mask.x+this.mask.width||this.mask.y>e||e>this.mask.y+this.mask.height))return null;for(var k=this._children,m=this._touchChildren,n=k.length-1;0<=n;n--){var p=k[n],r=p._getMatrix(),s=p._scrollRect;s&&r.append(1,0,0,1,-s.x,-s.y);r.invert();r=c.Matrix.transformCoords(r,a,e);if(p=p.hitTest(r.x,r.y,!0)){if(!m)return this;
if(p._touchEnabled&&m)return p;l=this}}return l?l:this._texture_to_render?b.prototype.hitTest.call(this,a,e,d):null};e._onAddToStage=function(){b.prototype._onAddToStage.call(this);for(var a=this._children.length,e=0;e<a;e++)this._children[e]._onAddToStage()};e._onRemoveFromStage=function(){b.prototype._onRemoveFromStage.call(this);for(var a=this._children,e=a.length,c=0;c<e;c++)a[c]._onRemoveFromStage()};e.getChildByName=function(a){for(var b=this._children,e=b.length,c,d=0;d<e;d++)if(c=b[d],c.name==
a)return c;return null};a.__EVENT__ADD_TO_STAGE_LIST=[];a.__EVENT__REMOVE_FROM_STAGE_LIST=[];return a}(c.DisplayObject);c.DisplayObjectContainer=d;d.prototype.__class__="egret.DisplayObjectContainer"})(egret||(egret={}));(function(c){var d=function(){function b(){}b.NO_BORDER="noBorder";b.NO_SCALE="noScale";b.SHOW_ALL="showAll";b.EXACT_FIT="exactFit";return b}();c.StageScaleMode=d;d.prototype.__class__="egret.StageScaleMode"})(egret||(egret={}));
(function(c){var d=function(b){function a(a,e){void 0===a&&(a=480);void 0===e&&(e=800);b.call(this);this._changeSizeDispatchFlag=!0;this._scaleMode="";this._stageHeight=this._stageWidth=NaN;this.touchEnabled=!0;this._stage=this;this._stageWidth=a;this._stageHeight=e}__extends(a,b);var e=a.prototype;e.invalidate=function(){a._invalidateRenderFlag=!0};Object.defineProperty(e,"scaleMode",{get:function(){return this._scaleMode},set:function(a){this._scaleMode!=a&&(this._scaleMode=a,this.setResolutionPolicy())},
enumerable:!0,configurable:!0});e.changeSize=function(){this._changeSizeDispatchFlag&&(this.setResolutionPolicy(),this.dispatchEventWith(c.Event.RESIZE))};e.setResolutionPolicy=function(){var b=a.SCALE_MODE_ENUM[this._scaleMode];if(!b)throw Error(c.getString(1024));var e=new c.EqualToFrame,b=new c.ResolutionPolicy(e,b);c.StageDelegate.getInstance()._setResolutionPolicy(b);this._stageWidth=c.StageDelegate.getInstance()._stageWidth;this._stageHeight=c.StageDelegate.getInstance()._stageHeight};Object.defineProperty(e,
"stageWidth",{get:function(){return this._stageWidth},enumerable:!0,configurable:!0});Object.defineProperty(e,"stageHeight",{get:function(){return this._stageHeight},enumerable:!0,configurable:!0});e.hitTest=function(a,b,e){if(!this._touchEnabled)return null;var d;if(!this._touchChildren)return this;e=this._children;for(var k=e.length-1;0<=k;k--){d=e[k];var m=d._getMatrix(),n=d._scrollRect;n&&m.append(1,0,0,1,-n.x,-n.y);m.invert();m=c.Matrix.transformCoords(m,a,b);if((d=d.hitTest(m.x,m.y,!0))&&d._touchEnabled)return d}return this};
e.getBounds=function(a){a||(a=new c.Rectangle);return a.initialize(0,0,this._stageWidth,this._stageHeight)};e._updateTransform=function(){for(var a=0,b=this._children.length;a<b;a++)this._children[a]._updateTransform()};Object.defineProperty(e,"focus",{get:function(){return null},enumerable:!0,configurable:!0});a.registerScaleMode=function(b,e,d){a.SCALE_MODE_ENUM[b]&&!d?c.Logger.warningWithErrorId(1009,b):a.SCALE_MODE_ENUM[b]=e};a._invalidateRenderFlag=!1;a.SCALE_MODE_ENUM={};return a}(c.DisplayObjectContainer);
c.Stage=d;d.prototype.__class__="egret.Stage"})(egret||(egret={}));egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.NO_SCALE]=new egret.NoScale;egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.SHOW_ALL]=new egret.ShowAll;egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.NO_BORDER]=new egret.FixedWidth;egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.EXACT_FIT]=new egret.FullScreen;
(function(c){var d=function(b){function a(a){void 0===a&&(a=null);b.call(this);this._lastTouchPosition=new c.Point(0,0);this._touchStartPosition=new c.Point(0,0);this._scrollStarted=!1;this._lastTouchTime=0;this._lastTouchEvent=null;this._velocitys=[];this._isVTweenPlaying=this._isHTweenPlaying=!1;this._vScrollTween=this._hScrollTween=null;this.scrollBeginThreshold=10;this.scrollSpeed=1;this._content=null;this._horizontalScrollPolicy=this._verticalScrollPolicy="auto";this._scrollTop=this._scrollLeft=
0;this._vCanScroll=this._hCanScroll=!1;this.touchBeginTimer=this.delayTouchBeginEvent=null;this.touchEnabled=!0;a&&this.setContent(a)}__extends(a,b);var e=a.prototype;e.setContent=function(a){this._content!==a&&(this.removeContent(),a&&(this._content=a,b.prototype.addChild.call(this,a),this._addEvents()))};e.removeContent=function(){this._content&&(this._removeEvents(),b.prototype.removeChildAt.call(this,0));this._content=null};Object.defineProperty(e,"verticalScrollPolicy",{get:function(){return this._verticalScrollPolicy},
set:function(a){a!=this._verticalScrollPolicy&&(this._verticalScrollPolicy=a)},enumerable:!0,configurable:!0});Object.defineProperty(e,"horizontalScrollPolicy",{get:function(){return this._horizontalScrollPolicy},set:function(a){a!=this._horizontalScrollPolicy&&(this._horizontalScrollPolicy=a)},enumerable:!0,configurable:!0});Object.defineProperty(e,"scrollLeft",{get:function(){return this._scrollLeft},set:function(a){a!=this._scrollLeft&&(this._scrollLeft=a,this._validatePosition(!1,!0),this._updateContentPosition())},
enumerable:!0,configurable:!0});Object.defineProperty(e,"scrollTop",{get:function(){return this._scrollTop},set:function(a){a!=this._scrollTop&&(this._scrollTop=a,this._validatePosition(!0,!1),this._updateContentPosition())},enumerable:!0,configurable:!0});e.setScrollPosition=function(a,b,e){void 0===e&&(e=!1);if(!e||0!=a||0!=b)if(e||this._scrollTop!=a||this._scrollLeft!=b){if(e){e=this._isOnTheEdge(!0);var c=this._isOnTheEdge(!1);this._scrollTop+=e?a/2:a;this._scrollLeft+=c?b/2:b}else this._scrollTop=
a,this._scrollLeft=b;this._validatePosition(!0,!0);this._updateContentPosition()}};e._isOnTheEdge=function(a){void 0===a&&(a=!0);var b=this._scrollTop,e=this._scrollLeft;return a?0>b||b>this.getMaxScrollTop():0>e||e>this.getMaxScrollLeft()};e._validatePosition=function(a,b){void 0===a&&(a=!1);void 0===b&&(b=!1);if(a){var e=this.height,c=this._getContentHeight();this._scrollTop=Math.max(this._scrollTop,(0-e)/2);this._scrollTop=Math.min(this._scrollTop,c>e?c-e/2:e/2)}b&&(e=this.width,c=this._getContentWidth(),
this._scrollLeft=Math.max(this._scrollLeft,(0-e)/2),this._scrollLeft=Math.min(this._scrollLeft,c>e?c-e/2:e/2))};e._setWidth=function(a){this._explicitWidth!=a&&(b.prototype._setWidth.call(this,a),this._updateContentPosition())};e._setHeight=function(a){this._explicitHeight!=a&&(b.prototype._setHeight.call(this,a),this._updateContentPosition())};e._updateContentPosition=function(){var a=this.getBounds(c.Rectangle.identity);this.scrollRect=new c.Rectangle(this._scrollLeft,this._scrollTop,a.width,a.height);
this.dispatchEvent(new c.Event(c.Event.CHANGE))};e._checkScrollPolicy=function(){var a=this.__checkScrollPolicy(this._horizontalScrollPolicy,this._getContentWidth(),this.width);this._hCanScroll=a;var b=this.__checkScrollPolicy(this._verticalScrollPolicy,this._getContentHeight(),this.height);this._vCanScroll=b;return a||b};e.__checkScrollPolicy=function(a,b,e){return"on"==a?!0:"off"==a?!1:b>e};e._addEvents=function(){this.addEventListener(c.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this);this.addEventListener(c.TouchEvent.TOUCH_BEGIN,
this._onTouchBeginCapture,this,!0);this.addEventListener(c.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)};e._removeEvents=function(){this.removeEventListener(c.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this);this.removeEventListener(c.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0);this.removeEventListener(c.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)};e._onTouchBegin=function(a){!a._isDefaultPrevented&&this._checkScrollPolicy()&&(this._touchStartPosition.x=a.stageX,this._touchStartPosition.y=
a.stageY,(this._isHTweenPlaying||this._isVTweenPlaying)&&this._onScrollFinished(),this.stage.addEventListener(c.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this.stage.addEventListener(c.TouchEvent.TOUCH_END,this._onTouchEnd,this),this.stage.addEventListener(c.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.addEventListener(c.Event.ENTER_FRAME,this._onEnterFrame,this),this._logTouchEvent(a),a.preventDefault())};e._onTouchBeginCapture=function(a){var b=this._checkScrollPolicy();if(b){for(var e=
a.target;e!=this;){if("_checkScrollPolicy"in e&&(b=e._checkScrollPolicy()))return;e=e.parent}a.stopPropagation();this.delayTouchBeginEvent=this.cloneTouchEvent(a);this.touchBeginTimer||(this.touchBeginTimer=new c.Timer(100,1),this.touchBeginTimer.addEventListener(c.TimerEvent.TIMER_COMPLETE,this._onTouchBeginTimer,this));this.touchBeginTimer.start();this._onTouchBegin(a)}};e._onTouchEndCapture=function(a){this.delayTouchBeginEvent&&this._onTouchBeginTimer()};e._onTouchBeginTimer=function(){this.touchBeginTimer.stop();
var a=this.delayTouchBeginEvent;this.delayTouchBeginEvent=null;this.stage&&this.dispatchPropagationEvent(a)};e.dispatchPropagationEvent=function(a){for(var b=[],e=a._target,c=0;e;)e==this&&(c=b.length),b.push(e),e=e.parent;e=b.slice(0,c);e=e.reverse();b=e.concat(b);this._dispatchPropagationEvent(a,b,c)};e._dispatchPropagationEvent=function(a,b,e){for(var c=b.length,d=0;d<c;d++){var m=b[d];a._currentTarget=m;a._eventPhase=d<e?1:d==e?2:3;m._notifyListener(a);if(a._isPropagationStopped||a._isPropagationImmediateStopped)break}};
e._onTouchMove=function(a){if(this._lastTouchPosition.x!=a.stageX||this._lastTouchPosition.y!=a.stageY){if(!this._scrollStarted){var b=a.stageX-this._touchStartPosition.x,e=a.stageY-this._touchStartPosition.y;if(Math.sqrt(b*b+e*e)<this.scrollBeginThreshold){this._logTouchEvent(a);return}}this._scrollStarted=!0;this.delayTouchBeginEvent&&(this.delayTouchBeginEvent=null,this.touchBeginTimer.stop());this.touchChildren=!1;b=this._getPointChange(a);this.setScrollPosition(b.y,b.x,!0);this._calcVelocitys(a);
this._logTouchEvent(a)}};e._onTouchEnd=function(a){this.touchChildren=!0;this._scrollStarted=!1;c.MainContext.instance.stage.removeEventListener(c.TouchEvent.TOUCH_MOVE,this._onTouchMove,this);c.MainContext.instance.stage.removeEventListener(c.TouchEvent.TOUCH_END,this._onTouchEnd,this);c.MainContext.instance.stage.removeEventListener(c.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this);this.removeEventListener(c.Event.ENTER_FRAME,this._onEnterFrame,this);this._moveAfterTouchEnd()};e._onEnterFrame=function(a){a=
c.getTimer();100<a-this._lastTouchTime&&300>a-this._lastTouchTime&&this._calcVelocitys(this._lastTouchEvent)};e._logTouchEvent=function(a){this._lastTouchPosition.x=a.stageX;this._lastTouchPosition.y=a.stageY;this._lastTouchEvent=this.cloneTouchEvent(a);this._lastTouchTime=c.getTimer()};e._getPointChange=function(a){return{x:!1===this._hCanScroll?0:this._lastTouchPosition.x-a.stageX,y:!1===this._vCanScroll?0:this._lastTouchPosition.y-a.stageY}};e._calcVelocitys=function(a){var b=c.getTimer();if(0==
this._lastTouchTime)this._lastTouchTime=b;else{var e=this._getPointChange(a),b=b-this._lastTouchTime;e.x/=b;e.y/=b;this._velocitys.push(e);5<this._velocitys.length&&this._velocitys.shift();this._lastTouchPosition.x=a.stageX;this._lastTouchPosition.y=a.stageY}};e._getContentWidth=function(){return this._content.explicitWidth||this._content.width};e._getContentHeight=function(){return this._content.explicitHeight||this._content.height};e.getMaxScrollLeft=function(){var a=this._getContentWidth()-this.width;
return Math.max(0,a)};e.getMaxScrollTop=function(){var a=this._getContentHeight()-this.height;return Math.max(0,a)};e._moveAfterTouchEnd=function(){if(0!=this._velocitys.length){for(var b=0,e=0,c=0,d=0;d<this._velocitys.length;d++)var k=this._velocitys[d],m=a.weight[d],b=b+k.x*m,e=e+k.y*m,c=c+m;this._velocitys.length=0;0>=this.scrollSpeed&&(this.scrollSpeed=1);b=b/c*this.scrollSpeed;e=e/c*this.scrollSpeed;k=Math.abs(b);c=Math.abs(e);m=this.getMaxScrollLeft();d=this.getMaxScrollTop();b=0.02<k?this.getAnimationDatas(b,
this._scrollLeft,m):{position:this._scrollLeft,duration:1};e=0.02<c?this.getAnimationDatas(e,this._scrollTop,d):{position:this._scrollTop,duration:1};this.setScrollLeft(b.position,b.duration);this.setScrollTop(e.position,e.duration)}};e._onTweenFinished=function(a){a==this._vScrollTween&&(this._isVTweenPlaying=!1);a==this._hScrollTween&&(this._isHTweenPlaying=!1);!1==this._isHTweenPlaying&&!1==this._isVTweenPlaying&&this._onScrollFinished()};e._onScrollStarted=function(){};e._onScrollFinished=function(){c.Tween.removeTweens(this);
this._vScrollTween=this._hScrollTween=null;this._isVTweenPlaying=this._isHTweenPlaying=!1;this.dispatchEvent(new c.Event(c.Event.COMPLETE))};e.setScrollTop=function(a,b){void 0===b&&(b=0);var e=Math.min(this.getMaxScrollTop(),Math.max(a,0));if(0==b)return this.scrollTop=e,null;var d=c.Tween.get(this).to({scrollTop:a},b,c.Ease.quartOut);e!=a&&d.to({scrollTop:e},300,c.Ease.quintOut);this._isVTweenPlaying=!0;this._vScrollTween=d;d.call(this._onTweenFinished,this,[d]);this._isHTweenPlaying||this._onScrollStarted();
return d};e.setScrollLeft=function(a,b){void 0===b&&(b=0);var e=Math.min(this.getMaxScrollLeft(),Math.max(a,0));if(0==b)return this.scrollLeft=e,null;var d=c.Tween.get(this).to({scrollLeft:a},b,c.Ease.quartOut);e!=a&&d.to({scrollLeft:e},300,c.Ease.quintOut);this._isHTweenPlaying=!0;this._hScrollTween=d;d.call(this._onTweenFinished,this,[d]);this._isVTweenPlaying||this._onScrollStarted();return d};e.getAnimationDatas=function(a,b,e){var c=Math.abs(a),d=0,m=b+500*a;if(0>m||m>e)for(m=b;Infinity!=Math.abs(a)&&
0.02<Math.abs(a);)m+=a,a=0>m||m>e?0.998*a*0.95:0.998*a,d++;else d=500*-Math.log(0.02/c);return{position:Math.min(e+50,Math.max(m,-50)),duration:d}};e.cloneTouchEvent=function(a){var b=new c.TouchEvent(a._type,a._bubbles,a.cancelable);b.touchPointID=a.touchPointID;b._stageX=a._stageX;b._stageY=a._stageY;b.ctrlKey=a.ctrlKey;b.altKey=a.altKey;b.shiftKey=a.shiftKey;b.touchDown=a.touchDown;b._isDefaultPrevented=!1;b._target=a._target;return b};e.throwNotSupportedError=function(){throw Error(c.getString(1023));
};e.addChild=function(a){this.throwNotSupportedError();return null};e.addChildAt=function(a,b){this.throwNotSupportedError();return null};e.removeChild=function(a){this.throwNotSupportedError();return null};e.removeChildAt=function(a){this.throwNotSupportedError();return null};e.setChildIndex=function(a,b){this.throwNotSupportedError()};e.swapChildren=function(a,b){this.throwNotSupportedError()};e.swapChildrenAt=function(a,b){this.throwNotSupportedError()};e.hitTest=function(a,e,d){void 0===d&&(d=
!1);var l=b.prototype.hitTest.call(this,a,e,d);return l?l:c.DisplayObject.prototype.hitTest.call(this,a,e,d)};a.weight=[1,1.33,1.66,2,2.33];return a}(c.DisplayObjectContainer);c.ScrollView=d;d.prototype.__class__="egret.ScrollView"})(egret||(egret={}));(function(c){var d=function(){function b(){}b.REPEAT="repeat";b.SCALE="scale";return b}();c.BitmapFillMode=d;d.prototype.__class__="egret.BitmapFillMode"})(egret||(egret={}));
(function(c){var d=function(b){function a(a){b.call(this);this.scale9Grid=this._texture=null;this.fillMode="scale";a&&(this._texture=a,this._setSizeDirty());this.needDraw=!0}__extends(a,b);var e=a.prototype;Object.defineProperty(e,"texture",{get:function(){return this._texture},set:function(a){a!=this._texture&&(this._setSizeDirty(),this._texture=a)},enumerable:!0,configurable:!0});e._render=function(b){var e=this._texture;e?(this._texture_to_render=e,a._drawBitmap(b,this._hasWidthSet?this._explicitWidth:
e._textureWidth,this._hasHeightSet?this._explicitHeight:e._textureHeight,this)):this._texture_to_render=null};a._drawBitmap=function(b,e,c,d){var k=d._texture_to_render;if(k){var m=k._textureWidth,n=k._textureHeight;if("scale"==d.fillMode){var p=d.scale9Grid||k.scale9Grid;if(p&&m-p.width<e&&n-p.height<c)a.drawScale9GridImage(b,d,p,e,c);else{var p=k._offsetX,r=k._offsetY,s=k._bitmapWidth||m,v=k._bitmapHeight||n;e/=m;p=Math.round(p*e);e=Math.round(s*e);c/=n;r=Math.round(r*c);c=Math.round(v*c);a.renderFilter.drawImage(b,
d,k._bitmapX,k._bitmapY,s,v,p,r,e,c)}}else a.drawRepeatImage(b,d,e,c,d.fillMode)}};a.drawRepeatImage=function(a,b,e,d,k){var m=b._texture_to_render;if(m){var n=m._textureWidth,p=m._textureHeight,r=m._bitmapX,s=m._bitmapY,n=m._bitmapWidth||n,p=m._bitmapHeight||p,v=m._offsetX,m=m._offsetY;c.RenderFilter.getInstance().drawImage(a,b,r,s,n,p,v,m,e,d,k)}};a.drawScale9GridImage=function(a,b,e,d,k){var m=c.MainContext.instance.rendererContext._texture_scale_factor,n=b._texture_to_render;if(n&&e){var p=n._textureWidth,
r=n._textureHeight,s=n._bitmapX,v=n._bitmapY,w=n._bitmapWidth||p,x=n._bitmapHeight||r;d-=p-w;k-=r-x;if(!a.drawImageScale9(n,s,v,w,x,n._offsetX,n._offsetY,d,k,e)){p=n._offsetX/m;r=n._offsetY/m;n=c.RenderFilter.getInstance();e=c.Rectangle.identity.initialize(e.x-Math.round(p),e.y-Math.round(p),e.width,e.height);p=Math.round(p);r=Math.round(r);e.y==e.bottom&&(e.bottom<x?e.bottom++:e.y--);e.x==e.right&&(e.right<w?e.right++:e.x--);var L=s+e.x/m,P=s+e.right/m,O=w-e.right,Q=v+e.y/m,m=v+e.bottom/m,V=x-e.bottom,
M=p+e.x,R=r+e.y,x=k-(x-e.bottom),w=d-(w-e.right);n.drawImage(a,b,s,v,e.x,e.y,p,r,e.x,e.y);n.drawImage(a,b,L,v,e.width,e.y,M,r,w-e.x,e.y);n.drawImage(a,b,P,v,O,e.y,p+w,r,d-w,e.y);n.drawImage(a,b,s,Q,e.x,e.height,p,R,e.x,x-e.y);n.drawImage(a,b,L,Q,e.width,e.height,M,R,w-e.x,x-e.y);n.drawImage(a,b,P,Q,O,e.height,p+w,R,d-w,x-e.y);n.drawImage(a,b,s,m,e.x,V,p,r+x,e.x,k-x);n.drawImage(a,b,L,m,e.width,V,M,r+x,w-e.x,k-x);n.drawImage(a,b,P,m,O,V,p+w,r+x,d-w,k-x)}}};e._measureBounds=function(){var a=this._texture;
return a?c.Rectangle.identity.initialize(0,0,a._textureWidth,a._textureHeight):b.prototype._measureBounds.call(this)};a.renderFilter=c.RenderFilter.getInstance();return a}(c.DisplayObject);c.Bitmap=d;d.prototype.__class__="egret.Bitmap"})(egret||(egret={}));
(function(c){var d=function(b){function a(){b.call(this);this._text="";this._textChanged=!1;this._font=null;this._fontChanged=!1;this._textOffsetY=this._textOffsetX=this._textHeight=this._textWidth=0;this.textLinesChange=!0;this._lineHeights=[];this.needDraw=this.cacheAsBitmap=!0}__extends(a,b);var e=a.prototype;Object.defineProperty(e,"text",{get:function(){return this._text},set:function(a){this._text!=a&&(this._textChanged=!0,this._text=a,this._setSizeDirty())},enumerable:!0,configurable:!0});
Object.defineProperty(e,"font",{get:function(){return this._font},set:function(a){this._font!=a&&(this._font=a,this._fontChanged=!0,this._setSizeDirty())},enumerable:!0,configurable:!0});e._setSizeDirty=function(){b.prototype._setSizeDirty.call(this);this.textLinesChange=!0};e._render=function(b){var e=this._getTextLines(),d=e.length;if(0!=d){for(var l=this._font,k=l._getFirstCharHeight(),k=Math.ceil(k*a.EMPTY_FACTOR),m=0,n=this._hasHeightSet?this._explicitHeight:Number.POSITIVE_INFINITY,p=this._lineHeights,
r=0;r<d;r++){var s=p[r];if(0<r&&m+s>n)break;for(var v=e[r],w=v.length,x=0,L=0;L<w;L++){var P=v.charAt(L),O=l.getTexture(P);if(O){var P=O._bitmapWidth||O._textureWidth,Q=O._bitmapHeight||O._textureHeight;this._texture_to_render=O;c.RenderFilter.getInstance().drawImage(b,this,O._bitmapX,O._bitmapY,P,Q,x+O._offsetX,m+O._offsetY,P,Q);x+=O._textureWidth}else" "==P?x+=k:c.Logger.warningWithErrorId(1011,P)}m+=s}this._texture_to_render=null}};e._measureBounds=function(){return 0==this._getTextLines().length?
c.Rectangle.identity.initialize(0,0,0,0):c.Rectangle.identity.initialize(this._textOffsetX,this._textOffsetY,this._textWidth-this._textOffsetX,this._textHeight-this._textOffsetY)};e._getTextLines=function(){if(!this.textLinesChange)return this._textLines;var b=[];this._textLines=b;this.textLinesChange=!1;var e=[];this._lineHeights=e;if(!this._text||!this._font)return b;for(var d=0,l=0,k=0,m=0,n=this._hasWidthSet,p=this._hasWidthSet?this._explicitWidth:Number.POSITIVE_INFINITY,r=this._font,s=r._getFirstCharHeight(),
v=Math.ceil(s*a.EMPTY_FACTOR),w=this._text.split(/(?:\r\n|\r|\n)/),x=w.length,L=!0,P=0;P<x;P++){for(var O=w[P],Q=O.length,V=0,M=0,R=!0,T=0;T<Q;T++){var U=O.charAt(T),S,W=0,N=0,X=r.getTexture(U);if(X)U=X._textureWidth,S=X._textureHeight,W=X._offsetX,N=X._offsetY;else if(" "==U)U=v,S=s;else{c.Logger.warningWithErrorId(1011,U);R&&(R=!1);continue}R&&(R=!1,k=Math.min(W,k));L&&(m=Math.min(N,m));n&&0<T&&M+U>p?(b.push(O.substring(0,T)),e.push(V),l+=V,d=Math.max(M,d),O=O.substring(T),Q=O.length,T=0,M=U,V=
S):(M+=U,V=Math.max(S,V))}L&&(L=!1);b.push(O);e.push(V);l+=V;d=Math.max(M,d)}this._textWidth=d;this._textHeight=l;this._textOffsetX=k;this._textOffsetY=m;return b};a.EMPTY_FACTOR=0.33;return a}(c.DisplayObject);c.BitmapText=d;d.prototype.__class__="egret.BitmapText"})(egret||(egret={}));
(function(c){var d=function(){function b(){this.fillStyleColor=this.strokeStyleColor=this.renderContext=this.commandQueue=this.canvasContext=null;this._dirty=!1;this.lineY=this.lineX=0;this._firstCheck=!0;this._lastY=this._lastX=this._maxY=this._maxX=this._minY=this._minX=0;this.commandQueue=[]}var a=b.prototype;a.beginFill=function(a,b){};a._setStyle=function(a){};a.drawRect=function(a,b,c,d){this.checkRect(a,b,c,d)};a.drawCircle=function(a,b,c){this.checkRect(a-c,b-c,2*c,2*c)};a.drawRoundRect=function(a,
b,c,d,l,k){this.checkRect(a,b,c,d)};a.drawEllipse=function(a,b,c,d){this.checkRect(a-c,b-d,2*c,2*d)};a.lineStyle=function(a,b,c,d,l,k,m,n){};a.lineTo=function(a,b){this.checkPoint(a,b)};a.curveTo=function(a,b,c,d){this.checkPoint(a,b);this.checkPoint(c,d)};a.moveTo=function(a,b){this.checkPoint(a,b)};a.clear=function(){this._maxY=this._maxX=this._minY=this._minX=0;this._firstCheck=!0};a.endFill=function(){};a._draw=function(a){};a.checkRect=function(a,b,c,d){this._firstCheck?(this._firstCheck=!1,
this._minX=a,this._minY=b,this._maxX=a+c,this._maxY=b+d):(this._minX=Math.min(this._minX,a),this._minY=Math.min(this._minY,b),this._maxX=Math.max(this._maxX,a+c),this._maxY=Math.max(this._maxY,b+d))};a.checkPoint=function(a,b){this._firstCheck?(this._firstCheck=!1,this._minX=a,this._minY=b,this._maxX=a,this._maxY=b):(this._minX=Math.min(this._minX,a),this._minY=Math.min(this._minY,b),this._maxX=Math.max(this._maxX,a),this._maxY=Math.max(this._maxY,b));this._lastX=a;this._lastY=b};a._measureBounds=
function(){return c.Rectangle.identity.initialize(this._minX,this._minY,this._maxX-this._minX,this._maxY-this._minY)};return b}();c.Graphics=d;d.prototype.__class__="egret.Graphics";(function(){return function(b,a,e){this.method=b;this.thisObject=a;this.args=e}})().prototype.__class__="egret.Command"})(egret||(egret={}));
(function(c){var d=function(b){function a(){b.call(this);this._graphics=null}__extends(a,b);var e=a.prototype;Object.defineProperty(e,"graphics",{get:function(){this._graphics||(this._graphics=new c.Graphics,this.needDraw=!0);return this._graphics},enumerable:!0,configurable:!0});e._render=function(a){this._graphics&&this._graphics._draw(a)};e._measureBounds=function(){var a=this._graphics;return a?a._measureBounds():b.prototype._measureBounds.call(this)};return a}(c.DisplayObject);c.Shape=d;d.prototype.__class__=
"egret.Shape"})(egret||(egret={}));
(function(c){var d=function(b){function a(){b.call(this);this._graphics=null}__extends(a,b);var e=a.prototype;Object.defineProperty(e,"graphics",{get:function(){this._graphics||(this._graphics=new c.Graphics,this.needDraw=!0);return this._graphics},enumerable:!0,configurable:!0});e._render=function(a){this._graphics&&this._graphics._draw(a);b.prototype._render.call(this,a)};e._measureBounds=function(){for(var a=0,b=0,e=0,d=0,k=this._children.length,m=0;m<k;m++){var n=this._children[m];if(n._visible){var p=
n.getBounds(c.Rectangle.identity,!1),r=p.x,s=p.y,v=p.width,p=p.height,n=n._getMatrix(),n=c.DisplayObject.getTransformBounds(c.Rectangle.identity.initialize(r,s,v,p),n),r=n.x,s=n.y,v=n.width+n.x,n=n.height+n.y;if(r<a||0==m)a=r;if(v>b||0==m)b=v;if(s<e||0==m)e=s;if(n>d||0==m)d=n}}if(this._graphics){k=this._graphics._measureBounds();r=k.x;s=k.y;v=k.width+k.x;n=k.height+k.y;if(r<a||0==m)a=r;if(v>b||0==m)b=v;if(s<e||0==m)e=s;if(n>d||0==m)d=n}return c.Rectangle.identity.initialize(a,e,b-a,d-e)};e.hitTest=
function(a,e,d){void 0===d&&(d=!1);var l=b.prototype.hitTest.call(this,a,e,d);return l?l:this._graphics?c.DisplayObject.prototype.hitTest.call(this,a,e,d):null};return a}(c.DisplayObjectContainer);c.Sprite=d;d.prototype.__class__="egret.Sprite"})(egret||(egret={}));
(function(c){var d=function(){function b(){}b._getHitIndex=function(a,e,f){if(0==a._textMaxHeight)return 0;for(var d=a._getLinesArr(),g=0,l=-1,k=0,m=Math.max(a._scrollV-1,0),n=b.getStartY(a,b._getValign(a)),p=b._getScrollNum(a),r=0;r<d.length&&r<p+m;r++){var s=d[r];if(!(r<m)){if(k+s.height+n>=f){l=r;break}else k+=s.height;if(k+a._lineSpacing+n>=f){l=r;break}}r==p+m-1?l=r:g+=s.charNum}if(r==d.length)return a._text.length;s=d[l];f=b._getStartXAtLine(a,l,b._getHalign(a));d=c.MainContext.instance.rendererContext;
d.setupFont(a);if(s.elements.length&&(s=s.elements[0],a=b._getStartXAtLine(a,l,b._getHalign(a)),!(e<a)))if(a+s.width<e)g+=s.text.length;else for(l=a=0;l<s.text.length&&!(k=d.measureText(s.text.charAt(l)),a+k/2+f>e);l++)g++,a+=k;return g};b._getStartLine=function(a){var b=a._multiline?a._textMaxHeight+(a._numLines-1)*a._lineSpacing:a._size,c=0;a._hasHeightSet&&(!(b<a._explicitHeight)&&b>a._explicitHeight&&(c=Math.max(a._scrollV-1,0),c=Math.min(a._numLines-1,c)),a._multiline||(c=Math.max(a._scrollV-
1,0),c=Math.min(a._numLines-1,c)));return c};b._getStartXAtLine=function(a,b,c){var d=a._getLinesArr();return c*((a._hasWidthSet?a._explicitWidth:a._textMaxWidth)-d[b].width)};b._getHalign=function(a){var b=a._getLinesArr(),f=0;a._textAlign==c.HorizontalAlign.CENTER?f=0.5:a._textAlign==c.HorizontalAlign.RIGHT&&(f=1);!a._multiline&&1<b.length&&(f=0);return f};b._getStartYAtLine=function(a,e,c){var d=a._getLinesArr();c=b.getStartY(a,c);for(var g=Math.max(a._scrollV-1,0);g<d.length&&g!=e;g++)c+=d[g].height+
a._lineSpacing;return c};b.getStartY=function(a,b){var c=a._multiline?a._textMaxHeight+(a._numLines-1)*a._lineSpacing:a._size;return a._hasHeightSet&&c<a._explicitHeight?b*(a._explicitHeight-c):0};b._getValign=function(a){var b=a._multiline?a._textMaxHeight+(a._numLines-1)*a._lineSpacing:a._size;return a._type==c.TextFieldType.INPUT?a._multiline?0:0.5:a._hasHeightSet&&b<a._explicitHeight?(b=0,a._verticalAlign==c.VerticalAlign.MIDDLE?b=0.5:a._verticalAlign==c.VerticalAlign.BOTTOM&&(b=1),b):0};b._getScrollNum=
function(a){var b=1;if(a._multiline){var c=a.height,d=a.size;a=a.lineSpacing;b=Math.floor(c/(d+a));c-(d+a)*b>d/2&&b++}return b};b._getSelectionScrollV=function(a,e,c){for(var d=a._getLinesArr(),g=a._text.length-e,l=0,k=e=0;k<d.length;k++)if(l+=d[k].charNum,l>=g){e=l==g&&d[k].hasNextLine?k+2:k+1;break}g=b._getScrollNum(a);return c&&e-1+g>=d.length?Math.max(d.length-g+1,1):a._scrollV<=e&&a._scrollV+g-1>=e?a._scrollV:c?e:Math.max(e-g+1,1)};b._getTextElement=function(a,e,c){e=b._getHit(a,e,c);a=a._getLinesArr();
return e&&a[e.lineIndex]&&a[e.lineIndex].elements[e.textElementIndex]?a[e.lineIndex].elements[e.textElementIndex]:null};b._getHit=function(a,b,c){var d=a._getLinesArr();if(0==a._textMaxWidth)return null;for(var g=0,l=0,k=0;k<d.length;k++){var m=d[k];if(l+m.height>=c){g=k+1;break}else l+=m.height;if(l+a._lineSpacing>c)return null;l+=a._lineSpacing}if(0===g)return null;a=d[g-1];for(k=c=0;k<a.elements.length;k++)if(d=a.elements[k],c+d.width<b)c+=d.width;else return{lineIndex:g-1,textElementIndex:k};
return null};return b}();c.TextFieldUtils=d;d.prototype.__class__="egret.TextFieldUtils"})(egret||(egret={}));(function(c){var d=function(){return function(){}}();c.TextFieldProperties=d;d.prototype.__class__="egret.TextFieldProperties"})(egret||(egret={}));
(function(c){var d=function(b){function a(){b.call(this);this._inputEnabled=!1;this._type="";this._inputUtils=null;this._text="";this._displayAsPassword=!1;this._fontFamily=a.default_fontFamily;this._size=30;this._bold=this._italic=!1;this._textColorString="#FFFFFF";this._textColor=16777215;this._strokeColorString="#000000";this._stroke=this._strokeColor=0;this._textAlign="left";this._verticalAlign="top";this._maxChars=0;this._scrollV=-1;this._numLines=this._lineSpacing=this._maxScrollV=0;this._multiline=
!1;this._graphics=null;this._border=!1;this._borderColor=0;this._background=!1;this._backgroundColor=0;this._isFlow=!1;this._textArr=[];this._isArrayChanged=!1;this._inputDelay=this._textMaxHeight=this._textMaxWidth=0;this._linesArr=[];this._isTyping=!1;this._oppositeSelectionEnd=0;this.needDraw=!0;this._properties=new c.TextFieldProperties}__extends(a,b);var e=a.prototype;e.isInput=function(){return this._type==c.TextFieldType.INPUT};e._setTouchEnabled=function(a){b.prototype._setTouchEnabled.call(this,
a);this.isInput()&&(this._inputEnabled=!0)};Object.defineProperty(e,"type",{get:function(){return this._type},set:function(a){this._setType(a)},enumerable:!0,configurable:!0});e._setType=function(a){this._type!=a&&(this._type=a,this._type==c.TextFieldType.INPUT?(this._hasWidthSet||this._setWidth(100),this._hasHeightSet||this._setHeight(30),null==this._inputUtils&&(this._inputUtils=new c.InputController),this._inputUtils.init(this),this._setDirty(),this._stage&&this._inputUtils._addStageText()):this._inputUtils&&
(this._inputUtils._removeStageText(),this._inputUtils=null))};Object.defineProperty(e,"text",{get:function(){return this._getText()},set:function(a){this._setText(a)},enumerable:!0,configurable:!0});e._getText=function(){return this._type==c.TextFieldType.INPUT?this._inputUtils._getText():this._text};e._setSizeDirty=function(){b.prototype._setSizeDirty.call(this);this._isArrayChanged=!0};e._setTextDirty=function(){this._setSizeDirty()};e._setBaseText=function(a){null==a&&(a="");this._isFlow=!1;this._text!=
a&&(this._setTextDirty(),this._text=a,a="",a=this._displayAsPassword?this.changeToPassText(this._text):this._text,this.setMiddleStyle([{text:a}]))};e._setText=function(a){null==a&&(a="");this._setBaseText(a);this._inputUtils&&this._inputUtils._setText(this._text)};Object.defineProperty(e,"displayAsPassword",{get:function(){return this._displayAsPassword},set:function(a){this._setDisplayAsPassword(a)},enumerable:!0,configurable:!0});e._setDisplayAsPassword=function(a){this._displayAsPassword!=a&&(this._displayAsPassword=
a,this._setTextDirty(),a="",a=this._displayAsPassword?this.changeToPassText(this._text):this._text,this.setMiddleStyle([{text:a}]))};Object.defineProperty(e,"fontFamily",{get:function(){return this._fontFamily},set:function(a){this._setFontFamily(a)},enumerable:!0,configurable:!0});e._setFontFamily=function(a){this._fontFamily!=a&&(this._setTextDirty(),this._fontFamily=a)};Object.defineProperty(e,"size",{get:function(){return this._size},set:function(a){this._setSize(a)},enumerable:!0,configurable:!0});
e._setSize=function(a){this._size!=a&&(this._setTextDirty(),this._size=a)};Object.defineProperty(e,"italic",{get:function(){return this._italic},set:function(a){this._setItalic(a)},enumerable:!0,configurable:!0});e._setItalic=function(a){this._italic!=a&&(this._setTextDirty(),this._italic=a)};Object.defineProperty(e,"bold",{get:function(){return this._bold},set:function(a){this._setBold(a)},enumerable:!0,configurable:!0});e._setBold=function(a){this._bold!=a&&(this._setTextDirty(),this._bold=a)};
Object.defineProperty(e,"textColor",{get:function(){return this._textColor},set:function(a){this._setTextColor(a)},enumerable:!0,configurable:!0});e._setTextColor=function(a){this._textColor!=a&&(this._setTextDirty(),this._textColor=a,this._textColorString=c.toColorString(a))};Object.defineProperty(e,"strokeColor",{get:function(){return this._strokeColor},set:function(a){this._setStrokeColor(a)},enumerable:!0,configurable:!0});e._setStrokeColor=function(a){this._strokeColor!=a&&(this._setTextDirty(),
this._strokeColor=a,this._strokeColorString=c.toColorString(a))};Object.defineProperty(e,"stroke",{get:function(){return this._stroke},set:function(a){this._setStroke(a)},enumerable:!0,configurable:!0});e._setStroke=function(a){this._stroke!=a&&(this._setTextDirty(),this._stroke=a)};Object.defineProperty(e,"textAlign",{get:function(){return this._textAlign},set:function(a){this._setTextAlign(a)},enumerable:!0,configurable:!0});e._setTextAlign=function(a){this._textAlign!=a&&(this._setTextDirty(),
this._textAlign=a)};Object.defineProperty(e,"verticalAlign",{get:function(){return this._verticalAlign},set:function(a){this._setVerticalAlign(a)},enumerable:!0,configurable:!0});e._setVerticalAlign=function(a){this._verticalAlign!=a&&(this._setTextDirty(),this._verticalAlign=a)};Object.defineProperty(e,"maxChars",{get:function(){return this._maxChars},set:function(a){this._setMaxChars(a)},enumerable:!0,configurable:!0});e._setMaxChars=function(a){this._maxChars!=a&&(this._maxChars=a)};Object.defineProperty(e,
"scrollV",{set:function(a){this._scrollV=a;this._setDirty()},enumerable:!0,configurable:!0});Object.defineProperty(e,"maxScrollV",{get:function(){return this._maxScrollV},enumerable:!0,configurable:!0});Object.defineProperty(e,"selectionBeginIndex",{get:function(){return 0},enumerable:!0,configurable:!0});Object.defineProperty(e,"selectionEndIndex",{get:function(){return 0},enumerable:!0,configurable:!0});Object.defineProperty(e,"caretIndex",{get:function(){return 0},enumerable:!0,configurable:!0});
e._setSelection=function(a,b){};Object.defineProperty(e,"lineSpacing",{get:function(){return this._lineSpacing},set:function(a){this._setLineSpacing(a)},enumerable:!0,configurable:!0});e._setLineSpacing=function(a){this._lineSpacing!=a&&(this._setTextDirty(),this._lineSpacing=a)};e._getLineHeight=function(){return this._lineSpacing+this._size};Object.defineProperty(e,"numLines",{get:function(){return this._numLines},enumerable:!0,configurable:!0});Object.defineProperty(e,"multiline",{get:function(){return this._multiline},
set:function(a){this._setMultiline(a)},enumerable:!0,configurable:!0});e._setMultiline=function(a){this._multiline=a;this._setDirty()};e._setWidth=function(a){b.prototype._setWidth.call(this,a);this.fillBackground()};e._setHeight=function(a){b.prototype._setHeight.call(this,a);this.fillBackground()};Object.defineProperty(e,"border",{get:function(){return this._border},set:function(a){this._border=a;this.fillBackground()},enumerable:!0,configurable:!0});Object.defineProperty(e,"borderColor",{get:function(){return this._borderColor},
set:function(a){this._borderColor=a;this.fillBackground()},enumerable:!0,configurable:!0});Object.defineProperty(e,"background",{get:function(){return this._background},set:function(a){this._background=a;this.fillBackground()},enumerable:!0,configurable:!0});Object.defineProperty(e,"backgroundColor",{get:function(){return this._backgroundColor},set:function(a){this._backgroundColor=a;this.fillBackground()},enumerable:!0,configurable:!0});e.fillBackground=function(){this._graphics&&this._graphics.clear();
if(this._background||this._border)null==this._graphics&&(this._graphics=new c.Graphics),this._background&&this._graphics.beginFill(this._backgroundColor,1),this._border&&this._graphics.lineStyle(1,this._borderColor),this._graphics.drawRect(0,0,this._getWidth(),this._getHeight()),this._graphics.endFill()};e.setFocus=function(){c.Logger.warningWithErrorId(1013)};e._onRemoveFromStage=function(){b.prototype._onRemoveFromStage.call(this);this._removeEvent();this._type==c.TextFieldType.INPUT&&this._inputUtils._removeStageText()};
e._onAddToStage=function(){b.prototype._onAddToStage.call(this);this._addEvent();this._type==c.TextFieldType.INPUT&&this._inputUtils._addStageText()};e._updateBaseTransform=function(){this._getLinesArr();0==this._textMaxWidth&&this._type!=c.TextFieldType.INPUT||b.prototype._updateTransform.call(this)};e._updateTransform=function(){this._type==c.TextFieldType.INPUT?this._normalDirty?this._inputUtils._updateProperties():this._inputUtils._updateTransform():this._updateBaseTransform()};e._draw=function(a){0==
this._textMaxWidth&&this._type!=c.TextFieldType.INPUT||b.prototype._draw.call(this,a)};e._render=function(a){this._graphics&&this._graphics._draw(a);this.drawText(a);this._clearDirty()};e._measureBounds=function(){this._getLinesArr();return 0==this._textMaxWidth?c.Rectangle.identity.initialize(0,0,0,0):c.Rectangle.identity.initialize(0,0,this._textMaxWidth,this._textMaxHeight+(this._numLines-1)*this._lineSpacing)};Object.defineProperty(e,"textFlow",{get:function(){return this._textArr},set:function(a){this._isFlow=
!0;var b="";null==a&&(a=[]);for(var e=0;e<a.length;e++)b+=a[e].text;this._displayAsPassword?this._setBaseText(b):(this._text=b,this.setMiddleStyle(a))},enumerable:!0,configurable:!0});e.changeToPassText=function(a){if(this._displayAsPassword){for(var b="",e=0,c=a.length;e<c;e++)switch(a.charAt(e)){case "\n":b+="\n";break;case "\r":break;default:b+="*"}return b}return a};e.setMiddleStyle=function(a){this._isArrayChanged=!0;this._textArr=a;this._setSizeDirty()};Object.defineProperty(e,"textWidth",{get:function(){return this._textMaxWidth},
enumerable:!0,configurable:!0});Object.defineProperty(e,"textHeight",{get:function(){return this._textMaxHeight},enumerable:!0,configurable:!0});e.appendText=function(a){this.appendElement({text:a})};e.appendElement=function(a){this._textArr.push(a);this.setMiddleStyle(this._textArr)};e._getLinesArr=function(){if(!this._isArrayChanged)return this._linesArr;this._inputDelay=Date.now();this._isArrayChanged=!1;var a=this._textArr,b=c.MainContext.instance.rendererContext;this._linesArr=[];this._textMaxWidth=
this._textMaxHeight=0;if(this._hasWidthSet&&0==this._explicitWidth)return this._numLines=0,[{width:0,height:0,charNum:0,elements:[],hasNextLine:!1}];this._isFlow||b.setupFont(this);for(var e=this._linesArr,d=0,k=0,m=0,n=0,p,r=0,s=a.length;r<s;r++){var v=a[r];v.style=v.style||{};for(var w=v.text.toString().split(/(?:\r\n|\r|\n)/),x=0,L=w.length;x<L;x++){null==e[n]&&(p={width:0,height:0,elements:[],charNum:0,hasNextLine:!1},e[n]=p,k=m=d=0);var m=this._type==c.TextFieldType.INPUT?this._size:Math.max(m,
v.style.size||this._size),P=!0;if(""==w[x])x==L-1&&(P=!1);else{this._isFlow&&b.setupFont(this,v.style);var O=b.measureText(w[x]);if(this._hasWidthSet)if(d+O<=this._explicitWidth)p.elements.push({width:O,text:w[x],style:v.style}),d+=O,k+=w[x].length,x==L-1&&(P=!1);else{for(var Q=P=0,V=w[x],M=V.length;P<M;P++){O=b.measureText(V.charAt(P));if(d+O>this._explicitWidth&&0!=d+P)break;Q+=O;d+=O;k+=1}0<P&&(p.elements.push({width:Q,text:V.substring(0,P),style:v.style}),w[x]=V.substring(P));x--;P=!1}else d+=
O,k+=w[x].length,p.elements.push({width:O,text:w[x],style:v.style}),x==L-1&&(P=!1)}P&&(k++,p.hasNextLine=!0);x<w.length-1&&(p.width=d,p.height=m,p.charNum=k,this._textMaxWidth=Math.max(this._textMaxWidth,d),this._textMaxHeight+=m,n++)}r==a.length-1&&p&&(p.width=d,p.height=m,p.charNum=k,this._textMaxWidth=Math.max(this._textMaxWidth,d),this._textMaxHeight+=m)}this._numLines=e.length;return e};e.drawText=function(a){var b=this._getLinesArr();if((this._type!=c.TextFieldType.INPUT||!this._isTyping)&&
0!=this._textMaxWidth){var e=this._hasWidthSet?this._explicitWidth:this._textMaxWidth,d=this._multiline?this._textMaxHeight+(this._numLines-1)*this._lineSpacing:this._size,k=0,m=c.TextFieldUtils._getStartLine(this),n=c.TextFieldUtils._getValign(this);this._hasHeightSet&&(k+=n*(this._explicitHeight-d));for(var k=Math.round(k),d=c.TextFieldUtils._getHalign(this),n=0,p=m,r=this._numLines;p<r;p++){var s=b[p],v=s.height,k=k+v/2;if(p!=m){if(this._type==c.TextFieldType.INPUT&&!this._multiline)break;if(this._hasHeightSet&&
k>this._explicitHeight)break}for(var n=Math.round((e-s.width)*d),w=0,x=s.elements.length;w<x;w++){var L=s.elements[w];a.drawText(this,L.text,n,k+(v-(L.style.size||this._size))/2,L.width,L.style);n+=L.width}k+=v/2+this._lineSpacing}}};e._addEvent=function(){this.addEventListener(c.TouchEvent.TOUCH_TAP,this.onTapHandler,this)};e._removeEvent=function(){this.removeEventListener(c.TouchEvent.TOUCH_TAP,this.onTapHandler,this)};e.onTapHandler=function(a){if(this._type!=c.TextFieldType.INPUT&&(a=c.TextFieldUtils._getTextElement(this,
a.localX,a.localY),null!=a&&(a=a.style)&&a.href&&a.href.match(/^event:/))){var b=a.href.match(/^event:/)[0];c.TextEvent.dispatchTextEvent(this,c.TextEvent.LINK,a.href.substring(b.length))}};a.default_fontFamily="Arial";return a}(c.DisplayObject);c.TextField=d;d.prototype.__class__="egret.TextField"})(egret||(egret={}));
(function(c){var d=function(){function b(){this.resutlArr=[]}var a=b.prototype;a.parser=function(a){this.stackArray=[];this.resutlArr=[];for(var b=0,c=a.length;b<c;){var d=a.indexOf("<",b);0>d?(this.addToResultArr(a.substring(b)),b=c):(this.addToResultArr(a.substring(b,d)),b=a.indexOf(">",d),"/"==a.charAt(d+1)?this.stackArray.pop():this.addToArray(a.substring(d+1,b)),b+=1)}return this.resutlArr};a.addToResultArr=function(a){if(""!=a){var b=[];b.push(["&lt;","<"]);b.push(["&gt;",">"]);b.push(["&amp;",
"&"]);b.push(["&quot;",'"']);b.push(["&apos;;","'"]);for(var c=0;c<b.length;c++)a.replace(new RegExp(b[c][0],"g"),b[c][1]);0<this.stackArray.length?this.resutlArr.push({text:a,style:this.stackArray[this.stackArray.length-1]}):this.resutlArr.push({text:a})}};a.changeStringToObject=function(a){var b={};a=a.replace(/( )+/g," ").split(" ");for(var c=0;c<a.length;c++)this.addProperty(b,a[c]);return b};a.addProperty=function(a,b){var c=b.replace(/( )*=( )*/g,"=").split("=");c[1]&&(c[1]=c[1].replace(/(\"|\')/g,
""));switch(c[0].toLowerCase()){case "color":c[1]=c[1].replace(/#/,"0x");a.textColor=parseInt(c[1]);break;case "strokecolor":c[1]=c[1].replace(/#/,"0x");a.strokeColor=parseInt(c[1]);break;case "stroke":a.stroke=parseInt(c[1]);break;case "b":a.bold="true"==(c[1]||"true");break;case "i":a.italic="true"==(c[1]||"true");break;case "size":a.size=parseInt(c[1]);break;case "fontfamily":a.fontFamily=c[1];break;case "href":a.href=c[1]}};a.addToArray=function(a){a=this.changeStringToObject(a);if(0!=this.stackArray.length){var b=
this.stackArray[this.stackArray.length-1],c;for(c in b)null==a[c]&&(a[c]=b[c])}this.stackArray.push(a)};return b}();c.HtmlTextParser=d;d.prototype.__class__="egret.HtmlTextParser"})(egret||(egret={}));(function(c){var d=function(){function b(){}b.DYNAMIC="dynamic";b.INPUT="input";return b}();c.TextFieldType=d;d.prototype.__class__="egret.TextFieldType"})(egret||(egret={}));
(function(c){var d=function(b){function a(a){b.call(this);this.bitmapData=this._bitmapY=this._bitmapX=this._sourceHeight=this._sourceWidth=0;this._textureMap={};var e=a.bitmapData;this.bitmapData=e;this._sourceWidth=e.width;this._sourceHeight=e.height;this._bitmapX=a._bitmapX-a._offsetX;this._bitmapY=a._bitmapY-a._offsetY}__extends(a,b);var e=a.prototype;e.getTexture=function(a){return this._textureMap[a]};e.createTexture=function(a,b,e,d,k,m,n,p,r){void 0===m&&(m=0);void 0===n&&(n=0);"undefined"===
typeof p&&(p=m+d);"undefined"===typeof r&&(r=n+k);var s=new c.Texture,v=c.MainContext.instance.rendererContext._texture_scale_factor;s._bitmapData=this.bitmapData;s._bitmapX=this._bitmapX+b;s._bitmapY=this._bitmapY+e;s._bitmapWidth=d*v;s._bitmapHeight=k*v;s._offsetX=m;s._offsetY=n;s._textureWidth=p*v;s._textureHeight=r*v;s._sourceWidth=this._sourceWidth;s._sourceHeight=this._sourceHeight;return this._textureMap[a]=s};return a}(c.HashObject);c.SpriteSheet=d;d.prototype.__class__="egret.SpriteSheet"})(egret||
(egret={}));
(function(c){var d=function(b){function a(){b.call(this);this._text=null;this._isFocus=!1}__extends(a,b);var e=a.prototype;e.init=function(a){this._text=a;this.stageText=c.StageText.create();this.stageText._setTextField(this._text)};e._addStageText=function(){this._text._inputEnabled||(this._text._touchEnabled=!0);this.stageText._add();this.stageText._addListeners();this.stageText.addEventListener("updateText",this.updateTextHandler,this);this._text.addEventListener(c.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,
this);c.MainContext.instance.stage.addEventListener(c.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this);this.stageText.addEventListener("blur",this.blurHandler,this);this.stageText.addEventListener("focus",this.focusHandler,this)};e._removeStageText=function(){this._text._inputEnabled||(this._text._touchEnabled=!1);this.stageText._remove();this.stageText._removeListeners();this.stageText._removeInput();this.stageText.removeEventListener("updateText",this.updateTextHandler,this);this._text.removeEventListener(c.TouchEvent.TOUCH_BEGIN,
this.onMouseDownHandler,this);c.MainContext.instance.stage.removeEventListener(c.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this);this.stageText.removeEventListener("blur",this.blurHandler,this);this.stageText.removeEventListener("focus",this.focusHandler,this)};e._getText=function(){return this.stageText._getText()};e._setText=function(a){this.stageText._setText(a)};e.focusHandler=function(a){this._isFocus=!0;this._text._isTyping=!0};e.blurHandler=function(a){this._isFocus=!1;this._text._isTyping=
!1};e.onMouseDownHandler=function(a){a.stopPropagation();this._text._visible&&!this._isFocus&&(this._isFocus=!0,this.stageText._show(this._text._multiline,this._text.size,this._text.width,this._text.height,0),a=this._text.localToGlobal(),this.stageText._initElement(a.x,a.y,this._text._worldTransform.a,this._text._worldTransform.d))};e.onStageDownHandler=function(a){this.stageText._hide()};e.updateTextHandler=function(a){this.resetText();this._text.dispatchEvent(new c.Event(c.Event.CHANGE))};e.resetText=
function(){this._text._setBaseText(this.stageText._getText())};e._hideInput=function(){this.stageText._removeInput()};e._updateTransform=function(){this._text._updateBaseTransform();!this._text._visible&&this.stageText&&this._hideInput()};e._updateProperties=function(){if(!this._isFocus){var a=this._text._stage;if(null==a)this.stageText._setVisible(!1);else{for(var b=this._text,e=b._visible;e;){b=b.parent;if(b==a)break;e=b._visible}this.stageText._setVisible(e)}this.stageText._setMultiline(this._text._multiline);
this.stageText._setTextType(this._text._displayAsPassword?"password":"text");this.stageText._setText(this._text._text);this.stageText._resetStageText()}this._updateTransform()};return a}(c.HashObject);c.InputController=d;d.prototype.__class__="egret.InputController"})(egret||(egret={}));
(function(c){var d=function(b){function a(a,e){b.call(this,a);this.firstCharHeight=0;"string"==typeof e?this.charList=this.parseConfig(e):e&&e.hasOwnProperty("frames")?this.charList=e.frames:this.charList={}}__extends(a,b);var e=a.prototype;e.getTexture=function(a){var b=this._textureMap[a];if(!b){b=this.charList[a];if(!b)return null;b=this.createTexture(a,b.x,b.y,b.w,b.h,b.offX,b.offY,b.sourceW,b.sourceH);this._textureMap[a]=b}return b};e._getFirstCharHeight=function(){if(0==this.firstCharHeight)for(var a in this.charList){var b=
this.charList[a];if(b){var e=b.sourceH;void 0===e&&(e=b.h,void 0===e&&(e=0),b=b.offY,void 0===b&&(b=0),e+=b);if(!(0>=e)){this.firstCharHeight=e;break}}}return this.firstCharHeight};e.parseConfig=function(a){a=a.split("\r\n").join("\n");a=a.split("\n");for(var b=this.getConfigByKey(a[3],"count"),e={},c=4;c<4+b;c++){var d=a[c],m=String.fromCharCode(this.getConfigByKey(d,"id")),n={};e[m]=n;n.x=this.getConfigByKey(d,"x");n.y=this.getConfigByKey(d,"y");n.w=this.getConfigByKey(d,"width");n.h=this.getConfigByKey(d,
"height");n.offX=this.getConfigByKey(d,"xoffset");n.offY=this.getConfigByKey(d,"yoffset")}return e};e.getConfigByKey=function(a,b){for(var e=a.split(" "),c=0,d=e.length;c<d;c++){var m=e[c];if(b==m.substring(0,b.length))return e=m.substring(b.length+1),parseInt(e)}return 0};return a}(c.SpriteSheet);c.BitmapFont=d;d.prototype.__class__="egret.BitmapFont"})(egret||(egret={}));
(function(c){var d=function(b){function a(a){b.call(this);this._isAddedToStage=!1;this._frames=this._movieClipData=this._textureToRender=null;this._totalFrames=0;this._frameLabels=null;this._frameIntervalTime=0;this._eventPool=null;this._isPlaying=!1;this._isStopped=!0;this._passedTime=this._displayedKeyFrameNum=this._nextFrameNum=this._currentFrameNum=this._playTimes=0;this._setMovieClipData(a);this.needDraw=!0}__extends(a,b);var e=a.prototype;e._init=function(){this._reset();var a=this._movieClipData;
a&&a._isDataValid()&&(this._frames=a.frames,this._totalFrames=a.numFrames,this._frameLabels=a.labels,this._frameIntervalTime=1E3/a.frameRate,this._initFrame())};e._reset=function(){this._frames=null;this._playTimes=0;this._isPlaying=!1;this.setIsStopped(!0);this._currentFrameNum=0;this._nextFrameNum=1;this._passedTime=this._displayedKeyFrameNum=0;this._eventPool=[]};e._initFrame=function(){this._movieClipData._isTextureValid()&&(this._advanceFrame(),this._constructFrame())};e._render=function(b){var e=
this._textureToRender;if(this._texture_to_render=e){var c=Math.round(e._offsetX),d=Math.round(e._offsetY),k=e._bitmapWidth||e._textureWidth,m=e._bitmapHeight||e._textureHeight,n=Math.round(k),p=Math.round(m);a.renderFilter.drawImage(b,this,e._bitmapX,e._bitmapY,k,m,c,d,n,p)}};e._measureBounds=function(){var a=this._textureToRender;return a?c.Rectangle.identity.initialize(a._offsetX,a._offsetY,a._textureWidth,a._textureHeight):b.prototype._measureBounds.call(this)};e._onAddToStage=function(){b.prototype._onAddToStage.call(this);
this._isAddedToStage=!0;this._isPlaying&&1<this._totalFrames&&this.setIsStopped(!1)};e._onRemoveFromStage=function(){b.prototype._onRemoveFromStage.call(this);this._isAddedToStage=!1;this.setIsStopped(!0)};e._getFrameLabelByName=function(a,b){void 0===b&&(b=!1);b&&(a=a.toLowerCase());var e=this._frameLabels;if(e)for(var c=null,d=0;d<e.length;d++)if(c=e[d],b?c.name.toLowerCase()===a:c.name===a)return c;return null};e._getFrameLabelByFrame=function(a){var b=this._frameLabels;if(b)for(var e=null,c=0;c<
b.length;c++)if(e=b[c],e.frame===a)return e;return null};e._getFrameLabelForFrame=function(a){var b=null,e=null,c=this._frameLabels;if(c)for(var d=0;d<c.length;d++){e=c[d];if(e.frame>a)break;b=e}return b};e.play=function(a){void 0===a&&(a=0);this._isPlaying=!0;this.setPlayTimes(a);1<this._totalFrames&&this._isAddedToStage&&this.setIsStopped(!1)};e.stop=function(){this._isPlaying=!1;this.setIsStopped(!0)};e.prevFrame=function(){this.gotoAndStop(this._currentFrameNum-1)};e.nextFrame=function(){this.gotoAndStop(this._currentFrameNum+
1)};e.gotoAndPlay=function(a,b){void 0===b&&(b=0);if(0===arguments.length||2<arguments.length)throw Error(c.getString(1022,"MovieClip.gotoAndPlay()"));this.play(b);this._gotoFrame(a)};e.gotoAndStop=function(a){if(1!=arguments.length)throw Error(c.getString(1022,"MovieClip.gotoAndStop()"));this.stop();this._gotoFrame(a)};e._gotoFrame=function(a){var b;if("string"===typeof a)b=this._getFrameLabelByName(a).frame;else if(b=parseInt(a+"",10),b!=a)throw Error(c.getString(1022,"Frame Label Not Found"));
1>b?b=1:b>this._totalFrames&&(b=this._totalFrames);b!==this._nextFrameNum&&(this._nextFrameNum=b,this._advanceFrame(),this._constructFrame(),this._handlePendingEvent())};e._advanceTime=function(a){var b=this._frameIntervalTime;a=this._passedTime+a;this._passedTime=a%b;b=a/b;if(!(1>b)){for(;1<=b;){b--;this._nextFrameNum++;if(this._nextFrameNum>this._totalFrames)if(-1==this._playTimes)this._eventPool.push(c.Event.LOOP_COMPLETE),this._nextFrameNum=1;else if(this._playTimes--,0<this._playTimes)this._eventPool.push(c.Event.LOOP_COMPLETE),
this._nextFrameNum=1;else{this._nextFrameNum=this._totalFrames;this._eventPool.push(c.Event.COMPLETE);this.stop();break}this._advanceFrame()}this._constructFrame();this._handlePendingEvent()}};e._advanceFrame=function(){this._currentFrameNum=this._nextFrameNum};e._constructFrame=function(){var a=this._currentFrameNum;this._displayedKeyFrameNum!=a&&(this._textureToRender=this._movieClipData.getTextureByFrame(a),this._displayedKeyFrameNum=a)};e._handlePendingEvent=function(){if(0!=this._eventPool.length){this._eventPool.reverse();
for(var a=this._eventPool,b=a.length,e=!1,d=!1,k=0;k<b;k++){var m=a.pop();m==c.Event.LOOP_COMPLETE?d=!0:m==c.Event.COMPLETE?e=!0:this.dispatchEventWith(m)}d&&this.dispatchEventWith(c.Event.LOOP_COMPLETE);e&&this.dispatchEventWith(c.Event.COMPLETE)}};Object.defineProperty(e,"totalFrames",{get:function(){return this._totalFrames},enumerable:!0,configurable:!0});Object.defineProperty(e,"currentFrame",{get:function(){return this._currentFrameNum},enumerable:!0,configurable:!0});Object.defineProperty(e,
"currentFrameLabel",{get:function(){var a=this._getFrameLabelByFrame(this._currentFrameNum);return a&&a.name},enumerable:!0,configurable:!0});Object.defineProperty(e,"currentLabel",{get:function(){var a=this._getFrameLabelForFrame(this._currentFrameNum);return a?a.name:null},enumerable:!0,configurable:!0});Object.defineProperty(e,"frameRate",{get:function(){return this.movieClipData.frameRate},set:function(a){a!=this._movieClipData.frameRate&&(this._movieClipData.frameRate=a,this._frameIntervalTime=
1E3/this._movieClipData.frameRate)},enumerable:!0,configurable:!0});Object.defineProperty(e,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0});Object.defineProperty(e,"movieClipData",{get:function(){return this._movieClipData},set:function(a){this._setMovieClipData(a)},enumerable:!0,configurable:!0});e._setMovieClipData=function(a){this._movieClipData!=a&&(this._movieClipData=a,this._init())};e.setPlayTimes=function(a){if(0>a||1<=a)this._playTimes=0>a?-1:Math.floor(a)};
e.setIsStopped=function(a){this._isStopped!=a&&((this._isStopped=a)?(this._playTimes=0,c.Ticker.getInstance().unregister(this._advanceTime,this)):(this._playTimes=0==this._playTimes?1:this._playTimes,c.Ticker.getInstance().register(this._advanceTime,this)))};a.renderFilter=c.RenderFilter.getInstance();return a}(c.DisplayObject);c.MovieClip=d;d.prototype.__class__="egret.MovieClip"})(egret||(egret={}));
(function(c){var d=function(b){function a(a,e){b.call(this);this._name=a;this._frame=e|0}__extends(a,b);var e=a.prototype;Object.defineProperty(e,"name",{get:function(){return this._name},enumerable:!0,configurable:!0});Object.defineProperty(e,"frame",{get:function(){return this._frame},enumerable:!0,configurable:!0});e.clone=function(){return new a(this._name,this._frame)};return a}(c.EventDispatcher);c.FrameLabel=d;d.prototype.__class__="egret.FrameLabel"})(egret||(egret={}));
(function(c){var d=function(b){function a(){b.call(this);this._mcData=null;this.numFrames=1;this.frames=[];this.labels=null;this.frameRate=0;this.spriteSheet=this.textureData=null}__extends(a,b);var e=a.prototype;e._init=function(a,b,e){this.textureData=b;this.spriteSheet=e;this._setMCData(a)};e.getKeyFrameData=function(a){a=this.frames[a-1];a.frame&&(a=this.frames[a.frame-1]);return a};e.getTextureByFrame=function(a){a=this.getKeyFrameData(a);if(a.res){var b=this.getTextureByResName(a.res);b._offsetX=
a.x|0;b._offsetY=a.y|0;return b}return null};e.getTextureByResName=function(a){var b=this.spriteSheet.getTexture(a);b||(b=this.textureData[a],b=this.spriteSheet.createTexture(a,b.x,b.y,b.w,b.h));return b};e._isDataValid=function(){return 0<this.frames.length};e._isTextureValid=function(){return null!=this.textureData&&null!=this.spriteSheet};e._fillMCData=function(a){this.frameRate=a.frameRate||24;this._fillFramesData(a.frames);this._fillFrameLabelsData(a.labels)};e._fillFramesData=function(a){for(var b=
this.frames,e=a?a.length:0,c,d=0;d<e;d++)if(c=a[d],b.push(c),c.duration){var m=parseInt(c.duration);if(1<m){c=b.length;for(var n=1;n<m;n++)b.push({frame:c})}}this.numFrames=b.length};e._fillFrameLabelsData=function(a){if(a){var b=a.length;if(0<b){this.labels=[];for(var e=0;e<b;e++){var d=a[e];this.labels.push(new c.FrameLabel(d.name,d.frame))}}}};Object.defineProperty(e,"mcData",{get:function(){return this._mcData},set:function(a){this._setMCData(a)},enumerable:!0,configurable:!0});e._setMCData=function(a){this._mcData!=
a&&(this._mcData=a)&&this._fillMCData(a)};return a}(c.HashObject);c.MovieClipData=d;d.prototype.__class__="egret.MovieClipData"})(egret||(egret={}));
(function(c){var d=function(b){function a(a,e){b.call(this);this.enableCache=!0;this._mcDataCache={};this._mcDataSet=a;this.setTexture(e)}__extends(a,b);var e=a.prototype;e.clearCache=function(){this._mcDataCache={}};e.generateMovieClipData=function(a){void 0===a&&(a="");if(""==a&&this._mcDataSet)for(a in this._mcDataSet.mc)break;if(""==a)return null;var b=this._findFromCache(a,this._mcDataCache);b||(b=new c.MovieClipData,this._fillData(a,b,this._mcDataCache));return b};e._findFromCache=function(a,
b){return this.enableCache&&b[a]?b[a]:null};e._fillData=function(a,b,e){if(this._mcDataSet){var c=this._mcDataSet.mc[a];c&&(b._init(c,this._mcDataSet.res,this._spriteSheet),this.enableCache&&(e[a]=b))}};Object.defineProperty(e,"mcDataSet",{get:function(){return this._mcDataSet},set:function(a){this._mcDataSet=a},enumerable:!0,configurable:!0});Object.defineProperty(e,"texture",{set:function(a){this.setTexture(a)},enumerable:!0,configurable:!0});Object.defineProperty(e,"spriteSheet",{get:function(){return this._spriteSheet},
enumerable:!0,configurable:!0});e.setTexture=function(a){this._spriteSheet=a?new c.SpriteSheet(a):null};return a}(c.EventDispatcher);c.MovieClipDataFactory=d;d.prototype.__class__="egret.MovieClipDataFactory"})(egret||(egret={}));
(function(c){var d=function(b){function a(){b.call(this);this._scaleY=this._scaleX=1;this._size=30;this._color="#FFFFFF";this._fontFamily="Arial";this._italic=this._bold=!1;this._textAlign="left";this._verticalAlign="top";this._visible=!1;this._height=this._width=0;this._multiline=!1;this._maxChars=0}__extends(a,b);var e=a.prototype;e._setTextField=function(a){this._textfield=a};e._getText=function(){return null};e._setText=function(a){};e._setTextType=function(a){};e._getTextType=function(){return null};
e._open=function(a,b,e,c){};e._show=function(a,b,e,c,d){};e._setOppositeSelectionEnd=function(a){};e._add=function(){};e._remove=function(){};e._hide=function(){};e._addListeners=function(){};e._removeListeners=function(){};e._setScale=function(a,b){this._scaleX=a;this._scaleY=b};e.changePosition=function(a,b){};e._setSize=function(a){this._size=a};e._setTextColor=function(a){this._color=a};e._setTextFontFamily=function(a){this._fontFamily=a};e._setBold=function(a){this._bold=a};e._setItalic=function(a){this._italic=
a};e._setTextAlign=function(a){this._textAlign=a};e._setVerticalAlign=function(a){this._verticalAlign=a};e._setVisible=function(a){this._visible=a};e._setWidth=function(a){this._width=a};e._setHeight=function(a){this._height=a};e._setMultiline=function(a){this._multiline=a};e._setMaxChars=function(a){this._maxChars=a};e._resetStageText=function(){};e._initElement=function(a,b,e,c){};e._removeInput=function(){};a.create=function(){return null};return a}(c.EventDispatcher);c.StageText=d;d.prototype.__class__=
"egret.StageText"})(egret||(egret={}));(function(c){var d=function(){function b(){}b.GET="get";b.POST="post";return b}();c.URLRequestMethod=d;d.prototype.__class__="egret.URLRequestMethod"})(egret||(egret={}));(function(c){var d=function(){function b(){}b.BINARY="binary";b.TEXT="text";b.VARIABLES="variables";b.TEXTURE="texture";b.SOUND="sound";return b}();c.URLLoaderDataFormat=d;d.prototype.__class__="egret.URLLoaderDataFormat"})(egret||(egret={}));
(function(c){var d=function(b){function a(a){void 0===a&&(a=null);b.call(this);this.variables=null;null!==a&&this.decode(a)}__extends(a,b);var e=a.prototype;e.decode=function(a){this.variables||(this.variables={});a=a.split("+").join(" ");for(var b,e=/[?&]?([^=]+)=([^&]*)/g;b=e.exec(a);){var c=decodeURIComponent(b[1]);b=decodeURIComponent(b[2]);if(!1==c in this.variables)this.variables[c]=b;else{var d=this.variables[c];d instanceof Array?d.push(b):this.variables[c]=[d,b]}}};e.toString=function(){if(!this.variables)return"";
var a=this.variables,b=[],e;for(e in a)b.push(this.encodeValue(e,a[e]));return b.join("&")};e.encodeValue=function(a,b){return b instanceof Array?this.encodeArray(a,b):encodeURIComponent(a)+"="+encodeURIComponent(b)};e.encodeArray=function(a,b){return a?0==b.length?encodeURIComponent(a)+"=":b.map(function(b){return encodeURIComponent(a)+"="+encodeURIComponent(b)}).join("&"):""};return a}(c.HashObject);c.URLVariables=d;d.prototype.__class__="egret.URLVariables"})(egret||(egret={}));
(function(c){var d=function(){return function(b,a){this.value=this.name="";this.name=b;this.value=a}}();c.URLRequestHeader=d;d.prototype.__class__="egret.URLRequestHeader"})(egret||(egret={}));(function(c){var d=function(b){function a(a){void 0===a&&(a=null);b.call(this);this.data=null;this.method=c.URLRequestMethod.GET;this.url="";this.url=a}__extends(a,b);return a}(c.HashObject);c.URLRequest=d;d.prototype.__class__="egret.URLRequest"})(egret||(egret={}));
(function(c){var d=function(b){function a(a){void 0===a&&(a=null);b.call(this);this.dataFormat=c.URLLoaderDataFormat.TEXT;this._request=this.data=null;this._status=-1;a&&this.load(a)}__extends(a,b);var e=a.prototype;e.load=function(a){this._request=a;this.data=null;c.MainContext.instance.netContext.proceed(this)};e.__recycle=function(){this.data=this._request=null};return a}(c.EventDispatcher);c.URLLoader=d;d.prototype.__class__="egret.URLLoader"})(egret||(egret={}));
(function(c){var d=function(b){function a(){b.call(this);this._sourceHeight=this._sourceWidth=this._textureHeight=this._textureWidth=this._offsetY=this._offsetX=this._bitmapHeight=this._bitmapWidth=this._bitmapY=this._bitmapX=0;this._bitmapData=null}__extends(a,b);var e=a.prototype;Object.defineProperty(e,"textureWidth",{get:function(){return this._textureWidth},enumerable:!0,configurable:!0});Object.defineProperty(e,"textureHeight",{get:function(){return this._textureHeight},enumerable:!0,configurable:!0});
Object.defineProperty(e,"bitmapData",{get:function(){return this._bitmapData},enumerable:!0,configurable:!0});e._setBitmapData=function(a){var b=c.MainContext.instance.rendererContext._texture_scale_factor;this._bitmapData=a;this._sourceWidth=a.width;this._sourceHeight=a.height;this._textureWidth=this._sourceWidth*b;this._textureHeight=this._sourceHeight*b;this._bitmapWidth=this._textureWidth;this._bitmapHeight=this._textureHeight;this._offsetX=this._offsetY=this._bitmapX=this._bitmapY=0};e.getPixel32=
function(a,b){return this._bitmapData.getContext("2d").getImageData(a,b,1,1).data};return a}(c.HashObject);c.Texture=d;d.prototype.__class__="egret.Texture"})(egret||(egret={}));
(function(c){var d=function(b){function a(){b.call(this)}__extends(a,b);var e=a.prototype;e.init=function(){this._bitmapData=document.createElement("canvas");this.renderContext=c.RendererContext.createRendererContext(this._bitmapData)};e.drawToTexture=function(b,e,d){var l=e||b.getBounds(c.Rectangle.identity);if(0==l.width||0==l.height)return!1;this._bitmapData||this.init();var k=l.x,m=l.y;e=l.width;var l=l.height,n=c.MainContext.instance.rendererContext._texture_scale_factor,l=l/n;e=Math.round(e/
n);l=Math.round(l);this.setSize(e,l);this.begin();b._worldTransform.identity();b._worldTransform.a=1/n;b._worldTransform.d=1/n;d&&(b._worldTransform.a*=d,b._worldTransform.d*=d);d=b._anchorOffsetX;var p=b._anchorOffsetY;if(0!=b._anchorX||0!=b._anchorY)d=b._anchorX*e,p=b._anchorY*l;this._offsetX=k+d;this._offsetY=m+p;b._worldTransform.append(1,0,0,1,-this._offsetX,-this._offsetY);b.worldAlpha=1;if(b instanceof c.DisplayObjectContainer)for(k=b._children,m=0,d=k.length;m<d;m++)k[m]._updateTransform();
this.renderContext.setTransform(b._worldTransform);k=c.RenderFilter.getInstance();m=k._drawAreaList.concat();k._drawAreaList.length=0;this.renderContext.clearScreen();this.renderContext.onRenderStart();c.RendererContext.deleteTexture(this);b._filter&&this.renderContext.setGlobalFilter(b._filter);b._colorTransform&&this.renderContext.setGlobalColorTransform(b._colorTransform.matrix);(d=b.mask||b._scrollRect)&&this.renderContext.pushMask(d);p=c.MainContext.__use_new_draw;c.MainContext.__use_new_draw=
!1;b._render(this.renderContext);c.MainContext.__use_new_draw=p;d&&this.renderContext.popMask();b._colorTransform&&this.renderContext.setGlobalColorTransform(null);b._filter&&this.renderContext.setGlobalFilter(null);a.identityRectangle.width=e;a.identityRectangle.height=l;k.addDrawArea(a.identityRectangle);this.renderContext.onRenderFinish();k._drawAreaList=m;this._sourceWidth=e;this._sourceHeight=l;this._textureWidth=this._sourceWidth*n;this._textureHeight=this._sourceHeight*n;this.end();return!0};
e.setSize=function(a,b){var e=this._bitmapData;e.width=a;e.height=b;e.style.width=a+"px";e.style.height=b+"px";this.renderContext._cacheCanvas&&(this.renderContext._cacheCanvas.width=a,this.renderContext._cacheCanvas.height=b)};e.begin=function(){};e.end=function(){};e.dispose=function(){this._bitmapData&&(this.renderContext=this._bitmapData=null)};a.identityRectangle=new c.Rectangle;return a}(c.Texture);c.RenderTexture=d;d.prototype.__class__="egret.RenderTexture"})(egret||(egret={}));
(function(c){var d=function(b){function a(){b.call(this);this.renderCost=0;this._texture_scale_factor=1;this.profiler=c.Profiler.getInstance();a.blendModesForGL||a.initBlendMode()}__extends(a,b);var e=a.prototype;Object.defineProperty(e,"texture_scale_factor",{get:function(){return this._texture_scale_factor},set:function(a){this._setTextureScaleFactor(a)},enumerable:!0,configurable:!0});e._setTextureScaleFactor=function(a){this._texture_scale_factor=a};e.clearScreen=function(){};e.clearRect=function(a,
b,e,c){};e.drawImage=function(a,b,e,c,d,m,n,p,r,s){this.profiler.onDrawImage()};e.drawImageScale9=function(a,b,e,c,d,m,n,p,r,s){return!1};e._addOneDraw=function(){this.profiler.onDrawImage()};e.setTransform=function(a){};e.setAlpha=function(a,b){};e.setupFont=function(a,b){};e.measureText=function(a){return 0};e.drawText=function(a,b,e,c,d,m){this.profiler.onDrawImage()};e.strokeRect=function(a,b,e,c,d){};e.pushMask=function(a){};e.popMask=function(){};e.onRenderStart=function(){};e.onRenderFinish=
function(){};e.setGlobalColorTransform=function(a){};e.setGlobalFilter=function(a){};e.drawCursor=function(a,b,e,c){};a.createRendererContext=function(a){return null};a.deleteTexture=function(a){var b=c.MainContext.instance.rendererContext.gl;if(a=a._bitmapData){var e=a.webGLTexture;if(e&&b)for(var d in e)b.deleteTexture(e[d]);a.webGLTexture=null}};a.initBlendMode=function(){a.blendModesForGL={};a.blendModesForGL[c.BlendMode.NORMAL]=[1,771];a.blendModesForGL[c.BlendMode.ADD]=[770,1];a.blendModesForGL[c.BlendMode.ERASE]=
[0,771];a.blendModesForGL[c.BlendMode.ERASE_REVERSE]=[0,770]};a.registerBlendModeForGL=function(b,e,d,l){a.blendModesForGL[b]&&!l?c.Logger.warningWithErrorId(1005,b):a.blendModesForGL[b]=[e,d]};a.imageSmoothingEnabled=!0;a.blendModesForGL=null;return a}(c.HashObject);c.RendererContext=d;d.prototype.__class__="egret.RendererContext"})(egret||(egret={}));
(function(c){var d=function(){function b(){}b.MOUSE="mouse";b.TOUCH="touch";b.mode="touch";return b}();c.InteractionMode=d;d.prototype.__class__="egret.InteractionMode"})(egret||(egret={}));
(function(c){var d=function(b){function a(){b.call(this);this._currentTouchTarget={};this.maxTouches=2;this.touchDownTarget={};this.touchingIdentifiers=[];this.lastTouchY=this.lastTouchX=-1}__extends(a,b);var e=a.prototype;e.run=function(){};e.getTouchData=function(a,b,e){var c=this._currentTouchTarget[a];null==c&&(c={},this._currentTouchTarget[a]=c);c.stageX=b;c.stageY=e;c.identifier=a;return c};e.dispatchEvent=function(a,b){c.TouchEvent.dispatchTouchEvent(b.target,a,b.identifier,b.stageX,b.stageY,
!1,!1,!1,!0==this.touchDownTarget[b.identifier])};e.onTouchBegan=function(a,b,e){if(this.touchingIdentifiers.length!=this.maxTouches){var d=c.MainContext.instance.stage.hitTest(a,b);d&&(a=this.getTouchData(e,a,b),this.touchDownTarget[e]=!0,a.target=d,a.beginTarget=d,this.dispatchEvent(c.TouchEvent.TOUCH_BEGIN,a));this.touchingIdentifiers.push(e)}};e.onTouchMove=function(a,b,e){if(-1!=this.touchingIdentifiers.indexOf(e)&&(a!=this.lastTouchX||b!=this.lastTouchY)){this.lastTouchX=a;this.lastTouchY=b;
var d=c.MainContext.instance.stage.hitTest(a,b);d&&(a=this.getTouchData(e,a,b),a.target=d,this.dispatchEvent(c.TouchEvent.TOUCH_MOVE,a))}};e.onTouchEnd=function(a,b,e){var d=this.touchingIdentifiers.indexOf(e);-1!=d&&(this.touchingIdentifiers.splice(d,1),d=c.MainContext.instance.stage.hitTest(a,b))&&(a=this.getTouchData(e,a,b),delete this.touchDownTarget[e],e=a.beginTarget,a.target=d,this.dispatchEvent(c.TouchEvent.TOUCH_END,a),e==d?this.dispatchEvent(c.TouchEvent.TOUCH_TAP,a):a.beginTarget&&(a.target=
a.beginTarget,this.dispatchEvent(c.TouchEvent.TOUCH_RELEASE_OUTSIDE,a)),delete this._currentTouchTarget[a.identifier])};return a}(c.HashObject);c.TouchContext=d;d.prototype.__class__="egret.TouchContext"})(egret||(egret={}));
(function(c){var d=function(b){function a(){b.call(this)}__extends(a,b);var e=a.prototype;e.proceed=function(a){};a._getUrl=function(a){var b=a.url;-1==b.indexOf("?")&&a.method==c.URLRequestMethod.GET&&a.data&&a.data instanceof c.URLVariables&&(b=b+"?"+a.data.toString());return b};e.getChangeList=function(){return[]};return a}(c.HashObject);c.NetContext=d;d.prototype.__class__="egret.NetContext"})(egret||(egret={}));
(function(c){var d=function(b){function a(){b.call(this);this.frameRate=60}__extends(a,b);a.prototype.executeMainLoop=function(a,b){};return a}(c.HashObject);c.DeviceContext=d;d.prototype.__class__="egret.DeviceContext"})(egret||(egret={}));(function(c){var d=function(){function b(){}b.call=function(a,b){};b.addCallback=function(a,b){};return b}();c.ExternalInterface=d;d.prototype.__class__="egret.ExternalInterface"})(egret||(egret={}));
(function(c){var d=function(b){function a(){b.call(this);this.trans=null;this.header="";this.ua=navigator.userAgent.toLowerCase();this.trans=this.getTrans("transform")}__extends(a,b);var e=a.prototype;a.getInstance=function(){null==a.instance&&(a.instance=new a);return a.instance};Object.defineProperty(e,"isMobile",{get:function(){c.Logger.warningWithErrorId(1E3);return c.MainContext.deviceType==c.MainContext.DEVICE_MOBILE},enumerable:!0,configurable:!0});e.getTrans=function(a){""==this.header&&(this.header=
this.getHeader());return this.header+a.substring(1,a.length)};e.getHeader=function(){for(var a=document.createElement("div").style,b=["t","webkitT","msT","MozT","OT"],e=0;e<b.length;e++)if(b[e]+"ransform"in a)return b[e];return b[0]};e.$new=function(a){return this.$(document.createElement(a))};e.$=function(b){var e=document;if(b=b instanceof HTMLElement?b:e.querySelector(b))b.find=b.find||this.$,b.hasClass=b.hasClass||function(a){return this.className.match(new RegExp("(\\s|^)"+a+"(\\s|$)"))},b.addClass=
b.addClass||function(a){this.hasClass(a)||(this.className&&(this.className+=" "),this.className+=a);return this},b.removeClass=b.removeClass||function(a){this.hasClass(a)&&(this.className=this.className.replace(a,""));return this},b.remove=b.remove||function(){},b.appendTo=b.appendTo||function(a){a.appendChild(this);return this},b.prependTo=b.prependTo||function(a){a.childNodes[0]?a.insertBefore(this,a.childNodes[0]):a.appendChild(this);return this},b.transforms=b.transforms||function(){this.style[a.getInstance().trans]=
a.getInstance().translate(this.position)+a.getInstance().rotate(this.rotation)+a.getInstance().scale(this.scale)+a.getInstance().skew(this.skew);return this},b.position=b.position||{x:0,y:0},b.rotation=b.rotation||0,b.scale=b.scale||{x:1,y:1},b.skew=b.skew||{x:0,y:0},b.translates=function(a,b){this.position.x=a;this.position.y=b-c.MainContext.instance.stage.stageHeight;this.transforms();return this},b.rotate=function(a){this.rotation=a;this.transforms();return this},b.resize=function(a,b){this.scale.x=
a;this.scale.y=b;this.transforms();return this},b.setSkew=function(a,b){this.skew.x=a;this.skew.y=b;this.transforms();return this};return b};e.translate=function(a){return"translate("+a.x+"px, "+a.y+"px) "};e.rotate=function(a){return"rotate("+a+"deg) "};e.scale=function(a){return"scale("+a.x+", "+a.y+") "};e.skew=function(a){return"skewX("+-a.x+"deg) skewY("+a.y+"deg)"};a.useCacheAsBitmap=!0;return a}(c.HashObject);c.Browser=d;d.prototype.__class__="egret.Browser"})(egret||(egret={}));
(function(c){(function(c){c.getItem=function(b){return null};c.setItem=function(b,a){return!1};c.removeItem=function(b){};c.clear=function(){}})(c.localStorage||(c.localStorage={}))})(egret||(egret={}));
(function(c){var d=function(){function b(){}b.parse=function(a){a=c.SAXParser.getInstance().parserXML(a);if(!a||!a.childNodes)return null;for(var e=a.childNodes.length,d=!1,h=0;h<e;h++){var g=a.childNodes[h];if(1==g.nodeType){d=!0;break}}return d?b.parseNode(g):null};b.parseNode=function(a){if(!a||1!=a.nodeType)return null;var e={};e.localName=a.localName;e.name=a.nodeName;a.namespaceURI&&(e.namespace=a.namespaceURI);a.prefix&&(e.prefix=a.prefix);for(var c=a.attributes,d=c.length,g=0;g<d;g++){var l=
c[g],k=l.name;0!=k.indexOf("xmlns:")&&(e["$"+k]=l.value)}c=a.childNodes;d=c.length;for(g=0;g<d;g++)if(l=b.parseNode(c[g]))e.children||(e.children=[]),l.parent=e,e.children.push(l);!e.children&&(a=a.textContent.trim())&&(e.text=a);return e};b.findChildren=function(a,e,c){c?c.length=0:c=[];b.findByPath(a,e,c);return c};b.findByPath=function(a,e,c){var d=e.indexOf("."),g;-1==d?(g=e,d=!0):(g=e.substring(0,d),e=e.substring(d+1),d=!1);if(a=a.children)for(var l=a.length,k=0;k<l;k++){var m=a[k];m.localName==
g&&(d?c.push(m):b.findByPath(m,e,c))}};b.getAttributes=function(a,b){b?b.length=0:b=[];for(var c in a)"$"==c.charAt(0)&&b.push(c.substring(1));return b};return b}();c.XML=d;d.prototype.__class__="egret.XML"})(egret||(egret={}));
(function(c){var d=function(){function a(){}a.LITTLE_ENDIAN="littleEndian";a.BIG_ENDIAN="bigEndian";return a}();c.Endian=d;d.prototype.__class__="egret.Endian";var b=function(){function a(a){this.BUFFER_EXT_SIZE=0;this.EOF_code_point=this.EOF_byte=-1;this._setArrayBuffer(a||new ArrayBuffer(this.BUFFER_EXT_SIZE));this.endian=d.BIG_ENDIAN}var b=a.prototype;b._setArrayBuffer=function(a){this.write_position=a.byteLength;this.data=new DataView(a);this._position=0};b.setArrayBuffer=function(a){};Object.defineProperty(b,
"buffer",{get:function(){return this.data.buffer},set:function(a){this.data=new DataView(a)},enumerable:!0,configurable:!0});Object.defineProperty(b,"dataView",{get:function(){return this.data},set:function(a){this.data=a;this.write_position=a.byteLength},enumerable:!0,configurable:!0});Object.defineProperty(b,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!0,configurable:!0});Object.defineProperty(b,"position",{get:function(){return this._position},set:function(a){this._position<
a&&!this.validate(a-this._position)||(this._position=a,this.write_position=a>this.write_position?a:this.write_position)},enumerable:!0,configurable:!0});Object.defineProperty(b,"length",{get:function(){return this.write_position},set:function(a){this.validateBuffer(a,!0)},enumerable:!0,configurable:!0});Object.defineProperty(b,"bytesAvailable",{get:function(){return this.data.byteLength-this._position},enumerable:!0,configurable:!0});b.clear=function(){this._setArrayBuffer(new ArrayBuffer(this.BUFFER_EXT_SIZE))};
b.readBoolean=function(){return this.validate(a.SIZE_OF_BOOLEAN)?0!=this.data.getUint8(this.position++):null};b.readByte=function(){return this.validate(a.SIZE_OF_INT8)?this.data.getInt8(this.position++):null};b.readBytes=function(b,e,c){void 0===e&&(e=0);void 0===c&&(c=0);if(0==c)c=this.bytesAvailable;else if(!this.validate(c))return null;b?b.validateBuffer(c):b=new a(new ArrayBuffer(c));for(var d=0;d<c;d++)b.data.setUint8(d+e,this.data.getUint8(this.position++))};b.readDouble=function(){if(!this.validate(a.SIZE_OF_FLOAT64))return null;
var b=this.data.getFloat64(this.position,this.endian==d.LITTLE_ENDIAN);this.position+=a.SIZE_OF_FLOAT64;return b};b.readFloat=function(){if(!this.validate(a.SIZE_OF_FLOAT32))return null;var b=this.data.getFloat32(this.position,this.endian==d.LITTLE_ENDIAN);this.position+=a.SIZE_OF_FLOAT32;return b};b.readInt=function(){if(!this.validate(a.SIZE_OF_INT32))return null;var b=this.data.getInt32(this.position,this.endian==d.LITTLE_ENDIAN);this.position+=a.SIZE_OF_INT32;return b};b.readMultiByte=function(a,
b){return this.validate(a)?"":null};b.readShort=function(){if(!this.validate(a.SIZE_OF_INT16))return null;var b=this.data.getInt16(this.position,this.endian==d.LITTLE_ENDIAN);this.position+=a.SIZE_OF_INT16;return b};b.readUnsignedByte=function(){return this.validate(a.SIZE_OF_UINT8)?this.data.getUint8(this.position++):null};b.readUnsignedInt=function(){if(!this.validate(a.SIZE_OF_UINT32))return null;var b=this.data.getUint32(this.position,this.endian==d.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT32;
return b};b.readUnsignedShort=function(){if(!this.validate(a.SIZE_OF_UINT16))return null;var b=this.data.getUint16(this.position,this.endian==d.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT16;return b};b.readUTF=function(){if(!this.validate(a.SIZE_OF_UINT16))return null;var b=this.data.getUint16(this.position,this.endian==d.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT16;return 0<b?this.readUTFBytes(b):""};b.readUTFBytes=function(a){if(!this.validate(a))return null;var b=new Uint8Array(this.buffer,
this.bufferOffset+this.position,a);this.position+=a;return this.decodeUTF8(b)};b.writeBoolean=function(b){this.validateBuffer(a.SIZE_OF_BOOLEAN);this.data.setUint8(this.position++,b?1:0)};b.writeByte=function(b){this.validateBuffer(a.SIZE_OF_INT8);this.data.setInt8(this.position++,b)};b.writeBytes=function(a,b,e){void 0===b&&(b=0);void 0===e&&(e=0);if(!(0>b||0>e)&&(e=0==e?a.length-b:Math.min(a.length-b,e),0<e)){this.validateBuffer(e);a=new DataView(a.buffer);for(var c=b;c<e+b;c++)this.data.setUint8(this.position++,
a.getUint8(c))}};b.writeDouble=function(b){this.validateBuffer(a.SIZE_OF_FLOAT64);this.data.setFloat64(this.position,b,this.endian==d.LITTLE_ENDIAN);this.position+=a.SIZE_OF_FLOAT64};b.writeFloat=function(b){this.validateBuffer(a.SIZE_OF_FLOAT32);this.data.setFloat32(this.position,b,this.endian==d.LITTLE_ENDIAN);this.position+=a.SIZE_OF_FLOAT32};b.writeInt=function(b){this.validateBuffer(a.SIZE_OF_INT32);this.data.setInt32(this.position,b,this.endian==d.LITTLE_ENDIAN);this.position+=a.SIZE_OF_INT32};
b.writeShort=function(b){this.validateBuffer(a.SIZE_OF_INT16);this.data.setInt16(this.position,b,this.endian==d.LITTLE_ENDIAN);this.position+=a.SIZE_OF_INT16};b.writeUnsignedInt=function(b){this.validateBuffer(a.SIZE_OF_UINT32);this.data.setUint32(this.position,b,this.endian==d.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT32};b.writeUTF=function(b){b=this.encodeUTF8(b);var e=b.length;this.validateBuffer(a.SIZE_OF_UINT16+e);this.data.setUint16(this.position,e,this.endian===d.LITTLE_ENDIAN);this.position+=
a.SIZE_OF_UINT16;this._writeUint8Array(b,!1)};b.writeUTFBytes=function(a){this._writeUint8Array(this.encodeUTF8(a))};b.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable};b._writeUint8Array=function(a,b){void 0===b&&(b=!0);b&&this.validateBuffer(this.position+a.length);for(var e=0;e<a.length;e++)this.data.setUint8(this.position++,a[e])};b.validate=function(a){if(0<this.data.byteLength&&this._position+a<=this.data.byteLength)return!0;throw c.getString(1025);
};b.validateBuffer=function(a,b){void 0===b&&(b=!1);this.write_position=a>this.write_position?a:this.write_position;a+=this._position;if(this.data.byteLength<a||b){var e=new Uint8Array(new ArrayBuffer(a+this.BUFFER_EXT_SIZE)),c=Math.min(this.data.buffer.byteLength,a+this.BUFFER_EXT_SIZE);e.set(new Uint8Array(this.data.buffer,0,c));this.buffer=e.buffer}};b.encodeUTF8=function(a){var b=0;a=this.stringToCodePoints(a);for(var e=[];a.length>b;){var c=a[b++];if(this.inRange(c,55296,57343))this.encoderError(c);
else if(this.inRange(c,0,127))e.push(c);else{var d,m;this.inRange(c,128,2047)?(d=1,m=192):this.inRange(c,2048,65535)?(d=2,m=224):this.inRange(c,65536,1114111)&&(d=3,m=240);for(e.push(this.div(c,Math.pow(64,d))+m);0<d;){var n=this.div(c,Math.pow(64,d-1));e.push(128+n%64);d-=1}}}return new Uint8Array(e)};b.decodeUTF8=function(a){for(var b=0,e="",c,d=0,m=0,n=0,p=0;a.length>b;){c=a[b++];if(c===this.EOF_byte)c=0!==m?this.decoderError(!1):this.EOF_code_point;else if(0===m)this.inRange(c,0,127)||(this.inRange(c,
194,223)?(m=1,p=128,d=c-192):this.inRange(c,224,239)?(m=2,p=2048,d=c-224):this.inRange(c,240,244)?(m=3,p=65536,d=c-240):this.decoderError(!1),d*=Math.pow(64,m),c=null);else if(this.inRange(c,128,191))if(n+=1,d+=(c-128)*Math.pow(64,m-n),n!==m)c=null;else{var r=d,s=p,p=n=m=d=0;c=this.inRange(r,s,1114111)&&!this.inRange(r,55296,57343)?r:this.decoderError(!1,c)}else p=n=m=d=0,b--,c=this.decoderError(!1,c);null!==c&&c!==this.EOF_code_point&&(65535>=c?0<c&&(e+=String.fromCharCode(c)):(c-=65536,e+=String.fromCharCode(55296+
(c>>10&1023)),e+=String.fromCharCode(56320+(c&1023))))}return e};b.encoderError=function(a){throw c.getString(1026,a);};b.decoderError=function(a,b){if(a)throw c.getString(1027);return b||65533};b.inRange=function(a,b,e){return b<=a&&a<=e};b.div=function(a,b){return Math.floor(a/b)};b.stringToCodePoints=function(a){for(var b=[],e=0,c=a.length;e<a.length;){var d=a.charCodeAt(e);if(this.inRange(d,55296,57343))if(this.inRange(d,56320,57343))b.push(65533);else if(e===c-1)b.push(65533);else{var m=a.charCodeAt(e+
1);this.inRange(m,56320,57343)?(d&=1023,m&=1023,e+=1,b.push(65536+(d<<10)+m)):b.push(65533)}else b.push(d);e+=1}return b};a.SIZE_OF_BOOLEAN=1;a.SIZE_OF_INT8=1;a.SIZE_OF_INT16=2;a.SIZE_OF_INT32=4;a.SIZE_OF_UINT8=1;a.SIZE_OF_UINT16=2;a.SIZE_OF_UINT32=4;a.SIZE_OF_FLOAT32=4;a.SIZE_OF_FLOAT64=8;return a}();c.ByteArray=b;b.prototype.__class__="egret.ByteArray"})(egret||(egret={}));
(function(c){var d=function(b){function a(a,e,c){b.call(this);this._target=null;this.loop=this.ignoreGlobalPause=this._useTicks=!1;this._actions=this._steps=this.pluginData=null;this.paused=!1;this.duration=0;this._prevPos=-1;this.position=null;this._stepPosition=this._prevPosition=0;this.passive=!1;this.initialize(a,e,c)}__extends(a,b);var e=a.prototype;a.get=function(b,e,c,d){void 0===e&&(e=null);void 0===c&&(c=null);void 0===d&&(d=!1);d&&a.removeTweens(b);return new a(b,e,c)};a.removeTweens=function(b){if(b.tween_count){for(var e=
a._tweens,c=e.length-1;0<=c;c--)e[c]._target==b&&(e[c].paused=!0,e.splice(c,1));b.tween_count=0}};a.pauseTweens=function(a){if(a.tween_count)for(var b=c.Tween._tweens,e=b.length-1;0<=e;e--)b[e]._target==a&&(b[e].paused=!0)};a.resumeTweens=function(a){if(a.tween_count)for(var b=c.Tween._tweens,e=b.length-1;0<=e;e--)b[e]._target==a&&(b[e].paused=!1)};a.tick=function(b,e){void 0===e&&(e=!1);for(var c=a._tweens.concat(),d=c.length-1;0<=d;d--){var k=c[d];e&&!k.ignoreGlobalPause||k.paused||k.tick(k._useTicks?
1:b)}};a._register=function(b,e){var d=b._target,l=a._tweens;if(e)d&&(d.tween_count=0<d.tween_count?d.tween_count+1:1),l.push(b),a._inited||(c.Ticker.getInstance().register(a.tick,null),a._inited=!0);else for(d&&d.tween_count--,d=l.length;d--;)if(l[d]==b){l.splice(d,1);break}};a.removeAllTweens=function(){for(var b=a._tweens,e=0,c=b.length;e<c;e++){var d=b[e];d.paused=!0;d._target.tweenjs_count=0}b.length=0};e.initialize=function(b,e,c){this._target=b;e&&(this._useTicks=e.useTicks,this.ignoreGlobalPause=
e.ignoreGlobalPause,this.loop=e.loop,e.onChange&&this.addEventListener("change",e.onChange,e.onChangeObj),e.override&&a.removeTweens(b));this.pluginData=c||{};this._curQueueProps={};this._initQueueProps={};this._steps=[];this._actions=[];e&&e.paused?this.paused=!0:a._register(this,!0);e&&null!=e.position&&this.setPosition(e.position,a.NONE)};e.setPosition=function(a,b){void 0===b&&(b=1);0>a&&(a=0);var e=a,c=!1;e>=this.duration&&(this.loop?e%=this.duration:(e=this.duration,c=!0));if(e==this._prevPos)return c;
var d=this._prevPos;this.position=this._prevPos=e;this._prevPosition=a;if(this._target)if(c)this._updateTargetProps(null,1);else if(0<this._steps.length){for(var m=0,n=this._steps.length;m<n&&!(this._steps[m].t>e);m++);m=this._steps[m-1];this._updateTargetProps(m,(this._stepPosition=e-m.t)/m.d)}0!=b&&0<this._actions.length&&(this._useTicks?this._runActions(e,e):1==b&&e<d?(d!=this.duration&&this._runActions(d,this.duration),this._runActions(0,e,!0)):this._runActions(d,e));c&&this.setPaused(!0);this.dispatchEventWith("change");
return c};e._runActions=function(a,b,e){void 0===e&&(e=!1);var c=a,d=b,m=-1,n=this._actions.length,p=1;a>b&&(c=b,d=a,m=n,n=p=-1);for(;(m+=p)!=n;){b=this._actions[m];var r=b.t;(r==d||r>c&&r<d||e&&r==a)&&b.f.apply(b.o,b.p)}};e._updateTargetProps=function(b,e){var c,d,k,m;if(b||1!=e){if(this.passive=!!b.v)return;b.e&&(e=b.e(e,0,1,1));c=b.p0;d=b.p1}else this.passive=!1,c=d=this._curQueueProps;for(var n in this._initQueueProps){null==(k=c[n])&&(c[n]=k=this._initQueueProps[n]);null==(m=d[n])&&(d[n]=m=k);
k=k==m||0==e||1==e||"number"!=typeof k?1==e?m:k:k+(m-k)*e;var p=!1;if(m=a._plugins[n])for(var r=0,s=m.length;r<s;r++){var v=m[r].tween(this,n,k,c,d,e,!!b&&c==d,!b);v==a.IGNORE?p=!0:k=v}p||(this._target[n]=k)}};e.setPaused=function(b){this.paused=b;a._register(this,!b);return this};e._cloneProps=function(a){var b={},e;for(e in a)b[e]=a[e];return b};e._addStep=function(a){0<a.d&&(this._steps.push(a),a.t=this.duration,this.duration+=a.d);return this};e._appendQueueProps=function(b){var e,c,d,k,m,n;for(n in b)if(void 0===
this._initQueueProps[n]){c=this._target[n];if(e=a._plugins[n])for(d=0,k=e.length;d<k;d++)c=e[d].init(this,n,c);this._initQueueProps[n]=this._curQueueProps[n]=void 0===c?null:c}for(n in b){c=this._curQueueProps[n];if(e=a._plugins[n])for(m=m||{},d=0,k=e.length;d<k;d++)e[d].step&&e[d].step(this,n,c,b[n],m);this._curQueueProps[n]=b[n]}m&&this._appendQueueProps(m);return this._curQueueProps};e._addAction=function(a){a.t=this.duration;this._actions.push(a);return this};e._set=function(a,b){for(var e in a)b[e]=
a[e]};e.wait=function(a,b){if(null==a||0>=a)return this;var e=this._cloneProps(this._curQueueProps);return this._addStep({d:a,p0:e,p1:e,v:b})};e.to=function(a,b,e){void 0===e&&(e=void 0);if(isNaN(b)||0>b)b=0;return this._addStep({d:b||0,p0:this._cloneProps(this._curQueueProps),e:e,p1:this._cloneProps(this._appendQueueProps(a))})};e.call=function(a,b,e){void 0===b&&(b=void 0);void 0===e&&(e=void 0);return this._addAction({f:a,p:e?e:[],o:b?b:this._target})};e.set=function(a,b){void 0===b&&(b=null);
return this._addAction({f:this._set,o:this,p:[a,b?b:this._target]})};e.play=function(a){a||(a=this);return this.call(a.setPaused,a,[!1])};e.pause=function(a){a||(a=this);return this.call(a.setPaused,a,[!0])};e.tick=function(a){this.paused||this.setPosition(this._prevPosition+a)};a.NONE=0;a.LOOP=1;a.REVERSE=2;a._tweens=[];a.IGNORE={};a._plugins={};a._inited=!1;return a}(c.EventDispatcher);c.Tween=d;d.prototype.__class__="egret.Tween"})(egret||(egret={}));
(function(c){var d=function(){function b(){c.Logger.fatalWithErrorId(1014)}b.get=function(a){-1>a&&(a=-1);1<a&&(a=1);return function(b){return 0==a?b:0>a?b*(b*-a+1+a):b*((2-b)*a+(1-a))}};b.getPowIn=function(a){return function(b){return Math.pow(b,a)}};b.getPowOut=function(a){return function(b){return 1-Math.pow(1-b,a)}};b.getPowInOut=function(a){return function(b){return 1>(b*=2)?0.5*Math.pow(b,a):1-0.5*Math.abs(Math.pow(2-b,a))}};b.sineIn=function(a){return 1-Math.cos(a*Math.PI/2)};b.sineOut=function(a){return Math.sin(a*
Math.PI/2)};b.sineInOut=function(a){return-0.5*(Math.cos(Math.PI*a)-1)};b.getBackIn=function(a){return function(b){return b*b*((a+1)*b-a)}};b.getBackOut=function(a){return function(b){return--b*b*((a+1)*b+a)+1}};b.getBackInOut=function(a){a*=1.525;return function(b){return 1>(b*=2)?0.5*b*b*((a+1)*b-a):0.5*((b-=2)*b*((a+1)*b+a)+2)}};b.circIn=function(a){return-(Math.sqrt(1-a*a)-1)};b.circOut=function(a){return Math.sqrt(1- --a*a)};b.circInOut=function(a){return 1>(a*=2)?-0.5*(Math.sqrt(1-a*a)-1):0.5*
(Math.sqrt(1-(a-=2)*a)+1)};b.bounceIn=function(a){return 1-b.bounceOut(1-a)};b.bounceOut=function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375};b.bounceInOut=function(a){return 0.5>a?0.5*b.bounceIn(2*a):0.5*b.bounceOut(2*a-1)+0.5};b.getElasticIn=function(a,b){var c=2*Math.PI;return function(d){if(0==d||1==d)return d;var g=b/c*Math.asin(1/a);return-(a*Math.pow(2,10*(d-=1))*Math.sin((d-g)*c/b))}};b.getElasticOut=
function(a,b){var c=2*Math.PI;return function(d){if(0==d||1==d)return d;var g=b/c*Math.asin(1/a);return a*Math.pow(2,-10*d)*Math.sin((d-g)*c/b)+1}};b.getElasticInOut=function(a,b){var c=2*Math.PI;return function(d){var g=b/c*Math.asin(1/a);return 1>(d*=2)?-0.5*a*Math.pow(2,10*(d-=1))*Math.sin((d-g)*c/b):a*Math.pow(2,-10*(d-=1))*Math.sin((d-g)*c/b)*0.5+1}};b.quadIn=b.getPowIn(2);b.quadOut=b.getPowOut(2);b.quadInOut=b.getPowInOut(2);b.cubicIn=b.getPowIn(3);b.cubicOut=b.getPowOut(3);b.cubicInOut=b.getPowInOut(3);
b.quartIn=b.getPowIn(4);b.quartOut=b.getPowOut(4);b.quartInOut=b.getPowInOut(4);b.quintIn=b.getPowIn(5);b.quintOut=b.getPowOut(5);b.quintInOut=b.getPowInOut(5);b.backIn=b.getBackIn(1.7);b.backOut=b.getBackOut(1.7);b.backInOut=b.getBackInOut(1.7);b.elasticIn=b.getElasticIn(1,0.3);b.elasticOut=b.getElasticOut(1,0.3);b.elasticInOut=b.getElasticInOut(1,0.3*1.5);return b}();c.Ease=d;d.prototype.__class__="egret.Ease"})(egret||(egret={}));
(function(c){var d=function(){function b(){this.path="";this.audio=null;this.type=b.EFFECT}var a=b.prototype;a.play=function(a){void 0===a&&(a=!1);var b=this.audio;b&&(isNaN(b.duration)||(b.currentTime=0),b.loop=a,b.play())};a.pause=function(){var a=this.audio;a&&a.pause()};a.load=function(){var a=this.audio;a&&a.load()};a.addEventListener=function(a,b){this.audio&&this.audio.addEventListener(a,b,!1)};a.removeEventListener=function(a,b){this.audio&&this.audio.removeEventListener(a,b,!1)};a.setVolume=
function(a){var b=this.audio;b&&(b.volume=a)};a.getVolume=function(){return this.audio?this.audio.volume:0};a.preload=function(a){this.type=a};a._setAudio=function(a){this.audio=a};b.MUSIC="music";b.EFFECT="effect";return b}();c.Sound=d;d.prototype.__class__="egret.Sound"})(egret||(egret={}));
(function(c){var d=function(){function b(){}b.isNumber=function(a){return"number"===typeof a&&!isNaN(a)};b.sin=function(a){a=Math.round(a);a%=360;0>a&&(a+=360);return 90>a?egret_sin_map[a]:180>a?egret_cos_map[a-90]:270>a?-egret_sin_map[a-180]:-egret_cos_map[a-270]};b.cos=function(a){a=Math.round(a);a%=360;0>a&&(a+=360);return 90>a?egret_cos_map[a]:180>a?-egret_sin_map[a-90]:270>a?-egret_cos_map[a-180]:egret_sin_map[a-270]};return b}();c.NumberUtils=d;d.prototype.__class__="egret.NumberUtils"})(egret||
(egret={}));for(var egret_sin_map={},egret_cos_map={},NumberUtils_i=0;90>=NumberUtils_i;NumberUtils_i++)egret_sin_map[NumberUtils_i]=Math.sin(NumberUtils_i*egret.Matrix.DEG_TO_RAD),egret_cos_map[NumberUtils_i]=Math.cos(NumberUtils_i*egret.Matrix.DEG_TO_RAD);
Function.prototype.bind||(Function.prototype.bind=function(c){if("function"!==typeof this)throw new TypeError(egret.getString(1029));var d=Array.prototype.slice.call(arguments,1),b=this,a=function(){},e=function(){return b.apply(this instanceof a&&c?this:c,d.concat(Array.prototype.slice.call(arguments)))};a.prototype=this.prototype;e.prototype=new a;return e});
(function(c){var d=function(b){function a(e){void 0===e&&(e=60);b.call(this);this.frameRate=e;this._time=0;this._requestAnimationId=NaN;this._isActivate=!0;60==e&&(a.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,a.cancelAnimationFrame=window.cancelAnimationFrame||window.msCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.oCancelAnimationFrame||
window.cancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame);a.requestAnimationFrame||(a.requestAnimationFrame=function(a){return window.setTimeout(a,1E3/e)});a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){return window.clearTimeout(a)});a.instance=this;this.registerListener()}__extends(a,b);var e=a.prototype;e.enterFrame=function(){var b=a.instance,e=a._thisObject,
d=a._callback,l=c.getTimer(),k=l-b._time;b._requestAnimationId=a.requestAnimationFrame.call(window,a.prototype.enterFrame);d.call(e,k);b._time=l};e.executeMainLoop=function(b,e){a._callback=b;a._thisObject=e;this.enterFrame()};e.reset=function(){var b=a.instance;b._requestAnimationId&&(b._time=c.getTimer(),a.cancelAnimationFrame.call(window,b._requestAnimationId),b.enterFrame())};e.registerListener=function(){var b=this,e=function(){b._isActivate&&(b._isActivate=!1,c.MainContext.instance.stage.dispatchEvent(new c.Event(c.Event.DEACTIVATE)))},
d=function(){b._isActivate||(b._isActivate=!0,a.instance.reset(),c.MainContext.instance.stage.dispatchEvent(new c.Event(c.Event.ACTIVATE)))},l=function(){document[k]?e():d()};window.addEventListener("focus",d,!1);window.addEventListener("blur",e,!1);var k,m;"undefined"!==typeof document.hidden?(k="hidden",m="visibilitychange"):"undefined"!==typeof document.mozHidden?(k="mozHidden",m="mozvisibilitychange"):"undefined"!==typeof document.msHidden?(k="msHidden",m="msvisibilitychange"):"undefined"!==typeof document.webkitHidden?
(k="webkitHidden",m="webkitvisibilitychange"):"undefined"!==typeof document.oHidden&&(k="oHidden",m="ovisibilitychange");"onpageshow"in window&&"onpagehide"in window&&(window.addEventListener("pageshow",d,!1),window.addEventListener("pagehide",e,!1));k&&m&&document.addEventListener(m,l,!1)};a.instance=null;a.requestAnimationFrame=null;a.cancelAnimationFrame=null;a._thisObject=null;a._callback=null;return a}(c.DeviceContext);c.HTML5DeviceContext=d;d.prototype.__class__="egret.HTML5DeviceContext"})(egret||
(egret={}));var egret_html5_localStorage;(function(c){c.getItem=function(c){return window.localStorage.getItem(c)};c.setItem=function(c,b){try{return window.localStorage.setItem(c,b),!0}catch(a){return egret.Logger.infoWithErrorId(1018,c,b),!1}};c.removeItem=function(c){window.localStorage.removeItem(c)};c.clear=function(){window.localStorage.clear()};c.init=function(){for(var d in c)egret.localStorage[d]=c[d]}})(egret_html5_localStorage||(egret_html5_localStorage={}));egret_html5_localStorage.init();
(function(c){var d=function(b){function a(a,e){void 0===e&&(e=!0);b.call(this);this.useCacheCanvas=e;this.canvas=a||this.createCanvas();this.canvasContext=this.canvas.getContext("2d");e?(this._cacheCanvas=document.createElement("canvas"),this._cacheCanvas.width=this.canvas.width,this._cacheCanvas.height=this.canvas.height,this.drawCanvasContext=this._cacheCanvasContext=this._cacheCanvas.getContext("2d")):this.drawCanvasContext=this.canvasContext;this.onResize();var c=this.drawCanvasContext.setTransform,
d=this;this.drawCanvasContext.setTransform=function(a,b,e,f,h,s){d._matrixA=a;d._matrixB=b;d._matrixC=e;d._matrixD=f;d._matrixTx=h;d._matrixTy=s;c.call(d.drawCanvasContext,a,b,e,f,h,s)};this._matrixA=1;this._matrixC=this._matrixB=0;this._matrixD=1;this._transformTy=this._transformTx=this._matrixTy=this._matrixTx=0;this.initBlendMode()}__extends(a,b);var e=a.prototype;e.createCanvas=function(){var a=c.Browser.getInstance().$("#egretCanvas");if(!a){var b=document.getElementById(c.StageDelegate.canvas_div_name),
a=c.Browser.getInstance().$new("canvas");a.id="egretCanvas";b.appendChild(a)}c.MainContext.instance.stage.addEventListener(c.Event.RESIZE,this.onResize,this);return a};e.onResize=function(){if(this.canvas){var a=document.getElementById(c.StageDelegate.canvas_div_name);this.canvas.width=c.MainContext.instance.stage.stageWidth;this.canvas.height=c.MainContext.instance.stage.stageHeight;this.canvas.style.width=a.style.width;this.canvas.style.height=a.style.height;this.useCacheCanvas&&(this._cacheCanvas.width=
this.canvas.width,this._cacheCanvas.height=this.canvas.height);this.drawCanvasContext.imageSmoothingEnabled=c.RendererContext.imageSmoothingEnabled;this.drawCanvasContext.webkitImageSmoothingEnabled=c.RendererContext.imageSmoothingEnabled;this.drawCanvasContext.mozImageSmoothingEnabled=c.RendererContext.imageSmoothingEnabled;this.drawCanvasContext.msImageSmoothingEnabled=c.RendererContext.imageSmoothingEnabled}};e.clearScreen=function(){for(var a=c.RenderFilter.getInstance().getDrawAreaList(),b=0,
e=a.length;b<e;b++){var d=a[b];this.clearRect(d.x,d.y,d.width,d.height)}a=c.MainContext.instance.stage;this.useCacheCanvas&&this._cacheCanvasContext.clearRect(0,0,a.stageWidth,a.stageHeight);this.renderCost=0};e.clearRect=function(a,b,e,c){this.canvasContext.clearRect(a,b,e,c)};e.drawImage=function(a,e,d,l,k,m,n,p,r,s){void 0===s&&(s=void 0);var v=a._bitmapData;m+=this._transformTx;n+=this._transformTy;var w=c.getTimer();void 0===s?this.drawCanvasContext.drawImage(v,e,d,l,k,m,n,p,r):this.drawRepeatImage(a,
e,d,l,k,m,n,p,r,s);b.prototype.drawImage.call(this,a,e,d,l,k,m,n,p,r,s);this.renderCost+=c.getTimer()-w};e.drawRepeatImage=function(a,b,e,d,k,m,n,p,r,s){if(void 0===a.pattern){var v=c.MainContext.instance.rendererContext._texture_scale_factor,w=a._bitmapData,x=w;if(w.width!=d||w.height!=k||1!=v)x=document.createElement("canvas"),x.width=d*v,x.height=k*v,x.getContext("2d").drawImage(w,b,e,d,k,0,0,d*v,k*v);b=this.drawCanvasContext.createPattern(x,s);a.pattern=b}this.drawCanvasContext.fillStyle=a.pattern;
this.drawCanvasContext.translate(m,n);this.drawCanvasContext.fillRect(0,0,p,r);this.drawCanvasContext.translate(-m,-n)};e.setTransform=function(a){1==a.a&&0==a.b&&0==a.c&&1==a.d&&1==this._matrixA&&0==this._matrixB&&0==this._matrixC&&1==this._matrixD?(this._transformTx=a.tx-this._matrixTx,this._transformTy=a.ty-this._matrixTy):(this._transformTx=this._transformTy=0,this._matrixA==a.a&&this._matrixB==a.b&&this._matrixC==a.c&&this._matrixD==a.d&&this._matrixTx==a.tx&&this._matrixTy==a.ty||this.drawCanvasContext.setTransform(a.a,
a.b,a.c,a.d,a.tx,a.ty))};e.setAlpha=function(a,b){this.drawCanvasContext.globalAlpha=a;b?(this.blendValue=this.blendModes[b],this.drawCanvasContext.globalCompositeOperation=this.blendValue):this.blendValue!=c.BlendMode.NORMAL&&(this.blendValue=this.blendModes[c.BlendMode.NORMAL],this.drawCanvasContext.globalCompositeOperation=this.blendValue)};e.initBlendMode=function(){this.blendModes={};this.blendModes[c.BlendMode.NORMAL]="source-over";this.blendModes[c.BlendMode.ADD]="lighter";this.blendModes[c.BlendMode.ERASE]=
"destination-out";this.blendModes[c.BlendMode.ERASE_REVERSE]="destination-in"};e.setupFont=function(a,b){void 0===b&&(b=null);b=b||{};var e=null==b.size?a._size:b.size,c=null==b.fontFamily?a._fontFamily:b.fontFamily,d=this.drawCanvasContext,m=(null==b.italic?a._italic:b.italic)?"italic ":"normal ",m=m+((null==b.bold?a._bold:b.bold)?"bold ":"normal ");d.font=m+(e+"px "+c);d.textAlign="left";d.textBaseline="middle"};e.measureText=function(a){return this.drawCanvasContext.measureText(a).width};e.drawText=
function(a,e,d,l,k,m){void 0===m&&(m=null);this.setupFont(a,m);m=m||{};var n;n=null!=m.textColor?c.toColorString(m.textColor):a._textColorString;var p;p=null!=m.strokeColor?c.toColorString(m.strokeColor):a._strokeColorString;var r;r=null!=m.stroke?m.stroke:a._stroke;var s=this.drawCanvasContext;s.fillStyle=n;s.strokeStyle=p;r&&(s.lineWidth=2*r,s.strokeText(e,d+this._transformTx,l+this._transformTy,k||65535));s.fillText(e,d+this._transformTx,l+this._transformTy,k||65535);b.prototype.drawText.call(this,
a,e,d,l,k,m)};e.strokeRect=function(a,b,e,c,d){this.drawCanvasContext.strokeStyle=d;this.drawCanvasContext.strokeRect(a,b,e,c)};e.pushMask=function(a){this.drawCanvasContext.save();this.drawCanvasContext.beginPath();this.drawCanvasContext.rect(a.x+this._transformTx,a.y+this._transformTy,a.width,a.height);this.drawCanvasContext.clip();this.drawCanvasContext.closePath()};e.popMask=function(){this.drawCanvasContext.restore();this.drawCanvasContext.setTransform(1,0,0,1,0,0)};e.onRenderStart=function(){this.drawCanvasContext.save()};
e.onRenderFinish=function(){this.drawCanvasContext.restore();this.drawCanvasContext.setTransform(1,0,0,1,0,0);if(this.useCacheCanvas)for(var a=this._cacheCanvas.width,b=this._cacheCanvas.height,e=c.RenderFilter.getInstance().getDrawAreaList(),d=0,k=e.length;d<k;d++){var m=e[d],n=m.x,p=m.y,r=m.width,m=m.height;n+r>a&&(r=a-n);p+m>b&&(m=b-p);0<r&&0<m&&this.canvasContext.drawImage(this._cacheCanvas,n,p,r,m,n,p,r,m)}};e.drawCursor=function(a,b,e,c){this.drawCanvasContext.strokeStyle="#40a5ff";this.drawCanvasContext.lineWidth=
2;this.drawCanvasContext.beginPath();this.drawCanvasContext.moveTo(Math.round(a+this._transformTx),Math.round(b+this._transformTy));this.drawCanvasContext.lineTo(Math.round(e+this._transformTx),Math.round(c+this._transformTy));this.drawCanvasContext.closePath();this.drawCanvasContext.stroke()};return a}(c.RendererContext);c.HTML5CanvasRenderer=d;d.prototype.__class__="egret.HTML5CanvasRenderer"})(egret||(egret={}));var egret_h5_graphics;
(function(c){c.beginFill=function(b,a){void 0===a&&(a=1);var e="rgba("+(b>>16)+","+((b&65280)>>8)+","+(b&255)+","+a+")";this.fillStyleColor=e;this._pushCommand(new d(this._setStyle,this,[e]))};c.drawRect=function(b,a,e,c){this._pushCommand(new d(function(a,b,e,c){var d=this.renderContext;this.canvasContext.beginPath();this.canvasContext.rect(d._transformTx+a,d._transformTy+b,e,c);this.canvasContext.closePath()},this,[b,a,e,c]));this._fill();this.checkRect(b,a,e,c)};c.drawCircle=function(b,a,e){this._pushCommand(new d(function(a,
b,e){var c=this.renderContext;this.canvasContext.beginPath();this.canvasContext.arc(c._transformTx+a,c._transformTy+b,e,0,2*Math.PI);this.canvasContext.closePath()},this,[b,a,e]));this._fill();this.checkRect(b-e,a-e,2*e,2*e)};c.drawRoundRect=function(b,a,e,c,h,g){this._pushCommand(new d(function(a,b,e,c,d,f){var h=this.renderContext;a=h._transformTx+a;b=h._transformTy+b;d/=2;f=f?f/2:d;e=a+e;c=b+c;h=c-f;this.canvasContext.beginPath();this.canvasContext.moveTo(e,h);this.canvasContext.quadraticCurveTo(e,
c,e-d,c);this.canvasContext.lineTo(a+d,c);this.canvasContext.quadraticCurveTo(a,c,a,c-f);this.canvasContext.lineTo(a,b+f);this.canvasContext.quadraticCurveTo(a,b,a+d,b);this.canvasContext.lineTo(e-d,b);this.canvasContext.quadraticCurveTo(e,b,e,b+f);this.canvasContext.lineTo(e,h);this.canvasContext.closePath()},this,[b,a,e,c,h,g]));this._fill();this.checkRect(b,a,e,c)};c.drawEllipse=function(b,a,e,c){this._pushCommand(new d(function(a,b,e,c){var d=this.renderContext;this.canvasContext.save();a=d._transformTx+
a;b=d._transformTy+b;var d=e>c?e:c,f=e/d;c/=d;this.canvasContext.scale(f,c);this.canvasContext.beginPath();this.canvasContext.moveTo((a+e)/f,b/c);this.canvasContext.arc(a/f,b/c,d,0,2*Math.PI);this.canvasContext.closePath();this.canvasContext.restore();this.canvasContext.stroke()},this,[b,a,e,c]));this._fill();this.checkRect(b-e,a-c,2*e,2*c)};c.lineStyle=function(b,a,e,c,h,g,l,k){void 0===b&&(b=NaN);void 0===a&&(a=0);void 0===e&&(e=1);void 0===c&&(c=!1);void 0===h&&(h="normal");void 0===g&&(g=null);
void 0===l&&(l=null);void 0===k&&(k=3);this.strokeStyleColor&&(this.createEndLineCommand(),this._pushCommand(this.endLineCommand));this.strokeStyleColor=a="rgba("+(a>>16)+","+((a&65280)>>8)+","+(a&255)+","+e+")";this._pushCommand(new d(function(a,b){this.canvasContext.lineWidth=a;this.canvasContext.strokeStyle=b;this.canvasContext.beginPath()},this,[b,a]));this.moveTo(this.lineX,this.lineY)};c.lineTo=function(b,a){this._pushCommand(new d(function(a,b){var c=this.renderContext;this.canvasContext.lineTo(c._transformTx+
a,c._transformTy+b)},this,[b,a]));this.checkPoint(this.lineX,this.lineY);this.lineX=b;this.lineY=a;this.checkPoint(b,a)};c.curveTo=function(b,a,e,c){this._pushCommand(new d(function(a,b,e,c){var d=this.renderContext;this.canvasContext.quadraticCurveTo(d._transformTx+a,d._transformTy+b,d._transformTx+e,d._transformTy+c)},this,[b,a,e,c]));this.checkPoint(this.lineX,this.lineY);this.lineX=e;this.lineY=c;this.checkPoint(b,a);this.checkPoint(e,c)};c.moveTo=function(b,a){this._pushCommand(new d(function(a,
b){var c=this.renderContext;this.canvasContext.moveTo(c._transformTx+a,c._transformTy+b)},this,[b,a]))};c.clear=function(){this.lineY=this.lineX=this.commandQueue.length=0;this.fillStyleColor=this.strokeStyleColor=null;this._dirty=!1;this._maxY=this._maxX=this._minY=this._minX=0;this._firstCheck=!0};c.createEndFillCommand=function(){this.endFillCommand||(this.endFillCommand=new d(function(){this.canvasContext.fill();this.canvasContext.closePath()},this,null))};c.endFill=function(){null!=this.fillStyleColor&&
this._fill()};c._fill=function(){this.fillStyleColor&&(this.createEndFillCommand(),this._pushCommand(this.endFillCommand),this.fillStyleColor=null);this.strokeStyleColor&&(this.createEndLineCommand(),this._pushCommand(this.endLineCommand))};c.createEndLineCommand=function(){this.endLineCommand||(this.endLineCommand=new d(function(){this.canvasContext.stroke();this.canvasContext.closePath()},this,null))};c._pushCommand=function(b){this.commandQueue.push(b);this._dirty=!0};c._draw=function(b){var a=
this.commandQueue.length;if(0!=a){this.renderContext=b;b=this.canvasContext=this.renderContext.drawCanvasContext;b.save();this.strokeStyleColor&&0<a&&this.commandQueue[a-1]!=this.endLineCommand&&(this.createEndLineCommand(),this._pushCommand(this.endLineCommand),a=this.commandQueue.length);for(var e=0;e<a;e++){var c=this.commandQueue[e];c.method.apply(c.thisObject,c.args)}b.restore();this._dirty=!1}};var d=function(){return function(b,a,e){this.method=b;this.thisObject=a;this.args=e}}();d.prototype.__class__=
"egret_h5_graphics.Command";c._setStyle=function(b){this.canvasContext.fillStyle=b;this.canvasContext.beginPath()};c.init=function(){for(var b in c)egret.Graphics.prototype[b]=c[b];egret.RendererContext.createRendererContext=function(a){return new egret.HTML5CanvasRenderer(a,!1)}}})(egret_h5_graphics||(egret_h5_graphics={}));egret_h5_graphics.init();
(function(c){var d=function(b){function a(a){b.call(this);this.glID=this.gl=this.canvas=null;this.size=2E3;this.vertices=null;this.vertSize=5;this.indices=null;this.projectionY=this.projectionX=NaN;this.shaderManager=null;this.contextLost=!1;this.glContextId=0;this.currentBlendMode="";this.currentBaseTexture=null;this.currentBatchSize=0;this.worldTransform=null;this.worldAlpha=1;this.maskList=[];this.maskDataFreeList=[];this.graphicsIndexBuffer=this.graphicsBuffer=this.graphicsIndices=this.graphicsPoints=
this.filterType=this.colorTransformMatrix=null;this.graphicsStyle={};this.canvas=a||this.createCanvas();this.canvas.addEventListener("webglcontextlost",this.handleContextLost.bind(this),!1);this.canvas.addEventListener("webglcontextrestored",this.handleContextRestored.bind(this),!1);this.html5Canvas=document.createElement("canvas");this.canvasContext=new c.HTML5CanvasRenderer(this.html5Canvas);this.onResize();this.projectionX=this.canvas.width/2;this.projectionY=-this.canvas.height/2;a=6*this.size;
this.vertices=new Float32Array(4*this.size*this.vertSize);this.indices=new Uint16Array(a);for(var e=0,d=0;e<a;e+=6,d+=4)this.indices[e+0]=d+0,this.indices[e+1]=d+1,this.indices[e+2]=d+2,this.indices[e+3]=d+0,this.indices[e+4]=d+2,this.indices[e+5]=d+3;this.initWebGL();this.shaderManager=new c.WebGLShaderManager(this.gl);this.worldTransform=new c.Matrix;this.initAll()}__extends(a,b);var e=a.prototype;e.onRenderFinish=function(){this._drawWebGL()};e.initAll=function(){a.isInit||(a.isInit=!0,egret_webgl_graphics.init(),
c.TextField.prototype._makeBitmapCache=function(){this.renderTexture||(this.renderTexture=new c.RenderTexture);var a=this.getBounds(c.Rectangle.identity);if(0==a.width||0==a.height)return this._texture_to_render=null,!1;this._bitmapData||(this._bitmapData=document.createElement("canvas"),this.renderContext=c.RendererContext.createRendererContext(this._bitmapData));var b=a.width,a=a.height,e=c.MainContext.instance.rendererContext._texture_scale_factor,a=a/e,b=Math.round(b/e),a=Math.round(a),d=this._bitmapData;
d.width=b;d.height=a;d.style.width=b+"px";d.style.height=a+"px";this.renderContext._cacheCanvas&&(this.renderContext._cacheCanvas.width=b,this.renderContext._cacheCanvas.height=a);this._worldTransform.identity();this._worldTransform.a=1/e;this._worldTransform.d=1/e;this.renderContext.setTransform(this._worldTransform);this.worldAlpha=1;var d=c.RenderFilter.getInstance(),k=d._drawAreaList.concat();d._drawAreaList.length=0;this.renderContext.clearScreen();this.renderContext.onRenderStart();c.RendererContext.deleteTexture(this.renderTexture);
this._colorTransform&&this.renderContext.setGlobalColorTransform(this._colorTransform.matrix);var m=this.mask||this._scrollRect;m&&this.renderContext.pushMask(m);this._render(this.renderContext);m&&this.renderContext.popMask();this._colorTransform&&this.renderContext.setGlobalColorTransform(null);c.RenderTexture.identityRectangle.width=b;c.RenderTexture.identityRectangle.height=a;d.addDrawArea(c.RenderTexture.identityRectangle);this.renderContext.onRenderFinish();d._drawAreaList=k;this.renderTexture._bitmapData=
this._bitmapData;this.renderTexture._sourceWidth=b;this.renderTexture._sourceHeight=a;this.renderTexture._textureWidth=this.renderTexture._sourceWidth*e;this.renderTexture._textureHeight=this.renderTexture._sourceHeight*e;this._texture_to_render=this.renderTexture;return!0},c.TextField.prototype._draw=function(a){this.getDirty()&&(this._texture_to_render=this.renderTexture,this._cacheAsBitmap=!0);c.DisplayObject.prototype._draw.call(this,a)},c.RenderTexture.prototype.init=function(){this._bitmapData=
document.createElement("canvas");this.canvasContext=this._bitmapData.getContext("2d");this._webglBitmapData=document.createElement("canvas");this.renderContext=new c.WebGLRenderer(this._webglBitmapData)},c.RenderTexture.prototype.setSize=function(a,b){if(this._webglBitmapData){var e=this._webglBitmapData;e.width=a;e.height=b;e.style.width=a+"px";e.style.height=b+"px";this.renderContext.projectionX=a/2;this.renderContext.projectionY=-b/2;this.renderContext.viewportScale=c.MainContext.instance.rendererContext._texture_scale_factor}},
c.RenderTexture.prototype.end=function(){},c.RenderTexture.prototype.drawToTexture=function(a,b,e){var d=b||a.getBounds(c.Rectangle.identity);if(0==d.width||0==d.height||b&&(0==b.width||0==b.height))return!1;"undefined"==typeof e&&(e=1);this._bitmapData||(this._bitmapData=document.createElement("canvas"),this.canvasContext=this._bitmapData.getContext("2d"),c.RenderTexture.WebGLCanvas||(c.RenderTexture.WebGLCanvas=document.createElement("canvas"),c.RenderTexture.WebGLRenderer=new c.WebGLRenderer(c.RenderTexture.WebGLCanvas)),
this._webglBitmapData=c.RenderTexture.WebGLCanvas,this.renderContext=c.RenderTexture.WebGLRenderer);var k=d.x,m=d.y;b=d.width;var d=d.height,d=d/e,n=c.MainContext.instance.rendererContext._texture_scale_factor;b=Math.round(b/e);d=Math.round(d);this.setSize(b,d);var p=this._bitmapData,r=b/n*e,s=d/n*e;p.width=r;p.height=s;p.style.width=r+"px";p.style.height=s+"px";this.begin();a._worldTransform.identity();p=a._anchorOffsetX;r=a._anchorOffsetY;if(0!=a._anchorX||0!=a._anchorY)p=a._anchorX*b,r=a._anchorY*
d;this._offsetX=k+p;this._offsetY=m+r;a._worldTransform.append(1,0,0,1,-this._offsetX,-this._offsetY);a.worldAlpha=1;k=c.MainContext.__use_new_draw;c.MainContext.__use_new_draw=!1;if(a instanceof c.DisplayObjectContainer)for(m=a._children,p=0,r=m.length;p<r;p++)m[p]._updateTransform();this.renderContext.setTransform(a._worldTransform);m=c.RenderFilter.getInstance();p=m._drawAreaList.concat();m._drawAreaList.length=0;r=this.renderContext.gl;r.viewport(0,0,b,d);r.bindFramebuffer(r.FRAMEBUFFER,null);
r.clearColor(0,0,0,0);r.clear(r.COLOR_BUFFER_BIT);this.renderContext.onRenderStart();c.RendererContext.deleteTexture(this);a._filter&&this.renderContext.setGlobalFilter(a._filter);a._colorTransform&&this.renderContext.setGlobalColorTransform(a._colorTransform.matrix);(r=a.mask||a._scrollRect)&&this.renderContext.pushMask(r);a._render(this.renderContext);this.renderContext._drawWebGL();c.MainContext.__use_new_draw=k;r&&this.renderContext.popMask();a._colorTransform&&this.renderContext.setGlobalColorTransform(null);
a._filter&&this.renderContext.setGlobalFilter(null);c.RenderTexture.identityRectangle.width=b;c.RenderTexture.identityRectangle.height=d;m.addDrawArea(c.RenderTexture.identityRectangle);this.renderContext.onRenderFinish();m._drawAreaList=p;this._sourceWidth=b/n*e;this._sourceHeight=d/n*e;this._textureWidth=b*e;this._textureHeight=d*e;this.canvasContext.drawImage(this._webglBitmapData,0,0,b,d,0,0,this._sourceWidth,this._sourceHeight);return!0})};e.createCanvas=function(){var a=c.Browser.getInstance().$("#egretCanvas");
if(!a){var b=document.getElementById(c.StageDelegate.canvas_div_name),a=c.Browser.getInstance().$new("canvas");a.id="egretCanvas";b.appendChild(a)}c.MainContext.instance.stage.addEventListener(c.Event.RESIZE,this.onResize,this);return a};e.onResize=function(){var a=document.getElementById(c.StageDelegate.canvas_div_name);this.canvas&&(this.canvas.width=c.MainContext.instance.stage.stageWidth,this.canvas.height=c.MainContext.instance.stage.stageHeight,this.canvas.style.width=a.style.width,this.canvas.style.height=
a.style.height,this.projectionX=this.canvas.width/2,this.projectionY=-this.canvas.height/2);this.html5Canvas&&(this.html5Canvas.width=c.MainContext.instance.stage.stageWidth,this.html5Canvas.height=c.MainContext.instance.stage.stageHeight,this.html5Canvas.style.width=a.style.width,this.html5Canvas.style.height=a.style.height)};e.handleContextLost=function(){this.contextLost=!0};e.handleContextRestored=function(){this.initWebGL();this.shaderManager.setContext(this.gl);this.contextLost=!1};e.initWebGL=
function(){for(var b={},e,d=["experimental-webgl","webgl"],l=0;l<d.length;l++){try{e=this.canvas.getContext(d[l],b)}catch(k){}if(e)break}if(!e)throw Error(c.getString(1021));a.glID++;this.glID=a.glID;this.setContext(e)};e.setContext=function(a){this.gl=a;a.id=this.glContextId++;this.vertexBuffer=a.createBuffer();this.indexBuffer=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);
a.bufferData(a.ARRAY_BUFFER,this.vertices,a.DYNAMIC_DRAW);a.disable(a.DEPTH_TEST);a.disable(a.CULL_FACE);a.enable(a.BLEND);a.colorMask(!0,!0,!0,!0)};e.start=function(){if(!this.contextLost){var a=this.gl;a.activeTexture(a.TEXTURE0);a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var b;b=this.colorTransformMatrix?this.shaderManager.colorTransformShader:"blur"==this.filterType?this.shaderManager.blurShader:this.shaderManager.defaultShader;this.shaderManager.activateShader(b);
b.syncUniforms();a.uniform2f(b.projectionVector,this.projectionX,this.projectionY);var e=4*this.vertSize;a.vertexAttribPointer(b.aVertexPosition,2,a.FLOAT,!1,e,0);a.vertexAttribPointer(b.aTextureCoord,2,a.FLOAT,!1,e,8);a.vertexAttribPointer(b.colorAttribute,2,a.FLOAT,!1,e,16)}};e.clearScreen=function(){var a=this.gl;a.colorMask(!0,!0,!0,!0);for(var b=c.RenderFilter.getInstance().getDrawAreaList(),e=0,d=b.length;e<d;e++){var k=b[e];a.viewport(k.x,k.y,k.width,k.height);a.bindFramebuffer(a.FRAMEBUFFER,
null);a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT)}b=c.MainContext.instance.stage;a.viewport(0,0,b.stageWidth,b.stageHeight);this.renderCost=0};e.setBlendMode=function(a){a||(a=c.BlendMode.NORMAL);if(this.currentBlendMode!=a){var b=c.RendererContext.blendModesForGL[a];b&&(this._drawWebGL(),this.gl.blendFunc(b[0],b[1]),this.currentBlendMode=a)}};e.drawRepeatImage=function(a,b,e,d,k,m,n,p,r,s){s=c.MainContext.instance.rendererContext._texture_scale_factor;d*=s;for(k*=s;m<p;m+=d)for(var v=n;v<r;v+=
k){var w=Math.min(d,p-m),x=Math.min(k,r-v);this.drawImage(a,b,e,w/s,x/s,m,v,w,x)}};e.drawImage=function(a,b,e,c,d,m,n,p,r,s){void 0===s&&(s=void 0);if(!this.contextLost)if(void 0!==s)this.drawRepeatImage(a,b,e,c,d,m,n,p,r,s);else{this.createWebGLTexture(a);s=a._bitmapData.webGLTexture[this.glID];if(s!==this.currentBaseTexture||this.currentBatchSize>=this.size-1)this._drawWebGL(),this.currentBaseTexture=s;var v=this.worldTransform,w=v.a,x=v.b,L=v.c,P=v.d,O=v.tx,Q=v.ty;0==m&&0==n||v.append(1,0,0,1,
m,n);1==c/p&&1==d/r||v.append(p/c,0,0,r/d,0,0);m=v.a;n=v.b;p=v.c;r=v.d;s=v.tx;var V=v.ty;v.a=w;v.b=x;v.c=L;v.d=P;v.tx=O;v.ty=Q;w=a._sourceWidth;x=a._sourceHeight;a=c;v=d;b/=w;e/=x;c/=w;d/=x;w=this.vertices;x=4*this.currentBatchSize*this.vertSize;L=this.worldAlpha;w[x++]=s;w[x++]=V;w[x++]=b;w[x++]=e;w[x++]=L;w[x++]=m*a+s;w[x++]=n*a+V;w[x++]=c+b;w[x++]=e;w[x++]=L;w[x++]=m*a+p*v+s;w[x++]=r*v+n*a+V;w[x++]=c+b;w[x++]=d+e;w[x++]=L;w[x++]=p*v+s;w[x++]=r*v+V;w[x++]=b;w[x++]=d+e;w[x++]=L;this.currentBatchSize++}};
e._drawWebGL=function(){if(0!=this.currentBatchSize&&!this.contextLost){var a=c.getTimer();this.start();var b=this.gl;b.bindTexture(b.TEXTURE_2D,this.currentBaseTexture);var e=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);b.bufferSubData(b.ARRAY_BUFFER,0,e);b.drawElements(b.TRIANGLES,6*this.currentBatchSize,b.UNSIGNED_SHORT,0);this.currentBatchSize=0;this.renderCost+=c.getTimer()-a;c.Profiler.getInstance().onDrawImage()}};e.setTransform=function(a){var b=this.worldTransform;b.a=
a.a;b.b=a.b;b.c=a.c;b.d=a.d;b.tx=a.tx;b.ty=a.ty};e.setAlpha=function(a,b){this.worldAlpha=a;this.setBlendMode(b)};e.createWebGLTexture=function(a){a=a._bitmapData;a.webGLTexture||(a.webGLTexture={});if(!a.webGLTexture[this.glID]){var b=this.gl;a.webGLTexture[this.glID]=b.createTexture();b.bindTexture(b.TEXTURE_2D,a.webGLTexture[this.glID]);b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,
b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.bindTexture(b.TEXTURE_2D,null)}};e.pushMask=function(a){this._drawWebGL();var b=this.gl;0==this.maskList.length&&b.enable(b.SCISSOR_TEST);a=this.getScissorRect(a);this.maskList.push(a);this.scissor(a.x,a.y,a.width,a.height)};e.getScissorRect=function(a){var b=this.maskList[this.maskList.length-1],e,d,k;
b?b.intersects(b)?(e=Math.max(a.x+this.worldTransform.tx,b.x),d=Math.max(a.y+this.worldTransform.ty,b.y),k=Math.min(a.x+this.worldTransform.tx+a.width,b.x+b.width)-e,a=Math.min(a.y+this.worldTransform.ty+a.height,b.y+b.height)-d):a=k=d=e=0:(e=a.x+this.worldTransform.tx,d=a.y+this.worldTransform.ty,k=a.width,a=a.height);(b=this.maskDataFreeList.pop())?(b.x=e,b.y=d,b.width=k,b.height=a):b=new c.Rectangle(e,d,k,a);return b};e.popMask=function(){this._drawWebGL();var a=this.gl,b=this.maskList.pop();this.maskDataFreeList.push(b);
b=this.maskList.length;0!=b?(b=this.maskList[b-1],(0<b.width||0<b.height)&&this.scissor(b.x,b.y,b.width,b.height)):a.disable(a.SCISSOR_TEST)};e.scissor=function(a,b,e,d){var k=this.gl;0>e&&(e=0);0>d&&(d=0);k.scissor(a,-b+c.MainContext.instance.stage.stageHeight-d,e,d)};e.setGlobalColorTransform=function(a){if(this.colorTransformMatrix!=a&&(this._drawWebGL(),this.colorTransformMatrix=a)){a=a.concat();var b=this.shaderManager.colorTransformShader;b.uniforms.colorAdd.value.w=a.splice(19,1)[0]/255;b.uniforms.colorAdd.value.z=
a.splice(14,1)[0]/255;b.uniforms.colorAdd.value.y=a.splice(9,1)[0]/255;b.uniforms.colorAdd.value.x=a.splice(4,1)[0]/255;b.uniforms.matrix.value=a}};e.setGlobalFilter=function(a){this._drawWebGL();this.setFilterProperties(a)};e.setFilterProperties=function(a){if(a)switch(this.filterType=a.type,a.type){case "blur":var b=this.shaderManager.blurShader;b.uniforms.blur.value.x=a.blurX;b.uniforms.blur.value.y=a.blurY}else this.filterType=null};e.setupFont=function(a,b){void 0===b&&(b=null);this.canvasContext.setupFont(a,
b)};e.measureText=function(a){return this.canvasContext.measureText(a)};e.renderGraphics=function(a){this._drawWebGL();var b=this.gl,e=this.shaderManager.primitiveShader;this.graphicsPoints?(this.graphicsPoints.length=0,this.graphicsIndices.length=0):(this.graphicsPoints=[],this.graphicsIndices=[],this.graphicsBuffer=b.createBuffer(),this.graphicsIndexBuffer=b.createBuffer());this.updateGraphics(a);this.shaderManager.activateShader(e);b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA);b.uniformMatrix3fv(e.translationMatrix,
!1,this.worldTransform.toArray(!0));b.uniform2f(e.projectionVector,this.projectionX,-this.projectionY);b.uniform2f(e.offsetVector,0,0);b.uniform3fv(e.tintColor,[1,1,1]);b.uniform1f(e.alpha,this.worldAlpha);b.bindBuffer(b.ARRAY_BUFFER,this.graphicsBuffer);b.vertexAttribPointer(e.aVertexPosition,2,b.FLOAT,!1,24,0);b.vertexAttribPointer(e.colorAttribute,4,b.FLOAT,!1,24,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.graphicsIndexBuffer);b.drawElements(b.TRIANGLE_STRIP,this.graphicsIndices.length,b.UNSIGNED_SHORT,
0);this.shaderManager.activateShader(this.shaderManager.defaultShader)};e.updateGraphics=function(a){var b=this.gl;this.buildRectangle(a);b.bindBuffer(b.ARRAY_BUFFER,this.graphicsBuffer);b.bufferData(b.ARRAY_BUFFER,new Float32Array(this.graphicsPoints),b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.graphicsIndexBuffer);b.bufferData(b.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.graphicsIndices),b.STATIC_DRAW)};e.buildRectangle=function(a){var b=a.x,e=a.y,c=a.w;a=a.h;var d=this.graphicsStyle.a,
m=this.graphicsStyle.r*d,n=this.graphicsStyle.g*d,p=this.graphicsStyle.b*d,r=this.graphicsPoints,s=this.graphicsIndices,v=r.length/6;r.push(b,e);r.push(m,n,p,d);r.push(b+c,e);r.push(m,n,p,d);r.push(b,e+a);r.push(m,n,p,d);r.push(b+c,e+a);r.push(m,n,p,d);s.push(v,v,v+1,v+2,v+3,v+3)};e.setGraphicsStyle=function(a,b,e,c){this.graphicsStyle.r=a;this.graphicsStyle.g=b;this.graphicsStyle.b=e;this.graphicsStyle.a=c};a.glID=0;a.isInit=!1;return a}(c.RendererContext);c.WebGLRenderer=d;d.prototype.__class__=
"egret.WebGLRenderer"})(egret||(egret={}));var egret_webgl_graphics;
(function(c){c.beginFill=function(b,a){void 0===a&&(a=1);this._pushCommand(new d(this._setStyle,this,[(b>>16)/255,((b&65280)>>8)/255,(b&255)/255,a]))};c.drawRect=function(b,a,e,c){this._pushCommand(new d(function(a){this.renderContext.renderGraphics(a)},this,[{x:b,y:a,w:e,h:c}]));this.checkRect(b,a,e,c)};c.drawCircle=function(b,a,e){};c.drawRoundRect=function(b,a,e,c,d,g){};c.drawEllipse=function(b,a,e,c){};c.lineStyle=function(b,a,e,c,d,g,l,k){};c.lineTo=function(b,a){};c.curveTo=function(b,a,e,
c){};c.moveTo=function(b,a){};c.clear=function(){this._maxY=this._maxX=this._minY=this._minX=this.commandQueue.length=0};c.endFill=function(){};c._pushCommand=function(b){this.commandQueue.push(b)};c._draw=function(b){var a=this.commandQueue.length;if(0!=a)for(this.renderContext=b,b=0;b<a;b++){var e=this.commandQueue[b];e.method.apply(e.thisObject,e.args)}};var d=function(){return function(b,a,e){this.method=b;this.thisObject=a;this.args=e}}();d.prototype.__class__="egret_webgl_graphics.Command";
c._setStyle=function(b,a,e,c){this.renderContext.setGraphicsStyle(b,a,e,c)};c.init=function(){for(var b in c)egret.Graphics.prototype[b]=c[b]}})(egret_webgl_graphics||(egret_webgl_graphics={}));
(function(c){var d=function(){function b(){}b.compileProgram=function(a,e,d){d=b.compileFragmentShader(a,d);e=b.compileVertexShader(a,e);var h=a.createProgram();a.attachShader(h,e);a.attachShader(h,d);a.linkProgram(h);a.getProgramParameter(h,a.LINK_STATUS)||c.Logger.infoWithErrorId(1020);return h};b.compileFragmentShader=function(a,e){return b._compileShader(a,e,a.FRAGMENT_SHADER)};b.compileVertexShader=function(a,e){return b._compileShader(a,e,a.VERTEX_SHADER)};b._compileShader=function(a,b,d){d=
a.createShader(d);a.shaderSource(d,b);a.compileShader(d);return a.getShaderParameter(d,a.COMPILE_STATUS)?d:(c.Logger.info(a.getShaderInfoLog(d)),null)};b.checkCanUseWebGL=function(){if(void 0==b.canUseWebGL)try{var a=document.createElement("canvas");b.canUseWebGL=!!window.WebGLRenderingContext&&!(!a.getContext("webgl")&&!a.getContext("experimental-webgl"))}catch(e){b.canUseWebGL=!1}return b.canUseWebGL};return b}();c.WebGLUtils=d;d.prototype.__class__="egret.WebGLUtils"})(egret||(egret={}));
(function(c){var d=function(){function b(a){this.defaultVertexSrc="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.x, aColor.x, aColor.x, aColor.x);\n}";
this.program=this.gl=null;this.fragmentSrc="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void) {\ngl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;\n}";this.uniforms=null;this.gl=a;this.init()}var a=b.prototype;a.init=function(){var a=this.gl,b=c.WebGLUtils.compileProgram(a,this.defaultVertexSrc,this.fragmentSrc);a.useProgram(b);this.uSampler=a.getUniformLocation(b,"uSampler");this.projectionVector=a.getUniformLocation(b,
"projectionVector");this.offsetVector=a.getUniformLocation(b,"offsetVector");this.dimensions=a.getUniformLocation(b,"dimensions");this.aVertexPosition=a.getAttribLocation(b,"aVertexPosition");this.aTextureCoord=a.getAttribLocation(b,"aTextureCoord");this.colorAttribute=a.getAttribLocation(b,"aColor");-1===this.colorAttribute&&(this.colorAttribute=2);this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var d in this.uniforms)this.uniforms[d].uniformLocation=a.getUniformLocation(b,
d);this.initUniforms();this.program=b};a.initUniforms=function(){if(this.uniforms){var a=this.gl,b,c;for(c in this.uniforms){b=this.uniforms[c];var d=b.type;"mat2"===d||"mat3"===d||"mat4"===d?(b.glMatrix=!0,b.glValueLength=1,"mat2"===d?b.glFunc=a.uniformMatrix2fv:"mat3"===d?b.glFunc=a.uniformMatrix3fv:"mat4"===d&&(b.glFunc=a.uniformMatrix4fv)):(b.glFunc=a["uniform"+d],b.glValueLength="2f"===d||"2i"===d?2:"3f"===d||"3i"===d?3:"4f"===d||"4i"===d?4:1)}}};a.syncUniforms=function(){if(this.uniforms){var a,
b=this.gl,c;for(c in this.uniforms)a=this.uniforms[c],1===a.glValueLength?!0===a.glMatrix?a.glFunc.call(b,a.uniformLocation,a.transpose,a.value):a.glFunc.call(b,a.uniformLocation,a.value):2===a.glValueLength?a.glFunc.call(b,a.uniformLocation,a.value.x,a.value.y):3===a.glValueLength?a.glFunc.call(b,a.uniformLocation,a.value.x,a.value.y,a.value.z):4===a.glValueLength&&a.glFunc.call(b,a.uniformLocation,a.value.x,a.value.y,a.value.z,a.value.w)}};return b}();c.EgretShader=d;d.prototype.__class__="egret.EgretShader"})(egret||
(egret={}));
(function(c){var d=function(b){function a(a){b.call(this,a);this.fragmentSrc="precision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform float invert;\nuniform mat4 matrix;\nuniform vec4 colorAdd;\nuniform sampler2D uSampler;\nvoid main(void) {\nvec4 locColor = texture2D(uSampler, vTextureCoord) * matrix;\nif(locColor.a != 0.0){\nlocColor += colorAdd;\n}\ngl_FragColor = locColor;\n}";this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},colorAdd:{type:"4f",
value:{x:0,y:0,z:0,w:0}}};this.init()}__extends(a,b);return a}(c.EgretShader);c.ColorTransformShader=d;d.prototype.__class__="egret.ColorTransformShader"})(egret||(egret={}));
(function(c){var d=function(b){function a(a){b.call(this,a);this.fragmentSrc="precision mediump float;uniform vec2 blur;uniform sampler2D uSampler;varying vec2 vTextureCoord;void main(){gl_FragColor = vec4(0.0);gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.028 * blur.x, -0.028 * blur.y))) * 0.0044299121055113265;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.024 * blur.x, -0.024 * blur.y))) * 0.00895781211794;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.020 * blur.x, -0.020 * blur.y))) * 0.0215963866053;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.016 * blur.x, -0.016 * blur.y))) * 0.0443683338718;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.012 * blur.x, -0.012 * blur.y))) * 0.0776744219933;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.008 * blur.x, -0.008 * blur.y))) * 0.115876621105;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.004 * blur.x, -0.004 * blur.y))) * 0.147308056121;gl_FragColor += texture2D(uSampler, vTextureCoord) * 0.159576912161;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.004 * blur.x,  0.004 * blur.y))) * 0.147308056121;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.008 * blur.x,  0.008 * blur.y))) * 0.115876621105;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.012 * blur.x,  0.012 * blur.y))) * 0.0776744219933;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.016 * blur.x,  0.016 * blur.y))) * 0.0443683338718;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.020 * blur.x,  0.020 * blur.y))) * 0.0215963866053;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.024 * blur.x,  0.024 * blur.y))) * 0.00895781211794;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.028 * blur.x,  0.028 * blur.y))) * 0.0044299121055113265;}";this.uniforms=
{blur:{type:"2f",value:{x:2,y:2}}};this.init()}__extends(a,b);return a}(c.EgretShader);c.BlurShader=d;d.prototype.__class__="egret.BlurShader"})(egret||(egret={}));
(function(c){var d=function(){function b(a){this.alpha=this.translationMatrix=this.attributes=this.colorAttribute=this.aVertexPosition=this.tintColor=this.offsetVector=this.projectionVector=this.program=this.gl=null;this.fragmentSrc="precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n   gl_FragColor = vColor;\n}";this.vertexSrc="attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nuniform float alpha;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void) {\n   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);\n   v -= offsetVector.xyx;\n   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}";
this.gl=a;this.init()}b.prototype.init=function(){var a=this.gl,b=c.WebGLUtils.compileProgram(a,this.vertexSrc,this.fragmentSrc);a.useProgram(b);this.projectionVector=a.getUniformLocation(b,"projectionVector");this.offsetVector=a.getUniformLocation(b,"offsetVector");this.tintColor=a.getUniformLocation(b,"tint");this.aVertexPosition=a.getAttribLocation(b,"aVertexPosition");this.colorAttribute=a.getAttribLocation(b,"aColor");this.attributes=[this.aVertexPosition,this.colorAttribute];this.translationMatrix=
a.getUniformLocation(b,"translationMatrix");this.alpha=a.getUniformLocation(b,"alpha");this.program=b};return b}();c.PrimitiveShader=d;d.prototype.__class__="egret.PrimitiveShader"})(egret||(egret={}));
(function(c){var d=function(){function b(a){this.gl=null;this.maxAttibs=10;this.attribState=[];this.tempAttribState=[];this.blurShader=this.colorTransformShader=this.primitiveShader=this.defaultShader=this.currentShader=null;for(var b=0;b<this.maxAttibs;b++)this.attribState[b]=!1;this.setContext(a)}var a=b.prototype;a.setContext=function(a){this.gl=a;this.primitiveShader=new c.PrimitiveShader(a);this.defaultShader=new c.EgretShader(a);this.colorTransformShader=new c.ColorTransformShader(a);this.blurShader=
new c.BlurShader(a);this.activateShader(this.defaultShader)};a.activateShader=function(a){this.currentShader!=a&&(this.gl.useProgram(a.program),this.setAttribs(a.attributes),this.currentShader=a)};a.setAttribs=function(a){var b,c;c=this.tempAttribState.length;for(b=0;b<c;b++)this.tempAttribState[b]=!1;c=a.length;for(b=0;b<c;b++)this.tempAttribState[a[b]]=!0;a=this.gl;c=this.attribState.length;for(b=0;b<c;b++)this.attribState[b]!==this.tempAttribState[b]&&(this.attribState[b]=this.tempAttribState[b],
this.tempAttribState[b]?a.enableVertexAttribArray(b):a.disableVertexAttribArray(b))};return b}();c.WebGLShaderManager=d;d.prototype.__class__="egret.WebGLShaderManager"})(egret||(egret={}));
(function(c){var d=function(b){function a(){b.call(this)}__extends(a,b);var e=a.prototype;e.proceed=function(a){function b(){if(4==d.readyState)if(d.status!=a._status&&(a._status=d.status,c.HTTPStatusEvent.dispatchHTTPStatusEvent(a,d.status)),400<=d.status||0==d.status)c.IOErrorEvent.dispatchIOErrorEvent(a);else{switch(a.dataFormat){case c.URLLoaderDataFormat.TEXT:a.data=d.responseText;break;case c.URLLoaderDataFormat.VARIABLES:a.data=new c.URLVariables(d.responseText);break;case c.URLLoaderDataFormat.BINARY:a.data=
d.response;break;default:a.data=d.responseText}c.__callAsync(c.Event.dispatchEvent,c.Event,a,c.Event.COMPLETE)}}if(a.dataFormat==c.URLLoaderDataFormat.TEXTURE)this.loadTexture(a);else if(a.dataFormat==c.URLLoaderDataFormat.SOUND)this.loadSound(a);else{var e=a._request,d=this.getXHR();d.onreadystatechange=b;var k=c.NetContext._getUrl(e);d.open(e.method,k,!0);this.setResponseType(d,a.dataFormat);e.method!=c.URLRequestMethod.GET&&e.data?e.data instanceof c.URLVariables?(d.setRequestHeader("Content-Type",
"application/x-www-form-urlencoded"),d.send(e.data.toString())):(d.setRequestHeader("Content-Type","multipart/form-data"),d.send(e.data)):d.send()}};e.loadSound=function(a){function b(k){c.clearTimeout(d.__timeoutId);d.removeEventListener("canplaythrough",b,!1);d.removeEventListener("error",e,!1);k=new c.Sound;k._setAudio(d);a.data=k;c.__callAsync(c.Event.dispatchEvent,c.Event,a,c.Event.COMPLETE)}function e(k){c.clearTimeout(d.__timeoutId);d.removeEventListener("canplaythrough",b,!1);d.removeEventListener("error",
e,!1);c.IOErrorEvent.dispatchIOErrorEvent(a)}var d=new Audio(a._request.url);d.__timeoutId=c.setTimeout(b,this,100);d.addEventListener("canplaythrough",b,!1);d.addEventListener("error",e,!1);d.load()};e.getXHR=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")};e.setResponseType=function(a,b){switch(b){case c.URLLoaderDataFormat.TEXT:case c.URLLoaderDataFormat.VARIABLES:a.responseType=c.URLLoaderDataFormat.TEXT;break;case c.URLLoaderDataFormat.BINARY:a.responseType=
"arraybuffer";break;default:a.responseType=b}};e.loadTexture=function(a){var b=a._request,e=new Image;e.onload=function(b){e.onerror=null;e.onload=null;b=new c.Texture;b._setBitmapData(e);a.data=b;c.__callAsync(c.Event.dispatchEvent,c.Event,a,c.Event.COMPLETE)};e.onerror=function(b){e.onerror=null;e.onload=null;c.IOErrorEvent.dispatchIOErrorEvent(a)};e.src=b.url};return a}(c.NetContext);c.HTML5NetContext=d;d.prototype.__class__="egret.HTML5NetContext"})(egret||(egret={}));
(function(c){var d=function(b){function a(){b.call(this);this._isTouchDown=!1;this.rootDiv=null;this.rootDiv=document.getElementById(c.StageDelegate.canvas_div_name);if(!this.rootDiv){var a=document.getElementById(c.StageDelegate.egret_root_div);this.rootDiv=c.Browser.getInstance().$new("div");this.rootDiv.id=c.StageDelegate.canvas_div_name;a.appendChild(this.rootDiv)}}__extends(a,b);var e=a.prototype;e.prevent=function(a){a.stopPropagation();!0==a.isScroll||c.HTMLInput.getInstance().isInputOn()||
a.preventDefault()};e.run=function(){var a=this;window.navigator.msPointerEnabled?(this.rootDiv.addEventListener("MSPointerDown",function(b){a._onTouchBegin(b);a.prevent(b)},!1),this.rootDiv.addEventListener("MSPointerMove",function(b){a._onTouchMove(b);a.prevent(b)},!1),this.rootDiv.addEventListener("MSPointerUp",function(b){a._onTouchEnd(b);a.prevent(b)},!1)):c.MainContext.deviceType==c.MainContext.DEVICE_MOBILE?this.addTouchListener():c.MainContext.deviceType==c.MainContext.DEVICE_PC&&(this.addTouchListener(),
this.addMouseListener());window.addEventListener("mousedown",function(b){a.inOutOfCanvas(b)?a.dispatchLeaveStageEvent():a._isTouchDown=!0});window.addEventListener("mouseup",function(b){a._isTouchDown&&(a.inOutOfCanvas(b)?a.dispatchLeaveStageEvent():a._onTouchEnd(b));a._isTouchDown=!1})};e.addMouseListener=function(){var a=this;this.rootDiv.addEventListener("mousedown",function(b){a._onTouchBegin(b)});this.rootDiv.addEventListener("mousemove",function(b){a._onTouchMove(b)});this.rootDiv.addEventListener("mouseup",
function(b){a._onTouchEnd(b)})};e.addTouchListener=function(){var a=this;this.rootDiv.addEventListener("touchstart",function(b){for(var e=b.changedTouches.length,c=0;c<e;c++)a._onTouchBegin(b.changedTouches[c]);a.prevent(b)},!1);this.rootDiv.addEventListener("touchmove",function(b){for(var e=b.changedTouches.length,c=0;c<e;c++)a._onTouchMove(b.changedTouches[c]);a.prevent(b)},!1);this.rootDiv.addEventListener("touchend",function(b){for(var e=b.changedTouches.length,c=0;c<e;c++)a._onTouchEnd(b.changedTouches[c]);
a.prevent(b)},!1);this.rootDiv.addEventListener("touchcancel",function(b){for(var e=b.changedTouches.length,c=0;c<e;c++)a._onTouchEnd(b.changedTouches[c]);a.prevent(b)},!1)};e.inOutOfCanvas=function(a){var b=this.getLocation(this.rootDiv,a);a=b.x;var b=b.y,e=c.MainContext.instance.stage;return 0>a||0>b||a>e.stageWidth||b>e.stageHeight?!0:!1};e.dispatchLeaveStageEvent=function(){this.touchingIdentifiers.length=0;c.MainContext.instance.stage.dispatchEventWith(c.Event.LEAVE_STAGE)};e._onTouchBegin=function(a){var b=
this.getLocation(this.rootDiv,a),e=-1;a.hasOwnProperty("identifier")&&(e=a.identifier);this.onTouchBegan(b.x,b.y,e)};e._onTouchMove=function(a){var b=this.getLocation(this.rootDiv,a),e=-1;a.hasOwnProperty("identifier")&&(e=a.identifier);this.onTouchMove(b.x,b.y,e)};e._onTouchEnd=function(a){var b=this.getLocation(this.rootDiv,a),e=-1;a.hasOwnProperty("identifier")&&(e=a.identifier);this.onTouchEnd(b.x,b.y,e)};e.getLocation=function(a,b){var e=document.documentElement,d=window,k,m;"function"===typeof a.getBoundingClientRect?
(m=a.getBoundingClientRect(),k=m.left,m=m.top):m=k=0;k+=d.pageXOffset-e.clientLeft;m+=d.pageYOffset-e.clientTop;null!=b.pageX?(e=b.pageX,d=b.pageY):(k-=document.body.scrollLeft,m-=document.body.scrollTop,e=b.clientX,d=b.clientY);var n=c.Point.identity;n.x=(e-k)/c.StageDelegate.getInstance().getScaleX();n.y=(d-m)/c.StageDelegate.getInstance().getScaleY();return n};return a}(c.TouchContext);c.HTML5TouchContext=d;d.prototype.__class__="egret.HTML5TouchContext"})(egret||(egret={}));
(function(c){var d=function(a){function e(){a.call(this);this._isNeedShow=!1;this.inputDiv=this.inputElement=null;this._isNeesHide=!1;this.textValue="";this._styleInfoes={};b.getInstance()}__extends(e,a);var d=e.prototype;d._initElement=function(a,b,e,d){var f=c.StageDelegate.getInstance().getScaleX(),n=c.StageDelegate.getInstance().getScaleY();this.inputDiv.position.x=a*f;this.inputDiv.position.y=b*n;this.inputDiv.scale.x=f*e;this.inputDiv.scale.y=n*d;this.inputDiv.transforms()};d._show=function(a,
e,c,d,f){this._multiline=a;b.getInstance().isCurrentStageText(this)?this.inputElement.onblur=null:(this.inputElement=b.getInstance().getInputElement(this),this.inputDiv=b.getInstance()._inputDIV);this._isNeedShow=b.getInstance()._needShow=!0};d.onBlurHandler=function(){b.getInstance().clearInputElement();window.scrollTo(0,0)};d.executeShow=function(){this.inputElement.value=this._getText();null==this.inputElement.onblur&&(this.inputElement.onblur=this.onBlurHandler);this._resetStageText();0<this._textfield._maxChars?
this.inputElement.setAttribute("maxlength",this._textfield._maxChars):this.inputElement.removeAttribute("maxlength");this.inputElement.selectionStart=this.inputElement.value.length;this.inputElement.selectionEnd=this.inputElement.value.length;this.inputElement.focus()};d._hide=function(){this._isNeesHide=!0};d._getText=function(){this.textValue||(this.textValue="");return this.textValue};d._setText=function(a){this.textValue=a;this.resetText()};d.resetText=function(){this.inputElement&&(this.inputElement.value=
this.textValue)};d._onInput=function(){this.textValue=this.inputElement.value;c.Event.dispatchEvent(this,"updateText",!1)};d._onClickHandler=function(a){this._isNeedShow&&(a.stopImmediatePropagation(),this._isNeedShow=!1,this.executeShow(),this.dispatchEvent(new c.Event("focus")))};d._onDisconnect=function(){this.inputElement=null;this.dispatchEvent(new c.Event("blur"))};d.setElementStyle=function(a,b){this.inputElement&&this._styleInfoes[a]!=b&&(this.inputElement.style[a]=b)};d._removeInput=function(){this.inputElement&&
b.getInstance().disconnectStageText(this)};d._resetStageText=function(){if(this.inputElement){var a=this._textfield;this.setElementStyle("fontFamily",a._fontFamily);this.setElementStyle("fontStyle",a._italic?"italic":"normal");this.setElementStyle("fontWeight",a._bold?"bold":"normal");this.setElementStyle("textAlign",a._textAlign);this.setElementStyle("fontSize",a._size+"px");this.setElementStyle("lineHeight",a._size+"px");this.setElementStyle("color",a._textColorString);this.setElementStyle("width",
a._getSize(c.Rectangle.identity).width+"px");this.setElementStyle("height",a._getSize(c.Rectangle.identity).height+"px");this.setElementStyle("verticalAlign",a._verticalAlign)}};return e}(c.StageText);c.HTML5StageText=d;d.prototype.__class__="egret.HTML5StageText";var b=function(){function a(){this._needShow=!1}var b=a.prototype;b.isInputOn=function(){return null!=this._stageText};b.isCurrentStageText=function(a){return this._stageText==a};b.initValue=function(a){a.style.position="absolute";a.style.left=
"0px";a.style.top="0px";a.style.border="none";a.style.padding="0"};b.initStageDelegateDiv=function(){var b=this,e=c.Browser.getInstance().$("#StageDelegateDiv");e||(e=c.Browser.getInstance().$new("div"),e.id="StageDelegateDiv",document.getElementById(c.StageDelegate.egret_root_div).appendChild(e),e.transforms(),b.initValue(e),e.style.width="0px",e.style.height="0px",b._inputDIV=c.Browser.getInstance().$new("div"),b.initValue(b._inputDIV),b._inputDIV.style.width="0px",b._inputDIV.style.height="0px",
b._inputDIV.position.x=0,b._inputDIV.position.y=-100,b._inputDIV.scale.x=1,b._inputDIV.scale.y=1,b._inputDIV.transforms(),b._inputDIV.style[c.Browser.getInstance().getTrans("transformOrigin")]="0% 0% 0px",e.appendChild(b._inputDIV),document.getElementById(c.StageDelegate.canvas_div_name).addEventListener("click",function(e){b._needShow?(b._needShow=!1,c.MainContext.instance.stage._changeSizeDispatchFlag=!1,b._stageText._onClickHandler(e),a.getInstance().show()):b._inputElement&&(b.clearInputElement(),
b._inputElement.blur(),b._inputElement=null)}),b.initInputElement(!0),b.initInputElement(!1))};b.initInputElement=function(a){var b=this;a?(a=document.createElement("textarea"),a.style.resize="none",b._multiElement=a,a.id="egretTextarea"):(a=document.createElement("input"),b._simpleElement=a,a.id="egretInput");a.type="text";b._inputDIV.appendChild(a);a.setAttribute("tabindex","-1");a.style.width="1px";a.style.height="12px";b.initValue(a);a.style.outline="thin";a.style.background="none";a.style.overflow=
"hidden";a.style.wordBreak="break-all";a.style.opacity=0;a.oninput=function(){b._stageText&&b._stageText._onInput()}};b.show=function(){var a=this._inputElement;c.__callAsync(function(){a.style.opacity=1},this)};b.disconnectStageText=function(a){this._stageText==a&&(this.clearInputElement(),this._inputElement.blur())};b.clearInputElement=function(){this._inputElement&&(this._inputElement.value="",this._inputElement.onblur=null,this._inputElement.style.width="1px",this._inputElement.style.height="12px",
this._inputElement.style.left="0px",this._inputElement.style.top="0px",this._inputElement.style.opacity=0,(this._simpleElement==this._inputElement?this._multiElement:this._simpleElement).style.display="block",this._inputDIV.position.x=0,this._inputDIV.position.y=-100,this._inputDIV.transforms());this._stageText&&(this._stageText._onDisconnect(),this._stageText=null);c.MainContext.instance.stage._changeSizeDispatchFlag=!0};b.getInputElement=function(a){this.clearInputElement();this._stageText=a;this._inputElement=
this._stageText._multiline?this._multiElement:this._simpleElement;(this._simpleElement==this._inputElement?this._multiElement:this._simpleElement).style.display="none";return this._inputElement};a.getInstance=function(){null==a._instance&&(a._instance=new c.HTMLInput,a._instance.initStageDelegateDiv());return a._instance};return a}();c.HTMLInput=b;b.prototype.__class__="egret.HTMLInput"})(egret||(egret={}));egret.StageText.create=function(){return new egret.HTML5StageText};var RES;
(function(c){var d=function(b){function a(a,c,d){void 0===c&&(c=!1);void 0===d&&(d=!1);b.call(this,a,c,d);this.itemsTotal=this.itemsLoaded=0;this.groupName="";this.resItem=null}__extends(a,b);a.dispatchResourceEvent=function(b,c,d,g,l,k){void 0===d&&(d="");void 0===g&&(g=null);void 0===l&&(l=0);void 0===k&&(k=0);var m=egret.Event._getPropertyData(a);m.groupName=d;m.resItem=g;m.itemsLoaded=l;m.itemsTotal=k;egret.Event._dispatchByTarget(a,b,c,m)};a.ITEM_LOAD_ERROR="itemLoadError";a.CONFIG_COMPLETE=
"configComplete";a.CONFIG_LOAD_ERROR="configLoadError";a.GROUP_PROGRESS="groupProgress";a.GROUP_COMPLETE="groupComplete";a.GROUP_LOAD_ERROR="groupLoadError";return a}(egret.Event);c.ResourceEvent=d;d.prototype.__class__="RES.ResourceEvent"})(RES||(RES={}));
(function(c){var d=function(){function b(a,b,c){this.groupName="";this.data=null;this._loaded=!1;this.name=a;this.url=b;this.type=c}var a=b.prototype;Object.defineProperty(a,"loaded",{get:function(){return this.data?this.data.loaded:this._loaded},set:function(a){this.data&&(this.data.loaded=a);this._loaded=a},enumerable:!0,configurable:!0});a.toString=function(){return'[ResourceItem name="'+this.name+'" url="'+this.url+'" type="'+this.type+'"]'};b.TYPE_XML="xml";b.TYPE_IMAGE="image";b.TYPE_BIN="bin";
b.TYPE_TEXT="text";b.TYPE_JSON="json";b.TYPE_SHEET="sheet";b.TYPE_FONT="font";b.TYPE_SOUND="sound";return b}();c.ResourceItem=d;d.prototype.__class__="RES.ResourceItem"})(RES||(RES={}));
(function(c){var d=function(){function b(){this.keyMap={};this.groupDic={};c.configInstance=this}var a=b.prototype;a.getGroupByName=function(a){var b=[];if(!this.groupDic[a])return b;a=this.groupDic[a];for(var c=a.length,d=0;d<c;d++)b.push(this.parseResourceItem(a[d]));return b};a.getRawGroupByName=function(a){return this.groupDic[a]?this.groupDic[a]:[]};a.createGroup=function(a,b,c){void 0===c&&(c=!1);if(!c&&this.groupDic[a]||!b||0==b.length)return!1;c=this.groupDic;for(var d=[],l=b.length,k=0;k<
l;k++){var m=b[k],n=c[m];if(n)for(var m=n.length,p=0;p<m;p++){var r=n[p];-1==d.indexOf(r)&&d.push(r)}else(r=this.keyMap[m])?-1==d.indexOf(r)&&d.push(r):egret.Logger.warningWithErrorId(2E3,m)}if(0==d.length)return!1;this.groupDic[a]=d;return!0};a.parseConfig=function(a,b){if(a){var c=a.resources;if(c)for(var d=c.length,l=0;l<d;l++){var k=c[l],m=k.url;m&&-1==m.indexOf("://")&&(k.url=b+m);this.addItemToKeyMap(k)}if(c=a.groups)for(d=c.length,l=0;l<d;l++){for(var m=c[l],n=[],p=m.keys.split(","),r=p.length,
s=0;s<r;s++)k=p[s].trim(),(k=this.keyMap[k])&&-1==n.indexOf(k)&&n.push(k);this.groupDic[m.name]=n}}};a.addSubkey=function(a,b){var c=this.keyMap[b];c&&!this.keyMap[a]&&(this.keyMap[a]=c)};a.addItemToKeyMap=function(a){this.keyMap[a.name]||(this.keyMap[a.name]=a);if(a.hasOwnProperty("subkeys")){var b=a.subkeys.split(",");a.subkeys=b;for(var c=b.length,d=0;d<c;d++){var l=b[d];null==this.keyMap[l]&&(this.keyMap[l]=a)}}};a.getName=function(a){return(a=this.keyMap[a])?a.name:""};a.getType=function(a){return(a=
this.keyMap[a])?a.type:""};a.getRawResourceItem=function(a){return this.keyMap[a]};a.getResourceItem=function(a){return(a=this.keyMap[a])?this.parseResourceItem(a):null};a.parseResourceItem=function(a){var b=new c.ResourceItem(a.name,a.url,a.type);b.data=a;return b};return b}();c.ResourceConfig=d;d.prototype.__class__="RES.ResourceConfig"})(RES||(RES={}));
(function(c){var d=function(b){function a(){b.call(this);this.thread=2;this.loadingCount=0;this.resInstance=this.callBack=null;this.groupTotalDic={};this.numLoadedDic={};this.itemListDic={};this.groupErrorDic={};this.retryTimesDic={};this.maxRetryTimes=3;this.failedList=[];this.priorityQueue={};this.lazyLoadList=[];this.analyzerDic={};this.queueIndex=0}__extends(a,b);var e=a.prototype;e.isGroupInLoading=function(a){return void 0!==this.itemListDic[a]};e.loadGroup=function(a,b,e){void 0===e&&(e=0);
if(!this.itemListDic[b]&&b)if(a&&0!=a.length){this.priorityQueue[e]?this.priorityQueue[e].push(b):this.priorityQueue[e]=[b];this.itemListDic[b]=a;e=a.length;for(var d=0;d<e;d++)a[d].groupName=b;this.groupTotalDic[b]=a.length;this.numLoadedDic[b]=0;this.next()}else egret.Logger.warningWithErrorId(2001,b),a=new c.ResourceEvent(c.ResourceEvent.GROUP_LOAD_ERROR),a.groupName=b,this.dispatchEvent(a)};e.loadItem=function(a){this.lazyLoadList.push(a);a.groupName="";this.next()};e.next=function(){for(;this.loadingCount<
this.thread;){var a=this.getOneResourceItem();if(!a)break;this.loadingCount++;if(a.loaded)this.onItemComplete(a);else{var b=this.analyzerDic[a.type];b||(b=this.analyzerDic[a.type]=egret.Injector.getInstance(c.AnalyzerBase,a.type));b.loadFile(a,this.onItemComplete,this)}}};e.getOneResourceItem=function(){if(0<this.failedList.length)return this.failedList.shift();var a=Number.NEGATIVE_INFINITY,b;for(b in this.priorityQueue)a=Math.max(a,b);a=this.priorityQueue[a];if(!a||0==a.length)return 0==this.lazyLoadList.length?
null:this.lazyLoadList.pop();b=a.length;for(var e,c=0;c<b;c++){this.queueIndex>=b&&(this.queueIndex=0);e=this.itemListDic[a[this.queueIndex]];if(0<e.length)break;this.queueIndex++}return 0==e.length?null:e.shift()};e.onItemComplete=function(a){this.loadingCount--;var b=a.groupName;if(!a.loaded){var e=this.retryTimesDic[a.name]||1;if(e>this.maxRetryTimes)delete this.retryTimesDic[a.name],c.ResourceEvent.dispatchResourceEvent(this.resInstance,c.ResourceEvent.ITEM_LOAD_ERROR,b,a);else{this.retryTimesDic[a.name]=
e+1;this.failedList.push(a);this.next();return}}if(b){this.numLoadedDic[b]++;var e=this.numLoadedDic[b],d=this.groupTotalDic[b];a.loaded||(this.groupErrorDic[b]=!0);c.ResourceEvent.dispatchResourceEvent(this.resInstance,c.ResourceEvent.GROUP_PROGRESS,b,a,e,d);e==d&&(a=this.groupErrorDic[b],this.removeGroupName(b),delete this.groupTotalDic[b],delete this.numLoadedDic[b],delete this.itemListDic[b],delete this.groupErrorDic[b],a?c.ResourceEvent.dispatchResourceEvent(this,c.ResourceEvent.GROUP_LOAD_ERROR,
b):c.ResourceEvent.dispatchResourceEvent(this,c.ResourceEvent.GROUP_COMPLETE,b))}else this.callBack.call(this.resInstance,a);this.next()};e.removeGroupName=function(a){for(var b in this.priorityQueue){for(var e=this.priorityQueue[b],c=e.length,d=0,m=!1,c=e.length,n=0;n<c;n++){if(e[n]==a){e.splice(d,1);m=!0;break}d++}if(m){0==e.length&&delete this.priorityQueue[b];break}}};return a}(egret.EventDispatcher);c.ResourceLoader=d;d.prototype.__class__="RES.ResourceLoader"})(RES||(RES={}));
(function(c){var d=function(b){function a(){b.call(this);this.resourceConfig=null;this.resourceConfig=c.configInstance}__extends(a,b);var e=a.prototype;e.addSubkey=function(a,b){this.resourceConfig.addSubkey(a,b)};e.loadFile=function(a,b,e){};e.getRes=function(a){};e.destroyRes=function(a){return!1};a.getStringPrefix=function(a){if(!a)return"";var b=a.indexOf(".");return-1!=b?a.substring(0,b):""};a.getStringTail=function(a){if(!a)return"";var b=a.indexOf(".");return-1!=b?a.substring(b+1):""};return a}(egret.HashObject);
c.AnalyzerBase=d;d.prototype.__class__="RES.AnalyzerBase"})(RES||(RES={}));
(function(c){var d=function(b){function a(){b.call(this);this.fileDic={};this.resItemDic=[];this._dataFormat=egret.URLLoaderDataFormat.BINARY;this.recycler=new egret.Recycler}__extends(a,b);var e=a.prototype;e.loadFile=function(a,b,e){if(this.fileDic[a.name])b.call(e,a);else{var c=this.getLoader();this.resItemDic[c.hashCode]={item:a,func:b,thisObject:e};c.load(new egret.URLRequest(a.url))}};e.getLoader=function(){var a=this.recycler.pop();a||(a=new egret.URLLoader,a.addEventListener(egret.Event.COMPLETE,
this.onLoadFinish,this),a.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this));a.dataFormat=this._dataFormat;return a};e.onLoadFinish=function(a){var b=a.target,e=this.resItemDic[b.hashCode];delete this.resItemDic[b.hashCode];var c=e.item,d=e.func;c.loaded=a.type==egret.Event.COMPLETE;c.loaded&&this.analyzeData(c,b.data);this.recycler.push(b);d.call(e.thisObject,c)};e.analyzeData=function(a,b){var e=a.name;!this.fileDic[e]&&b&&(this.fileDic[e]=b)};e.getRes=function(a){return this.fileDic[a]};
e.hasRes=function(a){return null!=this.getRes(a)};e.destroyRes=function(a){return this.fileDic[a]?(delete this.fileDic[a],!0):!1};return a}(c.AnalyzerBase);c.BinAnalyzer=d;d.prototype.__class__="RES.BinAnalyzer"})(RES||(RES={}));
(function(c){var d=function(b){function a(){b.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXTURE}__extends(a,b);a.prototype.analyzeData=function(a,b){var c=a.name;!this.fileDic[c]&&b&&(this.fileDic[c]=b,(c=a.data)&&c.scale9grid&&(c=c.scale9grid.split(","),b.scale9Grid=new egret.Rectangle(parseInt(c[0]),parseInt(c[1]),parseInt(c[2]),parseInt(c[3]))))};return a}(c.BinAnalyzer);c.ImageAnalyzer=d;d.prototype.__class__="RES.ImageAnalyzer"})(RES||(RES={}));
(function(c){var d=function(b){function a(){b.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(a,b);a.prototype.analyzeData=function(a,b){var c=a.name;if(!this.fileDic[c]&&b)try{this.fileDic[c]=JSON.parse(b)}catch(d){egret.Logger.warningWithErrorId(1017,a.url,b)}};return a}(c.BinAnalyzer);c.JsonAnalyzer=d;d.prototype.__class__="RES.JsonAnalyzer"})(RES||(RES={}));
(function(c){var d=function(b){function a(){b.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(a,b);return a}(c.BinAnalyzer);c.TextAnalyzer=d;d.prototype.__class__="RES.TextAnalyzer"})(RES||(RES={}));
(function(c){var d=function(b){function a(){b.call(this);this.sheetMap={};this.textureMap={};this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(a,b);var e=a.prototype;e.getRes=function(a){var b=this.fileDic[a];b||(b=this.textureMap[a]);!b&&(b=c.AnalyzerBase.getStringPrefix(a),b=this.fileDic[b])&&(a=c.AnalyzerBase.getStringTail(a),b=b.getTexture(a));return b};e.onLoadFinish=function(a){var b=a.target,e=this.resItemDic[b.hashCode];delete this.resItemDic[b.hashCode];var c=e.item,d=e.func;c.loaded=
a.type==egret.Event.COMPLETE;if(c.loaded)if("string"==typeof b.data){if(c.loaded=!1,a=this.analyzeConfig(c,b.data)){b=c.url;c.url=a;this._dataFormat=egret.URLLoaderDataFormat.TEXTURE;this.loadFile(c,d,e.thisObject);this._dataFormat=egret.URLLoaderDataFormat.TEXT;c.url=b;return}}else this.analyzeBitmap(c,b.data);this.recycler.push(b);d.call(e.thisObject,c)};e.analyzeConfig=function(a,b){var e=a.name,c,d="";try{c=JSON.parse(b)}catch(m){egret.Logger.warningWithErrorId(1017,a.url,b)}c&&(this.sheetMap[e]=
c,d=this.getRelativePath(a.url,c.file));return d};e.analyzeBitmap=function(a,b){var e=a.name;if(!this.fileDic[e]&&b){var c=this.sheetMap[e];delete this.sheetMap[e];c=this.parseSpriteSheet(b,c,a.data&&a.data.subkeys?"":e);this.fileDic[e]=c}};e.getRelativePath=function(a,b){a=a.split("\\").join("/");var e=a.lastIndexOf("/");return a=-1!=e?a.substring(0,e+1)+b:b};e.parseSpriteSheet=function(a,b,e){b=b.frames;if(!b)return null;var c=new egret.SpriteSheet(a),d=this.textureMap,m;for(m in b){var n=b[m];
a=c.createTexture(m,n.x,n.y,n.w,n.h,n.offX,n.offY,n.sourceW,n.sourceH);n.scale9grid&&(n=n.scale9grid.split(","),a.scale9Grid=new egret.Rectangle(parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),parseInt(n[3])));null==d[m]&&(d[m]=a,e&&this.addSubkey(m,e))}return c};e.destroyRes=function(a){var b=this.fileDic[a];if(b){delete this.fileDic[a];for(var e in b._textureMap)this.textureMap[e]&&delete this.textureMap[e];return!0}return!1};return a}(c.BinAnalyzer);c.SheetAnalyzer=d;d.prototype.__class__="RES.SheetAnalyzer"})(RES||
(RES={}));
(function(c){var d=function(b){function a(){b.call(this)}__extends(a,b);var e=a.prototype;e.analyzeConfig=function(a,b){var e=a.name,c,d="";try{c=JSON.parse(b)}catch(m){}c?d=this.getRelativePath(a.url,c.file):(c=b,d=this.getTexturePath(a.url,c));this.sheetMap[e]=c;return d};e.analyzeBitmap=function(a,b){var e=a.name;if(!this.fileDic[e]&&b){var c=this.sheetMap[e];delete this.sheetMap[e];c=new egret.BitmapFont(b,c);this.fileDic[e]=c}};e.getTexturePath=function(a,b){var e="",c=b.split("\n")[2],d=c.indexOf('file="');
-1!=d&&(c=c.substring(d+6),d=c.indexOf('"'),e=c.substring(0,d));a=a.split("\\").join("/");d=a.lastIndexOf("/");return a=-1!=d?a.substring(0,d+1)+e:e};e.destroyRes=function(a){return this.fileDic[a]?(delete this.fileDic[a],!0):!1};return a}(c.SheetAnalyzer);c.FontAnalyzer=d;d.prototype.__class__="RES.FontAnalyzer"})(RES||(RES={}));
(function(c){var d=function(b){function a(){b.call(this);this._dataFormat=egret.URLLoaderDataFormat.SOUND}__extends(a,b);a.prototype.analyzeData=function(a,b){var c=a.name;!this.fileDic[c]&&b&&(this.fileDic[c]=b,(c=a.data)&&c.soundType?b.preload(c.soundType):b.preload(egret.Sound.EFFECT))};return a}(c.BinAnalyzer);c.SoundAnalyzer=d;d.prototype.__class__="RES.SoundAnalyzer"})(RES||(RES={}));
(function(c){var d=function(b){function a(){b.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(a,b);a.prototype.analyzeData=function(a,b){var c=a.name;if(!this.fileDic[c]&&b)try{var d=egret.XML.parse(b);this.fileDic[c]=d}catch(l){}};return a}(c.BinAnalyzer);c.XMLAnalyzer=d;d.prototype.__class__="RES.XMLAnalyzer"})(RES||(RES={}));
(function(c){c.loadConfig=function(a,e,c){void 0===e&&(e="");void 0===c&&(c="json");b.loadConfig(a,e,c)};c.loadGroup=function(a,e){void 0===e&&(e=0);b.loadGroup(a,e)};c.isGroupLoaded=function(a){return b.isGroupLoaded(a)};c.getGroupByName=function(a){return b.getGroupByName(a)};c.createGroup=function(a,e,c){void 0===c&&(c=!1);return b.createGroup(a,e,c)};c.hasRes=function(a){return b.hasRes(a)};c.parseConfig=function(a,e){void 0===e&&(e="");b.parseConfig(a,e)};c.getRes=function(a){return b.getRes(a)};
c.getResAsync=function(a,e,c){b.getResAsync(a,e,c)};c.getResByUrl=function(a,e,c,d){void 0===d&&(d="");b.getResByUrl(a,e,c,d)};c.destroyRes=function(a){return b.destroyRes(a)};c.setMaxLoadingThread=function(a){b.setMaxLoadingThread(a)};c.setMaxRetryTimes=function(a){b.setMaxRetryTimes(a)};c.addEventListener=function(a,e,c,d,g){void 0===d&&(d=!1);void 0===g&&(g=0);b.addEventListener(a,e,c,d,g)};c.removeEventListener=function(a,e,c,d){void 0===d&&(d=!1);b.removeEventListener(a,e,c,d)};var d=function(a){function b(){a.call(this);
this.analyzerDic={};this.configItemList=[];this.configComplete=this.callLaterFlag=!1;this.loadedGroups=[];this.groupNameList=[];this.asyncDic={};this.init()}__extends(b,a);var d=b.prototype;d.getAnalyzerByType=function(a){var b=this.analyzerDic[a];b||(b=this.analyzerDic[a]=egret.Injector.getInstance(c.AnalyzerBase,a));return b};d.init=function(){egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_BIN)||egret.Injector.mapClass(c.AnalyzerBase,c.BinAnalyzer,c.ResourceItem.TYPE_BIN);egret.Injector.hasMapRule(c.AnalyzerBase,
c.ResourceItem.TYPE_IMAGE)||egret.Injector.mapClass(c.AnalyzerBase,c.ImageAnalyzer,c.ResourceItem.TYPE_IMAGE);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_TEXT)||egret.Injector.mapClass(c.AnalyzerBase,c.TextAnalyzer,c.ResourceItem.TYPE_TEXT);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_JSON)||egret.Injector.mapClass(c.AnalyzerBase,c.JsonAnalyzer,c.ResourceItem.TYPE_JSON);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_SHEET)||egret.Injector.mapClass(c.AnalyzerBase,
c.SheetAnalyzer,c.ResourceItem.TYPE_SHEET);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_FONT)||egret.Injector.mapClass(c.AnalyzerBase,c.FontAnalyzer,c.ResourceItem.TYPE_FONT);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_SOUND)||egret.Injector.mapClass(c.AnalyzerBase,c.SoundAnalyzer,c.ResourceItem.TYPE_SOUND);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_XML)||egret.Injector.mapClass(c.AnalyzerBase,c.XMLAnalyzer,c.ResourceItem.TYPE_XML);this.resConfig=
new c.ResourceConfig;this.resLoader=new c.ResourceLoader;this.resLoader.callBack=this.onResourceItemComp;this.resLoader.resInstance=this;this.resLoader.addEventListener(c.ResourceEvent.GROUP_COMPLETE,this.onGroupComp,this);this.resLoader.addEventListener(c.ResourceEvent.GROUP_LOAD_ERROR,this.onGroupError,this)};d.loadConfig=function(a,b,e){void 0===e&&(e="json");this.configItemList.push({url:a,resourceRoot:b,type:e});this.callLaterFlag||(egret.callLater(this.startLoadConfig,this),this.callLaterFlag=
!0)};d.startLoadConfig=function(){this.callLaterFlag=!1;var a=this.configItemList;this.configItemList=[];this.loadingConfigList=a;for(var d=a.length,f=[],k=0;k<d;k++){var m=a[k],m=new c.ResourceItem(m.url,m.url,m.type);f.push(m)}this.resLoader.loadGroup(f,b.GROUP_CONFIG,Number.MAX_VALUE)};d.isGroupLoaded=function(a){return-1!=this.loadedGroups.indexOf(a)};d.getGroupByName=function(a){return this.resConfig.getGroupByName(a)};d.loadGroup=function(a,b){void 0===b&&(b=0);if(-1!=this.loadedGroups.indexOf(a))c.ResourceEvent.dispatchResourceEvent(this,
c.ResourceEvent.GROUP_COMPLETE,a);else if(!this.resLoader.isGroupInLoading(a))if(this.configComplete){var e=this.resConfig.getGroupByName(a);this.resLoader.loadGroup(e,a,b)}else this.groupNameList.push({name:a,priority:b})};d.createGroup=function(a,b,e){void 0===e&&(e=!1);if(e){var c=this.loadedGroups.indexOf(a);-1!=c&&this.loadedGroups.splice(c,1)}return this.resConfig.createGroup(a,b,e)};d.onGroupComp=function(a){if(a.groupName==b.GROUP_CONFIG){a=this.loadingConfigList.length;for(var d=0;d<a;d++){var f=
this.loadingConfigList[d],k=this.getAnalyzerByType(f.type),m=k.getRes(f.url);k.destroyRes(f.url);this.resConfig.parseConfig(m,f.resourceRoot)}this.configComplete=!0;this.loadingConfigList=null;c.ResourceEvent.dispatchResourceEvent(this,c.ResourceEvent.CONFIG_COMPLETE);this.loadDelayGroups()}else this.loadedGroups.push(a.groupName),this.dispatchEvent(a)};d.loadDelayGroups=function(){var a=this.groupNameList;this.groupNameList=[];for(var b=a.length,e=0;e<b;e++){var c=a[e];this.loadGroup(c.name,c.priority)}};
d.onGroupError=function(a){a.groupName==b.GROUP_CONFIG?(this.loadingConfigList=null,c.ResourceEvent.dispatchResourceEvent(this,c.ResourceEvent.CONFIG_LOAD_ERROR)):this.dispatchEvent(a)};d.hasRes=function(a){var b=this.resConfig.getType(a);return""==b&&(a=c.AnalyzerBase.getStringPrefix(a),b=this.resConfig.getType(a),""==b)?!1:!0};d.parseConfig=function(a,b){this.resConfig.parseConfig(a,b);this.configComplete||this.loadingConfigList||(this.configComplete=!0,this.loadDelayGroups())};d.getRes=function(a){var b=
this.resConfig.getType(a);return""==b&&(b=c.AnalyzerBase.getStringPrefix(a),b=this.resConfig.getType(b),""==b)?null:this.getAnalyzerByType(b).getRes(a)};d.getResAsync=function(a,b,e){var d=this.resConfig.getType(a),f=this.resConfig.getName(a);if(""==d&&(f=c.AnalyzerBase.getStringPrefix(a),d=this.resConfig.getType(f),""==d)){b.call(e,null);return}(d=this.getAnalyzerByType(d).getRes(a))?b.call(e,d):(a={key:a,compFunc:b,thisObject:e},this.asyncDic[f]?this.asyncDic[f].push(a):(this.asyncDic[f]=[a],f=
this.resConfig.getResourceItem(f),this.resLoader.loadItem(f)))};d.getResByUrl=function(a,b,e,d){void 0===d&&(d="");if(a){d||(d=this.getTypeByUrl(a));var f=this.getAnalyzerByType(d).getRes(a);f?b.call(e,f):(b={key:a,compFunc:b,thisObject:e},this.asyncDic[a]?this.asyncDic[a].push(b):(this.asyncDic[a]=[b],a=new c.ResourceItem(a,a,d),this.resLoader.loadItem(a)))}else b.call(e,null)};d.getTypeByUrl=function(a){(a=a.substr(a.lastIndexOf(".")+1))&&(a=a.toLowerCase());switch(a){case c.ResourceItem.TYPE_XML:case c.ResourceItem.TYPE_JSON:case c.ResourceItem.TYPE_SHEET:break;
case "png":case "jpg":case "gif":case "jpeg":case "bmp":a=c.ResourceItem.TYPE_IMAGE;break;case "fnt":a=c.ResourceItem.TYPE_FONT;break;case "txt":a=c.ResourceItem.TYPE_TEXT;break;case "mp3":case "ogg":case "mpeg":case "wav":case "m4a":case "mp4":case "aiff":case "wma":case "mid":a=c.ResourceItem.TYPE_SOUND;break;default:a=c.ResourceItem.TYPE_BIN}return a};d.onResourceItemComp=function(a){var b=this.asyncDic[a.name];delete this.asyncDic[a.name];a=this.getAnalyzerByType(a.type);for(var e=b.length,c=
0;c<e;c++){var d=b[c],f=a.getRes(d.key);d.compFunc.call(d.thisObject,f,d.key)}};d.destroyRes=function(a){var b=this.resConfig.getRawGroupByName(a);if(b){var e=this.loadedGroups.indexOf(a);-1!=e&&this.loadedGroups.splice(e,1);a=b.length;for(var c=0;c<a;c++){e=b[c];e.loaded=!1;var d=this.getAnalyzerByType(e.type);d.destroyRes(e.name)}return!0}b=this.resConfig.getType(a);if(""==b)return!1;e=this.resConfig.getRawResourceItem(a);e.loaded=!1;d=this.getAnalyzerByType(b);return d.destroyRes(a)};d.setMaxLoadingThread=
function(a){1>a&&(a=1);this.resLoader.thread=a};d.setMaxRetryTimes=function(a){a=Math.max(a,0);this.resLoader.maxRetryTimes=a};b.GROUP_CONFIG="RES__CONFIG";return b}(egret.EventDispatcher);d.prototype.__class__="RES.Resource";var b=new d})(RES||(RES={}));var starlingswf;
(function(c){var d=function(b){function a(){b.apply(this,arguments)}__extends(a,b);var e=a.prototype;e.getTextField=function(a){return this.getChildByName(a)};e.getMovie=function(a){return this.getChildByName(a)};e.getSprite=function(a){return this.getChildByName(a)};e.getImage=function(a){return this.getChildByName(a)};return a}(egret.DisplayObjectContainer);c.SwfSprite=d;d.prototype.__class__="starlingswf.SwfSprite"})(starlingswf||(starlingswf={}));
(function(c){var d=function(){function b(a,d,h){void 0===h&&(h=24);this._swfData=a;this._keyData={};for(var g in this._swfData.k)this._keyData[this._swfData.k[g]]=g;this._assetManager=d;this._createDisplayFuns={};this._createDisplayFuns[b.dataKey_Sprite]=this.createSprite;this._createDisplayFuns[b.dataKey_MovieClip]=this.createMovie;this._createDisplayFuns[b.dataKey_Image]=this.createImage;this._createDisplayFuns[b.dataKey_Scale9]=this.createS9Image;this._createDisplayFuns[b.dataKey_ShapeImg]=this.createShapeImage;
this._createDisplayFuns[b.dataKey_TextField]=this.createTextField;this.fps=h;this.swfUpdateManager=c.SwfUpdateManager.createSwfUpdateManager(h)}var a=b.prototype;a.resume=function(){this.swfUpdateManager.resume()};a.pause=function(){this.swfUpdateManager.pause()};a.createSprite=function(a,d,h){void 0===d&&(d=null);void 0===h&&(h=null);null==h&&(h=this._swfData[b.dataKey_Sprite][this.getNameKey(a)]);a=new c.SwfSprite;for(var g=h.length,l,k,m=0;m<g;m++)l=h[m],k=this._createDisplayFuns[l[1]],null!=k&&
(k=k.apply(this,[l[0],l]),k.name=l[9],k.x=l[2],k.y=l[3],l[1]!=b.dataKey_Scale9&&l[1]!=b.dataKey_ShapeImg&&(k.scaleX=l[4],k.scaleY=l[5]),k.skewX=l[6],k.skewY=l[7],k.alpha=l[8],a.addChild(k));null!=d&&c.SwfBlendMode.setBlendMode(a,d[11]);return a};a.createMovie=function(a,d){void 0===d&&(d=null);var h=this._swfData[b.dataKey_MovieClip][this.getNameKey(a)],g=h.objCount,l={},k,m,n,p,r;for(r in g){m=g[r][0];n=g[r][1];k=null==l[r]?[]:l[r];for(var s=0;s<n;s++)p=this._createDisplayFuns[m],null!=p&&k.push(p.apply(this,
[this.getKeyName(r),null]));l[r]=k}g=new c.SwfMovieClip(h.frames,h.labels,l,this,h.frameEvents);g.loop=h.loop;null!=d&&c.SwfBlendMode.setBlendMode(g,d[11]);return g};a.createImage=function(a,d){void 0===d&&(d=null);var h=this._swfData[b.dataKey_Image][this.getNameKey(a)],g=this._assetManager.createBitmap(a);g.anchorOffsetX=h[0];g.anchorOffsetY=h[1];null!=d&&c.SwfBlendMode.setBlendMode(g,d[11]);return g};a.createS9Image=function(a,d){void 0===d&&(d=null);var h=this._swfData[b.dataKey_Scale9][this.getNameKey(a)],
g=this._assetManager.createBitmap(a);g.scale9Grid=new egret.Rectangle(h[0],h[1],h[2],h[3]);null!=d&&(g.width=d[10],g.height=d[11],c.SwfBlendMode.setBlendMode(g,d[13]));return g};a.createShapeImage=function(a,b){void 0===b&&(b=null);var d=this._assetManager.createBitmap(a);d.fillMode=egret.BitmapFillMode.REPEAT;null!=b&&(d.width=b[10],d.height=b[11],c.SwfBlendMode.setBlendMode(d,b[13]));return d};a.createTextField=function(a,b){void 0===b&&(b=null);var d=new egret.TextField;null!=b&&(d.width=b[10],
d.height=b[11],d.fontFamily=b[12],d.textColor=b[13],d.size=b[14],d.textAlign=b[15],d.text=b[18],c.SwfBlendMode.setBlendMode(d,b[20]));return d};a.getNameKey=function(a){return this._swfData.k?this._swfData.k[a]:a};a.getKeyName=function(a){return this._keyData&&this._keyData[a]?this._keyData[a]:a};b.dataKey_Sprite="spr";b.dataKey_Image="img";b.dataKey_MovieClip="mc";b.dataKey_TextField="text";b.dataKey_Button="btn";b.dataKey_Scale9="s9";b.dataKey_ShapeImg="shapeImg";b.dataKey_Component="comp";b.dataKey_Particle=
"particle";return b}();c.Swf=d;d.prototype.__class__="starlingswf.Swf"})(starlingswf||(starlingswf={}));
(function(c){var d=function(b){function a(a,c,d,g){void 0===c&&(c=!1);void 0===d&&(d=!1);void 0===g&&(g=[]);b.call(this,a,c,d);this._frames=g}__extends(a,b);Object.defineProperty(a.prototype,"frames",{get:function(){return this._frames},enumerable:!0,configurable:!0});a.SWF_FRAME="swfFrame";return a}(egret.Event);c.SwfEvent=d;d.prototype.__class__="starlingswf.SwfEvent"})(starlingswf||(starlingswf={}));
(function(c){var d=function(){function b(){}b.setBlendMode=function(a,e){a.blendMode=e&&b.modes[e]?e:"normal"};b.modes={normal:!0,add:!0};return b}();c.SwfBlendMode=d;d.prototype.__class__="starlingswf.SwfBlendMode"})(starlingswf||(starlingswf={}));
(function(c){var d=function(){function b(){this._sheets={};this._textures={}}var a=b.prototype;a.addSpriteSheet=function(a,b){this._sheets[a]=b};a.addTexture=function(a,b){this._textures[a]=b};a.createBitmap=function(a){var b,c;for(c in this._sheets)if(b=this._sheets[c],b=b.getTexture(a),null!=b)break;null==b&&(b=this._textures[a]);if(null==b)return null;a=new egret.Bitmap;a.texture=b;return a};return b}();c.SwfAssetManager=d;d.prototype.__class__="starlingswf.SwfAssetManager"})(starlingswf||(starlingswf=
{}));
(function(c){var d=function(b){function a(a,e,c,d,k){void 0===k&&(k=null);b.call(this);this._isPlay=!1;this.loop=!0;this._completeFunction=null;this._isRewind=this._hasCompleteListener=!1;this._frames=a;this._labels=e;this._displayObjects=c;this._frameEvents=k;this._startFrame=0;this._endFrame=this._frames.length-1;this._ownerSwf=d;this.setCurrentFrame(0,!1);this.play()}__extends(a,b);var e=a.prototype;Object.defineProperty(e,"rewind",{set:function(a){this._isRewind=a;this.setCurrentFrame(this._isRewind?this._endFrame:
this._startFrame,!1)},enumerable:!0,configurable:!0});e.addFrameEvents=function(a){for(var b in a){var e="@"+a[b].join("@"),c="";this._frameEvents[b]&&(c=this._frameEvents[b]);c+=e;this._frameEvents[b]=c}};e.update=function(){if(this._isPlay&&this._stage)if(this._isRewind)if(this._currentFrame<this._startFrame){var a=!1;this.loop&&this._startFrame!=this._endFrame||(this._ownerSwf&&this.stop(!1),a=!0);this._hasCompleteListener&&this.dispatchEventWith(egret.Event.COMPLETE);a||(this.setCurrentFrame(this._endFrame),
this._currentFrame-=1)}else this.setCurrentFrame(this._currentFrame),this._currentFrame-=1;else this._currentFrame>this._endFrame?(a=!1,this.loop&&this._startFrame!=this._endFrame||(this._ownerSwf&&this.stop(!1),a=!0),this._hasCompleteListener&&this.dispatchEventWith(egret.Event.COMPLETE),a||(this.setCurrentFrame(this._startFrame),this._currentFrame+=1)):(this.setCurrentFrame(this._currentFrame),this._currentFrame+=1)};e.setCurrentFrame=function(a,b){void 0===b&&(b=!0);this._children.length=0;a>=
this._frames.length&&(a=this._frames.length-1);this._currentFrame=a;this.__frameInfos=this._frames[this._currentFrame];for(var e,d,k,m=this.__frameInfos.length,n=0;n<m;n++){e=this.__frameInfos[n];d=e[10];d=this._displayObjects[e[0]][d];d.__hack_local_matrix||(d.__hack_local_matrix=new egret.Matrix);k=d.__hack_local_matrix;k.a=e[2];k.b=e[3];k.c=e[4];k.d=e[5];k.tx=e[6];k.ty=e[7];d._alpha=e[8];d.name=e[9];switch(e[1]){case c.Swf.dataKey_Scale9:d.width=e[11];d.height=e[12];c.SwfBlendMode.setBlendMode(d,
e[13]);break;case c.Swf.dataKey_ShapeImg:d.width=e[11];d.height=e[12];c.SwfBlendMode.setBlendMode(d,e[13]);break;case c.Swf.dataKey_TextField:k=d;k.width=e[11];k.height=e[12];k.fontFamily=e[13];k.textColor=e[14];k.size=e[15];k.textAlign=e[16];e[19]&&"\r"!=e[19]&&""!=e[19]&&(k.text=e[19]);c.SwfBlendMode.setBlendMode(k,e[20]);break;default:c.SwfBlendMode.setBlendMode(d,e[11])}this._children.push(d);d._parent=this}b&&null!=this._frameEvents&&null!=this._frameEvents[this._currentFrame]&&(e=this._frameEvents[this._currentFrame].substr(1).split("@"),
this.dispatchEvent(new c.SwfEvent(c.SwfEvent.SWF_FRAME,!1,!1,e)))};e.getCurrentFrame=function(){return this._currentFrame};e.play=function(){this._isPlay=!0;this._ownerSwf.swfUpdateManager.addSwfAnimation(this);var a,b,e;for(a in this._displayObjects)if(0==a.indexOf(c.Swf.dataKey_MovieClip)){b=this._displayObjects[a];e=b.length;for(var d=0;d<e;d++)b[d].play()}};e.stop=function(a){void 0===a&&(a=!0);this._isPlay=!1;this._ownerSwf.swfUpdateManager.removeSwfAnimation(this);if(a){var b,e,d;for(b in this._displayObjects)if(0==
b.indexOf(c.Swf.dataKey_MovieClip)){e=this._displayObjects[b];d=e.length;for(var k=0;k<d;k++)e[k].stop(a)}}};e.gotoAndStop=function(a,b){void 0===b&&(b=!0);this.goTo(a);this.stop(b)};e.gotoAndPlay=function(a){this._isRewind=!1;this.goTo(a);this.play()};e.gotoAndRewind=function(a){this._isRewind=!0;this.goTo(a);this.play()};e.goTo=function(a){"string"==typeof a?(a=this.getLabelData(a),this._currentLabel=a[0],this._currentFrame=this._startFrame=a[1],this._endFrame=a[2]):"number"==typeof a&&(this._currentFrame=
this._startFrame=a,this._endFrame=this._frames.length-1);this.setCurrentFrame(this._currentFrame,!1)};e.getLabelData=function(a){for(var b=this._labels.length,e,c=0;c<b;c++)if(e=this._labels[c],e[0]==a)return e;return null};e.isPlay=function(){return this._isPlay};e.totalFrames=function(){return this._frames.length};e.currentLabel=function(){return this._currentLabel};e.labels=function(){for(var a=this._labels.length,b=[],e=0;e<a;e++)b.push(this._labels[e][0]);return b};e.hasLabel=function(a){return-1!=
this.labels().indexOf(a)};e.addEventListener=function(a,e,c,d,k){void 0===d&&(d=!1);void 0===k&&(k=0);b.prototype.addEventListener.call(this,a,e,c,d,k);this._hasCompleteListener=this.hasEventListener(egret.Event.COMPLETE)};e.removeEventListener=function(a,e,c,d){void 0===d&&(d=!1);b.prototype.removeEventListener.call(this,a,e,c,d);this._hasCompleteListener=this.hasEventListener(egret.Event.COMPLETE)};return a}(c.SwfSprite);c.SwfMovieClip=d;d.prototype.__class__="starlingswf.SwfMovieClip"})(starlingswf||
(starlingswf={}));(function(c){var d=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype.parseSpriteSheet=function(a,b){var c=b.frames;if(c){var d=new egret.SpriteSheet(a),l;for(l in c){var k=c[l];d.createTexture(l,k.x,k.y,k.w,k.h,-k.offX,-k.offY)}return d}};return a}(RES.SheetAnalyzer);c.StarlingSwfSheetAnalyzer=d;d.prototype.__class__="starlingswf.StarlingSwfSheetAnalyzer"})(starlingswf||(starlingswf={}));
(function(c){var d=function(){function b(){}var a=b.prototype;b.createSwfUpdateManager=function(a){var c=new b;c._animations=[];c._addQueue=[];c._removeQueue=[];c._currentTime=0;c.setFps(a);c.resume();return c};a.resume=function(){egret.Ticker.getInstance().register(this.update,this)};a.pause=function(){egret.Ticker.getInstance().unregister(this.update,this)};a.setFps=function(a){this._fps=a;this._fpsTime=1E3/a};a.addSwfAnimation=function(a){this._addQueue.push(a)};a.removeSwfAnimation=function(a){this._removeQueue.push(a)};
a.updateAdd=function(){for(var a=this._addQueue.length,b,c,d=0;d<a;d++)c=this._addQueue.pop(),b=this._animations.indexOf(c),-1==b&&this._animations.push(c)};a.updateRemove=function(){for(var a=this._removeQueue.length,b,c=0;c<a;c++)b=this._removeQueue.pop(),b=this._animations.indexOf(b),-1!=b&&this._animations.splice(b,1)};a.update=function(a){this._currentTime+=a;if(!(this._currentTime<this._fpsTime))for(this._currentTime-=this._fpsTime,this._update(),a=0;this._currentTime>this._fpsTime;)this._currentTime-=
this._fpsTime,a++,4>a&&this._update()};a._update=function(){this.updateRemove();this.updateAdd();for(var a=this._animations.length,b=0;b<a;b++)this._animations[b].update()};return b}();c.SwfUpdateManager=d;d.prototype.__class__="starlingswf.SwfUpdateManager"})(starlingswf||(starlingswf={}));var tweenSetTimeOut=function(c,d){egret.setTimeout.call(this,c,this,d)},tweenClearTimeout=egret.clearTimeout,_gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;
(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(c,d,b){var a=function(a){var b,e=[],c=a.length;for(b=0;b!==c;e.push(a[b++]));return e},e=function(a,c,d){b.call(this,a,c,d);this._cycle=0;this._yoyo=!0===this.vars.yoyo;this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._dirty=!0;this.render=e.prototype.render},f=b._internals,h=f.isSelector,g=f.isArray,l=e.prototype=b.to({},
0.1,{}),k=[];e.version="1.13.1";l.constructor=e;l.kill()._gc=!1;e.killTweensOf=e.killDelayedCallsTo=b.killTweensOf;e.getTweensOf=b.getTweensOf;e.lagSmoothing=b.lagSmoothing;e.ticker=b.ticker;e.render=b.render;l.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),b.prototype.invalidate.call(this)};l.updateTo=function(a,e){var c,d=this.ratio;e&&this._startTime<this._timeline._time&&(this._startTime=
this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(c in a)this.vars[c]=a[c];if(this._initted)if(e)this._initted=!1;else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&b._onPluginEvent("_onDisable",this),0.998<this._time/this._duration)c=this._time,this.render(0,!0,!1),this._initted=!1,this.render(c,!0,!1);else if(0<this._time){this._initted=!1;this._init();for(var d=1/(1-d),f=this._firstPT;f;)c=
f.s+f.c,f.c*=d,f.s=c-f.c,f=f._next}return this};l.render=function(a,b,e){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var c,d,h,g,m,l,n,p=this._dirty?this.totalDuration():this._totalDuration,R=this._time,T=this._totalTime,U=this._cycle,S=this._duration,W=this._rawPrevTime;if(a>=p?(this._totalTime=p,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=S,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):
1),this._reversed||(c=!0,d="onComplete"),0===S&&(this._initted||!this.vars.lazy||e)&&(this._startTime===this._timeline._duration&&(a=0),(0===a||0>W||1E-10===W)&&W!==a&&(e=!0,1E-10<W&&(d="onReverseComplete")),this._rawPrevTime=n=!b||a||W===a?a:1E-10)):1E-7>a?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==T||0===S&&0<W&&1E-10!==W)&&(d="onReverseComplete",c=this._reversed),0>a?(this._active=!1,0===S&&(this._initted||!this.vars.lazy||e)&&(0<=W&&
(e=!0),this._rawPrevTime=n=!b||a||W===a?a:1E-10)):this._initted||(e=!0)):(this._totalTime=this._time=a,0!==this._repeat&&(h=S+this._repeatDelay,this._cycle=this._totalTime/h>>0,0!==this._cycle&&this._cycle===this._totalTime/h&&this._cycle--,this._time=this._totalTime-this._cycle*h,this._yoyo&&0!==(1&this._cycle)&&(this._time=S-this._time),this._time>S?this._time=S:0>this._time&&(this._time=0)),this._easeType?(g=this._time/S,m=this._easeType,l=this._easePower,(1===m||3===m&&0.5<=g)&&(g=1-g),3===m&&
(g*=2),1===l?g*=g:2===l?g*=g*g:3===l?g*=g*g*g:4===l&&(g*=g*g*g*g),this.ratio=1===m?1-g:2===m?g:0.5>this._time/S?g/2:1-g/2):this.ratio=this._ease.getRatio(this._time/S)),R===this._time&&!e&&U===this._cycle)return T!==this._totalTime&&this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||k)),void 0;if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!e&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=
R,this._totalTime=T,this._rawPrevTime=W,this._cycle=U,f.lazyTweens.push(this),this._lazy=a,void 0;this._time&&!c?this.ratio=this._ease.getRatio(this._time/S):c&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}!1!==this._lazy&&(this._lazy=!1);this._active||!this._paused&&this._time!==R&&0<=a&&(this._active=!0);0!==T||(2===this._initted&&0<a&&this._init(),this._startAt&&(0<=a?this._startAt.render(a,b,e):d||(d="_dummyGS")),!this.vars.onStart||0===this._totalTime&&0!==S||!b&&
this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||k));for(h=this._firstPT;h;)h.f?h.t[h.p](h.c*this.ratio+h.s):h.t[h.p]=h.c*this.ratio+h.s,h=h._next;this._onUpdate&&(0>a&&this._startAt&&this._startTime&&this._startAt.render(a,b,e),b||(this._totalTime!==T||c)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||k));this._cycle!==U&&(b||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||k));
d&&(!this._gc||e)&&(0>a&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(a,b,e),c&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[d]&&this.vars[d].apply(this.vars[d+"Scope"]||this,this.vars[d+"Params"]||k),0===S&&1E-10===this._rawPrevTime&&1E-10!==n&&(this._rawPrevTime=0))};e.to=function(a,b,c){return new e(a,b,c)};e.from=function(a,b,c){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,new e(a,b,c)};e.fromTo=function(a,
b,c,d){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,new e(a,b,d)};e.staggerTo=e.allTo=function(c,d,f,m,l,n,p){m=m||0;var O,Q,V,M,R=f.delay||0,T=[],U=function(){f.onComplete&&f.onComplete.apply(f.onCompleteScope||this,arguments);l.apply(p||this,n||k)};g(c)||("string"==typeof c&&(c=b.selector(c)||c),h(c)&&(c=a(c)));O=c.length;for(V=0;O>V;V++){Q={};for(M in f)Q[M]=f[M];Q.delay=R;V===O-1&&l&&(Q.onComplete=U);T[V]=new e(c[V],d,Q);R+=m}return T};e.staggerFrom=e.allFrom=
function(a,b,c,d,f,h,g){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,e.staggerTo(a,b,c,d,f,h,g)};e.staggerFromTo=e.allFromTo=function(a,b,c,d,f,h,g,m){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,e.staggerTo(a,b,d,f,h,g,m)};e.delayedCall=function(a,b,c,d,f){return new e(b,0,{delay:a,onComplete:b,onCompleteParams:c,onCompleteScope:d,onReverseComplete:b,onReverseCompleteParams:c,onReverseCompleteScope:d,immediateRender:!1,useFrames:f,overwrite:0})};
e.set=function(a,b){return new e(a,0,b)};e.isTweening=function(a){return 0<b.getTweensOf(a,!0).length};var m=function(a,e){for(var c=[],d=0,f=a._first;f;)f instanceof b?c[d++]=f:(e&&(c[d++]=f),c=c.concat(m(f,e)),d=c.length),f=f._next;return c},n=e.getAllTweens=function(a){return m(c._rootTimeline,a).concat(m(c._rootFramesTimeline,a))};e.killAll=function(a,b,e,c){null==b&&(b=!0);null==e&&(e=!0);var f,h,g=n(0!=c),m=g.length,k=b&&e&&c;for(h=0;m>h;h++)c=g[h],(k||c instanceof d||(f=c.target===c.vars.onComplete)&&
e||b&&!f)&&(a?c.totalTime(c._reversed?0:c.totalDuration()):c._enabled(!1,!1))};e.killChildTweensOf=function(c,d){if(null!=c){var m,k,l,n=f.tweenLookup;if("string"==typeof c&&(c=b.selector(c)||c),h(c)&&(c=a(c)),g(c))for(k=c.length;-1<--k;)e.killChildTweensOf(c[k],d);else{m=[];for(l in n)for(k=n[l].target.parentNode;k;)k===c&&(m=m.concat(n[l].tweens)),k=k.parentNode;l=m.length;for(k=0;l>k;k++)d&&m[k].totalTime(m[k].totalDuration()),m[k]._enabled(!1,!1)}}};var p=function(a,b,e,c){b=!1!==b;e=!1!==e;c=
!1!==c;for(var f,h=n(c),g=b&&e&&c,k=h.length;-1<--k;)c=h[k],(g||c instanceof d||(f=c.target===c.vars.onComplete)&&e||b&&!f)&&c.paused(a)};return e.pauseAll=function(a,b,e){p(!0,a,b,e)},e.resumeAll=function(a,b,e){p(!1,a,b,e)},e.globalTimeScale=function(a){var e=c._rootTimeline,d=b.ticker.time;return arguments.length?(a=a||1E-10,e._startTime=d-(d-e._startTime)*e._timeScale/a,e=c._rootFramesTimeline,d=b.ticker.frame,e._startTime=d-(d-e._startTime)*e._timeScale/a,e._timeScale=c._rootTimeline._timeScale=
a,a):e._timeScale},l.progress=function(a){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},l.totalProgress=function(a){return arguments.length?this.totalTime(this.totalDuration()*a,!1):this._totalTime/this.totalDuration()},l.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-
a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},l.duration=function(a){return arguments.length?c.prototype.duration.call(this,a):this._duration},l.totalDuration=function(a){return arguments.length?-1===this._repeat?this:this.duration((a-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*
this._repeat,this._dirty=!1),this._totalDuration)},l.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):this._repeat},l.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},l.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},e},!0);_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(c,d,b){var a=function(a){d.call(this,a);this._labels={};this.autoRemoveChildren=
!0===this.vars.autoRemoveChildren;this.smoothChildTiming=!0===this.vars.smoothChildTiming;this._sortChildren=!0;this._onUpdate=this.vars.onUpdate;var b,e=this.vars;for(b in e)a=e[b],h(a)&&-1!==a.join("").indexOf("{self}")&&(e[b]=this._swapSelfInParams(a));h(e.tweens)&&this.add(e.tweens,0,e.align,e.stagger)},e=b._internals,f=e.isSelector,h=e.isArray,g=e.lazyTweens,l=e.lazyRender,k=[],m=_gsScope._gsDefine.globals,n=function(a){var b,e={};for(b in a)e[b]=a[b];return e},p=function(a,b,e,c){a._timeline.pause(a._startTime);
b&&b.apply(c||a._timeline,e||k)},e=a.prototype=new d;return a.version="1.13.1",e.constructor=a,e.kill()._gc=!1,e.to=function(a,e,c,d){var f=c.repeat&&m.TweenMax||b;return e?this.add(new f(a,e,c),d):this.set(a,c,d)},e.from=function(a,e,c,d){return this.add((c.repeat&&m.TweenMax||b).from(a,e,c),d)},e.fromTo=function(a,e,c,d,f){var h=d.repeat&&m.TweenMax||b;return e?this.add(h.fromTo(a,e,c,d),f):this.set(a,d,f)},e.staggerTo=function(e,c,d,h,g,k,m,l){k=new a({onComplete:k,onCompleteParams:m,onCompleteScope:l,
smoothChildTiming:this.smoothChildTiming});"string"==typeof e&&(e=b.selector(e)||e);if(f(e)){l=[];var p=e.length;for(m=0;m!==p;l.push(e[m++]));e=l}h=h||0;for(m=0;e.length>m;m++)d.startAt&&(d.startAt=n(d.startAt)),k.to(e[m],c,n(d),m*h);return this.add(k,g)},e.staggerFrom=function(a,b,e,c,d,f,h,g){return e.immediateRender=0!=e.immediateRender,e.runBackwards=!0,this.staggerTo(a,b,e,c,d,f,h,g)},e.staggerFromTo=function(a,b,e,c,d,f,h,g,k){return c.startAt=e,c.immediateRender=0!=c.immediateRender&&0!=e.immediateRender,
this.staggerTo(a,b,c,d,f,h,g,k)},e.call=function(a,e,c,d){return this.add(b.delayedCall(0,a,e,c),d)},e.set=function(a,e,c){return c=this._parseTimeOrLabel(c,0,!0),null==e.immediateRender&&(e.immediateRender=c===this._time&&!this._paused),this.add(new b(a,0,e),c)},a.exportRoot=function(e,c){e=e||{};null==e.smoothChildTiming&&(e.smoothChildTiming=!0);var d,f,h=new a(e),g=h._timeline;null==c&&(c=!0);g._remove(h,!0);h._startTime=0;h._rawPrevTime=h._time=h._totalTime=g._time;for(d=g._first;d;)f=d._next,
c&&d instanceof b&&d.target===d.vars.onComplete||h.add(d,d._startTime-d._delay),d=f;return g.add(h,0),h},e.add=function(e,f,g,k){var m,l,n;if("number"!=typeof f&&(f=this._parseTimeOrLabel(f,0,!0,e)),!(e instanceof c)){if(e instanceof Array||e&&e.push&&h(e)){g=g||"normal";k=k||0;m=e.length;for(l=0;m>l;l++)h(n=e[l])&&(n=new a({tweens:n})),this.add(n,f),"string"!=typeof n&&"function"!=typeof n&&("sequence"===g?f=n._startTime+n.totalDuration()/n._timeScale:"start"===g&&(n._startTime-=n.delay())),f+=k;
return this._uncache(!0)}if("string"==typeof e)return this.addLabel(e,f);if("function"!=typeof e)throw"Cannot add "+e+" into the timeline; it is not a tween, timeline, function, or string.";e=b.delayedCall(0,e)}if(d.prototype.add.call(this,e,f),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(g=this,e=g.rawTime()>e._startTime;g._timeline;)e&&g._timeline.smoothChildTiming?g.totalTime(g._totalTime,!0):g._gc&&g._enabled(!0,!1),g=g._timeline;return this},e.remove=
function(a){if(a instanceof c)return this._remove(a,!1);if(a instanceof Array||a&&a.push&&h(a)){for(var b=a.length;-1<--b;)this.remove(a[b]);return this}return"string"==typeof a?this.removeLabel(a):this.kill(null,a)},e._remove=function(a,b){d.prototype._remove.call(this,a,b);var e=this._last;return e?this._time>e._startTime+e._totalDuration/e._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},e.append=
function(a,b){return this.add(a,this._parseTimeOrLabel(null,b,!0,a))},e.insert=e.insertMultiple=function(a,b,e,c){return this.add(a,b||0,e,c)},e.appendMultiple=function(a,b,e,c){return this.add(a,this._parseTimeOrLabel(null,b,!0,a),e,c)},e.addLabel=function(a,b){return this._labels[a]=this._parseTimeOrLabel(b),this},e.addPause=function(a,b,e,c){return this.call(p,["{self}",b,e,c],this,a)},e.removeLabel=function(a){return delete this._labels[a],this},e.getLabelTime=function(a){return null!=this._labels[a]?
this._labels[a]:-1},e._parseTimeOrLabel=function(a,b,e,d){var f;if(d instanceof c&&d.timeline===this)this.remove(d);else if(d&&(d instanceof Array||d.push&&h(d)))for(f=d.length;-1<--f;)d[f]instanceof c&&d[f].timeline===this&&this.remove(d[f]);if("string"==typeof b)return this._parseTimeOrLabel(b,e&&"number"==typeof a&&null==this._labels[b]?a-this.duration():0,e);if(b=b||0,"string"!=typeof a||!isNaN(a)&&null==this._labels[a])null==a&&(a=this.duration());else{if(f=a.indexOf("="),-1===f)return null==
this._labels[a]?e?this._labels[a]=this.duration()+b:b:this._labels[a]+b;b=parseInt(a.charAt(f-1)+"1",10)*Number(a.substr(f+1));a=1<f?this._parseTimeOrLabel(a.substr(0,f-1),0,e):this.duration()}return Number(a)+b},e.seek=function(a,b){return this.totalTime("number"==typeof a?a:this._parseTimeOrLabel(a),!1!==b)},e.stop=function(){return this.paused(!0)},e.gotoAndPlay=function(a,b){return this.play(a,b)},e.gotoAndStop=function(a,b){return this.pause(a,b)},e.render=function(a,b,e){this._gc&&this._enabled(!0,
!1);var c,d,f,h,m=this._dirty?this.totalDuration():this._totalDuration,n=this._time,p=this._startTime,M=this._timeScale,R=this._paused;if(a>=m?(this._totalTime=this._time=m,this._reversed||this._hasPausedChild()||(d=!0,h="onComplete",0===this._duration&&(0===a||0>this._rawPrevTime||1E-10===this._rawPrevTime)&&this._rawPrevTime!==a&&this._first&&(c=!0,1E-10<this._rawPrevTime&&(h="onReverseComplete"))),this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:1E-10,a=m+1E-4):1E-7>a?(this._totalTime=
this._time=0,(0!==n||0===this._duration&&1E-10!==this._rawPrevTime&&(0<this._rawPrevTime||0>a&&0<=this._rawPrevTime))&&(h="onReverseComplete",d=this._reversed),0>a?(this._active=!1,0<=this._rawPrevTime&&this._first&&(c=!0),this._rawPrevTime=a):(this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:1E-10,a=0,this._initted||(c=!0))):this._totalTime=this._time=this._rawPrevTime=a,this._time!==n&&this._first||e||c){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==
n&&0<a&&(this._active=!0),0===n&&this.vars.onStart&&0!==this._time&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||k)),this._time>=n)for(c=this._first;c&&(f=c._next,!this._paused||R);)(c._active||c._startTime<=this._time&&!c._paused&&!c._gc)&&(c._reversed?c.render((c._dirty?c.totalDuration():c._totalDuration)-(a-c._startTime)*c._timeScale,b,e):c.render((a-c._startTime)*c._timeScale,b,e)),c=f;else for(c=this._last;c&&(f=c._prev,!this._paused||R);)(c._active||n>=c._startTime&&
!c._paused&&!c._gc)&&(c._reversed?c.render((c._dirty?c.totalDuration():c._totalDuration)-(a-c._startTime)*c._timeScale,b,e):c.render((a-c._startTime)*c._timeScale,b,e)),c=f;this._onUpdate&&(b||(g.length&&l(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||k)));h&&(this._gc||(p===this._startTime||M!==this._timeScale)&&(0===this._time||m>=this.totalDuration())&&(d&&(g.length&&l(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[h]&&
this.vars[h].apply(this.vars[h+"Scope"]||this,this.vars[h+"Params"]||k)))}},e._hasPausedChild=function(){for(var b=this._first;b;){if(b._paused||b instanceof a&&b._hasPausedChild())return!0;b=b._next}return!1},e.getChildren=function(a,e,c,d){d=d||-9999999999;for(var f=[],h=this._first,g=0;h;)d>h._startTime||(h instanceof b?!1!==e&&(f[g++]=h):(!1!==c&&(f[g++]=h),!1!==a&&(f=f.concat(h.getChildren(!0,e,c)),g=f.length))),h=h._next;return f},e.getTweensOf=function(a,e){var c,d,f=this._gc,h=[],g=0;f&&this._enabled(!0,
!0);c=b.getTweensOf(a);for(d=c.length;-1<--d;)(c[d].timeline===this||e&&this._contains(c[d]))&&(h[g++]=c[d]);return f&&this._enabled(!1,!0),h},e._contains=function(a){for(a=a.timeline;a;){if(a===this)return!0;a=a.timeline}return!1},e.shiftChildren=function(a,b,e){e=e||0;for(var c,d=this._first,f=this._labels;d;)d._startTime>=e&&(d._startTime+=a),d=d._next;if(b)for(c in f)f[c]>=e&&(f[c]+=a);return this._uncache(!0)},e._kill=function(a,b){if(!a&&!b)return this._enabled(!1,!1);for(var e=b?this.getTweensOf(b):
this.getChildren(!0,!0,!1),c=e.length,d=!1;-1<--c;)e[c]._kill(a,b)&&(d=!0);return d},e.clear=function(a){var b=this.getChildren(!1,!0,!0),e=b.length;for(this._time=this._totalTime=0;-1<--e;)b[e]._enabled(!1,!1);return!1!==a&&(this._labels={}),this._uncache(!0)},e.invalidate=function(){for(var a=this._first;a;)a.invalidate(),a=a._next;return this},e._enabled=function(a,b){if(a===this._gc)for(var e=this._first;e;)e._enabled(a,!0),e=e._next;return d.prototype._enabled.call(this,a,b)},e.duration=function(a){return arguments.length?
(0!==this.duration()&&0!==a&&this.timeScale(this._duration/a),this):(this._dirty&&this.totalDuration(),this._duration)},e.totalDuration=function(a){if(!arguments.length){if(this._dirty){var b,e,c=0;e=this._last;for(var d=999999999999;e;)b=e._prev,e._dirty&&e.totalDuration(),e._startTime>d&&this._sortChildren&&!e._paused?this.add(e,e._startTime-e._delay):d=e._startTime,0>e._startTime&&!e._paused&&(c-=e._startTime,this._timeline.smoothChildTiming&&(this._startTime+=e._startTime/this._timeScale),this.shiftChildren(-e._startTime,
!1,-9999999999),d=0),e=e._startTime+e._totalDuration/e._timeScale,e>c&&(c=e),e=b;this._duration=this._totalDuration=c;this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==a&&this.timeScale(this._totalDuration/a),this},e.usesFrames=function(){for(var a=this._timeline;a._timeline;)a=a._timeline;return a===c._rootFramesTimeline},e.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},a},!0);_gsScope._gsDefine("TimelineMax",
["TimelineLite","TweenLite","easing.Ease"],function(c,d,b){var a=function(a){c.call(this,a);this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._cycle=0;this._yoyo=!0===this.vars.yoyo;this._dirty=!0},e=[],f=d._internals,h=f.lazyTweens,g=f.lazyRender,l=new b(null,null,1,0);b=a.prototype=new c;return b.constructor=a,b.kill()._gc=!1,a.version="1.13.1",b.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||
0,this._uncache(!0),c.prototype.invalidate.call(this)},b.addCallback=function(a,b,e,c){return this.add(d.delayedCall(0,a,e,c),b)},b.removeCallback=function(a,b){if(a)if(null==b)this._kill(null,a);else for(var e=this.getTweensOf(a,!1),c=e.length,d=this._parseTimeOrLabel(b);-1<--c;)e[c]._startTime===d&&e[c]._enabled(!1,!1);return this},b.tweenTo=function(a,b){b=b||{};var c,f,h,g={ease:l,overwrite:b.delay?2:1,useFrames:this.usesFrames(),immediateRender:!1};for(f in b)g[f]=b[f];return g.time=this._parseTimeOrLabel(a),
c=Math.abs(Number(g.time)-this._time)/this._timeScale||0.001,h=new d(this,c,g),g.onStart=function(){h.target.paused(!0);h.vars.time!==h.target.time()&&c===h.duration()&&h.duration(Math.abs(h.vars.time-h.target.time())/h.target._timeScale);b.onStart&&b.onStart.apply(b.onStartScope||h,b.onStartParams||e)},h},b.tweenFromTo=function(a,b,e){e=e||{};a=this._parseTimeOrLabel(a);e.startAt={onComplete:this.seek,onCompleteParams:[a],onCompleteScope:this};e.immediateRender=!1!==e.immediateRender;b=this.tweenTo(b,
e);return b.duration(Math.abs(b.vars.time-a)/this._timeScale||0.001)},b.render=function(a,b,c){this._gc&&this._enabled(!0,!1);var d,f,l,v,w,x=this._dirty?this.totalDuration():this._totalDuration,L=this._duration,P=this._time,O=this._totalTime,Q=this._startTime,V=this._timeScale,M=this._rawPrevTime,R=this._paused,T=this._cycle;if(a>=x?(this._locked||(this._totalTime=x,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(f=!0,v="onComplete",0===this._duration&&(0===a||0>M||1E-10===M)&&
M!==a&&this._first&&(d=!0,1E-10<M&&(v="onReverseComplete"))),this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:1E-10,this._yoyo&&0!==(1&this._cycle)?this._time=a=0:(this._time=L,a=L+1E-4)):1E-7>a?(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==P||0===L&&1E-10!==M&&(0<M||0>a&&0<=M)&&!this._locked)&&(v="onReverseComplete",f=this._reversed),0>a?(this._active=!1,0<=M&&this._first&&(d=!0),this._rawPrevTime=a):(this._rawPrevTime=L||!b||a||this._rawPrevTime===a?a:1E-10,a=
0,this._initted||(d=!0))):(0===L&&0>M&&(d=!0),this._time=this._rawPrevTime=a,this._locked||(this._totalTime=a,0!==this._repeat&&(w=L+this._repeatDelay,this._cycle=this._totalTime/w>>0,0!==this._cycle&&this._cycle===this._totalTime/w&&this._cycle--,this._time=this._totalTime-this._cycle*w,this._yoyo&&0!==(1&this._cycle)&&(this._time=L-this._time),this._time>L?(this._time=L,a=L+1E-4):0>this._time?this._time=a=0:a=this._time))),this._cycle!==T&&!this._locked){w=this._yoyo&&0!==(1&T);var U=w===(this._yoyo&&
0!==(1&this._cycle)),S=this._totalTime,W=this._cycle,N=this._rawPrevTime,X=this._time;if(this._totalTime=T*L,T>this._cycle?w=!w:this._totalTime+=L,this._time=P,this._rawPrevTime=0===L?M-1E-4:M,this._cycle=T,this._locked=!0,P=w?0:L,this.render(P,b,0===L),b||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||e),U&&(P=w?L+1E-4:-1E-4,this.render(P,!0,!1)),this._locked=!1,this._paused&&!R)return;this._time=X;this._totalTime=S;this._cycle=W;this._rawPrevTime=
N}if(!(this._time!==P&&this._first||c||d))return O!==this._totalTime&&this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||e)),void 0;if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==O&&0<a&&(this._active=!0),0===O&&this.vars.onStart&&0!==this._totalTime&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||e)),this._time>=P)for(d=this._first;d&&(l=d._next,!this._paused||R);)(d._active||d._startTime<=
this._time&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=l;else for(d=this._last;d&&(l=d._prev,!this._paused||R);)(d._active||P>=d._startTime&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=l;this._onUpdate&&(b||(h.length&&g(),this._onUpdate.apply(this.vars.onUpdateScope||
this,this.vars.onUpdateParams||e)));v&&(this._locked||this._gc||(Q===this._startTime||V!==this._timeScale)&&(0===this._time||x>=this.totalDuration())&&(f&&(h.length&&g(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[v]&&this.vars[v].apply(this.vars[v+"Scope"]||this,this.vars[v+"Params"]||e)))},b.getActive=function(a,b,e){null==a&&(a=!0);null==b&&(b=!0);null==e&&(e=!1);var c=[];e=this.getChildren(a,b,e);var d=0,f=e.length;for(a=0;f>a;a++)b=e[a],b.isActive()&&
(c[d++]=b);return c},b.getLabelAfter=function(a){a||0!==a&&(a=this._time);var b,e=this.getLabelsArray(),c=e.length;for(b=0;c>b;b++)if(e[b].time>a)return e[b].name;return null},b.getLabelBefore=function(a){null==a&&(a=this._time);for(var b=this.getLabelsArray(),e=b.length;-1<--e;)if(a>b[e].time)return b[e].name;return null},b.getLabelsArray=function(){var a,b=[],e=0;for(a in this._labels)b[e++]={time:this._labels[a],name:a};return b.sort(function(a,b){return a.time-b.time}),b},b.progress=function(a){return arguments.length?
this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},b.totalProgress=function(a){return arguments.length?this.totalTime(this.totalDuration()*a,!1):this._totalTime/this.totalDuration()},b.totalDuration=function(a){return arguments.length?-1===this._repeat?this:this.duration((a-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(c.prototype.totalDuration.call(this),this._totalDuration=-1===
this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},b.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},b.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):
this._repeat},b.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},b.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},b.currentLabel=function(a){return arguments.length?this.seek(a,!0):this.getLabelBefore(this._time+1E-8)},a},!0);(function(){var c=180/Math.PI,d=[],b=[],a=[],e={},f=function(a,b,e,c){this.a=a;this.b=b;this.c=e;this.d=c;this.da=c-a;this.ca=e-a;this.ba=b-a},h=function(a,b,e,c){var d={a:a},f={},h={},g={c:c},
l=(a+b)/2,k=(b+e)/2;e=(e+c)/2;b=(l+k)/2;var k=(k+e)/2,O=(k-b)/8;return d.b=l+(a-l)/4,f.b=b+O,d.c=f.a=(d.b+f.b)/2,f.c=h.a=(b+k)/2,h.b=k-O,g.b=e+(c-e)/4,h.c=g.a=(h.b+g.b)/2,[d,f,h,g]},g=function(c,g,l,k,s,v){var w,x,L,P,O={},Q=[],V=v||c[0];s="string"==typeof s?","+s+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,";null==g&&(g=1);for(x in c[0])Q.push(x);if(1<c.length){L=c[c.length-
1];P=!0;for(w=Q.length;-1<--w;)if(x=Q[w],0.05<Math.abs(V[x]-L[x])){P=!1;break}P&&(c=c.concat(),v&&c.unshift(v),c.push(c[1]),v=c[c.length-3])}d.length=b.length=a.length=0;for(w=Q.length;-1<--w;){x=Q[w];e[x]=-1!==s.indexOf(","+x+",");L=O;var V=x,M;M=c;var R=x,T=e[x],U=v,S=void 0,W=void 0,N=void 0,X=void 0,Y=void 0,N=void 0,$=[];if(U)for(M=[U].concat(M),W=M.length;-1<--W;)"string"==typeof(N=M[W][R])&&"="===N.charAt(1)&&(M[W][R]=U[R]+Number(N.charAt(0)+N.substr(2)));if(S=M.length-2,0>S)M=($[0]=new f(M[0][R],
0,0,M[-1>S?0:1][R]),$);else{for(W=0;S>W;W++)N=M[W][R],X=M[W+1][R],$[W]=new f(N,0,0,X),T&&(Y=M[W+2][R],d[W]=(d[W]||0)+(X-N)*(X-N),b[W]=(b[W]||0)+(Y-X)*(Y-X));M=($[W]=new f(M[W][R],0,0,M[W+1][R]),$)}L[V]=M}for(w=d.length;-1<--w;)d[w]=Math.sqrt(d[w]),b[w]=Math.sqrt(b[w]);if(!k){for(w=Q.length;-1<--w;)if(e[x])for(c=O[Q[w]],L=c.length-1,s=0;L>s;s++)v=c[s+1].da/b[s]+c[s].da/d[s],a[s]=(a[s]||0)+v*v;for(w=a.length;-1<--w;)a[w]=Math.sqrt(a[w])}w=Q.length;for(s=l?4:1;-1<--w;){x=Q[w];v=c=O[x];L=g;V=l;M=k;x=
e[x];for(var Z=U=T=R=void 0,ba=X=N=Z=$=Y=W=S=void 0,fa=void 0,ga=v.length-1,ca=0,aa=v[0].a,R=0;ga>R;R++)S=v[ca],T=S.a,U=S.d,Z=v[ca+1].d,x?(X=d[R],ba=b[R],fa=0.25*(ba+X)*L/(M?0.5:a[R]||0.5),W=U-(U-T)*(M?0.5*L:0!==X?fa/X:0),Y=U+(Z-U)*(M?0.5*L:0!==ba?fa/ba:0),$=U-(W+((Y-W)*(3*X/(X+ba)+0.5)/4||0))):(W=U-0.5*(U-T)*L,Y=U+0.5*(Z-U)*L,$=U-(W+Y)/2),W+=$,Y+=$,S.c=Z=W,S.b=0!==R?aa:aa=S.a+0.6*(S.c-S.a),S.da=U-T,S.ca=Z-T,S.ba=aa-T,V?(N=h(T,aa,Z,U),v.splice(ca,1,N[0],N[1],N[2],N[3]),ca+=4):ca++,aa=Y;S=v[ca];S.b=
aa;S.c=aa+0.4*(S.d-aa);S.da=S.d-S.a;S.ca=S.c-S.a;S.ba=aa-S.a;V&&(N=h(S.a,aa,S.c,S.d),v.splice(ca,1,N[0],N[1],N[2],N[3]));P&&(c.splice(0,s),c.splice(c.length-s,s))}return O},l=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.3",API:2,global:!0,init:function(a,b,e){this._target=a;b instanceof Array&&(b={values:b});this._func={};this._round={};this._props=[];this._timeRes=null==b.timeResolution?6:parseInt(b.timeResolution,10);var c,d,h,l,k,L=b.values||[],P={};h=L[0];this._autoRotate=
(d=b.autoRotate||e.vars.orientToBezier)?d instanceof Array?d:[["x","y","rotation",!0===d?0:Number(d)||0]]:null;for(c in h)this._props.push(c);for(h=this._props.length;-1<--h;)c=this._props[h],this._overwriteProps.push(c),d=this._func[c]="function"==typeof a[c],P[c]=d?a[c.indexOf("set")||"function"!=typeof a["get"+c.substr(3)]?c:"get"+c.substr(3)]():parseFloat(a[c]),k||P[c]!==L[0][c]&&(k=P);if("cubic"!==b.type&&"quadratic"!==b.type&&"soft"!==b.type)P=g(L,isNaN(b.curviness)?1:b.curviness,!1,"thruBasic"===
b.type,b.correlate,k);else{h=L;var L=(L=b.type)||"soft",O,Q,V,M,R,T,U;b={};k="cubic"===L?3:2;var S="soft"===L,W=[];if(S&&P&&(h=[P].concat(h)),null==h||k+1>h.length)throw"invalid Bezier data";for(O in h[0])W.push(O);for(M=W.length;-1<--M;){O=W[M];b[O]=d=[];U=0;T=h.length;for(R=0;T>R;R++)L=null==P?h[R][O]:"string"==typeof(Q=h[R][O])&&"="===Q.charAt(1)?P[O]+Number(Q.charAt(0)+Q.substr(2)):Number(Q),S&&1<R&&T-1>R&&(d[U++]=(L+d[U-2])/2),d[U++]=L;T=U-k+1;for(R=U=0;T>R;R+=k)L=d[R],O=d[R+1],Q=d[R+2],V=2===
k?0:d[R+3],d[U++]=Q=3===k?new f(L,O,Q,V):new f(L,(2*O+L)/3,(2*O+Q)/3,Q);d.length=U}P=b}if(this._beziers=P,this._segCount=this._beziers[c].length,this._timeRes){d=this._beziers;c=this._timeRes;c=c>>0||6;P=[];O=[];h=Q=0;b=c-1;k=[];L=[];for(l in d){M=d[l];R=P;T=c;var N=void 0,X=void 0,Y=S=U=X=void 0,$=N=void 0,Z=void 0,Z=Y=void 0,W=1/T;for(V=M.length;-1<--V;)for(Y=M[V],X=Y.a,U=Y.d-X,S=Y.c-X,Y=Y.b-X,X=0,$=1;T>=$;$++)N=W*$,Z=1-N,N=X-(X=(N*N*U+3*Z*(N*S+Z*Y))*N),Z=V*T+$-1,R[Z]=(R[Z]||0)+N*N}d=P.length;for(l=
0;d>l;l++)Q+=Math.sqrt(P[l]),M=l%c,L[M]=Q,M===b&&(h+=Q,M=l/c>>0,k[M]=L,O[M]=h,Q=0,L=[]);this._length=h;this._lengths=O;this._segments=k;this._l1=this._li=this._s1=this._si=0;this._l2=this._lengths[0];this._curSeg=this._segments[0];this._s2=this._curSeg[0];this._prec=1/this._curSeg.length}if(d=this._autoRotate)for(this._initialRotations=[],d[0]instanceof Array||(this._autoRotate=d=[d]),h=d.length;-1<--h;){for(l=0;3>l;l++)c=d[h][l],this._func[c]="function"==typeof a[c]?a[c.indexOf("set")||"function"!=
typeof a["get"+c.substr(3)]?c:"get"+c.substr(3)]:!1;c=d[h][2];this._initialRotations[h]=this._func[c]?this._func[c].call(this._target):this._target[c]}return this._startRatio=e.vars.runBackwards?1:0,!0},set:function(a){var b,e,d,f,h,g;h=this._segCount;var l=this._func,k=this._target,P=a!==this._startRatio;if(this._timeRes){if(b=this._lengths,f=this._curSeg,a*=this._length,d=this._li,a>this._l2&&h-1>d){for(h-=1;h>d&&a>=(this._l2=b[++d]););this._l1=b[d-1];this._li=d;this._curSeg=f=this._segments[d];
this._s2=f[this._s1=this._si=0]}else if(this._l1>a&&0<d){for(;0<d&&(this._l1=b[--d])>=a;);0===d&&this._l1>a?this._l1=0:d++;this._l2=b[d];this._li=d;this._curSeg=f=this._segments[d];this._s1=f[(this._si=f.length-1)-1]||0;this._s2=f[this._si]}if(b=d,a-=this._l1,d=this._si,a>this._s2&&f.length-1>d){for(h=f.length-1;h>d&&a>=(this._s2=f[++d]););this._s1=f[d-1];this._si=d}else if(this._s1>a&&0<d){for(;0<d&&(this._s1=f[--d])>=a;);0===d&&this._s1>a?this._s1=0:d++;this._s2=f[d];this._si=d}h=(d+(a-this._s1)/
(this._s2-this._s1))*this._prec}else b=0>a?0:1<=a?h-1:h*a>>0,h*=a-1/h*b;e=1-h;for(d=this._props.length;-1<--d;)a=this._props[d],f=this._beziers[a][b],g=(h*h*f.da+3*e*(h*f.ca+e*f.ba))*h+f.a,this._round[a]&&(g=Math.round(g)),l[a]?k[a](g):k[a]=g;if(this._autoRotate){var O,Q,V,M,R,T,U=this._autoRotate;for(d=U.length;-1<--d;)a=U[d][2],R=U[d][3]||0,T=!0===U[d][4]?1:c,f=this._beziers[U[d][0]],e=this._beziers[U[d][1]],f&&e&&(f=f[b],e=e[b],O=f.a+(f.b-f.a)*h,V=f.b+(f.c-f.b)*h,O+=(V-O)*h,V+=(f.c+(f.d-f.c)*h-
V)*h,Q=e.a+(e.b-e.a)*h,M=e.b+(e.c-e.b)*h,Q+=(M-Q)*h,M+=(e.c+(e.d-e.c)*h-M)*h,g=P?Math.atan2(M-Q,V-O)*T+R:this._initialRotations[d],l[a]?k[a](g):k[a]=g)}}}),k=l.prototype;l.bezierThrough=g;l.cubicToQuadratic=h;l._autoCSS=!0;l.quadraticToCubic=function(a,b,e){return new f(a,(2*b+a)/3,(2*b+e)/3,e)};l._cssRegister=function(){var a=_gsScope._gsDefine.globals.CSSPlugin;if(a){var a=a._internals,b=a._parseToProxy,e=a._setPluginRatio,c=a.CSSPropTween;a._registerComplexSpecialProp("bezier",{parser:function(a,
d,f,h,g,k){d instanceof Array&&(d={values:d});k=new l;var m,Q,V=d.values,M=V.length-1,R=[],T={};if(0>M)return g;for(f=0;M>=f;f++)Q=b(a,V[f],h,g,k,M!==f),R[f]=Q.end;for(m in d)T[m]=d[m];return T.values=R,g=new c(a,"bezier",0,0,Q.pt,2),g.data=Q,g.plugin=k,g.setRatio=e,0===T.autoRotate&&(T.autoRotate=!0),!T.autoRotate||T.autoRotate instanceof Array||(f=!0===T.autoRotate?0:Number(T.autoRotate),T.autoRotate=null!=Q.end.left?[["left","top","rotation",f,!1]]:null!=Q.end.x?[["x","y","rotation",f,!1]]:!1),
T.autoRotate&&(h._transform||h._enableTransforms(!1),Q.autoRotate=h._target._gsTransform),k._onInitTween(Q.proxy,T,h._tween),g}})}};k._roundProps=function(a,b){for(var e=this._overwriteProps,c=e.length;-1<--c;)(a[e[c]]||a.bezier||a.bezierThrough)&&(this._round[e[c]]=b)};k._kill=function(a){var b,e,c=this._props;for(b in this._beziers)if(b in a)for(delete this._beziers[b],delete this._func[b],e=c.length;-1<--e;)c[e]===b&&c.splice(e,1);return this._super._kill.call(this,a)}})();_gsScope._gsDefine("plugins.CSSPlugin",
["plugins.TweenPlugin","TweenLite"],function(c,d){},!0);(function(){var c=_gsScope._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(c,b,a){return this._tween=a,!0}}).prototype;c._onInitAllProps=function(){for(var c,b,a,e=this._tween,f=e.vars.roundProps instanceof Array?e.vars.roundProps:e.vars.roundProps.split(","),h=f.length,g={},l=e._propLookup.roundProps;-1<--h;)g[f[h]]=1;for(h=f.length;-1<--h;)for(c=f[h],b=e._firstPT;b;)a=b._next,b.pg?b.t._roundProps(g,!0):b.n===c&&(this._add(b.t,
c,b.s,b.c),a&&(a._prev=b._prev),b._prev?b._prev._next=a:e._firstPT===b&&(e._firstPT=a),b._next=b._prev=null,e._propLookup[c]=l),b=a;return!1};c._add=function(c,b,a,e){this._addTween(c,b,a,a+e,b,!0);this._overwriteProps.push(b)}})();_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.3.3",init:function(c,d){var b,a;if("function"!=typeof c.setAttribute)return!1;this._target=c;this._proxy={};this._start={};this._end={};for(b in d)this._start[b]=this._proxy[b]=a=c.getAttribute(b),a=this._addTween(this._proxy,
b,parseFloat(a),d[b],b),this._end[b]=a?a.s+a.c:d[b],this._overwriteProps.push(b);return!0},set:function(c){this._super.setRatio.call(this,c);for(var d=this._overwriteProps,b=d.length,a=1===c?this._end:c?this._proxy:this._start;-1<--b;)c=d[b],this._target.setAttribute(c,a[c]+"")}});_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(c,d){"object"!=typeof d&&(d={rotation:d});this.finals={};var b,a,e,f,h,g,l=!0===d.useRadians?2*Math.PI:360;for(b in d)"useRadians"!==
b&&(g=(d[b]+"").split("_"),a=g[0],e=parseFloat("function"!=typeof c[b]?c[b]:c[b.indexOf("set")||"function"!=typeof c["get"+b.substr(3)]?b:"get"+b.substr(3)]()),f=this.finals[b]="string"==typeof a&&"="===a.charAt(1)?e+parseInt(a.charAt(0)+"1",10)*Number(a.substr(2)):Number(a)||0,h=f-e,g.length&&(a=g.join("_"),-1!==a.indexOf("short")&&(h%=l,h!==h%(l/2)&&(h=0>h?h+l:h-l)),-1!==a.indexOf("_cw")&&0>h?h=(h+9999999999*l)%l-(0|h/l)*l:-1!==a.indexOf("ccw")&&0<h&&(h=(h-9999999999*l)%l-(0|h/l)*l)),(1E-6<h||-1E-6>
h)&&(this._addTween(c,b,e,e+h,b),this._overwriteProps.push(b)));return!0},set:function(c){if(1!==c)this._super.setRatio.call(this,c);else for(c=this._firstPT;c;)c.f?c.t[c.p](this.finals[c.p]):c.t[c.p]=this.finals[c.p],c=c._next}})._autoCSS=!0;_gsScope._gsDefine("easing.Back",["easing.Ease"],function(c){var d,b,a,e=_gsScope.GreenSockGlobals||_gsScope,f=2*Math.PI,h=Math.PI/2,g=e.com.greensock._class,l=function(a,b){var e=g("easing."+a,function(){},!0),d=e.prototype=new c;return d.constructor=e,d.getRatio=
b,e},k=c.register||function(){},m=function(a,b,e,c){b=g("easing."+a,{easeOut:new b,easeIn:new e,easeInOut:new c},!0);return k(b,a),b},n=function(a,b,e){this.t=a;this.v=b;e&&(this.next=e,e.prev=this,this.c=e.v-b,this.gap=e.t-a)},p=function(a,b){var e=g("easing."+a,function(a){this._p1=a||0===a?a:1.70158;this._p2=1.525*this._p1},!0),d=e.prototype=new c;return d.constructor=e,d.getRatio=b,d.config=function(a){return new e(a)},e},p=m("Back",p("BackOut",function(a){return(a-=1)*a*((this._p1+1)*a+this._p1)+
1}),p("BackIn",function(a){return a*a*((this._p1+1)*a-this._p1)}),p("BackInOut",function(a){return 1>(a*=2)?0.5*a*a*((this._p2+1)*a-this._p2):0.5*((a-=2)*a*((this._p2+1)*a+this._p2)+2)})),r=g("easing.SlowMo",function(a,b,e){null==a?a=0.7:1<a&&(a=1);this._p=1!==a?b||0===b?b:0.7:0;this._p1=(1-a)/2;this._p2=a;this._p3=this._p1+this._p2;this._calcEnd=!0===e},!0),s=r.prototype=new c;return s.constructor=r,s.getRatio=function(a){var b=a+(0.5-a)*this._p;return this._p1>a?this._calcEnd?1-(a=1-a/this._p1)*
a:b-(a=1-a/this._p1)*a*a*a*b:a>this._p3?this._calcEnd?1-(a=(a-this._p3)/this._p1)*a:b+(a-b)*(a=(a-this._p3)/this._p1)*a*a*a:this._calcEnd?1:b},r.ease=new r(0.7,0.7),s.config=r.config=function(a,b,e){return new r(a,b,e)},d=g("easing.SteppedEase",function(a){a=a||1;this._p1=1/a;this._p2=a+1},!0),s=d.prototype=new c,s.constructor=d,s.getRatio=function(a){return 0>a?a=0:1<=a&&(a=0.999999999),(this._p2*a>>0)*this._p1},s.config=d.config=function(a){return new d(a)},b=g("easing.RoughEase",function(a){a=
a||{};for(var b,e,d,f,h=a.taper||"none",g=[],l=0,k=f=0|(a.points||20),m=!1!==a.randomize,p=!0===a.clamp,r=a.template instanceof c?a.template:null,s="number"==typeof a.strength?0.4*a.strength:0.4;-1<--k;)a=m?Math.random():1/f*k,b=r?r.getRatio(a):a,"none"===h?e=s:"out"===h?(d=1-a,e=d*d*s):"in"===h?e=a*a*s:0.5>a?(d=2*a,e=0.5*d*d*s):(d=2*(1-a),e=0.5*d*d*s),m?b+=Math.random()*e-0.5*e:k%2?b+=0.5*e:b-=0.5*e,p&&(1<b?b=1:0>b&&(b=0)),g[l++]={x:a,y:b};g.sort(function(a,b){return a.x-b.x});e=new n(1,1,null);
for(k=f;-1<--k;)f=g[k],e=new n(f.x,f.y,e);this._prev=new n(0,0,0!==e.t?e:e.next)},!0),s=b.prototype=new c,s.constructor=b,s.getRatio=function(a){var b=this._prev;if(a>b.t){for(;b.next&&a>=b.t;)b=b.next;b=b.prev}else for(;b.prev&&b.t>=a;)b=b.prev;return this._prev=b,b.v+(a-b.t)/b.gap*b.c},s.config=function(a){return new b(a)},b.ease=new b,m("Bounce",l("BounceOut",function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+0.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*
a+0.984375}),l("BounceIn",function(a){return 1/2.75>(a=1-a)?1-7.5625*a*a:2/2.75>a?1-(7.5625*(a-=1.5/2.75)*a+0.75):2.5/2.75>a?1-(7.5625*(a-=2.25/2.75)*a+0.9375):1-(7.5625*(a-=2.625/2.75)*a+0.984375)}),l("BounceInOut",function(a){var b=0.5>a;return a=b?1-2*a:2*a-1,a=1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+0.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375,b?0.5*(1-a):0.5*a+0.5})),m("Circ",l("CircOut",function(a){return Math.sqrt(1-(a-=1)*a)}),l("CircIn",function(a){return-(Math.sqrt(1-
a*a)-1)}),l("CircInOut",function(a){return 1>(a*=2)?-0.5*(Math.sqrt(1-a*a)-1):0.5*(Math.sqrt(1-(a-=2)*a)+1)})),a=function(a,b,e){var d=g("easing."+a,function(a,b){this._p1=a||1;this._p2=b||e;this._p3=this._p2/f*(Math.asin(1/this._p1)||0)},!0);a=d.prototype=new c;return a.constructor=d,a.getRatio=b,a.config=function(a,b){return new d(a,b)},d},m("Elastic",a("ElasticOut",function(a){return this._p1*Math.pow(2,-10*a)*Math.sin((a-this._p3)*f/this._p2)+1},0.3),a("ElasticIn",function(a){return-(this._p1*
Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*f/this._p2))},0.3),a("ElasticInOut",function(a){return 1>(a*=2)?-0.5*this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*f/this._p2):0.5*this._p1*Math.pow(2,-10*(a-=1))*Math.sin((a-this._p3)*f/this._p2)+1},0.45)),m("Expo",l("ExpoOut",function(a){return 1-Math.pow(2,-10*a)}),l("ExpoIn",function(a){return Math.pow(2,10*(a-1))-0.001}),l("ExpoInOut",function(a){return 1>(a*=2)?0.5*Math.pow(2,10*(a-1)):0.5*(2-Math.pow(2,-10*(a-1)))})),m("Sine",l("SineOut",function(a){return Math.sin(a*
h)}),l("SineIn",function(a){return-Math.cos(a*h)+1}),l("SineInOut",function(a){return-0.5*(Math.cos(Math.PI*a)-1)})),g("easing.EaseLookup",{find:function(a){return c.map[a]}},!0),k(e.SlowMo,"SlowMo","ease,"),k(b,"RoughEase","ease,"),k(d,"SteppedEase","ease,"),p},!0)});_gsScope._gsDefine&&_gsScope._gsQueue.pop()();
(function(c,d){var b=c.GreenSockGlobals=c.GreenSockGlobals||c;if(!b.TweenLite){var a,e,f,h,g,l=function(a){var e=a.split("."),c=b;for(a=0;e.length>a;a++)c[e[a]]=c=c[e[a]]||{};return c},k=l("com.greensock"),m=function(a){var b,e=[],c=a.length;for(b=0;b!==c;e.push(a[b++]));return e},n=function(){},p=function(){var a=Object.prototype.toString,b=a.call([]);return function(e){return null!=e&&(e instanceof Array||"object"==typeof e&&!!e.push&&a.call(e)===b)}}(),r={},s=function(a,e,f,h){this.sc=r[a]?r[a].sc:
[];r[a]=this;this.gsClass=null;this.func=f;var g=[];this.check=function(k){for(var m,n,p=e.length,v=p;-1<--p;)(m=r[e[p]]||new s(e[p],[])).gsClass?(g[p]=m.gsClass,v--):k&&m.sc.push(this);if(0===v&&f)for(k=("com.greensock."+a).split("."),m=k.pop(),n=l(k.join("."))[m]=this.gsClass=f.apply(f,g),h&&(b[m]=n,"function"==typeof define&&define.amd?define((c.GreenSockAMDPath?c.GreenSockAMDPath+"/":"")+a.split(".").pop(),[],function(){return n}):a===d&&"undefined"!=typeof module&&module.exports&&(module.exports=
n)),p=0;this.sc.length>p;p++)this.sc[p].check()};this.check(!0)},v=c._gsDefine=function(a,b,e,c){return new s(a,b,e,c)},w=k._class=function(a,b,e){return b=b||function(){},v(a,[],function(){return b},e),b};v.globals=b;var x=[0,0,1,1],L=[],P=w("easing.Ease",function(a,b,e,c){this._func=a;this._type=e||0;this._power=c||0;this._params=b?x.concat(b):x},!0),O=P.map={},Q=P.register=function(a,b,e,c){var d,f,h;b=b.split(",");for(var g=b.length,l=(e||"easeIn,easeOut,easeInOut").split(",");-1<--g;)for(d=b[g],
e=c?w("easing."+d,null,!0):k.easing[d]||{},f=l.length;-1<--f;)h=l[f],O[d+"."+h]=O[h+d]=e[h]=a.getRatio?a:a[h]||new a};f=P.prototype;f._calcEnd=!1;f.getRatio=function(a){if(this._func)return this._params[0]=a,this._func.apply(null,this._params);var b=this._type,e=this._power,c=1===b?1-a:2===b?a:0.5>a?2*a:2*(1-a);return 1===e?c*=c:2===e?c*=c*c:3===e?c*=c*c*c:4===e&&(c*=c*c*c*c),1===b?1-c:2===b?c:0.5>a?c/2:1-c/2};a=["Linear","Quad","Cubic","Quart","Quint,Strong"];for(e=a.length;-1<--e;)f=a[e]+",Power"+
e,Q(new P(null,null,1,e),f,"easeOut",!0),Q(new P(null,null,2,e),f,"easeIn"+(0===e?",easeNone":"")),Q(new P(null,null,3,e),f,"easeInOut");O.linear=k.easing.Linear.easeIn;O.swing=k.easing.Quad.easeInOut;var V=w("events.EventDispatcher",function(a){this._listeners={};this._eventTarget=a||this});f=V.prototype;f.addEventListener=function(a,b,e,c,d){d=d||0;var f,l=this._listeners[a],k=0;null==l&&(this._listeners[a]=l=[]);for(f=l.length;-1<--f;)a=l[f],a.c===b&&a.s===e?l.splice(f,1):0===k&&d>a.pr&&(k=f+1);
l.splice(k,0,{c:b,s:e,up:c,pr:d});this!==h||g||h.wake()};f.removeEventListener=function(a,b){var e,c=this._listeners[a];if(c)for(e=c.length;-1<--e;)if(c[e].c===b)return c.splice(e,1),void 0};f.dispatchEvent=function(a){var b,e,c,d=this._listeners[a];if(d)for(b=d.length,e=this._eventTarget;-1<--b;)c=d[b],c.up?c.c.call(c.s||e,{type:a,target:e}):c.c.call(c.s||e)};var M=c.requestAnimationFrame,R=c.cancelAnimationFrame,T=Date.now||function(){return(new Date).getTime()},U=T();a=["ms","moz","webkit","o"];
for(e=a.length;-1<--e&&!M;)M=c[a[e]+"RequestAnimationFrame"],R=c[a[e]+"CancelAnimationFrame"]||c[a[e]+"CancelRequestAnimationFrame"];w("Ticker",function(a,b){var e,c,d,f,l,k=this,m=T(),p=!1!==b&&M,r=500,s=33,v=function(a){var b,h;b=T()-U;b>r&&(m+=b-s);U+=b;k.time=(U-m)/1E3;b=k.time-l;(!e||0<b||!0===a)&&(k.frame++,l+=b+(b>=f?0.004:f-b),h=!0);!0!==a&&(d=c(v));h&&k.dispatchEvent("tick")};V.call(k);k.time=k.frame=0;k.tick=function(){v(!0)};k.lagSmoothing=function(a,b){r=a||1E10;s=Math.min(b,r,0)};k.sleep=
function(){null!=d&&(p&&R?R(d):tweenClearTimeout(d),c=n,d=null,k===h&&(g=!1))};k.wake=function(){null!==d?k.sleep():10<k.frame&&(U=T()-r+5);c=0===e?n:p&&M?M:function(a){return tweenSetTimeOut(a,0|1E3*(l-k.time)+1)};k===h&&(g=!0);v(2)};k.fps=function(a){return arguments.length?(e=a,f=1/(e||60),l=this.time+f,k.wake(),void 0):e};k.useRAF=function(a){return arguments.length?(k.sleep(),p=a,k.fps(e),void 0):p};k.fps(a);tweenSetTimeOut(function(){p&&(!d||5>k.frame)&&k.useRAF(!1)},1500)});f=k.Ticker.prototype=
new k.events.EventDispatcher;f.constructor=k.Ticker;var S=w("core.Animation",function(a,b){if(this.vars=b=b||{},this._duration=this._totalDuration=a||0,this._delay=Number(b.delay)||0,this._timeScale=1,this._active=!0===b.immediateRender,this.data=b.data,this._reversed=!0===b.reversed,ea){g||h.wake();var e=this.vars.useFrames?aa:ea;e.add(this,e._time);this.vars.paused&&this.paused(!0)}});h=S.ticker=new k.Ticker;f=S.prototype;f._dirty=f._gc=f._initted=f._paused=!1;f._totalTime=f._time=0;f._rawPrevTime=
-1;f._next=f._last=f._onUpdate=f._timeline=f.timeline=null;f._paused=!1;var W=function(){g&&2E3<T()-U&&h.wake();tweenSetTimeOut(W,2E3)};W();f.play=function(a,b){return null!=a&&this.seek(a,b),this.reversed(!1).paused(!1)};f.pause=function(a,b){return null!=a&&this.seek(a,b),this.paused(!0)};f.resume=function(a,b){return null!=a&&this.seek(a,b),this.paused(!1)};f.seek=function(a,b){return this.totalTime(Number(a),!1!==b)};f.restart=function(a,b){return this.reversed(!1).paused(!1).totalTime(a?-this._delay:
0,!1!==b,!0)};f.reverse=function(a,b){return null!=a&&this.seek(a||this.totalDuration(),b),this.reversed(!0).paused(!1)};f.render=function(){};f.invalidate=function(){return this};f.isActive=function(){var a,b=this._timeline,e=this._startTime;return!b||!this._gc&&!this._paused&&b.isActive()&&(a=b.rawTime())>=e&&e+this.totalDuration()/this._timeScale>a};f._enabled=function(a,b){return g||h.wake(),this._gc=!a,this._active=this.isActive(),!0!==b&&(a&&!this.timeline?this._timeline.add(this,this._startTime-
this._delay):!a&&this.timeline&&this._timeline._remove(this,!0)),!1};f._kill=function(){return this._enabled(!1,!1)};f.kill=function(a,b){return this._kill(a,b),this};f._uncache=function(a){for(a=a?this:this.timeline;a;)a._dirty=!0,a=a.timeline;return this};f._swapSelfInParams=function(a){for(var b=a.length,e=a.concat();-1<--b;)"{self}"===a[b]&&(e[b]=this);return e};f.eventCallback=function(a,b,e,c){if("on"===(a||"").substr(0,2)){var d=this.vars;if(1===arguments.length)return d[a];null==b?delete d[a]:
(d[a]=b,d[a+"Params"]=p(e)&&-1!==e.join("").indexOf("{self}")?this._swapSelfInParams(e):e,d[a+"Scope"]=c);"onUpdate"===a&&(this._onUpdate=b)}return this};f.delay=function(a){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+a-this._delay),this._delay=a,this):this._delay};f.duration=function(a){return arguments.length?(this._duration=this._totalDuration=a,this._uncache(!0),this._timeline.smoothChildTiming&&0<this._time&&this._time<this._duration&&0!==a&&this.totalTime(a/
this._duration*this._totalTime,!0),this):(this._dirty=!1,this._duration)};f.totalDuration=function(a){return this._dirty=!1,arguments.length?this.duration(a):this._totalDuration};f.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(a>this._duration?this._duration:a,b)):this._time};f.totalTime=function(a,b,e){if(g||h.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>a&&!e&&(a+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&
this.totalDuration();var c=this._totalDuration,d=this._timeline;if(a>c&&!e&&(a=c),this._startTime=(this._paused?this._pauseTime:d._time)-(this._reversed?c-a:a)/this._timeScale,d._dirty||this._uncache(!1),d._timeline)for(;d._timeline;)d._timeline._time!==(d._startTime+d._totalTime)/d._timeScale&&d.totalTime(d._totalTime,!0),d=d._timeline}this._gc&&this._enabled(!0,!1);(this._totalTime!==a||0===this._duration)&&(this.render(a,b,!1),Y.length&&ha())}return this};f.progress=f.totalProgress=function(a,
b){return arguments.length?this.totalTime(this.duration()*a,b):this._time/this.duration()};f.startTime=function(a){return arguments.length?(a!==this._startTime&&(this._startTime=a,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,a-this._delay)),this):this._startTime};f.timeScale=function(a){if(!arguments.length)return this._timeScale;if(a=a||1E-10,this._timeline&&this._timeline.smoothChildTiming){var b=this._pauseTime,b=b||0===b?b:this._timeline.totalTime();this._startTime=b-(b-
this._startTime)*this._timeScale/a}return this._timeScale=a,this._uncache(!1)};f.reversed=function(a){return arguments.length?(a!=this._reversed&&(this._reversed=a,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed};f.paused=function(a){if(!arguments.length)return this._paused;if(a!=this._paused&&this._timeline){g||a||h.wake();var b=this._timeline,e=b.rawTime(),c=e-this._pauseTime;!a&&b.smoothChildTiming&&
(this._startTime+=c,this._uncache(!1));this._pauseTime=a?e:null;this._paused=a;this._active=this.isActive();!a&&0!==c&&this._initted&&this.duration()&&this.render(b.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!a&&this._enabled(!0,!1),this};e=w("core.SimpleTimeline",function(a){S.call(this,0,a);this.autoRemoveChildren=this.smoothChildTiming=!0});f=e.prototype=new S;f.constructor=e;f.kill()._gc=!1;f._first=f._last=null;f._sortChildren=!1;f.add=f.insert=
function(a,b){var e,c;if(a._startTime=Number(b||0)+a._delay,a._paused&&this!==a._timeline&&(a._pauseTime=a._startTime+(this.rawTime()-a._startTime)/a._timeScale),a.timeline&&a.timeline._remove(a,!0),a.timeline=a._timeline=this,a._gc&&a._enabled(!0,!0),e=this._last,this._sortChildren)for(c=a._startTime;e&&e._startTime>c;)e=e._prev;return e?(a._next=e._next,e._next=a):(a._next=this._first,this._first=a),a._next?a._next._prev=a:this._last=a,a._prev=e,this._timeline&&this._uncache(!0),this};f._remove=
function(a,b){return a.timeline===this&&(b||a._enabled(!1,!0),a._prev?a._prev._next=a._next:this._first===a&&(this._first=a._next),a._next?a._next._prev=a._prev:this._last===a&&(this._last=a._prev),a._next=a._prev=a.timeline=null,this._timeline&&this._uncache(!0)),this};f.render=function(a,b,e){var c,d=this._first;for(this._totalTime=this._time=this._rawPrevTime=a;d;)c=d._next,(d._active||a>=d._startTime&&!d._paused)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*
d._timeScale,b,e):d.render((a-d._startTime)*d._timeScale,b,e)),d=c};f.rawTime=function(){return g||h.wake(),this._totalTime};var N=w("TweenLite",function(a,b,e){if(S.call(this,b,e),this.render=N.prototype.render,null==a)throw"Cannot tween a null target.";this.target=a="string"!=typeof a?a:N.selector(a)||a;var d,f;d=a.jquery||a.length&&a!==c&&a[0]&&(a[0]===c||a[0].nodeType&&a[0].style&&!a.nodeType);e=this.vars.overwrite;if(this._overwrite=e=null==e?ca[N.defaultOverwrite]:"number"==typeof e?e>>0:ca[e],
(d||a instanceof Array||a.push&&p(a))&&"number"!=typeof a[0])for(this._targets=f=m(a),this._propLookup=[],this._siblings=[],a=0;f.length>a;a++)(d=f[a])?"string"!=typeof d?d.length&&d!==c&&d[0]&&(d[0]===c||d[0].nodeType&&d[0].style&&!d.nodeType)?(f.splice(a--,1),this._targets=f=f.concat(m(d))):(this._siblings[a]=ia(d,this,!1),1===e&&1<this._siblings[a].length&&ja(d,this,null,1,this._siblings[a])):(d=f[a--]=N.selector(d),"string"==typeof d&&f.splice(a+1,1)):f.splice(a--,1);else this._propLookup={},
this._siblings=ia(a,this,!1),1===e&&1<this._siblings.length&&ja(a,this,null,1,this._siblings);(this.vars.immediateRender||0===b&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-1E-10,this.render(-this._delay))},!0),X=function(a){return a.length&&a!==c&&a[0]&&(a[0]===c||a[0].nodeType&&a[0].style&&!a.nodeType)};f=N.prototype=new S;f.constructor=N;f.kill()._gc=!1;f.ratio=0;f._firstPT=f._targets=f._overwrittenProps=f._startAt=null;f._notifyPluginsOfEnabled=f._lazy=!1;N.version="1.13.1";
N.defaultEase=f._ease=new P(null,null,1,1);N.defaultOverwrite="auto";N.ticker=h;N.autoSleep=!0;N.lagSmoothing=function(a,b){h.lagSmoothing(a,b)};N.selector=c.$||c.jQuery||function(a){var b=c.$||c.jQuery;return b?(N.selector=b,b(a)):"undefined"==typeof document?a:document.querySelectorAll?document.querySelectorAll(a):document.getElementById("#"===a.charAt(0)?a.substr(1):a)};var Y=[],$={},Q=N._internals={isArray:p,isSelector:X,lazyTweens:Y},Z=N._plugins={},ba=Q.tweenLookup={},fa=0,ga=Q.reservedProps=
{ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1},ca={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},
aa=S._rootFramesTimeline=new e,ea=S._rootTimeline=new e,ha=Q.lazyRender=function(){var b=Y.length;for($={};-1<--b;)(a=Y[b])&&!1!==a._lazy&&(a.render(a._lazy,!1,!0),a._lazy=!1);Y.length=0};ea._startTime=h.time;aa._startTime=h.frame;ea._active=aa._active=!0;tweenSetTimeOut(ha,1);S._updateRoot=N.render=function(){var a,b,e;if(Y.length&&ha(),ea.render((h.time-ea._startTime)*ea._timeScale,!1,!1),aa.render((h.frame-aa._startTime)*aa._timeScale,!1,!1),Y.length&&ha(),!(h.frame%120)){for(e in ba){b=ba[e].tweens;
for(a=b.length;-1<--a;)b[a]._gc&&b.splice(a,1);0===b.length&&delete ba[e]}if(e=ea._first,(!e||e._paused)&&N.autoSleep&&!aa._first&&1===h._listeners.tick.length){for(;e&&e._paused;)e=e._next;e||h.sleep()}}};h.addEventListener("tick",S._updateRoot);var ia=function(a,b,e){var c,d,f=a._gsTweenID;if(ba[f||(a._gsTweenID=f="t"+fa++)]||(ba[f]={target:a,tweens:[]}),b&&(c=ba[f].tweens,c[d=c.length]=b,e))for(;-1<--d;)c[d]===b&&c.splice(d,1);return ba[f].tweens},ja=function(a,b,e,c,d){var f,h,g;if(1===c||4<=
c){a=d.length;for(f=0;a>f;f++)if((g=d[f])!==b)g._gc||g._enabled(!1,!1)&&(h=!0);else if(5===c)break;return h}var k,l=b._startTime+1E-10,m=[],n=0,p=0===b._duration;for(f=d.length;-1<--f;)(g=d[f])===b||g._gc||g._paused||(g._timeline!==b._timeline?(k=k||ka(b,0,p),0===ka(g,k,p)&&(m[n++]=g)):l>=g._startTime&&g._startTime+g.totalDuration()/g._timeScale>l&&((p||!g._initted)&&2E-10>=l-g._startTime||(m[n++]=g)));for(f=n;-1<--f;)g=m[f],2===c&&g._kill(e,a)&&(h=!0),(2!==c||!g._firstPT&&g._initted)&&g._enabled(!1,
!1)&&(h=!0);return h},ka=function(a,b,e){for(var c=a._timeline,d=c._timeScale,f=a._startTime;c._timeline;){if(f+=c._startTime,d*=c._timeScale,c._paused)return-100;c=c._timeline}return f/=d,f>b?f-b:e&&f===b||!a._initted&&2E-10>f-b?1E-10:(f+=a.totalDuration()/a._timeScale/d)>b+1E-10?0:f-b-1E-10};f._init=function(){var a,b,e,c=this.vars,d=this._overwrittenProps,f=this._duration,h=!!c.immediateRender,g=c.ease;if(c.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill());e={};for(a in c.startAt)e[a]=
c.startAt[a];if(e.overwrite=!1,e.immediateRender=!0,e.lazy=h&&!1!==c.lazy,e.startAt=e.delay=null,this._startAt=N.to(this.target,0,e),h)if(0<this._time)this._startAt=null;else if(0!==f)return}else if(c.runBackwards&&0!==f)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{e={};for(a in c)ga[a]&&"autoCSS"!==a||(e[a]=c[a]);if(e.overwrite=0,e.data="isFromStart",e.lazy=h&&!1!==c.lazy,e.immediateRender=h,this._startAt=N.to(this.target,0,e),h){if(0===this._time)return}else this._startAt._init(),
this._startAt._enabled(!1)}if(this._ease=g=g?g instanceof P?g:"function"==typeof g?new P(g,c.easeParams):O[g]||N.defaultEase:N.defaultEase,c.easeParams instanceof Array&&g.config&&(this._ease=g.config.apply(g,c.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length;-1<--a;)this._initProps(this._targets[a],this._propLookup[a]={},this._siblings[a],d?d[a]:null)&&(b=!0);else b=this._initProps(this.target,this._propLookup,
this._siblings,d);if(b&&N._onPluginEvent("_onInitAllProps",this),d&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),c.runBackwards)for(e=this._firstPT;e;)e.s+=e.c,e.c=-e.c,e=e._next;this._onUpdate=c.onUpdate;this._initted=!0};f._initProps=function(a,b,e,d){var f,h,g,k,l;if(null==a)return!1;$[a._gsTweenID]&&ha();if(!this.vars.css&&a.style&&a!==c&&a.nodeType&&Z.css&&!1!==this.vars.autoCSS){h=this.vars;var m,n={};for(m in h)ga[m]||m in a&&"transform"!==m&&"x"!==m&&"y"!==m&&"width"!==
m&&"height"!==m&&"className"!==m&&"border"!==m||!(!Z[m]||Z[m]&&Z[m]._autoCSS)||(n[m]=h[m],delete h[m]);h.css=n}for(f in this.vars){if(h=this.vars[f],ga[f])h&&(h instanceof Array||h.push&&p(h))&&-1!==h.join("").indexOf("{self}")&&(this.vars[f]=this._swapSelfInParams(h,this));else if(Z[f]&&(k=new Z[f])._onInitTween(a,this.vars[f],this)){this._firstPT=l={_next:this._firstPT,t:k,p:"setRatio",s:0,c:1,f:!0,n:f,pg:!0,pr:k._priority};for(h=k._overwriteProps.length;-1<--h;)b[k._overwriteProps[h]]=this._firstPT;
(k._priority||k._onInitAllProps)&&(g=!0);(k._onDisable||k._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=b[f]=l={_next:this._firstPT,t:a,p:f,f:"function"==typeof a[f],n:f,pg:!1,pr:0},l.s=l.f?a[f.indexOf("set")||"function"!=typeof a["get"+f.substr(3)]?f:"get"+f.substr(3)]():parseFloat(a[f]),l.c="string"==typeof h&&"="===h.charAt(1)?parseInt(h.charAt(0)+"1",10)*Number(h.substr(2)):Number(h)-l.s||0;l&&l._next&&(l._next._prev=l)}return d&&this._kill(d,a)?this._initProps(a,b,e,d):1<this._overwrite&&
this._firstPT&&1<e.length&&ja(a,this,b,this._overwrite,e)?(this._kill(b,a),this._initProps(a,b,e,d)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&($[a._gsTweenID]=!0),g)};f.render=function(a,b,e){var c,d,f,h,g=this._time,k=this._duration;f=this._rawPrevTime;if(a>=k)this._totalTime=this._time=k,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(c=!0,d="onComplete"),0===k&&(this._initted||!this.vars.lazy||e)&&(this._startTime===this._timeline._duration&&
(a=0),(0===a||0>f||1E-10===f)&&f!==a&&(e=!0,1E-10<f&&(d="onReverseComplete")),this._rawPrevTime=h=!b||a||f===a?a:1E-10);else if(1E-7>a)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==g||0===k&&0<f&&1E-10!==f)&&(d="onReverseComplete",c=this._reversed),0>a?(this._active=!1,0===k&&(this._initted||!this.vars.lazy||e)&&(0<=f&&(e=!0),this._rawPrevTime=h=!b||a||f===a?a:1E-10)):this._initted||(e=!0);else if(this._totalTime=this._time=a,this._easeType){var l=a/k,m=
this._easeType,n=this._easePower;(1===m||3===m&&0.5<=l)&&(l=1-l);3===m&&(l*=2);1===n?l*=l:2===n?l*=l*l:3===n?l*=l*l*l:4===n&&(l*=l*l*l*l);this.ratio=1===m?1-l:2===m?l:0.5>a/k?l/2:1-l/2}else this.ratio=this._ease.getRatio(a/k);if(this._time!==g||e){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!e&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=g,this._rawPrevTime=f,Y.push(this),this._lazy=a,void 0;this._time&&
!c?this.ratio=this._ease.getRatio(this._time/k):c&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}!1!==this._lazy&&(this._lazy=!1);this._active||!this._paused&&this._time!==g&&0<=a&&(this._active=!0);0!==g||(this._startAt&&(0<=a?this._startAt.render(a,b,e):d||(d="_dummyGS")),!this.vars.onStart||0===this._time&&0!==k||!b&&this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||L));for(f=this._firstPT;f;)f.f?f.t[f.p](f.c*this.ratio+f.s):f.t[f.p]=f.c*
this.ratio+f.s,f=f._next;this._onUpdate&&(0>a&&this._startAt&&this._startTime&&this._startAt.render(a,b,e),b||(this._time!==g||c)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||L));d&&(!this._gc||e)&&(0>a&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(a,b,e),c&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[d]&&this.vars[d].apply(this.vars[d+"Scope"]||this,this.vars[d+"Params"]||L),0===k&&1E-10===this._rawPrevTime&&
1E-10!==h&&(this._rawPrevTime=0))}};f._kill=function(a,b){if("all"===a&&(a=null),null==a&&(null==b||b===this.target))return this._lazy=!1,this._enabled(!1,!1);b="string"!=typeof b?b||this._targets||this.target:N.selector(b)||b;var e,c,d,f,h,g,l;if((p(b)||X(b))&&"number"!=typeof b[0])for(e=b.length;-1<--e;)this._kill(a,b[e])&&(g=!0);else{if(this._targets)for(e=this._targets.length;-1<--e;){if(b===this._targets[e]){h=this._propLookup[e]||{};this._overwrittenProps=this._overwrittenProps||[];c=this._overwrittenProps[e]=
a?this._overwrittenProps[e]||{}:"all";break}}else{if(b!==this.target)return!1;h=this._propLookup;c=this._overwrittenProps=a?this._overwrittenProps||{}:"all"}if(h){e=a||h;l=a!==c&&"all"!==c&&a!==h&&("object"!=typeof a||!a._tempKill);for(d in e)(f=h[d])&&(f.pg&&f.t._kill(e)&&(g=!0),f.pg&&0!==f.t._overwriteProps.length||(f._prev?f._prev._next=f._next:f===this._firstPT&&(this._firstPT=f._next),f._next&&(f._next._prev=f._prev),f._next=f._prev=null),delete h[d]),l&&(c[d]=1);!this._firstPT&&this._initted&&
this._enabled(!1,!1)}}return g};f.invalidate=function(){return this._notifyPluginsOfEnabled&&N._onPluginEvent("_onDisable",this),this._firstPT=null,this._overwrittenProps=null,this._onUpdate=null,this._startAt=null,this._initted=this._active=this._notifyPluginsOfEnabled=this._lazy=!1,this._propLookup=this._targets?{}:[],this};f._enabled=function(a,b){if(g||h.wake(),a&&this._gc){var e,c=this._targets;if(c)for(e=c.length;-1<--e;)this._siblings[e]=ia(c[e],this,!0);else this._siblings=ia(this.target,
this,!0)}return S.prototype._enabled.call(this,a,b),this._notifyPluginsOfEnabled&&this._firstPT?N._onPluginEvent(a?"_onEnable":"_onDisable",this):!1};N.to=function(a,b,e){return new N(a,b,e)};N.from=function(a,b,e){return e.runBackwards=!0,e.immediateRender=0!=e.immediateRender,new N(a,b,e)};N.fromTo=function(a,b,e,c){return c.startAt=e,c.immediateRender=0!=c.immediateRender&&0!=e.immediateRender,new N(a,b,c)};N.delayedCall=function(a,b,e,c,d){return new N(b,0,{delay:a,onComplete:b,onCompleteParams:e,
onCompleteScope:c,onReverseComplete:b,onReverseCompleteParams:e,onReverseCompleteScope:c,immediateRender:!1,useFrames:d,overwrite:0})};N.set=function(a,b){return new N(a,0,b)};N.getTweensOf=function(a,b){if(null==a)return[];a="string"!=typeof a?a:N.selector(a)||a;var e,c,d,f;if((p(a)||X(a))&&"number"!=typeof a[0]){e=a.length;for(c=[];-1<--e;)c=c.concat(N.getTweensOf(a[e],b));for(e=c.length;-1<--e;)for(f=c[e],d=e;-1<--d;)f===c[d]&&c.splice(e,1)}else for(c=ia(a).concat(),e=c.length;-1<--e;)(c[e]._gc||
b&&!c[e].isActive())&&c.splice(e,1);return c};N.killTweensOf=N.killDelayedCallsTo=function(a,b,e){"object"==typeof b&&(e=b,b=!1);b=N.getTweensOf(a,b);for(var c=b.length;-1<--c;)b[c]._kill(e,a)};var da=w("plugins.TweenPlugin",function(a,b){this._overwriteProps=(a||"").split(",");this._propName=this._overwriteProps[0];this._priority=b||0;this._super=da.prototype},!0);if(f=da.prototype,da.version="1.10.1",da.API=2,f._firstPT=null,f._addTween=function(a,b,e,c,d,f){var h,g;return null!=c&&(h="number"==
typeof c||"="!==c.charAt(1)?Number(c)-e:parseInt(c.charAt(0)+"1",10)*Number(c.substr(2)))?(this._firstPT=g={_next:this._firstPT,t:a,p:b,s:e,c:h,f:"function"==typeof a[b],n:d||b,r:f},g._next&&(g._next._prev=g),g):void 0},f.setRatio=function(a){for(var b,e=this._firstPT;e;)b=e.c*a+e.s,e.r?b=Math.round(b):1E-6>b&&-1E-6<b&&(b=0),e.f?e.t[e.p](b):e.t[e.p]=b,e=e._next},f._kill=function(a){var b,e=this._overwriteProps,c=this._firstPT;if(null!=a[this._propName])this._overwriteProps=[];else for(b=e.length;-1<
--b;)null!=a[e[b]]&&e.splice(b,1);for(;c;)null!=a[c.n]&&(c._next&&(c._next._prev=c._prev),c._prev?(c._prev._next=c._next,c._prev=null):this._firstPT===c&&(this._firstPT=c._next)),c=c._next;return!1},f._roundProps=function(a,b){for(var e=this._firstPT;e;)(a[this._propName]||null!=e.n&&a[e.n.split(this._propName+"_").join("")])&&(e.r=b),e=e._next},N._onPluginEvent=function(a,b){var e,c,d,f,h,g=b._firstPT;if("_onInitAllProps"===a){for(;g;){h=g._next;for(c=d;c&&c.pr>g.pr;)c=c._next;(g._prev=c?c._prev:
f)?g._prev._next=g:d=g;(g._next=c)?c._prev=g:f=g;g=h}g=b._firstPT=d}for(;g;)g.pg&&"function"==typeof g.t[a]&&g.t[a]()&&(e=!0),g=g._next;return e},da.activate=function(a){for(var b=a.length;-1<--b;)a[b].API===da.API&&(Z[(new a[b])._propName]=a[b]);return!0},v.plugin=function(a){if(!(a&&a.propName&&a.init&&a.API))throw"illegal plugin definition.";var b,e=a.propName,c=a.priority||0,d=a.overwriteProps,f={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},h=
w("plugins."+e.charAt(0).toUpperCase()+e.substr(1)+"Plugin",function(){da.call(this,e,c);this._overwriteProps=d||[]},!0===a.global),g=h.prototype=new da(e);g.constructor=h;h.API=a.API;for(b in f)"function"==typeof a[b]&&(g[f[b]]=a[b]);return h.version=a.version,da.activate([h]),h},a=c._gsQueue){for(e=0;a.length>e;e++)a[e]();for(f in r)r[f].func||c.console.log("GSAP encountered missing dependency: com.greensock."+f)}g=!1}})("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:
this||window,"TweenMax");"use strict";function q(c){throw c;}
var t=void 0,u=!1,sjcl={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(c){this.toString=function(){return"CORRUPT: "+this.message};this.message=c},invalid:function(c){this.toString=function(){return"INVALID: "+this.message};this.message=c},bug:function(c){this.toString=function(){return"BUG: "+this.message};this.message=c},notReady:function(c){this.toString=function(){return"NOT READY: "+this.message};this.message=c}}};
"undefined"!==typeof module&&module.exports&&(module.exports=sjcl);
sjcl.cipher.aes=function(c){this.k[0][0][0]||this.D();var d,b,a,e,f=this.k[0][4],h=this.k[1];d=c.length;var g=1;4!==d&&6!==d&&8!==d&&q(new sjcl.exception.invalid("invalid aes key size"));this.b=[a=c.slice(0),e=[]];for(c=d;c<4*d+28;c++){b=a[c-1];if(0===c%d||8===d&&4===c%d)b=f[b>>>24]<<24^f[b>>16&255]<<16^f[b>>8&255]<<8^f[b&255],0===c%d&&(b=b<<8^b>>>24^g<<24,g=g<<1^283*(g>>7));a[c]=a[c-d]^b}for(d=0;c;d++,c--)b=a[d&3?c:c-4],e[d]=4>=c||4>d?b:h[0][f[b>>>24]]^h[1][f[b>>16&255]]^h[2][f[b>>8&255]]^h[3][f[b&
255]]};
sjcl.cipher.aes.prototype={encrypt:function(c){return y(this,c,0)},decrypt:function(c){return y(this,c,1)},k:[[[],[],[],[],[]],[[],[],[],[],[]]],D:function(){var c=this.k[0],d=this.k[1],b=c[4],a=d[4],e,f,h,g=[],l=[],k,m,n,p;for(e=0;256>e;e++)l[(g[e]=e<<1^283*(e>>7))^e]=e;for(f=h=0;!b[f];f^=k||1,h=l[h]||1)for(n=h^h<<1^h<<2^h<<3^h<<4,n=n>>8^n&255^99,b[f]=n,a[n]=f,m=g[e=g[k=g[f]]],p=16843009*m^65537*e^257*k^16843008*f,m=257*g[n]^16843008*n,e=0;4>e;e++)c[e][f]=m=m<<24^m>>>8,d[e][n]=p=p<<24^p>>>8;for(e=
0;5>e;e++)c[e]=c[e].slice(0),d[e]=d[e].slice(0)}};
function y(c,d,b){4!==d.length&&q(new sjcl.exception.invalid("invalid aes block size"));var a=c.b[b],e=d[0]^a[0],f=d[b?3:1]^a[1],h=d[2]^a[2];d=d[b?1:3]^a[3];var g,l,k,m=a.length/4-2,n,p=4,r=[0,0,0,0];g=c.k[b];c=g[0];var s=g[1],v=g[2],w=g[3],x=g[4];for(n=0;n<m;n++)g=c[e>>>24]^s[f>>16&255]^v[h>>8&255]^w[d&255]^a[p],l=c[f>>>24]^s[h>>16&255]^v[d>>8&255]^w[e&255]^a[p+1],k=c[h>>>24]^s[d>>16&255]^v[e>>8&255]^w[f&255]^a[p+2],d=c[d>>>24]^s[e>>16&255]^v[f>>8&255]^w[h&255]^a[p+3],p+=4,e=g,f=l,h=k;for(n=0;4>
n;n++)r[b?3&-n:n]=x[e>>>24]<<24^x[f>>16&255]<<16^x[h>>8&255]<<8^x[d&255]^a[p++],g=e,e=f,f=h,h=d,d=g;return r}
sjcl.bitArray={bitSlice:function(c,d,b){c=sjcl.bitArray.P(c.slice(d/32),32-(d&31)).slice(1);return b===t?c:sjcl.bitArray.clamp(c,b-d)},extract:function(c,d,b){var a=Math.floor(-d-b&31);return((d+b-1^d)&-32?c[d/32|0]<<32-a^c[d/32+1|0]>>>a:c[d/32|0]>>>a)&(1<<b)-1},concat:function(c,d){if(0===c.length||0===d.length)return c.concat(d);var b=c[c.length-1],a=sjcl.bitArray.getPartial(b);return 32===a?c.concat(d):sjcl.bitArray.P(d,a,b|0,c.slice(0,c.length-1))},bitLength:function(c){var d=c.length;return 0===
d?0:32*(d-1)+sjcl.bitArray.getPartial(c[d-1])},clamp:function(c,d){if(32*c.length<d)return c;c=c.slice(0,Math.ceil(d/32));var b=c.length;d&=31;0<b&&d&&(c[b-1]=sjcl.bitArray.partial(d,c[b-1]&2147483648>>d-1,1));return c},partial:function(c,d,b){return 32===c?d:(b?d|0:d<<32-c)+1099511627776*c},getPartial:function(c){return Math.round(c/1099511627776)||32},equal:function(c,d){if(sjcl.bitArray.bitLength(c)!==sjcl.bitArray.bitLength(d))return u;var b=0,a;for(a=0;a<c.length;a++)b|=c[a]^d[a];return 0===
b},P:function(c,d,b,a){var e;for(a===t&&(a=[]);32<=d;d-=32)a.push(b),b=0;if(0===d)return a.concat(c);for(e=0;e<c.length;e++)a.push(b|c[e]>>>d),b=c[e]<<32-d;e=c.length?c[c.length-1]:0;c=sjcl.bitArray.getPartial(e);a.push(sjcl.bitArray.partial(d+c&31,32<d+c?b:a.pop(),1));return a},l:function(c,d){return[c[0]^d[0],c[1]^d[1],c[2]^d[2],c[3]^d[3]]}};
sjcl.codec.utf8String={fromBits:function(c){var d="",b=sjcl.bitArray.bitLength(c),a,e;for(a=0;a<b/8;a++)0===(a&3)&&(e=c[a/4]),d+=String.fromCharCode(e>>>24),e<<=8;return decodeURIComponent(escape(d))},toBits:function(c){c=unescape(encodeURIComponent(c));var d=[],b,a=0;for(b=0;b<c.length;b++)a=a<<8|c.charCodeAt(b),3===(b&3)&&(d.push(a),a=0);b&3&&d.push(sjcl.bitArray.partial(8*(b&3),a));return d}};
sjcl.codec.hex={fromBits:function(c){var d="",b;for(b=0;b<c.length;b++)d+=((c[b]|0)+0xf00000000000).toString(16).substr(4);return d.substr(0,sjcl.bitArray.bitLength(c)/4)},toBits:function(c){var d,b=[],a;c=c.replace(/\s|0x/g,"");a=c.length;c+="00000000";for(d=0;d<c.length;d+=8)b.push(parseInt(c.substr(d,8),16)^0);return sjcl.bitArray.clamp(b,4*a)}};
sjcl.codec.base64={J:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(c,d,b){var a="",e=0,f=sjcl.codec.base64.J,h=0,g=sjcl.bitArray.bitLength(c);b&&(f=f.substr(0,62)+"-_");for(b=0;6*a.length<g;)a+=f.charAt((h^c[b]>>>e)>>>26),6>e?(h=c[b]<<6-e,e+=26,b++):(h<<=6,e-=6);for(;a.length&3&&!d;)a+="=";return a},toBits:function(c,d){c=c.replace(/\s|=/g,"");var b=[],a,e=0,f=sjcl.codec.base64.J,h=0,g;d&&(f=f.substr(0,62)+"-_");for(a=0;a<c.length;a++)g=f.indexOf(c.charAt(a)),
0>g&&q(new sjcl.exception.invalid("this isn't base64!")),26<e?(e-=26,b.push(h^g>>>e),h=g<<32-e):(e+=6,h^=g<<32-e);e&56&&b.push(sjcl.bitArray.partial(e&56,h,1));return b}};sjcl.codec.base64url={fromBits:function(c){return sjcl.codec.base64.fromBits(c,1,1)},toBits:function(c){return sjcl.codec.base64.toBits(c,1)}};sjcl.hash.sha256=function(c){this.b[0]||this.D();c?(this.r=c.r.slice(0),this.o=c.o.slice(0),this.h=c.h):this.reset()};sjcl.hash.sha256.hash=function(c){return(new sjcl.hash.sha256).update(c).finalize()};
sjcl.hash.sha256.prototype={blockSize:512,reset:function(){this.r=this.N.slice(0);this.o=[];this.h=0;return this},update:function(c){"string"===typeof c&&(c=sjcl.codec.utf8String.toBits(c));var d,b=this.o=sjcl.bitArray.concat(this.o,c);d=this.h;c=this.h=d+sjcl.bitArray.bitLength(c);for(d=512+d&-512;d<=c;d+=512)z(this,b.splice(0,16));return this},finalize:function(){var c,d=this.o,b=this.r,d=sjcl.bitArray.concat(d,[sjcl.bitArray.partial(1,1)]);for(c=d.length+2;c&15;c++)d.push(0);d.push(Math.floor(this.h/
4294967296));for(d.push(this.h|0);d.length;)z(this,d.splice(0,16));this.reset();return b},N:[],b:[],D:function(){function c(a){return 4294967296*(a-Math.floor(a))|0}var d=0,b=2,a;a:for(;64>d;b++){for(a=2;a*a<=b;a++)if(0===b%a)continue a;8>d&&(this.N[d]=c(Math.pow(b,0.5)));this.b[d]=c(Math.pow(b,1/3));d++}}};
function z(c,d){var b,a,e,f=d.slice(0),h=c.r,g=c.b,l=h[0],k=h[1],m=h[2],n=h[3],p=h[4],r=h[5],s=h[6],v=h[7];for(b=0;64>b;b++)16>b?a=f[b]:(a=f[b+1&15],e=f[b+14&15],a=f[b&15]=(a>>>7^a>>>18^a>>>3^a<<25^a<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+f[b&15]+f[b+9&15]|0),a=a+v+(p>>>6^p>>>11^p>>>25^p<<26^p<<21^p<<7)+(s^p&(r^s))+g[b],v=s,s=r,r=p,p=n+a|0,n=m,m=k,k=l,l=a+(k&m^n&(k^m))+(k>>>2^k>>>13^k>>>22^k<<30^k<<19^k<<10)|0;h[0]=h[0]+l|0;h[1]=h[1]+k|0;h[2]=h[2]+m|0;h[3]=h[3]+n|0;h[4]=h[4]+p|0;h[5]=h[5]+r|0;h[6]=
h[6]+s|0;h[7]=h[7]+v|0}
sjcl.mode.ccm={name:"ccm",encrypt:function(c,d,b,a,e){var f,h=d.slice(0),g=sjcl.bitArray,l=g.bitLength(b)/8,k=g.bitLength(h)/8;e=e||64;a=a||[];7>l&&q(new sjcl.exception.invalid("ccm: iv must be at least 7 bytes"));for(f=2;4>f&&k>>>8*f;f++);f<15-l&&(f=15-l);b=g.clamp(b,8*(15-f));d=sjcl.mode.ccm.L(c,d,b,a,e,f);h=sjcl.mode.ccm.p(c,h,b,d,e,f);return g.concat(h.data,h.tag)},decrypt:function(c,d,b,a,e){e=e||64;a=a||[];var f=sjcl.bitArray,h=f.bitLength(b)/8,g=f.bitLength(d),l=f.clamp(d,g-e),k=f.bitSlice(d,
g-e),g=(g-e)/8;7>h&&q(new sjcl.exception.invalid("ccm: iv must be at least 7 bytes"));for(d=2;4>d&&g>>>8*d;d++);d<15-h&&(d=15-h);b=f.clamp(b,8*(15-d));l=sjcl.mode.ccm.p(c,l,b,k,e,d);c=sjcl.mode.ccm.L(c,l.data,b,a,e,d);f.equal(l.tag,c)||q(new sjcl.exception.corrupt("ccm: tag doesn't match"));return l.data},L:function(c,d,b,a,e,f){var h=[],g=sjcl.bitArray,l=g.l;e/=8;(e%2||4>e||16<e)&&q(new sjcl.exception.invalid("ccm: invalid tag length"));(4294967295<a.length||4294967295<d.length)&&q(new sjcl.exception.bug("ccm: can't deal with 4GiB or more data"));
f=[g.partial(8,(a.length?64:0)|e-2<<2|f-1)];f=g.concat(f,b);f[3]|=g.bitLength(d)/8;f=c.encrypt(f);if(a.length)for(b=g.bitLength(a)/8,65279>=b?h=[g.partial(16,b)]:4294967295>=b&&(h=g.concat([g.partial(16,65534)],[b])),h=g.concat(h,a),a=0;a<h.length;a+=4)f=c.encrypt(l(f,h.slice(a,a+4).concat([0,0,0])));for(a=0;a<d.length;a+=4)f=c.encrypt(l(f,d.slice(a,a+4).concat([0,0,0])));return g.clamp(f,8*e)},p:function(c,d,b,a,e,f){var h,g=sjcl.bitArray;h=g.l;var l=d.length,k=g.bitLength(d);b=g.concat([g.partial(8,
f-1)],b).concat([0,0,0]).slice(0,4);a=g.bitSlice(h(a,c.encrypt(b)),0,e);if(!l)return{tag:a,data:[]};for(h=0;h<l;h+=4)b[3]++,e=c.encrypt(b),d[h]^=e[0],d[h+1]^=e[1],d[h+2]^=e[2],d[h+3]^=e[3];return{tag:a,data:g.clamp(d,k)}}};
sjcl.mode.ocb2={name:"ocb2",encrypt:function(c,d,b,a,e,f){128!==sjcl.bitArray.bitLength(b)&&q(new sjcl.exception.invalid("ocb iv must be 128 bits"));var h,g=sjcl.mode.ocb2.H,l=sjcl.bitArray,k=l.l,m=[0,0,0,0];b=g(c.encrypt(b));var n,p=[];a=a||[];e=e||64;for(h=0;h+4<d.length;h+=4)n=d.slice(h,h+4),m=k(m,n),p=p.concat(k(b,c.encrypt(k(b,n)))),b=g(b);n=d.slice(h);d=l.bitLength(n);h=c.encrypt(k(b,[0,0,0,d]));n=l.clamp(k(n.concat([0,0,0]),h),d);m=k(m,k(n.concat([0,0,0]),h));m=c.encrypt(k(m,k(b,g(b))));a.length&&
(m=k(m,f?a:sjcl.mode.ocb2.pmac(c,a)));return p.concat(l.concat(n,l.clamp(m,e)))},decrypt:function(c,d,b,a,e,f){128!==sjcl.bitArray.bitLength(b)&&q(new sjcl.exception.invalid("ocb iv must be 128 bits"));e=e||64;var h=sjcl.mode.ocb2.H,g=sjcl.bitArray,l=g.l,k=[0,0,0,0],m=h(c.encrypt(b)),n,p,r=sjcl.bitArray.bitLength(d)-e,s=[];a=a||[];for(b=0;b+4<r/32;b+=4)n=l(m,c.decrypt(l(m,d.slice(b,b+4)))),k=l(k,n),s=s.concat(n),m=h(m);p=r-32*b;n=c.encrypt(l(m,[0,0,0,p]));n=l(n,g.clamp(d.slice(b),p).concat([0,0,0]));
k=l(k,n);k=c.encrypt(l(k,l(m,h(m))));a.length&&(k=l(k,f?a:sjcl.mode.ocb2.pmac(c,a)));g.equal(g.clamp(k,e),g.bitSlice(d,r))||q(new sjcl.exception.corrupt("ocb: tag doesn't match"));return s.concat(g.clamp(n,p))},pmac:function(c,d){var b,a=sjcl.mode.ocb2.H,e=sjcl.bitArray,f=e.l,h=[0,0,0,0],g=c.encrypt([0,0,0,0]),g=f(g,a(a(g)));for(b=0;b+4<d.length;b+=4)g=a(g),h=f(h,c.encrypt(f(g,d.slice(b,b+4))));b=d.slice(b);128>e.bitLength(b)&&(g=f(g,a(g)),b=e.concat(b,[-2147483648,0,0,0]));h=f(h,b);return c.encrypt(f(a(f(g,
a(g))),h))},H:function(c){return[c[0]<<1^c[1]>>>31,c[1]<<1^c[2]>>>31,c[2]<<1^c[3]>>>31,c[3]<<1^135*(c[0]>>>31)]}};
sjcl.mode.gcm={name:"gcm",encrypt:function(c,d,b,a,e){var f=d.slice(0);d=sjcl.bitArray;a=a||[];c=sjcl.mode.gcm.p(!0,c,f,a,b,e||128);return d.concat(c.data,c.tag)},decrypt:function(c,d,b,a,e){var f=d.slice(0),h=sjcl.bitArray,g=h.bitLength(f);e=e||128;a=a||[];e<=g?(d=h.bitSlice(f,g-e),f=h.bitSlice(f,0,g-e)):(d=f,f=[]);c=sjcl.mode.gcm.p(u,c,f,a,b,e);h.equal(c.tag,d)||q(new sjcl.exception.corrupt("gcm: tag doesn't match"));return c.data},Z:function(c,d){var b,a,e,f,h,g=sjcl.bitArray.l;e=[0,0,0,0];f=d.slice(0);
for(b=0;128>b;b++){0!==(c[Math.floor(b/32)]&1<<31-b%32)&&(e=g(e,f));h=0!==(f[3]&1);for(a=3;0<a;a--)f[a]=f[a]>>>1|(f[a-1]&1)<<31;f[0]>>>=1;h&&(f[0]^=-520093696)}return e},g:function(c,d,b){var a,e=b.length;d=d.slice(0);for(a=0;a<e;a+=4)d[0]^=4294967295&b[a],d[1]^=4294967295&b[a+1],d[2]^=4294967295&b[a+2],d[3]^=4294967295&b[a+3],d=sjcl.mode.gcm.Z(d,c);return d},p:function(c,d,b,a,e,f){var h,g,l,k,m,n,p,r,s=sjcl.bitArray;n=b.length;p=s.bitLength(b);r=s.bitLength(a);g=s.bitLength(e);h=d.encrypt([0,0,
0,0]);96===g?(e=e.slice(0),e=s.concat(e,[1])):(e=sjcl.mode.gcm.g(h,[0,0,0,0],e),e=sjcl.mode.gcm.g(h,e,[0,0,Math.floor(g/4294967296),g&4294967295]));g=sjcl.mode.gcm.g(h,[0,0,0,0],a);m=e.slice(0);a=g.slice(0);c||(a=sjcl.mode.gcm.g(h,g,b));for(k=0;k<n;k+=4)m[3]++,l=d.encrypt(m),b[k]^=l[0],b[k+1]^=l[1],b[k+2]^=l[2],b[k+3]^=l[3];b=s.clamp(b,p);c&&(a=sjcl.mode.gcm.g(h,g,b));c=[Math.floor(r/4294967296),r&4294967295,Math.floor(p/4294967296),p&4294967295];a=sjcl.mode.gcm.g(h,a,c);l=d.encrypt(e);a[0]^=l[0];
a[1]^=l[1];a[2]^=l[2];a[3]^=l[3];return{tag:s.bitSlice(a,0,f),data:b}}};sjcl.misc.hmac=function(c,d){this.M=d=d||sjcl.hash.sha256;var b=[[],[]],a,e=d.prototype.blockSize/32;this.n=[new d,new d];c.length>e&&(c=d.hash(c));for(a=0;a<e;a++)b[0][a]=c[a]^909522486,b[1][a]=c[a]^1549556828;this.n[0].update(b[0]);this.n[1].update(b[1]);this.G=new d(this.n[0])};
sjcl.misc.hmac.prototype.encrypt=sjcl.misc.hmac.prototype.mac=function(c){this.Q&&q(new sjcl.exception.invalid("encrypt on already updated hmac called!"));this.update(c);return this.digest(c)};sjcl.misc.hmac.prototype.reset=function(){this.G=new this.M(this.n[0]);this.Q=u};sjcl.misc.hmac.prototype.update=function(c){this.Q=!0;this.G.update(c)};sjcl.misc.hmac.prototype.digest=function(){var c=this.G.finalize(),c=(new this.M(this.n[1])).update(c).finalize();this.reset();return c};
sjcl.misc.pbkdf2=function(c,d,b,a,e){b=b||1E3;(0>a||0>b)&&q(sjcl.exception.invalid("invalid params to pbkdf2"));"string"===typeof c&&(c=sjcl.codec.utf8String.toBits(c));"string"===typeof d&&(d=sjcl.codec.utf8String.toBits(d));e=e||sjcl.misc.hmac;c=new e(c);var f,h,g,l,k=[],m=sjcl.bitArray;for(l=1;32*k.length<(a||1);l++){e=f=c.encrypt(m.concat(d,[l]));for(h=1;h<b;h++)for(f=c.encrypt(f),g=0;g<f.length;g++)e[g]^=f[g];k=k.concat(e)}a&&(k=m.clamp(k,a));return k};
sjcl.prng=function(c){this.c=[new sjcl.hash.sha256];this.i=[0];this.F=0;this.s={};this.C=0;this.K={};this.O=this.d=this.j=this.W=0;this.b=[0,0,0,0,0,0,0,0];this.f=[0,0,0,0];this.A=t;this.B=c;this.q=u;this.w={progress:{},seeded:{}};this.m=this.V=0;this.t=1;this.u=2;this.S=65536;this.I=[0,48,64,96,128,192,256,384,512,768,1024];this.T=3E4;this.R=80};
sjcl.prng.prototype={randomWords:function(c,d){var b=[],a;a=this.isReady(d);var e;a===this.m&&q(new sjcl.exception.notReady("generator isn't seeded"));if(a&this.u){a=!(a&this.t);e=[];var f=0,h;this.O=e[0]=(new Date).valueOf()+this.T;for(h=0;16>h;h++)e.push(4294967296*Math.random()|0);for(h=0;h<this.c.length&&(e=e.concat(this.c[h].finalize()),f+=this.i[h],this.i[h]=0,a||!(this.F&1<<h));h++);this.F>=1<<this.c.length&&(this.c.push(new sjcl.hash.sha256),this.i.push(0));this.d-=f;f>this.j&&(this.j=f);
this.F++;this.b=sjcl.hash.sha256.hash(this.b.concat(e));this.A=new sjcl.cipher.aes(this.b);for(a=0;4>a&&(this.f[a]=this.f[a]+1|0,!this.f[a]);a++);}for(a=0;a<c;a+=4)0===(a+1)%this.S&&A(this),e=B(this),b.push(e[0],e[1],e[2],e[3]);A(this);return b.slice(0,c)},setDefaultParanoia:function(c,d){0===c&&"Setting paranoia=0 will ruin your security; use it only for testing"!==d&&q("Setting paranoia=0 will ruin your security; use it only for testing");this.B=c},addEntropy:function(c,d,b){b=b||"user";var a,e,
f=(new Date).valueOf(),h=this.s[b],g=this.isReady(),l=0;a=this.K[b];a===t&&(a=this.K[b]=this.W++);h===t&&(h=this.s[b]=0);this.s[b]=(this.s[b]+1)%this.c.length;switch(typeof c){case "number":d===t&&(d=1);this.c[h].update([a,this.C++,1,d,f,1,c|0]);break;case "object":b=Object.prototype.toString.call(c);if("[object Uint32Array]"===b){e=[];for(b=0;b<c.length;b++)e.push(c[b]);c=e}else for("[object Array]"!==b&&(l=1),b=0;b<c.length&&!l;b++)"number"!==typeof c[b]&&(l=1);if(!l){if(d===t)for(b=d=0;b<c.length;b++)for(e=
c[b];0<e;)d++,e>>>=1;this.c[h].update([a,this.C++,2,d,f,c.length].concat(c))}break;case "string":d===t&&(d=c.length);this.c[h].update([a,this.C++,3,d,f,c.length]);this.c[h].update(c);break;default:l=1}l&&q(new sjcl.exception.bug("random: addEntropy only supports number, array of numbers or string"));this.i[h]+=d;this.d+=d;g===this.m&&(this.isReady()!==this.m&&C("seeded",Math.max(this.j,this.d)),C("progress",this.getProgress()))},isReady:function(c){c=this.I[c!==t?c:this.B];return this.j&&this.j>=
c?this.i[0]>this.R&&(new Date).valueOf()>this.O?this.u|this.t:this.t:this.d>=c?this.u|this.m:this.m},getProgress:function(c){c=this.I[c?c:this.B];return this.j>=c?1:this.d>c?1:this.d/c},startCollectors:function(){this.q||(this.a={loadTimeCollector:D(this,this.aa),mouseCollector:D(this,this.ba),keyboardCollector:D(this,this.$),accelerometerCollector:D(this,this.U)},window.addEventListener?(window.addEventListener("load",this.a.loadTimeCollector,u),window.addEventListener("mousemove",this.a.mouseCollector,
u),window.addEventListener("keypress",this.a.keyboardCollector,u),window.addEventListener("devicemotion",this.a.accelerometerCollector,u)):document.attachEvent?(document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector)):q(new sjcl.exception.bug("can't attach event")),this.q=!0)},stopCollectors:function(){this.q&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,
u),window.removeEventListener("mousemove",this.a.mouseCollector,u),window.removeEventListener("keypress",this.a.keyboardCollector,u),window.removeEventListener("devicemotion",this.a.accelerometerCollector,u)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.q=u)},addEventListener:function(c,d){this.w[c][this.V++]=d},removeEventListener:function(c,
d){var b,a,e=this.w[c],f=[];for(a in e)e.hasOwnProperty(a)&&e[a]===d&&f.push(a);for(b=0;b<f.length;b++)a=f[b],delete e[a]},$:function(){E(1)},ba:function(c){sjcl.random.addEntropy([c.x||c.clientX||c.offsetX||0,c.y||c.clientY||c.offsetY||0],2,"mouse");E(0)},aa:function(){E(2)},U:function(c){c=c.accelerationIncludingGravity.x||c.accelerationIncludingGravity.y||c.accelerationIncludingGravity.z;if(window.orientation){var d=window.orientation;"number"===typeof d&&sjcl.random.addEntropy(d,1,"accelerometer")}c&&
sjcl.random.addEntropy(c,2,"accelerometer");E(0)}};function C(c,d){var b,a=sjcl.random.w[c],e=[];for(b in a)a.hasOwnProperty(b)&&e.push(a[b]);for(b=0;b<e.length;b++)e[b](d)}function E(c){window&&window.performance&&"function"===typeof window.performance.now?sjcl.random.addEntropy(window.performance.now(),c,"loadtime"):sjcl.random.addEntropy((new Date).valueOf(),c,"loadtime")}function A(c){c.b=B(c).concat(B(c));c.A=new sjcl.cipher.aes(c.b)}
function B(c){for(var d=0;4>d&&(c.f[d]=c.f[d]+1|0,!c.f[d]);d++);return c.A.encrypt(c.f)}function D(c,d){return function(){d.apply(c,arguments)}}sjcl.random=new sjcl.prng(6);
a:try{var F,G,H,I;if(I="undefined"!==typeof module){var J;if(J=module.exports){var K;try{K=require("crypto")}catch(L$$1){K=null}J=(G=K)&&G.randomBytes}I=J}if(I)F=G.randomBytes(128),F=new Uint32Array((new Uint8Array(F)).buffer),sjcl.random.addEntropy(F,1024,"crypto['randomBytes']");else if(window&&Uint32Array){H=new Uint32Array(32);if(window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(H);else if(window.msCrypto&&window.msCrypto.getRandomValues)window.msCrypto.getRandomValues(H);
else break a;sjcl.random.addEntropy(H,1024,"crypto['getRandomValues']")}}catch(M$$1){"undefined"!==typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(M$$1))}
sjcl.json={defaults:{v:1,iter:1E3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},Y:function(c,d,b,a){b=b||{};a=a||{};var e=sjcl.json,f=e.e({iv:sjcl.random.randomWords(4,0)},e.defaults),h;e.e(f,b);b=f.adata;"string"===typeof f.salt&&(f.salt=sjcl.codec.base64.toBits(f.salt));"string"===typeof f.iv&&(f.iv=sjcl.codec.base64.toBits(f.iv));(!sjcl.mode[f.mode]||!sjcl.cipher[f.cipher]||"string"===typeof c&&100>=f.iter||64!==f.ts&&96!==f.ts&&128!==f.ts||128!==f.ks&&192!==f.ks&&256!==f.ks||2>f.iv.length||4<
f.iv.length)&&q(new sjcl.exception.invalid("json encrypt: invalid parameters"));"string"===typeof c?(h=sjcl.misc.cachedPbkdf2(c,f),c=h.key.slice(0,f.ks/32),f.salt=h.salt):sjcl.ecc&&c instanceof sjcl.ecc.elGamal.publicKey&&(h=c.kem(),f.kemtag=h.tag,c=h.key.slice(0,f.ks/32));"string"===typeof d&&(d=sjcl.codec.utf8String.toBits(d));"string"===typeof b&&(b=sjcl.codec.utf8String.toBits(b));h=new sjcl.cipher[f.cipher](c);e.e(a,f);a.key=c;f.ct=sjcl.mode[f.mode].encrypt(h,d,f.iv,b,f.ts);return f},encrypt:function(c,
d,b,a){var e=sjcl.json,f=e.Y.apply(e,arguments);return e.encode(f)},X:function(c,d,b,a){b=b||{};a=a||{};var e=sjcl.json;d=e.e(e.e(e.e({},e.defaults),d),b,!0);var f;b=d.adata;"string"===typeof d.salt&&(d.salt=sjcl.codec.base64.toBits(d.salt));"string"===typeof d.iv&&(d.iv=sjcl.codec.base64.toBits(d.iv));(!sjcl.mode[d.mode]||!sjcl.cipher[d.cipher]||"string"===typeof c&&100>=d.iter||64!==d.ts&&96!==d.ts&&128!==d.ts||128!==d.ks&&192!==d.ks&&256!==d.ks||!d.iv||2>d.iv.length||4<d.iv.length)&&q(new sjcl.exception.invalid("json decrypt: invalid parameters"));
"string"===typeof c?(f=sjcl.misc.cachedPbkdf2(c,d),c=f.key.slice(0,d.ks/32),d.salt=f.salt):sjcl.ecc&&c instanceof sjcl.ecc.elGamal.secretKey&&(c=c.unkem(sjcl.codec.base64.toBits(d.kemtag)).slice(0,d.ks/32));"string"===typeof b&&(b=sjcl.codec.utf8String.toBits(b));f=new sjcl.cipher[d.cipher](c);b=sjcl.mode[d.mode].decrypt(f,d.ct,d.iv,b,d.ts);e.e(a,d);a.key=c;return sjcl.codec.utf8String.fromBits(b)},decrypt:function(c,d,b,a){var e=sjcl.json;return e.X(c,e.decode(d),b,a)},encode:function(c){var d,b=
"{",a="";for(d in c)if(c.hasOwnProperty(d))switch(d.match(/^[a-z0-9]+$/i)||q(new sjcl.exception.invalid("json encode: invalid property name")),b+=a+'"'+d+'":',a=",",typeof c[d]){case "number":case "boolean":b+=c[d];break;case "string":b+='"'+escape(c[d])+'"';break;case "object":b+='"'+sjcl.codec.base64.fromBits(c[d],0)+'"';break;default:q(new sjcl.exception.bug("json encode: unsupported type"))}return b+"}"},decode:function(c){c=c.replace(/\s/g,"");c.match(/^\{.*\}$/)||q(new sjcl.exception.invalid("json decode: this isn't json!"));
c=c.replace(/^\{|\}$/g,"").split(/,/);var d={},b,a;for(b=0;b<c.length;b++)(a=c[b].match(/^(?:(["']?)([a-z][a-z0-9]*)\1):(?:(\d+)|"([a-z0-9+\/%*_.@=\-]*)")$/i))||q(new sjcl.exception.invalid("json decode: this isn't json!")),d[a[2]]=a[3]?parseInt(a[3],10):a[2].match(/^(ct|salt|iv)$/)?sjcl.codec.base64.toBits(a[4]):unescape(a[4]);return d},e:function(c,d,b){c===t&&(c={});if(d===t)return c;for(var a in d)d.hasOwnProperty(a)&&(b&&c[a]!==t&&c[a]!==d[a]&&q(new sjcl.exception.invalid("required parameter overridden")),
c[a]=d[a]);return c},ea:function(c,d){var b={},a;for(a in c)c.hasOwnProperty(a)&&c[a]!==d[a]&&(b[a]=c[a]);return b},da:function(c,d){var b={},a;for(a=0;a<d.length;a++)c[d[a]]!==t&&(b[d[a]]=c[d[a]]);return b}};sjcl.encrypt=sjcl.json.encrypt;sjcl.decrypt=sjcl.json.decrypt;sjcl.misc.ca={};
sjcl.misc.cachedPbkdf2=function(c,d){var b=sjcl.misc.ca,a;d=d||{};a=d.iter||1E3;b=b[c]=b[c]||{};a=b[a]=b[a]||{firstSalt:d.salt&&d.salt.length?d.salt.slice(0):sjcl.random.randomWords(2,0)};b=d.salt===t?a.firstSalt:d.salt;a[b]=a[b]||sjcl.misc.pbkdf2(c,b,d.iter);return{key:a[b].slice(0),salt:b.slice(0)}};
var globalData=globalData||{},WanBaApi={getPlatform:function(){if(""!=WanBaApi.getHttpParams("openid")){if("2"==WanBaApi.getHttpParams("platform"))return 2;var c=QZAppExternal.getPlatform();2!=c&&(c=1);return c}},wanbarRecharge:function(c,d,b,a,e,f,h){window.popPayTips({is_vip:c,openkey:d,openid:b,appid:a,zoneid:e,score:f,defaultScore:h})},getHttpParams:function(c){c=location.href.match(new RegExp("(\\?|#|&)"+c+"=([^&#]*)(&|#|$)"));return decodeURIComponent(c?c[2]:"")},shareTo:function(c,d){QZAppExternal.qzoneGameBar(function(b){d&&
c&&c.call(d,b.code)},{type:"share",image:["http://1251278653.cdn.myqcloud.com/1251278653/tapgame/shareIcon.png","http://1251278653.cdn.myqcloud.com/1251278653/tapgame/shareIcon.png","http://1251278653.cdn.myqcloud.com/1251278653/tapgame/shareIcon.png","http://1251278653.cdn.myqcloud.com/1251278653/tapgame/shareIcon.png","http://1251278653.cdn.myqcloud.com/1251278653/tapgame/shareIcon.png"],title:["\u53e4\u9f99\u7fa4\u4fa0\u4f20","\u53e4\u9f99\u7fa4\u4fa0\u4f20","\u53e4\u9f99\u7fa4\u4fa0\u4f20","\u53e4\u9f99\u7fa4\u4fa0\u4f20",
"\u53e4\u9f99\u7fa4\u4fa0\u4f20"],summary:["\u556a\u556a\u556a\u7684\u6839\u672c\u505c\u4e0d\u4e0b\u6765\uff0c\u624b\u6307\u7adf\u7136\u4f1a\u6709\u4e00\u79cd\u5947\u5f02\u7684\u5feb\u611f\u54df~\uff01","\u556a\u556a\u556a\u7684\u6839\u672c\u505c\u4e0d\u4e0b\u6765\uff0c\u624b\u6307\u7adf\u7136\u4f1a\u6709\u4e00\u79cd\u5947\u5f02\u7684\u5feb\u611f\u54df~\uff01","\u556a\u556a\u556a\u7684\u6839\u672c\u505c\u4e0d\u4e0b\u6765\uff0c\u624b\u6307\u7adf\u7136\u4f1a\u6709\u4e00\u79cd\u5947\u5f02\u7684\u5feb\u611f\u54df~\uff01",
"\u556a\u556a\u556a\u7684\u6839\u672c\u505c\u4e0d\u4e0b\u6765\uff0c\u624b\u6307\u7adf\u7136\u4f1a\u6709\u4e00\u79cd\u5947\u5f02\u7684\u5feb\u611f\u54df~\uff01","\u556a\u556a\u556a\u7684\u6839\u672c\u505c\u4e0d\u4e0b\u6765\uff0c\u624b\u6307\u7adf\u7136\u4f1a\u6709\u4e00\u79cd\u5947\u5f02\u7684\u5feb\u611f\u54df~\uff01"]})},relogin:function(){fusion2.dialog.relogin()},loginSuccess:function(){globalData.platform=WanBaApi.getPlatform();globalData.pf=WanBaApi.getHttpParams("pf");globalData.pfkey=WanBaApi.getHttpParams("pfkey");
globalData.openid=WanBaApi.getHttpParams("openid");globalData.openkey=WanBaApi.getHttpParams("openkey");globalData.invkey=WanBaApi.getHttpParams("invkey");globalData.iopenid=WanBaApi.getHttpParams("iopenid");globalData.itime=WanBaApi.getHttpParams("itime");globalData.source=WanBaApi.getHttpParams("source");globalData.app_custom=WanBaApi.getHttpParams("app_custom")}};WanBaApi.loginSuccess();
Object.defineProperty(Array.prototype,"erase",{writeable:!0,enumerable:!1,configurable:!0,value:function(){for(var c=[],d=0;d<arguments.length;d++)c[d-0]=arguments[d];if(void 0===this||null===this)throw new TypeError;for(d=(this.length>>>0)-1;0<=d;d--)if(d in this)for(var b=0;b<c.length;b++)if(b in c&&this[d]==c[b]){this.splice(d,1);break}}});
Object.defineProperty(Array.prototype,"removeAt",{writeable:!0,enumerable:!1,configurable:!0,value:function(c){if(void 0===this||null==this)throw new TypeError;this.splice(c,1)}});Object.defineProperty(Array.prototype,"contains",{writeable:!0,enumerable:!1,configurable:!0,value:function(c){if(void 0===this||null==this)throw new TypeError;for(var d=(this.length>>>0)-1;0<=d;d--)if(this[d]==c)return!0;return!1}});var BasePayment=function(){function c(){}c.prototype.effect=function(c,b,a){};return c}();
BasePayment.prototype.__class__="BasePayment";var Direction=function(){function c(){}c.CENTER="center";c.LEFT="left";c.RIGHT="right";c.TOP="top";c.BOTTOM="bottom";c.BOTH="both";c.HORIZONTAL="horizontal";c.VERTICAL="vertical";return c}();Direction.prototype.__class__="Direction";
var ScrollView=function(c){function d(){c.call(this);this._direction=Direction.VERTICAL;this.beginPos=new egret.Point;this.movePos=new egret.Point;this._initY=this._initX=0;this.vScroll=this.hScroll=!0;this.animating=this.moved=!1;this.startTime=this.pointY=this.pointX=this.startY=this.startX=this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;this.steps=[];this.lockMove=!1;this._minY=this._minX=this._moveCount=0;this.touchEnabled=!0;this.options={x:0,y:0,bounce:!0,bounceLock:!1,
momentum:!0,useTransform:!0};this.scrollRect=new egret.Rectangle(0,0,100,100)}__extends(d,c);var b=d.prototype;Object.defineProperty(b,"direction",{get:function(){return this._direction},set:function(a){this._direction=a;switch(this._direction){case Direction.BOTH:this.vScroll=this.hScroll=!0;break;case Direction.HORIZONTAL:this.hScroll=!0;this.vScroll=!1;break;case Direction.VERTICAL:this.hScroll=!1,this.vScroll=!0}},enumerable:!0,configurable:!0});b._onAddToStage=function(){c.prototype._onAddToStage.call(this);
this.scrollStart()};b._onRemoveFromStage=function(){c.prototype._onRemoveFromStage.call(this);this.removeListeners()};b._setWidth=function(a){c.prototype._setWidth.call(this,a);this._viewWidth=a;this.scrollRect.width=a;this.resetGraphics()};b._setHeight=function(a){c.prototype._setHeight.call(this,a);this._viewHeight=a;this.scrollRect.height=a;this.resetGraphics()};b.resetGraphics=function(){this.graphics.clear();this.graphics.beginFill(16777215,0);this.graphics.drawRect(0,0,this._viewWidth,this._viewHeight);
this.graphics.endFill()};b.setContainer=function(a,b,c){this._container&&this._container.parent&&this._container.parent.removeChild(this._container);this._container=a;this._initWidth=b;this._initHeight=c;this._container.touchEnabled=!0;if(null!=this._container.parent)if(this._container.parent!=this)this._container.parent.removeChild(this._container);else return;this.addChildAt(this._container,0)};b.getInitWidth=function(){return this._initWidth||this._container.width};b.getInitHeight=function(){return this._initHeight||
this._container.height};b.maxScrollX=function(){return Math.min(-this.getInitWidth()+this.width,0)};b.maxScrollY=function(){return Math.min(-this.getInitHeight()+this.height,0)};b._start=function(a){if(!this.lockMove){this.animating=this.moved=!1;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;var b=this._getPos();if(b.x!=this._initX||b.y!=this._initY)this.steps=[],this._setPos(b.x,b.y);this.startX=this._initX;this.startY=this._initY;this.pointX=a.stageX;this.pointY=a.stageY;
this.beginPos.x=a.stageX;this.beginPos.y=a.stageY;this.startTime=egret.getTimer();egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_END,this._end,this);egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this._move,this)}};b._move=function(a){this.movePos.x=a.stageX;this.movePos.y=a.stageY;if(!(20>egret.Point.distance(this.movePos,this.beginPos))){egret.MainContext.instance.stage.touchChildren=!1;var b=a.stageX-this.pointX,c=a.stageY-this.pointY,d=
this._initX+b,g=this._initY+c,l=egret.getTimer();this.pointX=a.stageX;this.pointY=a.stageY;if(0<d||d<this.maxScrollX())d=this.options.bounce?this._initX+b/2:0<=d||0<=this.maxScrollX()?0:this.maxScrollX();if(0<g||g<this.maxScrollY())g=this.options.bounce?this._initY+c/2:0<=g||0<=this.maxScrollY()?0:this.maxScrollY();this.distX+=b;this.distY+=c;this.absDistX=Math.abs(this.distX);this.absDistY=Math.abs(this.distY);6>this.absDistX&&6>this.absDistY||(this.moved=!0,this._setPos(d,g),this.dirX=0<b?-1:0>
b?1:0,this.dirY=0<c?-1:0>c?1:0,300<l-this.startTime&&(this.startTime=l,this.startX=this._initX,this.startY=this._initY),this._moveCount++,0==this._moveCount%3&&(this._moveCount=0))}};b._end=function(a){egret.MainContext.instance.stage.touchChildren=!0;egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this._end,this);egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this._move,this);var b={dist:0,time:0},c={dist:0,time:0},d=egret.getTimer()-
this.startTime;a=this._initX;var g=this._initY;if(this.moved){if(300>d&&this.options.momentum){b=a?this._momentum(a-this.startX,d,-this._initX,this.getInitWidth()-this.width+this._initX,this.options.bounce?this.width:0):b;c=g?this._momentum(g-this.startY,d,-this._initY,0>this.maxScrollY()?this.getInitHeight()-this.height+this._initY:0,this.options.bounce?this.height:0):c;a=this._initX+b.dist;g=this._initY+c.dist;if(0<this._initX&&0<a||this._initX<this.maxScrollX()&&a<this.maxScrollX())b={dist:0,time:0};
if(0<this._initY&&0<g||this._initY<this.maxScrollY()&&g<this.maxScrollY())c={dist:0,time:0}}b.dist||c.dist?(b=Math.max(Math.max(b.time,c.time),10),this.scrollTo(this.mround(a),this.mround(g),b)):this._fixPos(200)}else this._fixPos(200)};b.moveList=function(){this._container.youhua&&this._container.youhua()};b.setScrollRect=function(a,b,c){void 0===c&&(c=0);0==c?this._setPos(-(a-this._minX),-(b-this._minY)):this.scrollTo(-a,-b,c)};b.setMinPosition=function(a,b){this._minX=Math.max(a,0);this._minY=
Math.max(b,0)};b._setPos=function(a,b){this.hScroll?(this._container.x=a-this._minX,this._initX=a):0;this.vScroll?(this._container.y=b-this._minY,this._initY=b):0;this.moveList()};b._getPos=function(){return{x:1*(this._container.x+this._minX),y:1*(this._container.y+this._minY)}};b.mround=function(a){return a>>0};b._fixPos=function(a){var b=this.getFixPosY(),c=this.getFixPosX();c==this._initX&&b==this._initY?this.moved&&(this.moved=!1):this.scrollTo(c,b,a||0)};b.getFixPosY=function(){return 0<=this._initY||
0<this.maxScrollY()?0:this._initY<this.maxScrollY()?this.maxScrollY():this._initY};b.getFixPosX=function(){return 0<=this._initX?0:this._initX<this.maxScrollX()?this.maxScrollX():this._initX};b.scrollTo=function(a,b,c){this._stopAni();this.steps.push({x:a,y:b,time:c||0});this._startAni()};b._startAni=function(){var a=this,b=this._initX,c=this._initY,d=Date.now(),g,l,k;this.animating||(this.steps.length?(g=this.steps.shift(),g.x==b&&g.y==c&&(g.time=0),this.moved=this.animating=!0,k=function(){var m=
Date.now(),n;m>=d+g.time?(a._setPos(g.x,g.y),a.animating=!1,a._startAni()):(m=(m-d)/g.time-1,l=Math.sqrt(1-m*m),m=(g.x-b)*l+b,n=(g.y-c)*l+c,a._setPos(m,n),a.animating&&egret.callLater(k,this))},k()):this._fixPos(400))};b._stopAni=function(){this.steps=[];this.animating=this.moved=!1};b._momentum=function(a,b,c,d,g){b=Math.abs(a)/b;var l=b*b/0.0012;0<a&&l>c?(c+=g/(6/(l/b*6E-4)),b=b*c/l,l=c):0>a&&l>d&&(d+=g/(6/(l/b*6E-4)),b=b*d/l,l=d);return{dist:l*(0>a?-1:1),time:this.mround(b/6E-4)}};b.scrollStart=
function(){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this._start,this)};b.removeListeners=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this._start,this);egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this._end,this);egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this._move,this)};Object.defineProperty(b,"useOverflow",{set:function(a){this.options.bounce=a},enumerable:!0,configurable:!0});return d}(egret.Sprite);
ScrollView.prototype.__class__="ScrollView";
var SimpleButton=function(c){function d(){c.call(this);this._currentFrame=1;this._scale=1.05;this._initScaleY=this._initScaleX=0;this._canScale=!1;this._frameNumber=0;this._displayName=null;this.touchEnabled=this._enabled=!0;this._canScale=!1}__extends(d,c);var b=d.prototype;b.hitTest=function(a,b){return egret.DisplayObject.prototype.hitTest.call(this,a,b)};b.changeScale=function(a){this._scale=a};b._onAddToStage=function(){c.prototype._onAddToStage.call(this);this.addListeners();this._initScaleX=
this.scaleX;this._initScaleY=this.scaleY};Object.defineProperty(b,"displayName",{get:function(){return this._displayName},set:function(a){this._displayName=a},enumerable:!0,configurable:!0});b._onRemoveFromStage=function(){c.prototype._onRemoveFromStage.call(this);this.removeListeners()};b.addListeners=function(){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mouseDown,this)};b.removeListeners=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mouseDown,this);egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_END,
this.mouseUp,this);egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this);removeEventsByTarget(this)};b.mouseDown=function(a){this._isMoved=!1;egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.mouseUp,this);egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this);this._startX=a.stageX;this._startY=a.stageY;this.setChoose(!0)};b.mouseUp=function(){this._isMoved||(this.setChoose(!1),
this.onClick());egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.mouseUp,this);egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this)};b.mouseMove=function(a){var b=a.stageY;10>Math.abs(a.stageX-this._startX)&&10>Math.abs(b-this._startY)||(this._isMoved=!0,this.setChoose(!1),egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this))};b.addOnClick=function(a,b){this._callBack=
a;this._target=b};b.onClick=function(){this._enabled?this._callBack&&this._target&&this._callBack.apply(this._target,[this]):null!=this._touchCallback&&this._touchCallback.callback();doAction(this.name+"Click")};b.setEnabled=function(a){this._enabled=a;this.touchEnabled=this._touchCallback?!0:a;this.setEnabledState()};b.setEnabledState=function(){if(!(1>=this.numChildren)){var a=this.getChildAt(0),b=this.getChildAt(1);this._enabled?(a.visible=!0,b&&(b.visible=!1)):(a.visible=!1,b&&(b.visible=!0))}};
b.setEnableCallback=function(a){this._touchCallback=a;this.touchEnabled=null==this._touchCallback?this._enabled:!0;this.setEnabledState()};b.useZoomOut=function(a){this._canScale=a};b.initFontTextField=function(a){this._textField=a;a instanceof egret.TextField&&(a.stroke=2);if(a&&null!=a.parent){if(a.parent==this)return;GameUtils.removeFromParent(a)}this.addChild(a)};b.setFontText=function(a,b){void 0===b&&(b=30);if(null==this._textField){this._textField=new egret.TextField;this._textField.textColor=
16777215;this._textField.textAlign="center";this._textField.fontFamily="Courier-Bold";this._textField.size=b;this._textField.stroke=2;this.addChild(this._textField);this._textField.anchorX=0.5;this._textField.anchorY=0.5;var c=this.getBounds();this._textField.x=c.width/2;this._textField.y=c.height/2}this._textField.text=a};b.setFontColor=function(a){};b.setChoose=function(a,b){void 0===b&&(b=void 0);"boolean"==typeof a&&(a=a?2:1);"undefined"!=typeof b&&(this._adjust=!0===b?!0:!1);this._adjust&&(a=
3);this.playZoomOut(a);this._enabled&&this.setFrameChild(a)};b.setFrameChild=function(a){};b.playZoomOut=function(a){if(this._canScale){var b=2!=a?this._initScaleX:this._initScaleX*this._scale;a=2!=a?this._initScaleY:this._initScaleY*this._scale;egret.Tween.get(this).to({scaleX:b,scaleY:a},70)}};return d}(egret.DisplayObjectContainer);SimpleButton.prototype.__class__="SimpleButton";
var BaseContainer=function(c){function d(){c.call(this);this._isDisposed=!1}__extends(d,c);var b=d.prototype;b._parentChanged=function(a){c.prototype._parentChanged.call(this,a);null==a&&this.callChildDispose(this)};b.callChildDispose=function(a){a instanceof d&&a.dispose();for(var b=0;b<a.numChildren;b++){var c=a.getChildAt(b);c instanceof egret.DisplayObjectContainer&&this.callChildDispose(c)}};b.dispose=function(){this._isDisposed=!0;removeEventsByTarget(this)};return d}(egret.DisplayObjectContainer);
BaseContainer.prototype.__class__="BaseContainer";
var NumberModel=function(){function c(b){void 0===b&&(b=null);this.units="i K M B T aa bb cc dd ee ff gg hh ii jj kk ll mm nn oo pp qq rr ss tt uu vv ww xx yy zz aaa bbb ccc ddd eee fff ggg hhh iii jjj kkk lll mmm nnn ooo ppp qqq rrr sss ttt uuu vvv www xxx yyy zzz aaaa bbbb cccc dddd eeee ffff gggg hhhh iiii jjjj kkkk llll mmmm nnnn oooo pppp qqqq rrrr ssss tttt uuuu vvvv wwww xxxx yyyy zzzz aaaaa bbbbb ccccc ddddd eeeee fffff ggggg hhhhh iiiii jjjjj kkkkk lllll mmmmm nnnnn ooooo ppppp qqqqq rrrrr sssss ttttt".split(" ");this.dataNumber=
0;this.splitNumber=Infinity;b&&this.add(b)}var d=c.prototype;d.add=function(b){if(!b)return!1;if(isNaN(b)){if("-"==b.substr(0,1))return this.reduceString(b.substr(1));this.addString(b);return!0}b=Number(b);if(0>b)return this.reduceInt(Math.abs(b));this.addInt(b);return!0};d.reduce=function(b){return isNaN(b)?this.reduceString(b):this.reduceInt(Number(b))};d.times=function(b,a){void 0===a&&(a="set");var e=0;"set"==a?e=this.dataNumber*=b:(e=this.dataNumber,e*=b);return this.getNumer(e)};d.percent=function(b){return Math.floor(this.dataNumber/
b*100)};d.getNumer=function(b){void 0===b&&(b=null);return this.littleDataFormat(b?b:this.dataNumber)};d.compare=function(b){var a=0,a=isNaN(b)?this.stringToNumber(b):Number(b);return 1E308<a?!1:this.dataNumber>=a?!0:!1};d.pieces=function(b){for(var a=[],e=Math.floor(this.dataNumber/b),c=this.dataNumber-e*b,d=0;d<b;d++)d==b-1?a.push(this.getNumer(e+c)):a.push(this.getNumer(e));return a};d.trace=function(b){this.add(b);return this.getNumer()};d.setData=function(b){this.dataNumber=Number(b)};d.getData=
function(){return this.dataNumber.toString()};d.getDataNum=function(){return this.dataNumber};d.bigDataFormat=function(b){b=b.toString();for(var a=0,e=0;e<b.length;e++)if("e"==b[e]||"E"==b[e]){a=e;break}e=Math.floor(100*Number(b.substr(0,a)))/100;b=b.substr(a);return e.toFixed(2)+b};d.littleDataFormat=function(b){b=this.intToUnits(b);var a="",e;for(e in b)a=e;if("i"==a)return Math.floor(b[a]).toString();e=this.getLittleUnit(a);return(Math.floor(100*(b[a]+b[e]/1E3))/100).toFixed(2)+a};d.getLittleUnit=
function(b){var a="",e;for(e in this.units){if(this.units[e]==b)return a;a=this.units[e]}};d.addInt=function(b){this.dataNumber+=b};d.addString=function(b){b=this.stringToNumber(b);this.dataNumber+=b;return!0};d.stringToNumber=function(b){for(var a=0,e=/[0-9.]+/,c=0;c<b.length;c++)if(!e.test(b[c])){a=c;break}e=Number(b.substr(0,a));b=b.substr(a);return this.unitIn(b)?this.unitToNumber(b,e):0};d.unitIn=function(b){var a=!1,e;for(e in this.units)if(this.units[e]==b){a=!0;break}return a};d.unitToNumber=
function(b,a){for(var e in this.units){if(this.units[e]==b)break;a*=1E3}return a};d.reduceInt=function(b){if(b>this.dataNumber)return!1;this.dataNumber-=b;return!0};d.reduceString=function(b){b=this.stringToNumber(b);if(b>this.dataNumber)return!1;this.dataNumber-=b;return!0};d.intToUnits=function(b){var a=0,e={},c;for(c in this.units)if(a=b%1E3,b=Math.floor(b/1E3),e[this.units[c]]=a,0==b)break;return e};d.addNumToData=function(b){this.addInt(b)};d.stringToNumberR=function(b){return this.stringToNumber(b)};
d.addStringNum=function(b){this.addString(b)};return c}();NumberModel.prototype.__class__="NumberModel";
var BasePlatform=function(){function c(){}var d=c.prototype;d.init=function(){};d.getPlatformConfig=function(){return"payment_wbConfig"};d.payment=function(b,a,e){};d.isFriendOpen=function(){return!1};d.doShare=function(){};d.doShareQQB=function(b,a,e){};d.sendToDesktop=function(b,a){};d.doLogin=function(b){};d.deserialize=function(){};d.codeAward=function(b){};d.serialize=function(b){};d.getSaveData=function(b){};d._getPlatformName=function(){return"none"};Object.defineProperty(d,"name",{get:function(){return this._getPlatformName()},
enumerable:!0,configurable:!0});d.getPayments=function(){var b=[],a=RES.getRes(this.getPlatformConfig()),e;for(e in a)b.push(new PaymentModel(a[e]));return b};d.getLoginType=function(b,a){};return c}();BasePlatform.prototype.__class__="BasePlatform";
var Const=function(){function c(){}c.REFRESH_BOSS="refresh_boss";c.REFRESH_HOME_BG="refresh_home";c.ADD_HERO="add_hero";c.REBORN_HERO="reborn_hero";c.MAIN_HERO_SKILL_CHANGE="main_hero_skill_change";c.HERO_LIST_CHANGE="hero_list_change";c.CHANGE_DIAMOND="change_diamond";c.CHANGE_DEFAULT_SHARE="CHANGE_DEFAULT_SHARE";c.REFRESH_PAYMENT_LIST="refresh_payment_list";c.ADD_DIAMOND="add_diamond";c.CHANGE_SPEED="change_speed";c.CLOSE_SHARE_TIP="close_share_tip";c.BUYING_PAYMENT_STATUS="buying_payment_status";
c.AWARD_BOX_TIP="award_box_tip";c.AWARD_EFFECT="award_effect";c.START_GUIDE="start_guide";c.SHOW_AD_DONE="show_ad_done";c.SHOW_MAIN_LAYER="show_main_layer";c.DROP_COIN="drop_coin";c.GET_ALL_COIN="get_all_coin";c.FLY_COIN="fly_coin";c.HIDE_GOLDCOIN="hide_goldcoin";c.HIT_HERO="hit_hero";c.HIDE_HOLYCOIN="hide_holycoin";c.SHOW_HOLYCOIN="add_holycoin";c.LEAVE_BATTLE="leave_battle";c.CHANGE_PAY="change_pay";c.CHANGE_USE_SKILL="change_use_skill";c.CLICK_CD_SKILL="click_cd_skill";c.BUY_DONE="buy_done";c.BUYING=
"buying";c.FIGHT_BOSS="fight_boss";c.ACHIEVE="achieve";c.KILL_ONE_BOSS="kill_one_boss";c.PAY_AWARD="pay_award";c.BOSS_KILLED="boss_killed";c.CHANGE_STATISTICS="change_statistics";c.HERO_ATTACK="hero_attack";c.CHANGE_COIN="change_coin";c.CHANGE_NAME="change_name";c.REFRESH_SKILL_VIEW="refresh_skill_view";c.ISBOSS="isBoss";c.ADD_COIN="add_coin";c.REFRESH_UNOPEN_LIST="refresh_unopen_list";c.BEGIN_MAIN_SKILL_1="begin_main_skill_1";c.BEGIN_MAIN_SKILL_2="begin_main_skill_2";c.BEGIN_MAIN_SKILL_3="begin_main_skill_3";
c.ADD_HOLY="add_holy";c.BEGIN_MAIN_SKILL_4="begin_main_skill_4";c.BEGIN_MAIN_SKILL_5="begin_main_skill_5";c.STOP_MAIN_SKILL_1="stop_main_skill_1";c.STOP_MAIN_SKILL_2="stop_main_skill_2";c.STOP_MAIN_SKILL_3="stop_main_skill_3";c.STOP_MAIN_SKILL_4="stop_main_skill_4";c.STOP_MAIN_SKILL_5="stop_main_skill_5";c.MAIN_LAYER="main_layer";c.CHANGE_CLICK_COIN="change_click_coin";c.UNLOCK_MAIN_SKILL="unlock_main_skill";c.LEVELUP_MAIN_SKILL="levelup_main_skill";c.REFRESH_CURRENT_DPS="refresh_current_dps";c.SKILL_LAYER_EXSIT=
"skill_layer_exsit";c.USE_PAYMENT_SKILL="use_payment_skill";c.GET_PAYMENT_EFFECT="get_payment_effect";c.REFRESH_ACHIEVE="refresh_achieve";c.INFO_INITED="info_inited";c.UNLOCK_LEVEL="unlock_level";c.SHOWBOXDESC="show_openbox_desc";c.FRIEND_EVENT="friend_event";c.FRIEND_EVENT_DONE="friend_event_done";c.SHOW_HURT_TEXT="show_hurt_text";c.FORMAT_ATTACK_CRIT="format_attack_crit";c.FORMAT_ATTACK_DMG="format_attack_dmg";c.RECHARGE_DAY_CHANGE="recharge_day_change";c.STOP_MAIN_SKILL_VALUE_2="stop_main_skill_value_2";
c.CHANGE_HOLY_NUM="change_holy_num";c.CHANGE_REBORN_SKILL="change_reborn_skill";c.FORMAT_BOSS_ATTACK_HP="format_boss_attack_hp";c.GET_BOSS="get_boss";c.RESET_GAME="reset_game";c.FATE_REFRESH="fate_refresh";c.EVOLVE_REFRESH="evolve_refresh";c.GET_HERO="get_hero";c.REBORN_SKILL_REFRESH="reborn_skill_refresh";c.GET_HOLY_EFFECT="get_holy_effect";c.HERO_DEAD="hero_dead";c.OPEN_BOX="open_box";c.GET_NEW_HERO="new_hero";c.UPDATE_HERO="update_hero";c.LOCK_SKILL="lock_skill";c.UNLOCK_SKILL="unlock_skill";c.IS_SKILL_USING=
"is_skill_using";c.CLEAN_SKILL_CD="clean_skill_cd";c.IS_BOX_SKILL_USING="is_box_skill_using";c.BOX_SKILL_OVER="box_skill_over";c.REDUCE_DIAMOND="reduce_diamond";c.CHANGE_JIFEN="change_jifen";c.SHOW_TIPS="show_tips";c.HERO_UPGRADE="hero_upgrade";c.ENTER_FIGHT="enter_fight";c.ADD_GIFT_HERO="add_gift_hero";c.REFRESH_HEROLIST="refresh_herolist";c.REFRESH_SKILL_TIP="refreshSkillTip";c.BUFF_CD="buff_cd";c.BUY_BUFF_DONE="buy_buff_done";c.GAME_LOGOUT="game_logout";c.maxLevel=3E3;c.maxRebornSkill=29;c.maxHero=
30;c.RECALL_HERO_ID=1007;c.bossName="\u5934\u76ee";c.default_skill_icon="default_skill";c.default_hero_icon="default_hero";c.default_user="default_user";c.ACTIVITY_BOSS_KILLED="activity_boss_killed";c.Activity_FIGHT="activity_fight";c.hide_login_btn="hide_login_btn";c.SHARE_INITED="share_inited";c.REFRESH_GC="refresh_egret_gc";c.CHANGE_EQUIP="change_equip";c.CHANGE_HOME_EQUIP="change_home_equip";c.REFRESH_EQUIP="refresh_equip";c.REFRESH_HERO_ITEM="refresh_hero_item";c.FRIEND_INFO_CHANGE="friend_info_change";
c.GET_FRIEND_BUFF_DONE="get_friend_buff_done";c.FRIEND_ITEM_REFRESH="friend_item_refresh";c.SEND_STATUS_CHANGE="send_status_change";c.CHANGE_LANTERN_NUM="change_lantern_num";c.HIDE_LANTERNCOIN="hide_lanterncoin";c.SHOW_LANTERNCOIN="add_lanterncoin";c.SEND_TO_DESKTOP="send_to_desktop";c.Guild_StartData="guild_start_data";c.Guild_Joinlist="guild_join_data";c.Guild_ShowMyGld="guild_ShowMyGld";c.Guild_ShowMain="guild_ShowMain";c.Guild_Search="guild_search";c.Guild_showAplyList="guild_showAplyList";c.Guild_donateView=
"guild_donateView";c.Guild_refleshTopData="guild_refleshTopData";c.Guild_UplevelWeapon="guild_UplevelWeapon";c.Guild_openGldRank="guild_openGldRank";c.Guild_openGldWonRank="guild_openGldWonRank";c.Guild_refleshLeftTime="guild_refleshLeftTime";c.Guild_refleshReward="guild_refleshReward";c.Guild_ChangeTitle="guild_ChangeTitle";c.Guild_ShowEnterDoor="guild_ShowEnterDoor";c.Guild_ShowWuLin="guild_showWulin";c.Guild_CloseWuLin="guild_CloseWuLin";c.Guild_InitHero="guild_InitHero";c.Guild_refleshWulinLeftTime=
"guild_refleshWulinLeftTime";c.Chat_refleshView="Chat_refleshView";c.Chat_jumpScreen="Chat_jumpScrenn";c.Chat_HaveNewGuildMsg="Chat_HaveNewGuildMsg";return c}();Const.prototype.__class__="Const";var ColorLight;
(function(c){c[c.AliceBlue=16711680]="AliceBlue";c[c.AntiqueWhite=16736431]="AntiqueWhite";c[c.Aqua=16729343]="Aqua";c[c.Aquamarine=13870335]="Aquamarine";c[c.Azure=65535]="Azure";c[c.Beige=8454143]="Beige";c[c.Bisque=1768860]="Bisque";c[c.Black=9895633]="Black";c[c.BlanchedAlmond=5504851]="BlanchedAlmond";c[c.Blue=16777015]="Blue";c[c.BlueViolet=12779368]="BlueViolet";c[c.Brown=14614444]="Brown";c[c.BurlyWood=16777107]="BurlyWood";c[c.CadetBlue=16772503]="CadetBlue";c[c.Chartreuse=16777204]="Chartreuse";
c[c.Chocolate=16711808]="Chocolate";c[c.Coral=16744448]="Coral";c[c.CornflowerBlue=16207872]="CornflowerBlue";c[c.Cornsilk=16752706]="Cornsilk";c[c.Crimson=11075364]="Crimson";c[c.Cyan=13553407]="Cyan";c[c.DarkBlue=16770815]="DarkBlue";c[c.DarkCyan=35723]="DarkCyan";c[c.DarkGoldenrod=16777145]="DarkGoldenrod"})(ColorLight||(ColorLight={}));var reduceGcType;
(function(c){c[c.SkillCD=1]="SkillCD";c[c.CallHero=2]="CallHero";c[c.HeroReborn=3]="HeroReborn";c[c.ChanZi=4]="ChanZi"})(reduceGcType||(reduceGcType={}));
var nameConfig1="\u8d75,\u94b1,\u5b59,\u674e,\u5468,\u5434,\u90d1,\u738b,\u51af,\u9648,\u891a,\u536b,\u848b,\u6c88,\u97e9,\u6768,\u6731,\u79e6,\u5c24,\u8bb8,\u4f55,\u5415,\u65bd,\u5f20,\u5b54,\u66f9,\u4e25,\u534e,\u91d1,\u9b4f,\u9676,\u59dc,\u621a,\u8c22,\u90b9,\u55bb,\u67cf,\u6c34,\u7aa6,\u7ae0,\u4e91,\u82cf,\u6f58,\u845b,\u595a,\u8303,\u5f6d,\u90ce,\u9c81,\u97e6,\u660c,\u9a6c,\u82d7,\u51e4,\u82b1,\u65b9,\u4fde,\u4efb,\u8881,\u67f3,\u9146,\u9c8d,\u53f2,\u5510,\u8d39,\u5ec9,\u5c91,\u859b,\u96f7,\u8d3a,\u502a,\u6c64,\u6ed5,\u6bb7,\u7f57,\u6bd5,\u90dd,\u90ac,\u5b89,\u5e38,\u4e50,\u4e8e,\u65f6,\u5085,\u76ae,\u535e,\u9f50,\u5eb7,\u4f0d,\u4f59,\u5143,\u535c,\u987e,\u5b5f,\u5e73,\u9ec4,\u548c,\u7a46,\u8427,\u5c39,\u59da,\u90b5,\u582a,\u6c6a,\u7941,\u6bdb,\u79b9,\u72c4,\u7c73,\u8d1d,\u660e,\u81e7,\u8ba1,\u4f0f,\u6210,\u6234,\u8c08,\u5b8b,\u8305,\u5e9e,\u718a,\u7eaa,\u8212,\u5c48,\u9879,\u795d,\u8463,\u7cb1,\u675c,\u962e,\u84dd,\u95f5,\u5e2d,\u5b63,\u9ebb,\u5f3a,\u8d3e,\u8def,\u5a04,\u5371,\u6c5f,\u7ae5,\u989c,\u90ed,\u6885,\u76db,\u6797,\u5201,\u949f,\u5f90,\u90b1,\u9a86,\u9ad8,\u590f,\u8521,\u7530,\u6a0a,\u80e1,\u51cc,\u970d,\u865e,\u4e07,\u652f,\u67ef,\u661d,\u7ba1,\u5362,\u83ab,\u7ecf,\u623f,\u88d8,\u7f2a,\u5e72,\u89e3,\u5e94,\u5b97,\u4e01,\u5ba3,\u8d32,\u9093,\u90c1,\u5355,\u676d,\u6d2a,\u5305,\u8bf8,\u5de6,\u77f3,\u5d14,\u5409,\u94ae,\u9f9a,\u7a0b,\u5d47,\u90a2,\u6ed1,\u88f4,\u9646,\u8363,\u7fc1,\u8340,\u7f8a,\u65bc,\u60e0,\u7504,\u9eb4,\u5bb6,\u5c01,\u82ae,\u7fbf,\u50a8,\u9773,\u6c72,\u90b4,\u7cdc,\u677e,\u4e95,\u6bb5,\u5bcc,\u5deb,\u4e4c,\u7126,\u5df4,\u5f13,\u7267,\u9697,\u5c71,\u8c37,\u8f66,\u4faf,\u5b93,\u84ec,\u5168,\u90d7,\u73ed,\u4ef0,\u79cb,\u4ef2,\u4f0a,\u5bab,\u5b81,\u4ec7,\u683e,\u66b4,\u7518,\u94ad,\u5389,\u620e,\u7956,\u6b66,\u7b26,\u5218,\u666f,\u8a79,\u675f,\u9f99,\u53f6,\u5e78,\u53f8,\u97f6,\u90dc,\u9ece,\u84df,\u8584,\u5370,\u5bbf,\u767d,\u6000,\u84b2,\u90b0,\u4ece,\u9102,\u7d22,\u54b8,\u7c4d,\u8d56,\u5353,\u853a,\u5c60,\u8499,\u6c60,\u4e54,\u9634,\u6b0e,\u80e5,\u80fd,\u82cd,\u53cc,\u95fb,\u8398,\u515a,\u7fdf,\u8c2d,\u8d21,\u52b3,\u9004,\u59ec,\u7533,\u6276,\u5835,\u5189,\u5bb0,\u90e6,\u96cd,\u8204,\u74a9,\u6851,\u6842,\u6fee,\u725b,\u5bff,\u901a,\u8fb9,\u6248,\u71d5,\u5180,\u90cf,\u6d66,\u5c1a,\u519c,\u6e29,\u522b,\u5e84,\u664f,\u67f4,\u77bf,\u960e,\u5145,\u6155,\u8fde,\u8339,\u4e60,\u5ba6,\u827e,\u9c7c,\u5bb9,\u5411,\u53e4,\u6613,\u614e,\u6208,\u5ed6,\u5e9a,\u7ec8,\u66a8,\u5c45,\u8861,\u6b65,\u90fd,\u803f,\u6ee1,\u5f18,\u5321,\u56fd,\u6587,\u5bc7,\u5e7f,\u7984,\u9619,\u4e1c,\u6bb4,\u6bb3,\u6c83,\u5229,\u851a,\u8d8a,\u5914,\u9686,\u5e08,\u5de9,\u538d,\u8042,\u6641,\u52fe,\u6556,\u878d,\u51b7,\u8a3e,\u8f9b,\u961a,\u90a3,\u7b80,\u9976,\u7a7a,\u66fe,\u6bcb,\u6c99,\u4e5c,\u517b,\u97a0,\u987b,\u4e30,\u5de2,\u5173,\u84af,\u76f8,\u67e5,\u5f8c,\u8346,\u7ea2,\u6e38,\u7afa,\u6743,\u902f,\u76d6,\u76ca,\u6853,\u516c,\u4e07\u4fdf,\u53f8\u9a6c,\u4e0a\u5b98,\u6b27\u9633,\u590f\u4faf,\u8bf8\u845b,\u95fb\u4eba,\u4e1c\u65b9,\u8d6b\u8fde,\u7687\u752b,\u5c09\u8fdf,\u516c\u7f8a,\u6fb9\u53f0,\u516c\u51b6,\u5b97\u653f,\u6fee\u9633,\u6df3\u4e8e,\u5355\u4e8e,\u592a\u53d4,\u7533\u5c60,\u516c\u5b59,\u4ef2\u5b59,\u8f69\u8f95,\u4ee4\u72d0,\u949f\u79bb,\u5b87\u6587,\u957f\u5b59,\u6155\u5bb9,\u9c9c\u4e8e,\u95fe\u4e18,\u53f8\u5f92,\u53f8\u7a7a,\u4e93\u5b98,\u53f8\u5bc7,\u4ec9,\u7763,\u5b50\u8f66,\u989b\u5b59,\u7aef\u6728,\u5deb\u9a6c,\u516c\u897f,\u6f06\u96d5,\u4e50\u6b63,\u58e4\u9a77,\u516c\u826f,\u62d3\u62d4,\u5939\u8c37,\u5bb0\u7236,\u8c37\u7cb1,\u664b,\u695a,\u95eb,\u6cd5,\u6c5d,\u9122,\u6d82,\u94a6,\u6bb5\u5e72,\u767e\u91cc,\u4e1c\u90ed,\u5357\u95e8,\u547c\u5ef6,\u5f52,\u6d77,\u7f8a\u820c,\u5fae\u751f,\u5cb3,\u5e05,\u7f11,\u4ea2,\u51b5,\u540e,\u6709,\u7434,\u6881\u4e18,\u5de6\u4e18,\u4e1c\u95e8,\u897f\u95e8,\u5546,\u725f,\u4f58,\u4f74,\u4f2f,\u8d4f,\u5357\u5bab,\u58a8,\u54c8,\u8c2f,\u7b2a,\u5e74,\u7231,\u9633,\u4f5f,\u7b2c\u4e94,\u8a00,\u798f",nameConfig2=
"\u660e,\u59ec,\u5357\u5929,\u5546,\u7389\u5173,\u9053\u4eba,\u5bab\u4e3b,\u5439\u96ea,\u767d,\u4f69\u7389,\u5e1d,\u968f\u4e91,\u4faf,\u592b\u4eba,\u5bab\u4e3b,\u83ab\u9759,\u7f57\u5239,\u5b64\u57ce,\u767d\u53d1,\u8679,\u7ae5,\u5973,\u4e5d,\u5bfb\u6b22,\u7559\u9999,\u5c0f\u51e4,\u6d6a,\u5c0f\u9c7c,\u6653\u5cf0,\u7ea2\u96ea,\u5341\u4e00\u90ce,\u98de,\u5f00,\u4e2d\u68e0,\u957f\u8857,\u7389\u4f2f,\u5e73,\u5b9d\u7389,\u6cea\u8840,\u65e0\u7f3a,\u73ae,\u6055,\u84c9\u84c9,\u751c\u513f,\u7ea2\u8896,\u94c1\u82b1,\u51b0\u96c1,\u89c2\u97f3,\u9634\u59ec,\u697c,\u6458\u661f,\u505c,\u4ed9\u513f,\u65e0\u547d,\u5c0f\u7ea2,\u54ed,\u513f,\u5fc3\u5170,\u522b\u9e64,\u65e0\u7259,\u601c\u82b1,\u767d\u6c34,\u9752\u85e4,\u521a,\u74a7,\u74a7\u541b,\u836f\u5e08,\u4ea6\u4e91,\u6668\u5ba2,\u5c0f\u4ed9,\u7075\u7433,\u8001\u4eba,\u77f3\u9038,\u65e0\u5fcc,\u51e1,\u7389,\u7389\u4eac,\u529b,\u660a\u4e91,\u4e2d\u4e1e,\u51e1,\u5357,\u5bd2,\u5bfb,\u67d4,\u8299,\u5ff5\u96ea,\u84b9\u846d,\u83f1,\u7709\u751f,\u6f2a,\u7391,\u5149,\u6a80,\u4e91\u8fdf,\u66cc,\u6210\u8f69,\u5802,\u884c\u7b80,\u76f4,\u6708\u6b62,\u9752\u9e3e,\u51dd\u7389,\u82d1\u513f,\u8bfa\u7f18,\u7edd,\u8fdc\u8377,\u9e64,\u6e0a\u4e4b,\u75f4,\u6625\u534e,\u5584\u5747,\u4e07\u4ead,\u766b,\u656c\u4fa0,\u82e6,\u771f,\u5e86\u6f9c,\u5927\u633a,\u6bc5\u5c71,\u6cf0\u6765,\u781a,\u955c,\u5353\u4f26,\u4f24,\u75db,\u60b2,\u6709\u5fb7,\u7ef4\u626c,\u9053,\u4eba\u9f99,\u7ae0\u5793,\u7985\u5e08,\u8f89,\u53cc\u82f1,\u65fa\u5148,\u5927\u5584,\u9a8f,\u632f,\u8001\u4e09,\u514b\u901a,\u5065\u521a,\u749c,\u60e0,\u660e\u6885,\u53ef\u79c0,\u7956\u836b,\u6c85\u82b7,\u56fd\u680b,\u7384,\u5fb7\u6f5c,\u6210\u534f,\u9c7c\u540c,\u5bb6\u6d1b",
__moo_filter_id=0,__moo_filter={},__moo_actions=null,__moo_current_filter=[],__event_context=this,__functionContextIndex=1,__functionIndex=1,__moo_objects={};function _mooFilterBuildUniqueId(c,d,b,a){b.__event__id__||(b.__event__id__=__functionContextIndex++);"string"==typeof d&&(d=b[d]);d.__event__id__||(d.__event__id__=__functionIndex++);return b.__event__id__+"_"+c+"_"+d.__event__id__}
function _mooCallAllHook(c,d){var b=[];if(0==b.length)for(var a=0;a<arguments.length;a++)b.push(arguments[a]);for(var e in __moo_filter.all){var a=__moo_filter.all[e],f;for(f in a){var h=a[f];h["function"]&&(b[1]=d,d=callUserFunction(h["function"],b,h.context))}}return d}function addAction(c,d,b,a){void 0===a&&(a=100);return addFilter(c,d,b,a)}
function addFilter(c,d,b,a){void 0===a&&(a=100);var e=_mooFilterBuildUniqueId(c,d,b,a);__moo_filter[c]||(__moo_filter[c]={});__moo_filter[c][a]||(__moo_filter[c][a]={});__moo_filter[c][a][e]={"function":d,context:b};__moo_objects[b.__event__id__]||(__moo_objects[b.__event__id__]=[]);__moo_objects[b.__event__id__].push({idx:e,priority:a});return!0}
function doAction(c){for(var d=[],b=1;b<arguments.length;b++)d[b-1]=arguments[b];__moo_actions||(__moo_actions=[]);__moo_actions[c]?__moo_actions[c]=1:__moo_actions[c]++;__moo_actions.all&&(__moo_current_filter.push(c),_mooCallAllHook.apply(_mooCallAllHook,d));if(__moo_filter[c]){var b=__moo_filter[c],a;for(a in b){var b=__moo_filter[c][a],e;for(e in b){var f=b[e];f["function"]&&callUserFunction(f["function"],d,f.context)}}__moo_current_filter.pop()}else __moo_filter.all&&__moo_current_filter.pop()}
function didAction(c){return __moo_actions&&__moo_actions[c]?__moo_actions[c]:!1}
function applyFilters(c){for(var d=[],b=1;b<arguments.length;b++)d[b-1]=arguments[b];var b=[],a=d[0],e=a;if(__moo_filter.all){b=[c];__moo_current_filter.push(c);for(e=0;e<d.length;e++)b.push(d[e]);e=_mooCallAllHook.apply(_mooCallAllHook,b)}if(!__moo_filter[c])return __moo_filter.all&&__moo_current_filter.pop(),e;__moo_filter.all||__moo_current_filter.push(c);if(0==b.length)for(b=[c],e=0;e<d.length;e++)b.push(d[e]);for(var f in __moo_filter[c]){var d=__moo_filter[c][f],h;for(h in d)e=d[h],e["function"]&&
(b[1]=a,e=callUserFunction(e["function"],b.slice(1,b.length),e.context),"undefined"!=typeof e&&(a=e))}__moo_current_filter.pop();return a}function removeFilter(c,d,b,a){a=formatFunctionParam(a,100);b=formatFunctionParam(b,__event_context);d=_mooFilterBuildUniqueId(c,d,b,a);return removeFilterByBase(c,a,d,b)}
function removeFilterByBase(c,d,b,a){var e=__moo_filter[c]&&__moo_filter[c][d]&&__moo_filter[c][d][b];if(e)for(delete __moo_filter[c][d][b],moo.isEmptyTemp(__moo_filter[c][d])&&delete __moo_filter[c][d],c=__moo_objects[a.__event__id__],a=c.length-1;0<=a;a--){var f=c[a];f.idx==b&&f.priority==d&&c.splice(a,1)}return e}function removeAllFilters(c,d){d=formatFunctionParam(d,!1);__moo_filter[c]&&(!1!==d&&__moo_filter[c][d]?delete __moo_filter[c][d]:delete __moo_filter[c]);return!0}
function hasAction(c,d){return hasFilter(c,d,null)}function hasFilter(c,d,b){b=formatFunctionParam(b,__event_context);d=formatFunctionParam(d,!1);var a=moo.isEmpty(__moo_filter[c]);if(!1===d||!1==a)return a;d=_mooFilterBuildUniqueId(c,d,b,!1);if(!d)return!1;for(var e in __moo_filter[c])if(e=parseInt(e),__moo_filter[c][e][d])return e;return!1}function removeAction(c,d,b,a){return removeFilter(c,d,b,a)}function removeAllAction(c,d){return removeAllFilters(c,d)}
function removeEventsByTarget(c){for(var d=c.__event__id__,b=__moo_objects[d],a=/^\d+\_(.*?)\_\d+$/gi;b&&b.length;){var e=b[0],f=a.exec(e.idx);f&&removeFilterByBase(f[1],e.priority,e.idx,c)}delete __moo_objects[d]}
var LoadingGroupControl=function(){function c(){this._reloadingCount=0}var d=c.prototype;c.instance=function(){c._instance||(c._instance=new c);return c._instance};d._reloadAgain=function(){this._reloadingCount>c.MAX_AUTO_RELOAD_COUNT?doAction("UI_SHOW_NET_OFFLINE"):(doAction("GameApp_reloadGroup"),this.loadGroup(this._loadGrop));this._timeId=null};d._setTimer=function(){if(!this._timeId){this._reloadingCount++;var b=5E3;this._reloadingCount>c.MAX_AUTO_RELOAD_COUNT&&(b=2E3);this._timeId=Time.setTimeout(this._reloadAgain,
this,b)}};d._clearTimer=function(){this._timeId&&(Time.clearTimeout(this._timeId),this._timeId=null)};d.inLoading=function(){this._reloadingCount=0;this._clearTimer()};d.loadingError=function(){this._setTimer()};d.loadGroup=function(b){(this._loadGrop=b)&&RES.loadGroup(b)};c.MAX_AUTO_RELOAD_COUNT=100;return c}();LoadingGroupControl.prototype.__class__="LoadingGroupControl";
var ActivityManager=function(){function c(){}var d=c.prototype;c.getInstance=function(){null==this._instance&&(this._instance=new c);return this._instance};d.initList=function(b){this._list=b};d.isActivityOpen=function(b){if(this._list&&(b=this._list[b])){if(ProxyUtils.currentTime<=1E3*b.startTime)return!1;var a=(new Date).getTime()-DataCenter.getInstance().gameStartTime;if(1E3*b.endTime-ProxyUtils.currentTime>a)return!0}return!1};d.getActivityByType=function(b){return this.isActivityOpen(b)?this._list[b]:
null};d.canFirstLoginAward=function(){var b=this.getActivityByType(ActivityType.firstLogin);return b?0==b.get:!1};d.getFreeSkillNum=function(){var b=this.getActivityByType(ActivityType.gctoyu);return b?b.can:0};d.refreshHolyLfNum=function(b){var a=this.getActivityByType(ActivityType.buyyu);a&&(a.lfNum=b)};d.getHolyLfNum=function(){var b=this.getActivityByType(ActivityType.buyyu);return b?b.lfNum:0};d.getHolyLfTime=function(){var b=this.getActivityByType(ActivityType.buyyu);if(b){var a=Math.floor(GameUtils.getCurrentTime()/
1E3);return b.endTime-a}return 0};d.refreshGcToYu=function(b){this.isActivityOpen(ActivityType.gctoyu)&&(this._list[ActivityType.gctoyu].gc=b.gc,this._list[ActivityType.gctoyu].can=b.can,this._list[ActivityType.gctoyu].get=b.get)};d.useGc=function(b){this.isActivityOpen(ActivityType.gctoyu)&&0!=this._list[ActivityType.gctoyu].saveNum&&(this._list[ActivityType.gctoyu].gc+=Math.abs(b),this._list[ActivityType.gctoyu].can=Math.floor(this._list[ActivityType.gctoyu].gc/50)-this._list[ActivityType.gctoyu].get,
doAction(Const.REFRESH_PAYMENT_LIST))};d.refreshGuildRechData=function(b){var a=this.getActivityByType(ActivityType.guildrecharge);a&&(a.get=b.get,b.payNum&&0<b.payNum&&(a.payNum=b.payNum))};return c}();ActivityManager.prototype.__class__="ActivityManager";
var ActivityType=function(){function c(){}c.firstLogin="firstLogin";c.gctoyu="gctoyu";c.rechargedouble="rechargedouble";c.yuMore="yuMore";c.buyyu="buyyu";c.cardHalf="cardhalf";c.priceHalf="pricehalf";c.cardtoyu="cardtoyu";c.guildrecharge="guildrecharge";return c}();ActivityType.prototype.__class__="ActivityType";
var GuildModel=function(){function c(){}c.CheckInptGldName=function(c){var b=GuildDataManager.getInstance().joinGuildList;if(null!=b&&0<b.length)for(var a=0;a<b.length;a++)if(c==b[a].guildName)return!0;return!1};c.isMyCharMain=function(){var c=GuildDataManager.getInstance().getMyGldInfo();return null!=c&&c.guildHostUID==ProxyUtils.userId?!0:!1};c.findItemInAplyList=function(c){var b=GuildDataManager.getInstance().getMyGldInfo();if(null!=b)for(var a=0;a<b.gldAplyList.length;a++)if(b.gldAplyList[a].aplyId==
c)return b.gldAplyList[a];return null};c.removeMbItemByID=function(c){var b=GuildDataManager.getInstance().getMyGldInfo();if(null!=b)for(var a=0;a<b.gldMbList.length;a++)if(b.gldMbList[a].mdUID==c){b.removeMbItem(b.gldMbList[a]);break}};c.computerUPWeaponNeed=function(){return 50*(1+GuildDataManager.getInstance().weaponLevel)};c.addDamgeFromWeapon=function(c){if(null!=HeroController.getInstance()){var b=GuildDataManager.getInstance().weaponLevel;return 0.5*c*b}};c.refleshDPS=function(){null!=HeroController.getInstance()&&
HeroController.getInstance().mainHero.refreshDPS()};c.computerWeaponCanAddBuff=function(){return null!=HeroController.getInstance()?50*GuildDataManager.getInstance().weaponLevel:0};c.getNumOfWeek=function(){return(new Date).getDay()};c.checkisCanSingUp=function(){var d=GuildDataManager.getInstance().getMyGldInfo();return null==d?!1:c.isMyCharMain()?d.guildIsEnRoll?(doAction(Const.SHOW_TIPS,"\u5df2\u7ecf\u62a5\u540d\u8fc7\u4e86"),!1):1E3>d.guildCb?(doAction(Const.SHOW_TIPS,"\u8d21\u732e\u503c\u4e0d\u8db3"),
!1):0<d.guildAcDuiTime&&3600>d.guildAcDuiTime?(doAction(Const.SHOW_TIPS,"\u6b66\u6797\u5927\u4f1a\u5df2\u7ecf\u5f00\u59cb\uff0c\u8bf7\u4e0b\u6b21\u518d\u6765\u3002"),!1):!0:(doAction(Const.SHOW_TIPS,"\u53ea\u6709\u5e2e\u4e3b\u624d\u53ef\u62a5\u540d"),!1)};c.timeOutToShow=function(){var c=GuildDataManager.getInstance().getMyGldInfo();null!=c&&Time.setTimeout(function(){--c.guildNextOpenTime;doAction(Const.Guild_refleshLeftTime)},1E3,c.guildNextOpenTime)};c.getMyInfoFromList=function(c){var b=GuildDataManager.getInstance().getMyGldInfo();
if(null!=b)for(var a=0;a<b.gldMbList.length;a++)if(c==b.gldMbList[a].mdUID)return b.gldMbList[a];return null};c.playBtnPackEffect=function(c,b,a,e){void 0===e&&(e=500);if(null!=c&&!(0>=c.length))if(b)var f=c.length-1,h=0,g=Time.setInterval(function(){0>=f&&Time.clearInterval(g);c[f].visible=!0;egret.Tween.get(c[f]).to({x:a-80*(f+1)},e,egret.Ease.circInOut).call(function(){h++});egret.Tween.get(c[f]).to({rotation:-360},e);egret.Tween.get(c[f]).to({alpha:1},e);f--},this,100);else h=f=0,g=Time.setInterval(function(){f>=
c.length-1&&Time.clearInterval(g);c[f].alpha=1;egret.Tween.get(c[f]).to({x:a},e,egret.Ease.circInOut).call(function(){c[h]&&(c[h].visible=!1);h++});egret.Tween.get(c[f]).to({rotation:0},e);egret.Tween.get(c[f]).to({alpha:0},e);f++},this,100)};c.isWulinDurtion=function(){var c=GuildDataManager.getInstance().getMyGldInfo();return null==c?(console.log("\u6211\u7684\u5e2e\u4f1a\u6570\u636e\u4e3a\u7a7a"),!1):null==c.guildAcDuiTime?(console.log("\u6d3b\u52a8\u6301\u7eed\u65f6\u95f4\u4e3a\u7a7a"),!1):0<
c.guildAcDuiTime&&c.guildIsEnRoll?!0:!1};c.checkUpCan10=function(c){if(null==c||0==c.skillType)return null;for(var b=c.skillCurLevel,a=10,e=0,f=0;f<c.wuxueInfo.length;f++)if(b+10>c.wuxueInfo[f].floorActiveLevel&&!c.wuxueInfo[f].isActive){a=c.wuxueInfo[f].floorActiveLevel-b;break}for(f=b;f<b+a;f++)e+=c.baseCost*Math.pow(1.075,f-1);return GuildWuLinDataManager.getInstance().getMoneyByType(c.skillCostType)>=e?{cost:e,canUplvl:a}:null};c.checkUpCan100=function(c){if(null==c||0==c.skillType)return null;
for(var b=c.skillCurLevel,a=100,e=0,f=0;f<c.wuxueInfo.length;f++)if(b+100>c.wuxueInfo[f].floorActiveLevel&&!c.wuxueInfo[f].isActive){a=c.wuxueInfo[f].floorActiveLevel-b;break}for(f=b;f<b+a;f++)e+=c.baseCost*Math.pow(1.075,f-1);return GuildWuLinDataManager.getInstance().getMoneyByType(c.skillCostType)>=e?{cost:e,canUplvl:a}:null};c.formatNum0=function(c){var b=new NumberModel;b.add(c);return b.getNumer()};c.formatNum1=function(c){if(1E3>=c)return c.toString();var b=new NumberModel;b.add(c);return b.getNumer()};
c.formatNum=function(c){c=Number(c);var b=new NumberModel;b.add(c);return b.getNumer()};c.findLocalDataByID=function(c){if(null!=GuildDataManager.getInstance().localWulinData){var b=GuildDataManager.getInstance().localWulinData.skillInfo.listSkill;if(null==b)return null;for(var a=0;a<b.length;a++)if(c==b[a].skillID)return b[a]}return null};c.computerWuXueDamge=function(){return c.formatNum0(c.computerWuXueDamge1())};c.computerWuXueDamge1=function(){var c=0;if(null!=GuildWuLinDataManager.getInstance()&&
null!=GuildWuLinDataManager.getInstance().listData)for(var b=GuildWuLinDataManager.getInstance().listData,a=0;a<b.length;a++)1==b[a].skillType&&(c+=GuildWuLinDataManager.getInstance().getSecDamgNum(b[a]));return c};c.comCurSecDamge=function(d){void 0===d&&(d=0);var b=0,b=0<d?d+GuildWuLinDataManager.getInstance().dps:GuildWuLinDataManager.getInstance().dps;d=c.formatNum0(b);doAction("guild_curSecDamg",d)};c.checkTimeToDo=function(){if(null!=GuildDataManager.getInstance().localWulinData){var d=GuildDataManager.getInstance().localWulinData.lastSaveTime,
b=ProxyUtils.currentServerTime,d=c.getDateFromNum(d),b=c.getDateFromNum(b);if(d.getDay()==b.getDay())return!0}return!1};c.getDateFromNum=function(c){return new Date(c)};c.getARandom=function(){var c=GameUtils.random(1,100);return 80>=c?1:80<c&&95>c?2:3};c.ChangeTxtToDot=function(d){return c.SubStringOfNum(d,5)};c.SubStringOfNum=function(c,b){return null!=c&&""!=c&&c.length>b?c.substring(0,b)+"...":c};c.addUnClickItem=function(d){null==c.listClick&&(c.listClick=[]);c.hasClickKey(d)||c.listClick.push(d)};
c.removeClickItem=function(d){null!=c.listClick&&0<c.listClick.length&&c.listClick.erase(d)};c.hasClickKey=function(d){return null!=c.findClickItem(d)};c.findClickItem=function(d){if(null!=c.listClick)for(var b=0;b<c.listClick.length;b++){var a=c.listClick[b];if(c.getKey(a)==c.getKey(d))return a}return null};c.addACdTimeToRep=function(d,b,a){void 0===b&&(b=3E3);if(c.hasClickKey(d)){a=c.findClickItem(d);var e=c.getTime(a),f=c.getTime(d);if(null!=e&&null!=f)return Number(f)-Number(e)>=b?(c.removeClickItem(a),
c.addUnClickItem(d),!0):!1;c.removeClickItem(a);return!0}c.addUnClickItem(d);return!0};c.getArray=function(c){if(""==c)return null;var b=[];0<c.indexOf("&")&&(b=c.split("&"));return b};c.getTime=function(d){d=c.getArray(d);return null!=d?d[1]:null};c.getKey=function(d){d=c.getArray(d);return null!=d?d[0]:null};c.combinKey=function(c){return c+"&"+(new Date).getTime()};return c}();GuildModel.prototype.__class__="GuildModel";
var PlatformTypeInfo=function(){return function(c,d){this.type=this.types=null;this.types=c;this.type=d}}();PlatformTypeInfo.prototype.__class__="PlatformTypeInfo";
var PlatformFactory=function(){function c(){this._classMapping=[];this._curPlatform=null}var d=c.prototype;c.getInstance=function(){null==this._factory&&(this._factory=new c);return this._factory};d.inject=function(){for(var b=[],a=0;a<arguments.length;a++)b[a-0]=arguments[a];this._classMapping.push(new PlatformTypeInfo(b.slice(0,b.length-1),b[b.length-1]))};d.getType=function(b){for(var a=0;a<this._classMapping.length;a++)if(-1<this._classMapping[a].types.indexOf(b))return this._classMapping[a].type;
return null};d.newClass=function(b){return(b=this.getType(b))?new b:null};d.getPlatform=function(){return this._curPlatform};d.setPlatform=function(b){this._curPlatform=(b=this.newClass(b))?b:new BasePlatform};c.getPlatform=function(){return this.getInstance().getPlatform()};c.doLogin=function(b){};c.setPlatform=function(b){this.getInstance().setPlatform(b)};c._factory=null;return c}();PlatformFactory.prototype.__class__="PlatformFactory";
var globalData=globalData||{},platformType_bearjoy=1,platformType_wanba=2,platformType_egret=3,ProxyUtils=function(){function c(){}c.buyItem=function(d,b,a,e){function f(){var d=JSON.parse(g.data);0==d.s?b&&b.call(a):3!=d.s&&4!=d.s||c.wanbaRelogin();0!=d.s&&e&&e.call(a,"\u8bf7\u6c42\u9519\u8bef\uff08code:"+d.s+"\uff09");g.removeEventListener(egret.Event.COMPLETE,f,this)}void 0===b&&(b=null);void 0===a&&(a=null);void 0===e&&(e=null);var h={mod:"Store","do":"buy",p:{}};h.p.data={};h.p.data.id=d;h.p.data.lv=
DataCenter.getInstance().totalData.currentLevel;d="h="+c.hashKey+"&data="+JSON.stringify(h)+"&s="+this.getProxyKey(h);h=new egret.URLRequest;h.method=egret.URLRequestMethod.GET;h.data=new egret.URLVariables(d);h.url=c.requestUrl;var g=new egret.URLLoader;g.addEventListener(egret.Event.COMPLETE,f,this);g.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){e&&e.call(a,"\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\u2026")},this);g.load(h)};c.getProxyKey=function(c){c=JSON.stringify(c)+"xjdjjddasdf9jhad2~1f2a3";
return(new md5).hex_md5(c)};c.getVuInfo=function(d,b){function a(){var e=JSON.parse(h.data);d.call(b,e);h.removeEventListener(egret.Event.COMPLETE,a,this)}var e={mod:"Share","do":"awInfo"},e="h="+c.hashKey+"&data="+JSON.stringify(e)+"&s="+this.getProxyKey(e),f=new egret.URLRequest;f.method=egret.URLRequestMethod.POST;f.data=new egret.URLVariables(e);f.url=c.requestUrl;var h=new egret.URLLoader;h.addEventListener(egret.Event.COMPLETE,a,this);h.load(f)};c.getVuAttentionAward=function(d,b){function a(){var e=
JSON.parse(h.data);d.call(b,e);h.removeEventListener(egret.Event.COMPLETE,a,this)}var e={mod:"Share","do":"awAttention"},e="h="+c.hashKey+"&data="+JSON.stringify(e)+"&s="+this.getProxyKey(e),f=new egret.URLRequest;f.method=egret.URLRequestMethod.POST;f.data=new egret.URLVariables(e);f.url=c.requestUrl;var h=new egret.URLLoader;h.addEventListener(egret.Event.COMPLETE,a,this);h.load(f)};c.getVUShareAward=function(d,b){function a(){var e=JSON.parse(h.data);d.call(b,e);h.removeEventListener(egret.Event.COMPLETE,
a,this)}var e={mod:"Share","do":"awShare"},e="h="+c.hashKey+"&data="+JSON.stringify(e)+"&s="+this.getProxyKey(e),f=new egret.URLRequest;f.method=egret.URLRequestMethod.POST;f.data=new egret.URLVariables(e);f.url=c.requestUrl;var h=new egret.URLLoader;h.addEventListener(egret.Event.COMPLETE,a,this);h.load(f)};c.getFriendEventList=function(d,b){function a(){var e=JSON.parse(h.data);0==e.s&&d&&d.call(b,e);h.removeEventListener(egret.Event.COMPLETE,a,this)}var e={mod:"FriendEvent","do":"getList"},e="h="+
c.hashKey+"&data="+JSON.stringify(e)+"&s="+this.getProxyKey(e),f=new egret.URLRequest;f.method=egret.URLRequestMethod.POST;f.data=new egret.URLVariables(e);f.url=c.requestUrl;var h=new egret.URLLoader;h.addEventListener(egret.Event.COMPLETE,a,this);h.load(f)};c.executeFriendEvent=function(d,b,a,e){function f(){var e=JSON.parse(g.data);0==e.s&&b&&b.call(a,e);g.removeEventListener(egret.Event.COMPLETE,f,this)}void 0===e&&(e="");var h={mod:"FriendEvent","do":"finish",p:{}};h.p.type=d;e&&(h.p.msg=e);
d="h="+c.hashKey+"&data="+JSON.stringify(h)+"&s="+this.getProxyKey(h);e=new egret.URLRequest;e.method=egret.URLRequestMethod.POST;e.data=new egret.URLVariables(d);e.url=c.requestUrl;var g=new egret.URLLoader;g.addEventListener(egret.Event.COMPLETE,f,this);g.load(e)};c.getFriendEvent=function(d,b){function a(){var e=JSON.parse(h.data);0==e.s&&d&&d.call(b,e);h.removeEventListener(egret.Event.COMPLETE,a,this)}var e={mod:"FriendEvent","do":"getInfo",p:{}};e.p.openkey=c.openkey;var e="h="+c.hashKey+"&data="+
JSON.stringify(e)+"&s="+this.getProxyKey(e),f=new egret.URLRequest;f.method=egret.URLRequestMethod.POST;f.data=new egret.URLVariables(e);f.url=c.requestUrl;var h=new egret.URLLoader;h.addEventListener(egret.Event.COMPLETE,a,this);h.load(f)};c.buyGold=function(d,b){function a(){var b=JSON.parse(h.data);if(0==b.s){c.jifen+=b.score;GameUtils.isInRechargeActivity()&&c.refreshActivity();var e=new NumberModel;e.add(b.gc);e.reduce(DataCenter.getInstance().getGcNum());DataCenter.getInstance().statistics.addValue(StatisticsType.diamond,
e.getNumer());DataCenter.getInstance().refreshGc(b.gc);doAction(Const.CHANGE_JIFEN);DataCenter.getInstance().isPay.setValue(1);b.orderGift&&LoopBuyMonitor.getInstance().addAward(b.orderGift)}else 3!=b.s&&4!=b.s||c.wanbaRelogin();h.removeEventListener(egret.Event.COMPLETE,a,this)}void 0===b&&(b="");c.platformInfo==platformType_wanba&&"2"==c.platform&&(d+=1E3);var e={mod:"User","do":"buyZoneItem",p:{}};e.p.data=globalData;e.p.data.cId=d;e.p.data.ext=b;var e="h="+c.hashKey+"&data="+JSON.stringify(e)+
"&s="+this.getProxyKey(e),f=new egret.URLRequest;f.method=egret.URLRequestMethod.POST;f.data=new egret.URLVariables(e);f.url=c.requestUrl;var h=new egret.URLLoader;h.addEventListener(egret.Event.COMPLETE,a,this);h.load(f)};c.getHttpParams=function(c){c=location.href.match(new RegExp("(\\?|#|&)"+c+"=([^&#]*)(&|#|$)"));return decodeURIComponent(c?c[2]:"")};c.getTencentCoin=function(d,b){function a(){var e=JSON.parse(h.data);0==e.s?(c.jifen=e.score,c.isVIP=0<e.vip,c.vipLevel=e.vip,doAction(Const.CHANGE_JIFEN),
d&&b&&b.call(d),c.paymentModel&&(e=c.paymentModel.need,c.isVIP&&(e*=0.8),c.jifen>=e&&c.buyGold(parseInt(c.paymentModel.productId)+1E3,c.paymentModel.ext),c.paymentModel=null)):3==e.s||4==e.s?c.wanbaRelogin():c.getTencentCoin(d,b);h.removeEventListener(egret.Event.COMPLETE,a,this)}void 0===d&&(d=null);void 0===b&&(b=null);var e={mod:"User","do":"getZoneInfo",p:{}};e.p.data=globalData;var e="h="+c.hashKey+"&data="+JSON.stringify(e)+"&s="+this.getProxyKey(e),f=new egret.URLRequest;f.method=egret.URLRequestMethod.POST;
f.data=new egret.URLVariables(e);f.url=c.requestUrl;var h=new egret.URLLoader;h.addEventListener(egret.Event.COMPLETE,a,this);h.load(f)};c.getDiamond=function(d,b){function a(){var e=JSON.parse(h.data);0==e.s?(DataCenter.getInstance().changeGc(b),"fall"==d&&Time.setTimeout(function(){doAction(Const.HIDE_GOLDCOIN)},this,1E3),"loginDay"==d&&(c.biaoji=!0)):3!=e.s&&4!=e.s||c.wanbaRelogin();h.removeEventListener(egret.Event.COMPLETE,a,this)}void 0===b&&(b=0);var e={mod:"User","do":"getGc",p:{}};e.p.type=
d;var e="h="+c.hashKey+"&data="+JSON.stringify(e)+"&s="+this.getProxyKey(e),f=new egret.URLRequest;f.method=egret.URLRequestMethod.POST;f.data=new egret.URLVariables(e);f.url=c.requestUrl;var h=new egret.URLLoader;h.addEventListener(egret.Event.COMPLETE,a,this);h.load(f)};c.UserStat=function(d,b){function a(){h.removeEventListener(egret.Event.COMPLETE,a,this)}void 0===b&&(b=0);var e={mod:"User","do":"stat",p:{}};e.p.key=d;0<b&&(e.p.money=b);var e="h="+c.hashKey+"&data="+JSON.stringify(e)+"&s="+this.getProxyKey(e),
f=new egret.URLRequest;f.method=egret.URLRequestMethod.GET;f.data=new egret.URLVariables(e);f.url=c.requestUrl;var h=new egret.URLLoader;h.addEventListener(egret.Event.COMPLETE,a,this);h.load(f)};c.getRechargeAward=function(d,b,a){function e(){var c=JSON.parse(g.data);b&&b.call(a,c);g.removeEventListener(egret.Event.COMPLETE,e,this)}var f="old";2==c.rechargeActivityType&&(f="new");var h={mod:"Activity","do":"rechargeAward",p:{}};h.p.day=d;h.p.type=f;d="h="+c.hashKey+"&data="+JSON.stringify(h)+"&s="+
this.getProxyKey(h);f=new egret.URLRequest;f.method=egret.URLRequestMethod.GET;f.data=new egret.URLVariables(d);f.url=c.requestUrl;var g=new egret.URLLoader;g.addEventListener(egret.Event.COMPLETE,e,this);g.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){b&&b.call(a,{s:1})},this);g.load(f)};c.fightTogether=function(d,b,a){function e(){var c=JSON.parse(h.data);b&&b.call(a,c);h.removeEventListener(egret.Event.COMPLETE,e,this)}var f={mod:"Activity","do":"birthChild",p:{}};f.p.fId=d;d="h="+c.hashKey+
"&data="+JSON.stringify(f)+"&s="+this.getProxyKey(f);f=new egret.URLRequest;f.method=egret.URLRequestMethod.GET;f.data=new egret.URLVariables(d);f.url=c.requestUrl;var h=new egret.URLLoader;h.addEventListener(egret.Event.COMPLETE,e,this);h.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){b&&b.call(a,{s:1})},this);h.load(f)};c.getFriendList=function(d,b){function a(){var e=JSON.parse(h.data);d&&d.call(b,e);h.removeEventListener(egret.Event.COMPLETE,a,this)}var e={mod:"User","do":"getFriendList"},
e="h="+c.hashKey+"&data="+JSON.stringify(e)+"&s="+this.getProxyKey(e),f=new egret.URLRequest;f.method=egret.URLRequestMethod.GET;f.data=new egret.URLVariables(e);f.url=c.requestUrl;var h=new egret.URLLoader;h.addEventListener(egret.Event.COMPLETE,a,this);h.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){d&&d.call(b,{s:1})},this);h.load(f)};c.getMyInfo=function(d,b){function a(){var e=JSON.parse(h.data);d&&d.call(b,e);h.removeEventListener(egret.Event.COMPLETE,a,this)}var e={mod:"Activity",
"do":"getInfo"},e="h="+c.hashKey+"&data="+JSON.stringify(e)+"&s="+this.getProxyKey(e),f=new egret.URLRequest;f.method=egret.URLRequestMethod.GET;f.data=new egret.URLVariables(e);f.url=c.requestUrl;var h=new egret.URLLoader;h.addEventListener(egret.Event.COMPLETE,a,this);h.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){d&&d.call(b,{s:1})},this);h.load(f)};c.getFriendBuff=function(d,b){function a(){var e=JSON.parse(h.data);d&&d.call(b,e);h.removeEventListener(egret.Event.COMPLETE,a,this)}var e=
{mod:"Activity","do":"getMedicine"},e="h="+c.hashKey+"&data="+JSON.stringify(e)+"&s="+this.getProxyKey(e),f=new egret.URLRequest;f.method=egret.URLRequestMethod.GET;f.data=new egret.URLVariables(e);f.url=c.requestUrl;var h=new egret.URLLoader;h.addEventListener(egret.Event.COMPLETE,a,this);h.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){d&&d.call(b,{s:1})},this);h.load(f)};c.helpFriend=function(d,b,a){function e(){var c=JSON.parse(h.data);b&&b.call(a,c);h.removeEventListener(egret.Event.COMPLETE,
e,this)}var f={mod:"Activity","do":"sendMedicine",p:{}};f.p.fId=d;d="h="+c.hashKey+"&data="+JSON.stringify(f)+"&s="+this.getProxyKey(f);f=new egret.URLRequest;f.method=egret.URLRequestMethod.GET;f.data=new egret.URLVariables(d);f.url=c.requestUrl;var h=new egret.URLLoader;h.addEventListener(egret.Event.COMPLETE,e,this);h.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){b&&b.call(a,{s:1})},this);h.load(f)};c.buyBuff=function(d,b,a,e,f){function h(){var b=JSON.parse(l.data);0==b.s&&a&&a.call(e);
1==b.s&&(c.lockMSG=b.msg||"",GameMainLayer.instance.showStopServiceLayer(c.lockMSG));l.removeEventListener(egret.Event.COMPLETE,h,this)}void 0===a&&(a=null);void 0===e&&(e=null);void 0===f&&(f=null);var g={mod:"User","do":"reduceGc",p:{}};g.p.gc=d;g.p.type=b;d="h="+c.hashKey+"&data="+JSON.stringify(g)+"&s="+this.getProxyKey(g);b=new egret.URLRequest;b.method=egret.URLRequestMethod.GET;b.data=new egret.URLVariables(d);b.url=c.requestUrl;var l=new egret.URLLoader;l.addEventListener(egret.Event.COMPLETE,
h,this);l.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){f&&f.call(e,"\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\u2026")},this);l.load(b)};c.egretPay=function(d,b,a,e){void 0===e&&(e="");EgretH5Sdk.pay({uId:c.platUserId,appId:c.egretAppId,goodsId:d,goodsNumber:1,serverId:"1",ext:e},b,a)};c.refreshActivity=function(){function d(){var a=JSON.parse(e.data);0==a.s?a.l&&(a.l.dayrecharge?(c.rechargeData=a.l.dayrecharge,c.rechargeStartTime=1E3*a.l.dayrecharge.startTime,c.rechargeEndTime=1E3*
a.l.dayrecharge.endTime,doAction("recharge_series_change"),doAction(Const.RECHARGE_DAY_CHANGE)):a.l.dayrecharge1?(c.rechargeData=a.l.dayrecharge1,c.rechargeStartTime=1E3*a.l.dayrecharge1.startTime,c.rechargeEndTime=1E3*a.l.dayrecharge1.endTime,doAction("recharge_series_change"),doAction(Const.RECHARGE_DAY_CHANGE)):a.l.guildrecharge&&ActivityManager.getInstance().refreshGuildRechData(a.l.guildrecharge)):3!=a.s&&4!=a.s||c.wanbaRelogin();e.removeEventListener(egret.Event.COMPLETE,d,this)}var b={mod:"Activity",
"do":"getList"},b="h="+c.hashKey+"&data="+JSON.stringify(b)+"&s="+this.getProxyKey(b),a=new egret.URLRequest;a.method=egret.URLRequestMethod.POST;a.data=new egret.URLVariables(b);a.url=c.requestUrl;var e=new egret.URLLoader;e.addEventListener(egret.Event.COMPLETE,d,this);e.load(a)};c.refreshGc=function(){function d(){var a=JSON.parse(e.data);0==a.s?a.i.order&&(c.diamond=a.i.diamond,"number"==typeof c.diamond&&DataCenter.getInstance().statistics.resetValue(StatisticsType.diamond,c.diamond),DataCenter.getInstance().isPay.setValue(a.i.isPay),
DataCenter.getInstance().refreshGc(a.i.gc),doAction(Const.REFRESH_GC),doAction(Const.SHOW_TIPS,"\u5145\u503c\u6210\u529f"),GameUtils.isInRechargeActivity()?c.refreshActivity():ActivityManager.getInstance().isActivityOpen(ActivityType.guildrecharge)&&c.refreshActivity(),a.i.orderGift&&LoopBuyMonitor.getInstance().addAward(a.i.orderGift)):3!=a.s&&4!=a.s||c.wanbaRelogin();e.removeEventListener(egret.Event.COMPLETE,d,this)}var b={mod:"User","do":"refreshInfo",p:{}};b.p.time=c.openRechargeTime;var b="h="+
c.hashKey+"&data="+JSON.stringify(b)+"&s="+this.getProxyKey(b),a=new egret.URLRequest;a.method=egret.URLRequestMethod.POST;a.data=new egret.URLVariables(b);a.url=c.requestUrl;var e=new egret.URLLoader;e.addEventListener(egret.Event.COMPLETE,d,this);e.load(a)};c.reduceDiamond=function(d,b,a,e){function f(){var b=JSON.parse(g.data);a&&e&&a.call(e,b.s);0==b.s?DataCenter.getInstance().reduceGc(d,!0):1==b.s?(c.lockMSG=b.msg||"",GameMainLayer.instance.showStopServiceLayer(c.lockMSG)):3!=b.s&&4!=b.s||c.wanbaRelogin();
g.removeEventListener(egret.Event.COMPLETE,f,this)}var h={mod:"User","do":"reduceGc",p:{}};h.p.gc=d;h.p.type=b;b="h="+c.hashKey+"&data="+JSON.stringify(h)+"&s="+this.getProxyKey(h);h=new egret.URLRequest;h.method=egret.URLRequestMethod.POST;h.data=new egret.URLVariables(b);h.url=c.requestUrl;var g=new egret.URLLoader;g.addEventListener(egret.Event.COMPLETE,f,this);g.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){a&&e&&a.call(e,100)},this);g.load(h)};c.getGold=function(d){function b(){var a=
JSON.parse(e.data);0!=a.s&&(3!=a.s&&4!=a.s||c.wanbaRelogin());e.removeEventListener(egret.Event.COMPLETE,b,this)}var a={mod:"Achieve","do":"finish",p:{}};a.p.aId=d;d="h="+c.hashKey+"&data="+JSON.stringify(a)+"&s="+this.getProxyKey(a);a=new egret.URLRequest;a.method=egret.URLRequestMethod.POST;a.data=new egret.URLVariables(d);a.url=c.requestUrl;var e=new egret.URLLoader;e.addEventListener(egret.Event.COMPLETE,b,this);e.load(a)};c.specialShareSuccess=function(){0<c.leftShareNum?c.getShareReward(function(d){if(0==
d){doAction(Const.SHOW_TIPS,"\u5206\u4eab\u6210\u529f\uff0c\u83b7\u5f97100\u5143\u5b9d!");c.leftShareNum-=1;d=new NumberModel(100);var b={};b.coins=d.pieces(4);b.type=2;b.updated=!0;doAction(Const.DROP_COIN,b);doAction(Const.SHARE_INITED)}else doAction(Const.SHOW_TIPS,"\u5206\u4eab\u6210\u529f")},this):doAction(Const.SHOW_TIPS,"\u5206\u4eab\u6210\u529f")};c.getShareReward=function(d,b){function a(){var e=JSON.parse(h.data);d.call(b,e.s);h.removeEventListener(egret.Event.COMPLETE,a,this)}var e={mod:"User",
"do":"getGc",p:{}};e.p.type="sinaShare";var e="h="+c.hashKey+"&data="+JSON.stringify(e)+"&s="+this.getProxyKey(e),f=new egret.URLRequest;f.method=egret.URLRequestMethod.POST;f.data=new egret.URLVariables(e);f.url=c.requestUrl;var h=new egret.URLLoader;h.addEventListener(egret.Event.COMPLETE,a,this);h.load(f)};c.getWBShareReward=function(d,b){function a(){var e=JSON.parse(h.data);d.call(b,e.s);h.removeEventListener(egret.Event.COMPLETE,a,this)}var e="h="+c.hashKey+"&data="+JSON.stringify({mod:"Share",
"do":"getGc",p:{}}),f=new egret.URLRequest;f.method=egret.URLRequestMethod.POST;f.data=new egret.URLVariables(e);f.url=c.requestUrl;var h=new egret.URLLoader;h.addEventListener(egret.Event.COMPLETE,a,this);h.load(f)};c.getCodeAward=function(d){function b(){var a=JSON.parse(e.data);if(0==a.s){GameMainLayer.instance.hideWeixinAwardLayer();if(a.gc){var c=new NumberModel(a.gc),d={};d.coins=c.pieces(4);d.type=2;d.updated=!0;doAction(Const.DROP_COIN,d);doAction(Const.SHOW_TIPS,"\u83b7\u5f97\u5143\u5b9d:"+
a.gc)}a.sc&&(c=new NumberModel(a.sc),d={},d.coins=c.pieces(4),d.type=1,doAction(Const.DROP_COIN,d),doAction(Const.SHOW_TIPS,"\u83b7\u5f97\u94dc\u94b1:"+c.getNumer()));a.card&&(FateController.getInstance().addCard(a.card||[]),doAction(Const.SHOW_TIPS,"\u4fa0\u5ba2\u5361\u724cx"+a.card.length));a.giveYu&&(DataCenter.getInstance().changeHolyNum(a.giveYu||0),doAction(Const.SHOW_TIPS,"\u9b42\u7389x"+a.giveYu))}else 3018==a.s?doAction(Const.SHOW_TIPS,"\u60a8\u5df2\u7ecf\u9886\u53d6\u8fc7\u4e86\u5151\u6362\u7801\u5956\u52b1"):
3019==a.s?doAction(Const.SHOW_TIPS,"\u8be5\u5151\u6362\u7801\u5df2\u7ecf\u4f7f\u7528\u8fc7\u4e86"):3043==a.s&&doAction(Const.SHOW_TIPS,"\u60a8\u7684\u5151\u6362\u7801\u683c\u5f0f\u4e0d\u6b63\u786e");e.removeEventListener(egret.Event.COMPLETE,b,this)}var a={mod:"Code","do":"exchange",p:{}};a.p.code=d;d="h="+c.hashKey+"&data="+JSON.stringify(a)+"&s="+this.getProxyKey(a);a=new egret.URLRequest;a.method=egret.URLRequestMethod.POST;a.data=new egret.URLVariables(d);a.url=c.requestUrl;var e=new egret.URLLoader;
e.addEventListener(egret.Event.COMPLETE,b,this);e.load(a)};c.saveData=function(d){function b(){var a=JSON.parse(e.data);if(0==a.s){if(c.saveTime+=1,c._errorTime=0,GameMainLayer.instance.removeMaskLayer(),a.curTime){var d=(new Date).getTime(),a=1E3*a.curTime;Math.abs(a-d)>6E4*c.difTimeBtwServer&&(c.saveTimeDiffToServer("this","is diffTime",!1,a-d),GameUtils.lockGame())}}else 1==a.s?(c.lockMSG=a.msg||"",GameMainLayer.instance.showStopServiceLayer(c.lockMSG)):3!=a.s&&4!=a.s||c.wanbaRelogin();e.removeEventListener(egret.Event.COMPLETE,
b,this)}var a={mod:"User","do":"saveInfo",p:{}};a.p.data={};a.p.data.saveData=d;a.p.data.time=c.saveTime;d="h="+c.hashKey+"&data="+JSON.stringify(a)+"&s="+this.getProxyKey(a);a=new egret.URLRequest;a.method=egret.URLRequestMethod.POST;a.data=new egret.URLVariables(d);a.url=c.requestUrl;var e=new egret.URLLoader;e.addEventListener(egret.Event.COMPLETE,b,this);e.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){c._errorTime+=1;3<c._errorTime&&GameMainLayer.instance.showMaskLayer()},this);e.load(a)};
c.doReg=function(){function d(){a.removeEventListener(egret.Event.COMPLETE,d,this);var b=JSON.parse(a.data);0==b.s?(egret.localStorage.setItem("bearjoyGLTapGameHashKey1",b.h),c.hashKey=b.h,c.getUserGoal()):c.doReg()}var b={mod:"User","do":"reg",p:{}};b.p.uName=Math.floor(1E8*Math.random())+"@bearjoy.com";b.p.uPass="123456";var a=new egret.URLLoader;a.addEventListener(egret.Event.COMPLETE,d,this);b="data="+JSON.stringify(b)+"&s="+this.getProxyKey(b);a.load(new egret.URLRequest(c.requestUrl+"?"+b))};
c.initPlatform=function(){globalData.openid&&""!=globalData.openid?globalData.egretPlat?(c.requestUrl="http://g1.mix.pregnant.bearjoy.com/api.php",c.platformInfo=platformType_egret):(c.requestUrl="http://glqxz.gz.1251278653.clb.myqcloud.com/api.php",c.platformInfo=platformType_wanba):(c.requestUrl="http://local.bearjoy.gl.bearjoy.com/api.php",c.platformInfo=platformType_bearjoy);egret.localStorage.setItem("request_url",c.requestUrl)};c.login=function(d,b){function a(){f.removeEventListener(egret.Event.COMPLETE,
a,this);var e=JSON.parse(f.data);0==e.s?(c.hashKey=e.h,egret.localStorage.setItem("hashKey",e.h),d?d.call(b):c.getUserGoal()):3==e.s||4==e.s?c.wanbaRelogin():104==e.s?c.wanbaRelogin():50==e.s?e.msg&&(c.isCanLogin=!1,c.lockMSG=e.msg,doAction(Const.INFO_INITED)):c.login()}void 0===d&&(d=null);void 0===b&&(b=null);this.initPlatform();if(c.platformInfo==platformType_bearjoy)this.getUserGoal();else{var e={mod:"User","do":"login",p:{}};e.p.data=globalData;var f=new egret.URLLoader;f.addEventListener(egret.Event.COMPLETE,
a,this);e="data="+JSON.stringify(e)+"&s="+this.getProxyKey(e);f.load(new egret.URLRequest(c.requestUrl+"?"+e))}};c.firstLogin=function(d,b){function a(){var e=JSON.parse(h.data);0==e.s&&doAction(Const.AWARD_EFFECT,{type:"diamond",award:e.gc,updated:!0});d.call(b);h.removeEventListener(egret.Event.COMPLETE,a,this)}var e={mod:"Activity","do":"firstLogin"},e="h="+c.hashKey+"&data="+JSON.stringify(e)+"&s="+this.getProxyKey(e),f=new egret.URLRequest;f.method=egret.URLRequestMethod.POST;f.data=new egret.URLVariables(e);
f.url=c.requestUrl;var h=new egret.URLLoader;h.addEventListener(egret.Event.COMPLETE,a,this);h.load(f)};c.gcToYu=function(d,b){function a(){var e=JSON.parse(h.data);0==e.s&&ActivityManager.getInstance().refreshGcToYu(e);d.call(b,e);h.removeEventListener(egret.Event.COMPLETE,a,this)}var e={mod:"Activity","do":"gcToyu"},e="h="+c.hashKey+"&data="+JSON.stringify(e)+"&s="+this.getProxyKey(e),f=new egret.URLRequest;f.method=egret.URLRequestMethod.POST;f.data=new egret.URLVariables(e);f.url=c.requestUrl;
var h=new egret.URLLoader;h.addEventListener(egret.Event.COMPLETE,a,this);h.load(f)};c.sendToDesktop=function(d,b,a){function e(){var c=JSON.parse(h.data);0==c.s?b&&b.call(a,c.code):b.call(a,null);h.removeEventListener(egret.Event.COMPLETE,e,this)}var f={mod:"User","do":"toDesktop",p:{}};f.p.type=d;d="h="+c.hashKey+"&data="+JSON.stringify(f)+"&s="+this.getProxyKey(f);f=new egret.URLRequest;f.method=egret.URLRequestMethod.POST;f.data=new egret.URLVariables(d);f.url=c.requestUrl;var h=new egret.URLLoader;
h.addEventListener(egret.Event.COMPLETE,e,this);h.load(f)};c.egretLogin=function(d){function b(){a.removeEventListener(egret.Event.COMPLETE,b,this);var e=JSON.parse(a.data);0==e.s?(egret.localStorage.setItem("hashKey",e.h),c.hashKey=e.h,c.getUserGoal()):50==e.s?e.msg&&(c.isCanLogin=!1,c.lockMSG=e.msg,doAction(Const.INFO_INITED)):c.egretLogin()}void 0===d&&(d=null);d&&(globalData.token=d,egret.localStorage.setItem("request_url",c.requestUrl));var a=new egret.URLLoader;a.addEventListener(egret.Event.COMPLETE,
b,this);a.load(new egret.URLRequest(c.loginUrl+"?"+("token="+globalData.token)))};c.wanbaRelogin=function(){GameMainLayer.instance.showReloginLayer()};c.getlt=function(d,b,a){function e(){var c=JSON.parse(h.data);0==c.s?b&&b.call(a,c.code):b.call(a,null);h.removeEventListener(egret.Event.COMPLETE,e,this)}void 0===a&&(a=null);var f={mod:"Code","do":"getIt",p:{}};f.p.type=d;d="h="+c.hashKey+"&data="+JSON.stringify(f)+"&s="+this.getProxyKey(f);f=new egret.URLRequest;f.method=egret.URLRequestMethod.POST;
f.data=new egret.URLVariables(d);f.url=c.requestUrl;var h=new egret.URLLoader;h.addEventListener(egret.Event.COMPLETE,e,this);h.load(f)};c.crossLevel=function(d){function b(){JSON.parse(e.data);e.removeEventListener(egret.Event.COMPLETE,b,this)}var a={mod:"Top","do":"updateTime",p:{}};a.p.lv=d;d="h="+c.hashKey+"&data="+JSON.stringify(a)+"&s="+this.getProxyKey(a);a=new egret.URLRequest;a.method=egret.URLRequestMethod.POST;a.data=new egret.URLVariables(d);a.url=c.requestUrl;var e=new egret.URLLoader;
e.addEventListener(egret.Event.COMPLETE,b,this);e.load(a)};c.getCardList=function(){function d(){var a=JSON.parse(e.data);e.removeEventListener(egret.Event.COMPLETE,d,this);FateController.getInstance().initData(a)}var b={mod:"Card","do":"getList"},b="h="+c.hashKey+"&data="+JSON.stringify(b)+"&s="+this.getProxyKey(b),a=new egret.URLRequest;a.method=egret.URLRequestMethod.POST;a.data=new egret.URLVariables(b);a.url=c.requestUrl;var e=new egret.URLLoader;e.addEventListener(egret.Event.COMPLETE,d,this);
e.load(a)};c.createRequest=function(d,b,a){void 0===a&&(a=null);d="h="+c.hashKey+"&data="+JSON.stringify(d)+"&s="+this.getProxyKey(d);var e=new egret.URLRequest;e.method=egret.URLRequestMethod.POST;e.data=new egret.URLVariables(d);e.url=c.requestUrl;var f=function(){g.removeEventListener(egret.Event.COMPLETE,h,this);g.removeEventListener(egret.IOErrorEvent.IO_ERROR,f,this);GameUtils.unlockScreen();a&&a()},h=function(){var a=JSON.parse(g.data);g.removeEventListener(egret.Event.COMPLETE,h,this);g.removeEventListener(egret.IOErrorEvent.IO_ERROR,
f,this);GameUtils.unlockScreen();b&&b(a)},g=new egret.URLLoader;g.addEventListener(egret.Event.COMPLETE,h,this);g.addEventListener(egret.IOErrorEvent.IO_ERROR,f,this);g.load(e);GameUtils.lockScreen()};c.updateHero=function(d){var b={mod:"Card","do":"upHero",p:{id:d.getValue("id")}};c.createRequest(b,function(a){0==a.s&&(d.changeMaterial(),c.heroCards[a.id]=a.lv,doAction(Const.EVOLVE_REFRESH),doAction(Const.FATE_REFRESH))})};c.buyCard=function(d){function b(){var e=JSON.parse(f.data);f.removeEventListener(egret.Event.COMPLETE,
b,this);f.removeEventListener(egret.IOErrorEvent.IO_ERROR,a,this);0==e.s&&(FateController.getInstance().getCard(e.cardIds),DataCenter.getInstance().changeGc(e.gc),ActivityManager.getInstance().useGc(e.gc),doAction(Const.FATE_REFRESH));GameUtils.unlockScreen()}function a(){f.removeEventListener(egret.Event.COMPLETE,b,this);f.removeEventListener(egret.IOErrorEvent.IO_ERROR,a,this);GameUtils.unlockScreen()}var e={mod:"Card","do":"buyCard",p:{}};e.p.type=d;d="h="+c.hashKey+"&data="+JSON.stringify(e)+
"&s="+this.getProxyKey(e);e=new egret.URLRequest;e.method=egret.URLRequestMethod.POST;e.data=new egret.URLVariables(d);e.url=c.requestUrl;var f=new egret.URLLoader;f.addEventListener(egret.Event.COMPLETE,b,this);f.addEventListener(egret.IOErrorEvent.IO_ERROR,a,this);f.load(e);GameUtils.lockScreen()};c.exchangeFate=function(d,b,a){function e(){GameMainLayer.instance.showLoadingRotation(!1);var c=JSON.parse(h.data);h.removeEventListener(egret.Event.COMPLETE,e,this);0==c.s&&(b.call(a),FateController.getInstance().fateLevelUp(c.fateId),
doAction(Const.FATE_REFRESH))}var f={mod:"Card","do":"exchangeFate",p:{}};f.p.fId=d;d="h="+c.hashKey+"&data="+JSON.stringify(f)+"&s="+this.getProxyKey(f);f=new egret.URLRequest;f.method=egret.URLRequestMethod.POST;f.data=new egret.URLVariables(d);f.url=c.requestUrl;var h=new egret.URLLoader;h.addEventListener(egret.Event.COMPLETE,e,this);h.load(f)};c.getAchieveProgress=function(){c.achieveList=null;var d=new SingleProxy({mod:"Achieve","do":"getList"});d.addEventListener(ProxyEvent.RESPONSE_SUCCEED,
function(b){b=b.responseData;0==b.s&&(c.achieveList=b.l)},this);d.load()};c.reborn=function(c,b,a){GameUtils.lockScreen();for(var e=HeroController.getInstance().getHeroList(),f=0,h=0;h<e.length;h++)f<e[h].lv&&(f=e[h].lv);for(var e=0,g=DataCenter.getInstance().totalData.rebornSkillList,h=0;h<g.length;h++)e<g[h].lv&&(e=g[h].lv);h=DataCenter.getInstance().totalData.currentLevel;c=new SingleProxy({mod:"User","do":"relive",p:{oldNum:c.o,addNum:c.a,lvs:c.lvs,mhl:f,mgl:h,mbl:e}});c.addEventListener(ProxyEvent.RESPONSE_SUCCEED,
function(e){e=e.responseData;1==e.cheat?(e=new StopServiceLayer,e.refreshView("                          \u91cd\u751f\u6570\u636e\u5f02\u5e38"),egret.MainContext.instance.stage.addChild(e)):(0==e.s?b.call(a,e):doAction(Const.SHOW_TIPS,"\u91cd\u751f\u5931\u8d25"),GameUtils.unlockScreen())},this);c.addEventListener(ProxyEvent.ERROR,function(){doAction(Const.SHOW_TIPS,"\u91cd\u751f\u5931\u8d25");GameUtils.unlockScreen()},this);c.load()};c.getUserGoal=function(){function d(){a.removeEventListener(egret.Event.COMPLETE,
d,this);var b=JSON.parse(a.data);0==b.s?(c.platformInfo==platformType_wanba&&(c.openid=globalData.openid,c.openkey=globalData.openkey,c.pf=globalData.pf,c.platform=globalData.platform),c.popNotice=b.i.fatureNotice||!1,0<b.i.fatureNotice&&(c.strNotice=b.i.gonggao),c.userId=b.i.id,c.awdTo=b.i.awdTo,c.winxinUrl=b.i.wxurl,c.boxUrl=b.i.boxurl,c.serverData=b.i.dt,c.heroCards=b.i.heroCards,c.hasPay=b.i.hasPay,c.gcNum=b.i.gc,c.nickName=b.i.nNa||"",c.platUserId=b.i.platUserId?b.i.platUserId:"",c.diamond=b.i.diamond,
c.sfTime=b.i.sf,c.playerRech=b.i.payMoney,b.i.hasOrderGift&&LoopBuyMonitor.getInstance().setAward(),b.i.diffMinutes&&(c.difTimeBtwServer=b.i.diffMinutes),GuildDataManager.getInstance().isHaveGuild=0<b.i.gId,GuildDataManager.getInstance().isHaveGid=b.i.gId,GuildDataManager.getInstance().weaponLevel=b.i.baoLv,GuildDataManager.getInstance().saveDamgTime=b.i.bosssf,ChatManager.getInstace().isServerClose=0==b.i.chatOpen,b.i.pic&&(c.playerHead=b.i.pic),b.i.chatsf&&(ChatManager.getInstace().IntervalSendTime=
b.i.chatsf),ActivityManager.getInstance().initList(b.i.activitys),b.i.activitys&&(b.i.activitys.wuerling&&(c.startTime=1E3*b.i.activitys.wuerling.startTime,c.endTime=1E3*b.i.activitys.wuerling.endTime,ActivityDrop.init(b.i.activitys.wuerling)),b.i.activitys.dayrecharge&&(c.rechargeStartTime=1E3*b.i.activitys.dayrecharge.startTime,c.rechargeEndTime=1E3*b.i.activitys.dayrecharge.endTime,c.rechargeData=b.i.activitys.dayrecharge,c.rechargeActivityType=1),b.i.activitys.dayrecharge1&&(c.rechargeStartTime=
1E3*b.i.activitys.dayrecharge1.startTime,c.rechargeEndTime=1E3*b.i.activitys.dayrecharge1.endTime,c.rechargeData=b.i.activitys.dayrecharge1,c.rechargeActivityType=2),b.i.activitys.ordergift&&LoopBuyMonitor.getInstance().initData(b.i.activitys.ordergift)),c.showWeixinBtn=1==b.i.wx?!0:!1,c.downLoadURL=b.i.appDownUrl,c.weixinURL=b.i.wxBtnUrl,c.loginDay=b.i.loginDays,c.leftTime=b.i.loginLeftTime,c.currentServerTime=1E3*b.i.curTime,c.currentTime=1E3*b.i.curTime,c.initedTime=(new Date).getTime(),b.i.share&&
(c.leftShareNum=b.i.share.num||0,c.shareInfo=b.i.share.params||{}),c.toDesktop=b.i.todesktop,c.inviteOpen=b.i.inviteOpen||0,c.addHunYu=0,b.i.giveYu&&0<b.i.giveYu&&(c.addHunYu=b.i.giveYu),c.gameInited=!0,doAction(Const.INFO_INITED),c.getAchieveProgress(),PlatformFactory.getPlatform().name==PlatformTypes.EGRET?(EgretH5Sdk.isOpenAttention(c.egretAppId,c.platUserId,function(a){c.canOpenAttention=a.status;c.attentionText=a.text||"bailuyouxi";GameUtils.isAiWeiGame()&&(VuTimesShareData.getInstance().setAttention(a&&
3==a.status),doAction("vutimes_share_change"));doAction("attantion_inited")},this),EgretH5Sdk.isOpenShare(c.egretAppId,c.platUserId,function(a){1==a.status&&!1==GameUtils.isAiWeiGame()&&(c.isShareOpen=!0,doAction(Const.SHARE_INITED))},this)):PlatformFactory.getPlatform().name==PlatformTypes.WANBA&&(c.isShareOpen=1==b.i.wbos?!0:!1,c.wanbaAwardTxt=b.i.wanbaAwardTxt)):1==b.s?(c.stopService=1,c.lockMSG=b.msg||"",doAction(Const.INFO_INITED)):3==b.s||4==b.s?c.wanbaRelogin():c.getUserGoal()}if(c.platformInfo==
platformType_bearjoy){var b=egret.localStorage.getItem("bearjoyGLTapGameHashKey1");if(!b){c.doReg();return}egret.localStorage.setItem("hashKey",b);c.hashKey=b}b={mod:"User","do":"getInfo",p:{}};b.p.data=globalData;var a=new egret.URLLoader;a.addEventListener(egret.Event.COMPLETE,d,this);b="h="+c.hashKey+"&data="+JSON.stringify(b)+"&s="+this.getProxyKey(b);a.load(new egret.URLRequest(c.requestUrl+"?"+b))};c.nameNation=function(d){var b={mod:"User","do":"nameNation",p:{}};b.p.name=d;var b="h="+c.hashKey+
"&data="+JSON.stringify(b)+"&s="+this.getProxyKey(b),a=new egret.URLRequest;a.method=egret.URLRequestMethod.POST;a.data=new egret.URLVariables(b);a.url=c.requestUrl;var e=new egret.URLLoader;e.addEventListener(egret.Event.COMPLETE,function(){var a=JSON.parse(e.data);0==a.s?(GameMainLayer.instance.hideNameLayer(),c.nickName=d,doAction(Const.CHANGE_NAME,d)):130==a.s?doAction(Const.SHOW_TIPS,"\u6635\u79f0\u5305\u542b\u4e86\u975e\u6cd5\u5b57\u7b26"):132==a.s&&doAction(Const.SHOW_TIPS,"\u8be5\u6635\u79f0\u5df2\u7ecf\u5b58\u5728\u4e86")},
this);e.load(a)};c.joinGuild=function(){var d=GuildModel.combinKey("Guild_home");GuildModel.addACdTimeToRep(d,1E4,!1)?(d=new SingleProxy({mod:"Guild","do":"home",p:{}}),d.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(b){b=b.responseData;if(0==b.s)if(0==b.gId){GuildDataManager.getInstance().clearJoinList();if(0<b.gl.length)for(var a=0;a<b.gl.length;a++){var e=new GuildInfo;e.guildName=b.gl[a].name;e.guildID=b.gl[a].id;e.guildHostUID=b.gl[a].uid;e.guildHostName=b.gl[a].uname;e.guildCurMbCount=
b.gl[a].mnum;e.guildMaxMbCount=b.gl[a].maxnum;e.setIsAplGuild(0<b.gl[a].hasApl);e.guildNotice=b.gl[a].notice;GuildDataManager.getInstance().addItemToJoinList(e)}null!=GameMainLayer.instance.guildCreate&&GameMainLayer.instance.guildCreate.visible?doAction(Const.Guild_Joinlist):doAction(Const.Guild_StartData)}else c.repMyGuildInfo()},this),d.addEventListener(ProxyEvent.RESPONSE_ERROR,function(b){7404==b.responseData.s&&(doAction(Const.SHOW_TIPS,"\u4f60\u5f53\u524d\u65e0\u5e2e\u6d3e"),GuildDataManager.getInstance().setGldState(!1),
GameMainLayer.instance.setGuildLayer(!1))},this),d.load()):null==GameMainLayer.instance.guildCreate||!GameMainLayer.instance.guildCreate.visible||null!=GameMainLayer.instance.joinView&&GameMainLayer.instance.joinView.visible?doAction(Const.Guild_StartData):doAction(Const.Guild_Joinlist)};c.repMyGuildInfo=function(){var d=GuildModel.combinKey("Guild_Memberhome");GuildModel.addACdTimeToRep(d,6E3,!1)?(d=new SingleProxy({mod:"Guild_Member","do":"home",p:{}}),d.addEventListener(ProxyEvent.RESPONSE_SUCCEED,
function(b){b=b.responseData;if(0==b.s){var a=new GuildInfo;a.setData(b.i.gname,b.i.gid,b.i.gmnum,b.i.gmaxnum,b.i.cuid,b.i.cname,b.i.gcb,b.i.chip,b.i.conNum,b.i.enroll,b.i.curTime,b.i.moveTime,b.i.nextTime);ChatManager.getInstace().myGldID=a.guildID;if(0<b.ml.length)for(var e=0;e<b.ml.length;e++){var d=new GuildMemberInfo(b.ml[e].name,b.ml[e].uId,b.ml[e].cb,b.ml[e].acTime,b.ml[e].r,0,"");console.log(b.ml[e].name);a.addMbItem(d)}a.setIsMyGuild(!0);GuildDataManager.getInstance().setMyGldInfo(a);GuildModel.isWulinDurtion()?
(GuildDataManager.getInstance().createWulinTimer(),GuildDataManager.getInstance().enterWulin(!0)):(GameMainLayer.instance.setGuildLayer(!0),doAction(Const.Guild_ShowMain));GuildDataManager.getInstance().createTimer();GuildDataManager.getInstance().isInitData&&c.repGetMyGldRank();GuildDataManager.getInstance().isInitData=!0}},this),d.addEventListener(ProxyEvent.RESPONSE_ERROR,function(b){7404==b.responseData.s&&(doAction(Const.SHOW_TIPS,"\u4f60\u5f53\u524d\u65e0\u5e2e\u6d3e"),GuildDataManager.getInstance().setGldState(!1),
null!=GameMainLayer.instance.myGuildView&&GameMainLayer.instance.myGuildView.visible&&GameMainLayer.instance.setGuildLayer(!1))},this),d.load()):GuildDataManager.getInstance().isHaveGuild?GuildModel.isWulinDurtion()?(GuildDataManager.getInstance().createWulinTimer(),GuildDataManager.getInstance().enterWulin(!0)):(GameMainLayer.instance.setGuildLayer(!0),doAction(Const.Guild_ShowMain)):doAction(Const.Guild_StartData)};c.createGuild=function(d){var b=GuildModel.combinKey("Guild_Membercreate");GuildModel.addACdTimeToRep(b)&&
(d=new SingleProxy({mod:"Guild","do":"create",p:{gName:d}}),d.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(a){0==a.responseData.s&&(doAction(Const.SHOW_TIPS,"\u521b\u5efa\u6210\u529f"),GameMainLayer.instance.hideCreateGuild(),DataCenter.getInstance().reduceGc(1E3,!0),GuildDataManager.getInstance().setGldState(!0),c.repMyGuildInfo())},this),d.addEventListener(ProxyEvent.RESPONSE_ERROR,function(a){a=a.responseData;7410==a.s?doAction(Const.SHOW_TIPS,"\u4f60\u5df2\u7ecf\u6709\u5e2e\u4f1a\u4e86"):
7418==a.s?doAction(Const.SHOW_TIPS,"\u5e2e\u6d3e\u5df2\u5b58\u5728"):doAction(Const.SHOW_TIPS,"\u521b\u5efa\u5931\u8d25")},this),d.load())};c.searchGuild=function(c){var b=GuildModel.combinKey("Guild_Membersearch");GuildModel.addACdTimeToRep(b)?(c=new SingleProxy({mod:"Guild","do":"search",p:{sw:c}}),c.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(a){a=a.responseData;if(0==a.s)if(GuildDataManager.getInstance().clearJoinList(),0<a.gl.length){for(var b=0;b<a.gl.length;b++){var c=new GuildInfo;
c.guildName=a.gl[b].name;c.guildID=a.gl[b].id;c.guildHostUID=a.gl[b].uid;c.guildHostName=a.gl[b].uname;c.guildCurMbCount=a.gl[b].mnum;c.guildMaxMbCount=a.gl[b].maxnum;c.setIsAplGuild(0<a.gl[b].hasApl);c.guildNotice=a.gl[b].notice;GuildDataManager.getInstance().addItemToJoinList(c)}doAction(Const.Guild_Search)}else doAction(Const.SHOW_TIPS,"\u672a\u627e\u5230\u5e2e\u6d3e")},this),c.load()):doAction(Const.Guild_Search)};c.aplyToJoin=function(c){var b=GuildModel.combinKey("Guild_Memberapply");GuildModel.addACdTimeToRep(b)&&
(c=new SingleProxy({mod:"Guild_Member","do":"apply",p:{gId:c.guildID}}),c.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(a){a=a.responseData;0==a.s&&0<a.gId&&(a=GuildDataManager.getInstance().findItemByGID(a.gId),null!=a&&(a.setIsAplGuild(!0),GuildDataManager.getInstance().setGldState(!0),doAction(Const.Guild_Search)))},this),c.addEventListener(ProxyEvent.RESPONSE_ERROR,function(a){7410==a.responseData.s&&doAction(Const.SHOW_TIPS,"\u4f60\u5f53\u524d\u5df2\u6709\u5e2e\u6d3e")},this),c.load())};
c.getAplyList=function(){var c=GuildModel.combinKey("Guild_MembercheckList");GuildModel.addACdTimeToRep(c,3E3,!1)?(c=new SingleProxy({mod:"Guild_Member","do":"checkList",p:{}}),c.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(b){b=b.responseData;if(0==b.s){var a=GuildDataManager.getInstance().getMyGldInfo();if(null!=a){a.clearAplyList();for(var e=0;e<b.l.length;e++){var c=new GldAplyInfo(b.l[e].uId,b.l[e].uName,b.l[e].time,b.l[e].aId,b.l[e].acTime,b.l[e].shenbin);a.addAplyItem(c)}doAction(Const.Guild_showAplyList)}}},
this),c.addEventListener(ProxyEvent.RESPONSE_ERROR,function(b){7404==b.responseData.s&&(GuildDataManager.getInstance().setGldState(!1),null!=GameMainLayer.instance.myGuildView&&GameMainLayer.instance.myGuildView.visible&&GameMainLayer.instance.setGuildLayer(!1))},this),c.load()):doAction(Const.Guild_showAplyList)};c.actionToAplyer=function(c,b){var a=GuildModel.combinKey("Guild_Membercheck");GuildModel.addACdTimeToRep(a)?(a=new SingleProxy({mod:"Guild_Member","do":"check",p:{action:c,aId:b}}),a.addEventListener(ProxyEvent.RESPONSE_SUCCEED,
function(a){var b=a.responseData;0==b.s&&(a=GuildDataManager.getInstance().getMyGldInfo(),null!=a&&(b=GuildModel.findItemInAplyList(b.aId),a.removeAplyItem(b)),doAction(Const.Guild_showAplyList))},this),a.load()):doAction(Const.Guild_showAplyList)};c.killMember=function(c){var b=GuildModel.combinKey("Guild_MemberkickUser");GuildModel.addACdTimeToRep(b)&&(c=new SingleProxy({mod:"Guild_Member","do":"kickUser",p:{tId:c}}),c.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(a){a=a.responseData;0==
a.s&&(ChatManager.getInstace().myGldID=0,null!=GuildDataManager.getInstance().getMyGldInfo()&&GuildModel.removeMbItemByID(a.uId),doAction(Const.SHOW_TIPS,"\u6210\u529f\u8e22\u51fa\u8be5\u73a9\u5bb6"),doAction(Const.Guild_ShowMain))},this),c.load())};c.dissolveGuild=function(){var c=GuildModel.combinKey("Guild_Memberdissolution");GuildModel.addACdTimeToRep(c)&&(c=new SingleProxy({mod:"Guild_Member","do":"dissolution",p:{}}),c.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(b){0==b.responseData.s&&
(ChatManager.getInstace().myGldID=0,GuildDataManager.getInstance().setGldState(!1),null!=GameMainLayer.instance.myGuildView&&GameMainLayer.instance.myGuildView.visible&&GameMainLayer.instance.setGuildLayer(!1))},this),c.load())};c.quitFromGuild=function(){var c=GuildModel.combinKey("Guild_Memberquit");GuildModel.addACdTimeToRep(c)&&(c=new SingleProxy({mod:"Guild_Member","do":"quit",p:{}}),c.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(b){0==b.responseData.s&&(ChatManager.getInstace().myGldID=
0,GuildDataManager.getInstance().setGldState(!1),null!=GameMainLayer.instance.myGuildView&&GameMainLayer.instance.myGuildView.visible&&GameMainLayer.instance.setGuildLayer(!1))},this),c.load())};c.donateMoney=function(d){var b=GuildModel.combinKey("Guild_Membercontribute");GuildModel.addACdTimeToRep(b)&&(d=new SingleProxy({mod:"Guild_Member","do":"contribute",p:{type:d}}),d.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(a){a=a.responseData;if(0==a.s){var b=GuildDataManager.getInstance().getMyGldInfo();
if(null!=b){var d=GuildModel.getMyInfoFromList(c.userId);null!=d&&(d.mbCb+=a.addNum);1==a.type?(doAction(Const.SHOW_TIPS,"\u6311\u6218\u6210\u529f\uff0c\u83b7\u5f97\u6350\u732e"+a.addNum),b.guildCb=a.conNum,b.reduceAcCount()):(a.type=2,b.guildCb=a.conNum,doAction(Const.SHOW_TIPS,"\u6350\u732e\u6210\u529f"),DataCenter.getInstance().reduceGc(100,!0),doAction(Const.Guild_donateView))}}},this),d.load())};c.upLevelWeapon=function(){var c=GuildModel.combinKey("Guild_MemberupBao");GuildModel.addACdTimeToRep(c)&&
(c=new SingleProxy({mod:"Guild_Member","do":"upBao",p:{}}),c.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(b){b=b.responseData;if(0==b.s){var a=GuildDataManager.getInstance().getMyGldInfo();null!=a&&(a.reducePiceCount(b.chip),doAction(Const.SHOW_TIPS,"\u5347\u7ea7\u6210\u529f"),GuildDataManager.getInstance().weaponLevel=b.lv,GuildModel.refleshDPS(),doAction(Const.REFRESH_SKILL_VIEW),doAction(Const.Guild_UplevelWeapon))}},this),c.load())};c.repGetMyGldRank=function(){var c=GuildModel.combinKey("Guild_MembergetTop");
GuildModel.addACdTimeToRep(c,1E4,!1)?(c=new SingleProxy({mod:"Guild_Member","do":"getTop",p:{}}),c.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(b){b=b.responseData;if(0==b.s){var a=GuildDataManager.getInstance().getMyGldInfo();null!=a&&(0<b.i.canAwd?a.setMyRankInfo(b.i.top,0<b.i.canAwd,b.i.num,b.i.awdNum,b.i.otherNum):a.setMyRankInfo(b.i.top,0<b.i.canAwd,b.i.num,0,0));if(0<b.l.length)for(GuildDataManager.getInstance().clearGldRankList(),a=0;a<b.l.length;a++){var e=new GuildInfo;e.guildName=
b.l[a].name;e.guildID=b.l[a].id;e.guildHostUID=b.l[a].uid;e.guildHostName=b.l[a].uname;e.myGldDamg=b.l[a].num;e.myGldRank=b.l[a].top;GuildDataManager.getInstance().addItemToGldRankList(e)}doAction(Const.Guild_openGldRank)}},this),c.addEventListener(ProxyEvent.RESPONSE_ERROR,function(b){7404==b.responseData.s&&(GuildDataManager.getInstance().setGldState(!1),null!=GameMainLayer.instance.myGuildView&&GameMainLayer.instance.myGuildView.visible&&GameMainLayer.instance.setGuildLayer(!1))},this),c.load()):
doAction(Const.Guild_openGldRank)};c.repGetWonRankList=function(){var c=GuildModel.combinKey("Guild_MemberpersonTop");GuildModel.addACdTimeToRep(c,1E4,!1)?(c=new SingleProxy({mod:"Guild_Member","do":"personTop",p:{}}),c.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(b){b=b.responseData;if(0==b.s){var a=GuildDataManager.getInstance().getMyGldInfo();null!=a&&a.setMyPersonRankInfo(b.i.num.toString(),b.i.top);if(0<b.l.length)for(GuildDataManager.getInstance().clearGldWonRankList(),a=0;a<b.l.length;a++){var e=
new GuildMemberInfo(b.l[a].uname,b.l[a].uid,0,0,0,b.l[a].top,b.l[a].num);GuildDataManager.getInstance().addItemToGldOwnList(e)}doAction(Const.Guild_openGldWonRank)}},this),c.addEventListener(ProxyEvent.RESPONSE_ERROR,function(b){7404==b.responseData.s&&(GuildDataManager.getInstance().setGldState(!1),null!=GameMainLayer.instance.myGuildView&&GameMainLayer.instance.myGuildView.visible&&GameMainLayer.instance.setGuildLayer(!1))},this),c.load()):doAction(Const.Guild_openGldWonRank)};c.recAward=function(){var c=
GuildModel.combinKey("Guild_MembertopAward");GuildModel.addACdTimeToRep(c)&&(c=new SingleProxy({mod:"Guild_Member","do":"topAward",p:{}}),c.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(b){b=b.responseData;if(0==b.s){var a=GuildDataManager.getInstance().getMyGldInfo();null!=a&&(a.isCanRecAwd=!1,a.myGldRank=b.top,a.awdNum=b.awdNum,a.exAwdNum=b.otherNum,GuildModel.isMyCharMain()?a.guildPice+=a.exAwdNum+a.awdNum:a.guildPice+=+a.awdNum,doAction(Const.Guild_refleshReward))}},this),c.load())};c.sendDamgToServer=
function(d){c.totalDamge+=d;console.log("\u4f20\u9012\u4f24\u5bb3="+c.totalDamge);d=new SingleProxy({mod:"Guild_Member","do":"moveMountain",p:{num:d}});d.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(b){},this);d.load()};c.signup=function(){var c=GuildModel.combinKey("Guild_Memberenroll");GuildModel.addACdTimeToRep(c)&&(c=new SingleProxy({mod:"Guild_Member","do":"enroll",p:{}}),c.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(b){0==b.responseData.s&&(b=GuildDataManager.getInstance().getMyGldInfo(),
null!=b&&b.setGldIsEnRoll(!0),doAction(Const.Guild_refleshLeftTime),doAction(Const.SHOW_TIPS,"\u62a5\u540d\u6210\u529f"))},this),c.load())};c.repCharMainIsEnroll=function(){if(!c.isRep){c.isRep=!0;var d=new SingleProxy({mod:"Guild_Member","do":"isEnroll",p:{}});d.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(b){b=b.responseData;if(0==b.s){var a=GuildDataManager.getInstance().getMyGldInfo();null!=a&&(a.setGldIsEnRoll(0<b.i.enroll),a.guildAcDuiTime=b.i.moveTime,a.guildNextOpenTime=b.i.nextTime,
a.guildCurTime=b.i.curTime,0>=a.guildAcDuiTime&&0<b.i.enroll&&(a.guildAcDuiTime=3600))}},this);d.load()}};c.recvGuildRechReward=function(c,b){void 0===b&&(b=null);var a=new SingleProxy({mod:"Activity","do":"guildRecharge",p:{id:c}});a.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(a){a=a.responseData;0==a.s&&ActivityManager.getInstance().refreshGuildRechData(a);b&&b()},this);a.addEventListener(ProxyEvent.RESPONSE_ERROR,function(a){b&&b()},this);a.load()};c.getChatList=function(d){d=new SingleProxy({mod:"Chat",
"do":"getList",p:{time:d}});d.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(b){b=b.responseData;if(0==b.s){b.w1Time&&(ChatManager.getInstace().lastReadJumpMsgTime=b.w1Time);0<b.gId&&(ChatManager.getInstace().myGldID=b.gId,ChatManager.getInstace().myGldName=b.gName);b.curTime&&(ChatManager.getInstace().lastGetListTime=b.curTime);b.freeNum&&(ChatManager.getInstace().leftNoramlFreeCout=b.freeNum);b.pic&&(ChatManager.getInstace().myHeadIcon=b.pic);if(0<b.w1.length)for(var a=0;a<b.w1.length;a++){var e=
b.w1[a],d=new ChatItemData;e.mId&&(d.msgID=e.mId);d.uid=e.uId;d.playerName=e.name;d.chatContent=e.ct;d.sendTime=e.time;d.playerIcon=e.pic;d.guildID=e.gId;d.chatType=2;e.gId&&(d.guildName=e.gName);d.uid!=c.userId&&d.sendTime>ChatManager.getInstace().lastReadJumpMsgTime&&864E5>=d.sendTime-ChatManager.getInstace().lastReadJumpMsgTime&&(d.playerName?doAction(Const.Chat_jumpScreen,d.playerName+":"+d.chatContent):doAction(Const.Chat_jumpScreen,d.chatContent));ChatManager.getInstace().addMsgItemWithNoReapeat(d)}if(0<
b.w2.length)for(a=0;a<b.w2.length;a++)e=b.w2[a],d=new ChatItemData,e.mId&&(d.msgID=e.mId),d.uid=e.uId,d.playerName=e.name,d.chatContent=e.ct,d.sendTime=e.time,d.chatType=0,ChatManager.getInstace().addMsgItemWithNoReapeat(d);if(0<b.gId&&b.gl&&0<b.gl.length)for(a=0;a<b.gl.length;a++)e=b.gl[a],d=new ChatItemData,e.mId&&(d.msgID=e.mId),d.uid=e.uId,d.playerName=e.name,d.chatContent=e.ct,d.sendTime=e.time,d.chatType=1,ChatManager.getInstace().addMsgItemWithNoReapeat(d);ChatManager.getInstace().isInitData=
!0;doAction(Const.Chat_refleshView,ChatManager.getInstace().curAtChatType)}},this);d.load()};c.worldChat=function(c,b){if(GuildModel.addACdTimeToRep(GuildModel.combinKey("Chatworld"),1E4)){ChatManager.getInstace().isCanSendSuc=!0;var a=new SingleProxy({mod:"Chat","do":"world",p:{type:c,ct:b}});a.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(a){var b=a.responseData;if(0==b.s){a=b.type;b.gc&&DataCenter.getInstance().reduceGc(Math.abs(b.gc),!0);var b=b.add,c=null;1==a?(c=ChatManager.getInstace().getListByType(2),
a=new ChatItemData,a.msgID=b.mId,a.uid=b.uId,a.playerName=b.name,a.chatContent=b.ct,a.sendTime=b.time,a.playerIcon=b.pic,a.guildID=b.gId,0<a.guildID&&(a.guildName=b.gName),a.chatType=2,c&&0<c.length&&(c[0].playiconTexure&&(a.playiconTexure=c[0].playiconTexure),c[0]=a),ChatManager.getInstace().addMsgItemWithNoReapeat(a)):2==a&&(c=ChatManager.getInstace().getListByType(0),a=new ChatItemData,a.msgID=b.mId,a.uid=b.uId,a.playerName=b.name,a.chatContent=b.ct,a.sendTime=b.time,a.chatType=0,c&&0<c.length&&
(c[0].playiconTexure&&(a.playiconTexure=c[0].playiconTexure),c[0]=a),ChatManager.getInstace().addMsgItemWithNoReapeat(a),ChatManager.getInstace().reduceLeftFreeCount())}},this);a.load()}else doAction(Const.SHOW_TIPS,"\u4f60\u8bf4\u8bdd\u9891\u7e41\u4e86\uff0c\u4f11\u606f\u4e0b")};c.guildChat=function(c){GuildModel.addACdTimeToRep(GuildModel.combinKey("Chatguild"),1E4)?(ChatManager.getInstace().isCanSendSuc=!0,c=new SingleProxy({mod:"Chat","do":"guild",p:{ct:c}}),c.addEventListener(ProxyEvent.RESPONSE_SUCCEED,
function(b){var a=b.responseData;b=a.add;var e=null;0==a.s&&(e=ChatManager.getInstace().getListByType(1),a=new ChatItemData,a.msgID=b.mId,a.uid=b.uId,a.playerName=b.name,a.chatContent=b.ct,a.sendTime=b.time,a.chatType=1,e&&0<e.length&&(e[0].playiconTexure&&(a.playiconTexure=e[0].playiconTexure),e[0]=a),ChatManager.getInstace().addMsgItemWithNoReapeat(a))},this),c.load()):doAction(Const.SHOW_TIPS,"\u4f60\u8bf4\u8bdd\u9891\u7e41\u4e86\uff0c\u4f11\u606f\u4e0b")};c.getGldChatReadTime=function(){var c=
new SingleProxy({mod:"Chat","do":"read",p:{}});c.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(b){b=b.responseData;0==b.s&&(ChatManager.getInstace().lastReadGuildTime=b.time)},this);c.load()};c.saveTimeDiffToServer=function(c,b,a,e){c=new SingleProxy({mod:"User","do":"uploadLog",p:{logstr:c+"__"+b+"__"+a+"__"+e}});c.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(a){},this);c.load()};c.logHoly=function(){var d=egret.localStorage.getItem(c.userId+"bearjoyTapGameDataHoly");if(d){var b=
egret.localStorage.getItem(c.userId+"bearjoyTapGameDataHolySet"),d=new SingleProxy({mod:"User","do":"uploadLog",p:{logstr:"logHoly"+d+"---"+b}});d.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(a){egret.localStorage.removeItem(c.userId+"bearjoyTapGameDataHoly");egret.localStorage.removeItem(c.userId+"bearjoyTapGameDataHolySet")},this);d.load()}};c.platformInfo=platformType_bearjoy;c.appid="1104439632";c.isVIP=!1;c.vipLevel=0;c.jifen=-1;c.network=null;c.hashKey="";c.nickName="";c.defaultNickName=
"\u695a\u7559\u9999";c.platUserId="";c.shareInfo={};c.awdTo={};c.toInfo=null;c.winxinUrl=null;c.boxUrl=null;c.diamond=null;c.saveTime=1;c.serverData={};c.hasPay=0;c.heroCards={};c.gcNum=0;c.gameInited=!1;c.sfTime=6;c.userId="";c._errorTime=0;c.startTime=-1;c.currentTime=-1;c.endTime=-1;c.rechargeRMB=0;c.loginAwarded=!1;c.rechargeStartTime=-1;c.rechargeEndTime=-1;c.canOpenAttention=-1;c.attentionText="";c.isShareOpen=!1;c.leftShareNum=0;c.egretAppId=66;c.showWeixinBtn=!1;c.downLoadURL="http://gl.heitao.com";
c.weixinURL="";c.openRechargeTime=-1;c.initedTime=-1;c.currentServerTime=-1;c.loginDay=1;c.leftTime=0;c.popNotice=!1;c.noticeShow=!1;c.toDesktop=0;c.inviteOpen=0;c.stopService=0;c.lockMSG="";c.strNotice="";c.isCanLogin=!0;c.txtcanotloginMsg="";c.backUser=!1;c.playerHead="";c.difTimeBtwServer=30;c.wanbaAwardTxt="";c.addHunYu=0;c.biaoji=!1;c.achieveList=null;c.totalDamge=0;c.isRep=!1;return c}();ProxyUtils.prototype.__class__="ProxyUtils";
var MainTickController=function(){function c(){this._tickNumber=this._timePiece=0;this.guildPause=this.isPause=!1;this._clickTouchTime=this._clickTime=0}var d=c.prototype;c.getInstance=function(){null==this._instance&&(this._instance=new c,this._instance.init());return this._instance};d.init=function(){this._clickTime=0;addAction(Const.CHANGE_SPEED,this.changeSpeed,this)};d.changeSpeed=function(b){Time.clearInterval(this._timeID);1>b&&(b=1);this._timeID=Time.setInterval(this.tick,this,33/b)};d.startTick=
function(){this._timeID=Time.setInterval(this.tick,this,33);this._saveID=Time.setInterval(this.saveData,this,1E3)};d.clickOneTime=function(){this._clickTime+=1};d.clickTouchTime=function(){this._clickTouchTime+=1};d.saveData=function(){this.isPause||(30<=this._clickTime?(this.isPause=!0,GameMainLayer.instance.showLockLayer("\u4e0e\u670d\u52a1\u5668\u8fde\u63a5\u65ad\u5f00")):30<=this._clickTouchTime?(this.isPause=!0,GameMainLayer.instance.showLockLayer("\u4e0e\u670d\u52a1\u5668\u8fde\u63a5\u65ad\u5f00\u5566")):
(this._clickTime=this._clickTouchTime=0,0<ProxyUtils.leftTime&&(ProxyUtils.leftTime-=1),VuTimesShareData.getInstance().countDown(),this._tickNumber+=1,DataCenter.getInstance().saveLocalData(),this._tickNumber>=ProxyUtils.sfTime&&(this._tickNumber=0,DataCenter.getInstance().currentTime=(new Date).getTime(),DataCenter.getInstance().saveData()),this.guildPause||(DataCenter.getInstance().resetRecordAttack(),applyFilters(Const.SKILL_LAYER_EXSIT,!1)&&DataCenter.getInstance().refreshCurrentDPS(),DataCenter.getInstance().statistics.addTime(StatisticsType.onLineTime))))};
d.tick=function(){if(!this.isPause){this._timePiece+=1;30<this._timePiece&&(this._timePiece=0);for(var b=new NumberModel,a=HeroController.getInstance().getPieceData(this._timePiece),e=applyFilters(Const.ISBOSS,!1),c=0;c<a.length;c++)a[c].isDead()||(e?b.add(a[c].bossDps):b.add(a[c].dps));b=b.getNumer();"0"!=b&&doAction(Const.HERO_ATTACK,b)}};d.dispose=function(){removeEventsByTarget(this);Time.clearInterval(this._timeID);Time.clearInterval(this._saveID)};return c}();
MainTickController.prototype.__class__="MainTickController";var ProxyErrorCode=function(){function c(){}c.ERROR_DATA=-1E3;c.TIME_OUT=-1001;c.ERROR_REQUEST=-1002;return c}();ProxyErrorCode.prototype.__class__="ProxyErrorCode";
var Proxy=function(c){function d(a){void 0===a&&(a={});c.call(this);this._isTimeout=!1;this._timeoutId=null;this._customParams={};this._params=this.formatParams(a);this._requestUrl=egret.localStorage.getItem("request_url")}__extends(d,c);var b=d.prototype;b.formatParams=function(a){if(a&&!a.hasOwnProperty("do")&&a.hasOwnProperty("mod")){var b=a.mod;-1<b.indexOf(".")&&(b=b.split("."),a.mod=b[0],a["do"]=b[1])}return a};Object.defineProperty(b,"requestUrl",{get:function(){return this._requestUrl},set:function(a){this._requestUrl=
a},enumerable:!0,configurable:!0});b.paramsToQueryString=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];for(var b=[],c=0;c<a.length;c++){var d=a[c],g;for(g in d)b.push(g+"="+d[g])}return b.join("&")};b.load=function(){var a=this,b=-1==this._requestUrl.indexOf("?")?this._requestUrl+"?":this._requestUrl;"?"!=b[b.length-1]&&"&"!=b[b.length-1]&&(b+="&");var c=applyFilters("load_proxy",this);this._status=ProxyStatus.REQUEST;doAction("proxy_status_reqeust",this);if(c===this||!0===
c){this._status=ProxyStatus.WAIT;doAction("proxy_status_wait",this);var c=egret.localStorage.getItem("hashKey"),h=this.getParamString(),g=h+"xjdjjddasdf9jhad2~1f2a3",l=new md5;this.addParam("s",l.hex_md5(g));c=this.paramsToQueryString({h:c,data:h},this._customParams,d._globalParams);b+=c;c=new egret.URLRequest;c.method=egret.URLRequestMethod.POST;c.data=new egret.URLVariables(b.substring(b.lastIndexOf("?")+1,b.length));c.url=b.substring(0,b.lastIndexOf("?"));var k=new egret.URLLoader;k.addEventListener(egret.IOErrorEvent.IO_ERROR,
this.onError,this);k.addEventListener(egret.Event.COMPLETE,this.onComplete,this);this._timeoutId=Time.setTimeout(function(){k.removeEventListener(egret.IOErrorEvent.IO_ERROR,a.onError,a);k.removeEventListener(egret.Event.COMPLETE,a.onComplete,a);a._errorCode=ProxyErrorCode.TIME_OUT;a._errorMessage="\u8bf7\u6c42\u8d85\u65f6";a._isTimeout=!0;doAction("proxy_timeout",a);a.dispatchEvent(new ProxyEvent(ProxyEvent.TIME_OUT,a));a.dispatchEvent(new ProxyEvent(ProxyEvent.ERROR,a))},this,d._timeout);k.load(c)}};
Object.defineProperty(b,"isTimeout",{get:function(){return this._isTimeout},enumerable:!0,configurable:!0});b.onError=function(a){this._isRequestSucceed=!1;this._errorMessage="\u8bf7\u6c42\u5931\u8d25";this._errorCode=ProxyErrorCode.ERROR_REQUEST;Time.clearTimeout(this._timeoutId);this.dispatchEvent(new ProxyEvent(ProxyEvent.REQUEST_FAIL,this));this.dispatchEvent(new ProxyEvent(ProxyEvent.ERROR,this));doAction("proxy_request_error",this);doAction("proxy_status_response",this)};b.onResponse=function(a){this._responseData=
a;this._isResponseSucceed=!1;this._status=ProxyStatus.RESPONSE;this._responseData&&this._responseData.hasOwnProperty("s")&&(this._isResponseSucceed=0==this._responseData.s);this.dispatchEvent(new ProxyEvent(ProxyEvent.REQUEST_SUCCEED,this));this._errorCode=this._responseData?this._responseData.s:ProxyErrorCode.ERROR_DATA;this._isRequestSucceed=!0;this._isResponseSucceed?(doAction("proxy_response_succeed",this),this.dispatchEvent(new ProxyEvent(ProxyEvent.RESPONSE_SUCCEED,this))):(doAction("proxy_response_error",
this),this.dispatchEvent(new ProxyEvent(ProxyEvent.RESPONSE_ERROR,this)),this.dispatchEvent(new ProxyEvent(ProxyEvent.ERROR,this)));doAction("proxy_request_succeed",this);doAction("proxy_status_response",this)};b.onComplete=function(a){Time.clearTimeout(this._timeoutId);a=a.target;var b=null;try{b=JSON.parse(a.data)}catch(c){}this.onResponse(b)};b.getURLVariables=function(a){var b=[],c;for(c in a)b.push(c+"="+a[c]);a=b.join("&");return new egret.URLVariables(a)};b.getParamByName=function(a){return this._params?
this._params[a]:null};b.hasParamByName=function(a){return this._params?this._params.hasOwnProperty(a):!1};Object.defineProperty(b,"params",{get:function(){return this._params},enumerable:!0,configurable:!0});Object.defineProperty(b,"responseData",{get:function(){return this._responseData},enumerable:!0,configurable:!0});Object.defineProperty(b,"isResponseSucceed",{get:function(){return this._isResponseSucceed},enumerable:!0,configurable:!0});Object.defineProperty(b,"isRequestSucceed",{get:function(){return this._isRequestSucceed},
enumerable:!0,configurable:!0});Object.defineProperty(b,"errorMessage",{get:function(){return this._errorMessage},enumerable:!0,configurable:!0});Object.defineProperty(b,"errorCode",{get:function(){return this._errorCode},enumerable:!0,configurable:!0});b.addParam=function(a,b){this._customParams[a]=b};b.getParamString=function(){return null};d.addGlobalParams=function(a,b){this._globalParams[a]=b};d.removeGlobalParams=function(a){delete this._globalParams[a]};d._timeout=6E5;d._globalParams={};return d}(egret.EventDispatcher);
Proxy.prototype.__class__="Proxy";
var ProgressModel=function(){function c(b){this._config=b}var d=c.prototype;d.addProgress=function(){};d.canAward=function(){return!1};Object.defineProperty(d,"id",{get:function(){return this._config.id},enumerable:!0,configurable:!0});Object.defineProperty(d,"current",{get:function(){return this._current()},enumerable:!0,configurable:!0});d._current=function(){return null};Object.defineProperty(d,"total",{get:function(){return this._getTotal()},enumerable:!0,configurable:!0});Object.defineProperty(d,
"award",{get:function(){return this._getAward()},enumerable:!0,configurable:!0});Object.defineProperty(d,"name",{get:function(){return this._getName()},enumerable:!0,configurable:!0});d._getName=function(){return null};d._getTotal=function(){return null};d._getAward=function(){return null};Object.defineProperty(d,"pic",{get:function(){return this._config.icon},enumerable:!0,configurable:!0});return c}();ProgressModel.prototype.__class__="ProgressModel";
var Main=function(c){function d(){c.call(this);this._loaded=this._inited=!1;this._listener=null;this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this);addAction(Const.INFO_INITED,this.inited,this);this._listener=new ProxyListener}__extends(d,c);var b=d.prototype;b.onAddToStage=function(a){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);egret.Injector.mapClass(RES.AnalyzerBase,RES.JsonSheetAnalyzer,"jsonsheet");a=GameUtils.getQuery("resVer");var b=
"resource/resource.json";a&&""!=a&&(b="resource/resource_"+a+".json");RES.loadConfig(b,"resource/")};b.onConfigComplete=function(a){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this);RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this);LoadingGroupControl.instance().loadGroup("loading")};b.onResourceLoadComplete=function(a){"preload"==a.groupName?
(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.createGameScene(),LoadingGroupControl.instance().loadGroup(null)):"loading"==a.groupName&&(PlatformFactory.setPlatform(GameUtils.getPlatformType()),PlatformFactory.getPlatform().init(),setCacheInfoFunction(),egret.MainContext.runtimeType==egret.MainContext.RUNTIME_HTML5&&(a=document.getElementById("loadingDiv1"))&&a.parentNode.removeChild(a),
window.showPro&&window.showPro(100),GameUtils.isQQBOfChannel()?this.loadingView=new LoadingUIForQQB:this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView))};b.onResourceProgress=function(a){"preload"==a.groupName&&this.loadingView.setProgress(a.itemsLoaded,a.itemsTotal);a.resItem._loaded?LoadingGroupControl.instance().inLoading():LoadingGroupControl.instance().loadingError()};b.inited=function(){1==ProxyUtils.stopService?this.stopService():ProxyUtils.isCanLogin?(this._inited=!0,this.loaded()):
this.stopService()};b.getNewData=function(a,b){var c=a.curLife,d=b.curLife;return d==c?a:d>c?b:a};b.loaded=function(){if(this._inited&&this._loaded){this.stage.removeChild(this.loadingView);ProxyUtils.logHoly();var a=PlatformFactory.getPlatform().deserialize(),b=egret.localStorage.getItem(ProxyUtils.userId+"bearjoyTapGameData"),c=(new Date).getTime()-ProxyUtils.initedTime,c=ProxyUtils.currentServerTime+c-(new Date).getTime();b?(b=JSON.parse(b),ProxyUtils.saveTimeDiffToServer(b.saveTime,a.saveTime,
b.uId==ProxyUtils.userId,c)):ProxyUtils.saveTimeDiffToServer(-1,a.saveTime,!1,c);b&&b.uId==ProxyUtils.userId&&(a.saveTime&&(b.saveTime>a.saveTime?b.gc=a.gc:b=a),a=b);a.backUser&&(ProxyUtils.backUser=!0,delete a.backUser);0<ProxyUtils.addHunYu&&(b=a.yu?Number(EncodeDecode.base64decode(a.yu))||0:a.holy||0,b+=ProxyUtils.addHunYu,a.yu=EncodeDecode.base64encode(b+""));DataCenter.getInstance().initGameData(a);a=new GameMainLayer;this.addChild(a);this.checkCheat();removeEventsByTarget(this);LoopBuyMonitor.getInstance().getAward()}};
b.stopService=function(){var a=new StopServiceLayer;GameUtils.is1758()&&(ProxyUtils.lockMSG=ProxyUtils.lockMSG.replace("408568785","2660866818"));a.refreshView(ProxyUtils.lockMSG);this.stage.addChild(a)};b.checkCheat=function(){var a=(new Date).getTime(),b=ProxyUtils.currentServerTime;(new Date).getDay()!=(new Date(b)).getDay()?(MainTickController.getInstance().isPause=!0,GameMainLayer.instance.showLockLayer("\u65f6\u95f4\u6821\u9a8c\u5931\u8d25,\u8bf7\u91cd\u65b0\u8fdb\u5165\u6e38\u620f"),DataCenter.getInstance().saved=
new NumberModel):36E5<Math.abs(b-a)&&(MainTickController.getInstance().isPause=!0,GameMainLayer.instance.showLockLayer("\u8bf7\u8c03\u6574\u672c\u673a\u7cfb\u7edf\u65f6\u95f4"),DataCenter.getInstance().saved=new NumberModel)};b.createGameScene=function(){this._loaded=!0;this.loaded()};return d}(egret.DisplayObjectContainer);Main.prototype.__class__="Main";
var setCacheInfoFunction=function(){if(egret.MainContext.runtimeType==egret.MainContext.RUNTIME_HTML5&&PlatformFactory.getPlatform().name==PlatformTypes.WANBA){var c=navigator.userAgent.toLowerCase();-1<c.indexOf("qqbrowser")&&(-1<c.indexOf("gt-i9100 build")&&(egret.Browser.useCacheAsBitmap=!1),-1<c.indexOf("vivo x3t build")&&(egret.Browser.useCacheAsBitmap=!1),-1<c.indexOf("sm-g3818 build/jdq39")&&(egret.Browser.useCacheAsBitmap=!1),-1<c.indexOf("lenovo a630t build/imm76d")&&(egret.Browser.useCacheAsBitmap=
!1),-1<c.indexOf("2013022 build/hm2013022")&&(egret.Browser.useCacheAsBitmap=!1),-1<c.indexOf("mi-one plus build")&&(egret.Browser.useCacheAsBitmap=!1))}PlatformFactory.getPlatform().name==PlatformTypes.EGRET&&(c=navigator.userAgent.toLowerCase(),-1<c.indexOf("qqbrowser")&&(egret.Browser.useCacheAsBitmap=!1))},PaymentFactory=function(){function c(){this._classMapping={}}var d=c.prototype;d.inject=function(b,a){this._classMapping[b]=a};d.newClass=function(b){return(b=this._classMapping[b])?new b:null};
d.effect=function(b,a,e){void 0===a&&(a=null);void 0===e&&(e=null);var c=this.newClass(b.type);null!=c&&c.effect(b,a,e)};c.getInstance=function(){null==this._inst&&(this._inst=new c);return this._inst};c._inst=null;return c}();PaymentFactory.prototype.__class__="PaymentFactory";
var SkillPayment=function(c){function d(){c.apply(this,arguments)}__extends(d,c);var b=d.prototype;b.done=function(a,b,c){b&&b.call(c);doAction(Const.BUY_DONE);DataCenter.getInstance().reduceGc(a.need,!0);this.releaseSkill()};b.effectCallback=function(a){this._selector&&this._selector.call(this._context);doAction(Const.BUY_DONE);0==a.s&&this.releaseSkill()};b.effect=function(a,b,c){var d=this;void 0===c&&(c=null);this._model=a;"blood"==a.type&&DataCenter.getInstance().loginAwardModel.isBoomFree()?
(DataCenter.getInstance().loginAwardModel.setAwarded(),doAction(Const.BUYING),b&&b.call(c),doAction(Const.BUY_DONE),this.releaseSkill()):"touch"==a.type&&0<ActivityManager.getInstance().getFreeSkillNum()?(doAction(Const.BUYING),this._selector=b,this._context=c,ProxyUtils.gcToYu(this.effectCallback,this)):0>=a.need?this.done(a,b,c):DataCenter.getInstance().hasEnoughGc(a.need)?(doAction(Const.BUYING),ProxyUtils.buyItem(a.id,function(){d.done(a,b,c)},this,function(a){doAction(Const.BUY_DONE);doAction(Const.SHOW_TIPS,
a)})):GameMainLayer.instance.showPaymentRecommendLayer()};b.releaseSkill=function(){};return d}(BasePayment);SkillPayment.prototype.__class__="SkillPayment";
var WXShareBase=function(){function c(){}var d=c.prototype;d.getShare=function(){return PlatformFactory.getPlatform().getShare()};d.loadShareInfo=function(b,a,e,c){void 0===a&&(a=null);void 0===e&&(e=null);void 0===c&&(c=!1);var d=null,g=!0;ProxyCache.isCache("Protect.getJsapiInfo")?d=new SingleProxy({mod:"User","do":"getShareInfo",cache:c,p:{data:b}}):(g=!1,d=new MultiProxy({mod:"Protect","do":"getJsapiInfo",p:{data:{url:encodeURIComponent(location.href)}}},{mod:"User","do":"getShareInfo",cache:c,
p:{data:b}}));d.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(b){b=b.responseData;if(!g){var c=b.Protect.getJsapiInfo,d=new BodyConfig;d.appId="wxa540e5963dae549a";d.nonceStr=c.nonceStr;d.signature=c.signature;d.timestamp=c.timestamp;d.jsApiList="onMenuShareTimeline onMenuShareAppMessage onMenuShareQQ onMenuShareWeibo showMenuItems chooseWXPay".split(" ");wx.config(d);b=b.User.getShareInfo}a&&a.call(e,b)},this);d.load()};d.shareFriend=function(b,a,e){var c=this;this.loadShareInfo(b,function(b){var d=
new BodyMenuShareAppMessage;d.title=b.title;d.desc=b.desc;d.link=b.link;d.imgUrl=b.imgUrl;d.complete=e.bind(c);d.success=a.bind(c);wx.onMenuShareAppMessage(d)})};d.getTimelineTitle=function(b){return b.tltitle?b.tltitle:b.title};d.onMenuShareTimeline=function(b){var a=new BodyMenuShareTimeline;a.title=this.getTimelineTitle(b);a.imgUrl=b.imgUrl;a.link=b.link;wx.onMenuShareTimeline(a)};d.onMenuShareAppMessage=function(b){var a=new BodyMenuShareAppMessage;a.title=b.title;a.desc=b.desc;a.link=b.link;
a.imgUrl=b.imgUrl;wx.onMenuShareAppMessage(a)};d.onMenuShareQQ=function(b){var a=new BodyMenuShareQQ;a.title=b.title;a.desc=b.desc;a.link=b.link;a.imgUrl=b.imgUrl;wx.onMenuShareQQ(a)};d.onMenuShareWeibo=function(b){var a=new BodyMenuShareWeibo;a.title=b.title;a.desc=b.desc;a.link=b.link;a.imgUrl=b.imgUrl;wx.onMenuShareWeibo(a)};d.removeMask=function(){GameMainLayer.instance.hideShareTipLayer()};return c}();WXShareBase.prototype.__class__="WXShareBase";var ItemsTouchType;
(function(c){c[c.BEGAN=0]="BEGAN";c[c.END=1]="END";c[c.MOVED=2]="MOVED";c[c.TOUCH=3]="TOUCH"})(ItemsTouchType||(ItemsTouchType={}));
var ItemsTouchManager=function(){function c(){this._items=[];this._regions=[];egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this);egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)}var d=c.prototype;d.clearRegions=function(){this._regions=[]};d.isContains=function(b){return-1<this._items.indexOf(b)};d.getItemsCount=function(){return this._items.length};d.onTouchBegin=function(b){this._touchPoint=new egret.Point(b.stageX,
b.stageY);this._touchDisplayObject=b.currentTarget;this.message(0,this._touchDisplayObject,this._touchPoint,null)};d.onTouchMove=function(b){null!=this._touchDisplayObject&&(b=new egret.Point(b.stageX,b.stageY),this.message(2,this._touchDisplayObject,b,null))};d.addItems=function(){for(var b=[],a=0;a<arguments.length;a++)b[a-0]=arguments[a];for(a=0;a<b.length;a++){var e=b[a];e.touchEnabled=!0;this.addDisplayListener(e);this._items.push(e)}};d.removeItems=function(){for(var b=[],a=0;a<arguments.length;a++)b[a-
0]=arguments[a];for(a=0;a<b.length;a++){var e=b[a];e.touchEnabled=!1;this.removeDisplayListener(e)}};d.addDisplayListener=function(b){b.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this)};d.removeDisplayListener=function(b){b.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this)};d.addRegions=function(){for(var b=[],a=0;a<arguments.length;a++)b[a-0]=arguments[a];for(a=0;a<b.length;a++)this._regions.push(b[a])};d.removeRegions=function(){for(var b=0;b<arguments.length;b++);
};d.onTouchEnd=function(b){if(null!=this._touchDisplayObject){b=new egret.Point(b.stageX,b.stageY);for(var a=null,e=0;e<this._regions.length;e++){var c=this._regions[e];if(this.isInside(b,c)){a=c;break}}this.message(1,this._touchDisplayObject,b,a);this.checkTouch(b);this._touchDisplayObject=null}};d.checkTouch=function(b){14>egret.Point.distance(this._touchPoint,b)&&this.message(3,this._touchDisplayObject,b,null)};d.message=function(b,a,e,c){this._touchController&&this.isContains(a)&&this._touchController.message(b,
a,e,c);this._selector&&this._context&&this._selector.call(this._context,b,a,e,c)};d.isInside=function(b,a){var e=a.localToGlobal(0,0);return(new egret.Rectangle(e.x,e.y,a.width,a.height)).containsPoint(b)};d.setCallback=function(b,a){this._selector=b;this._context=a};d.setController=function(b){this._touchController=b};d.clearItems=function(){for(;0<this._items.length;){var b=this._items.shift();this.removeDisplayListener(b)}};d.dispose=function(){this.clearItems();egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,
this.onTouchMove,this);egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this);removeEventsByTarget(this);this._context=this._selector=null;this._touchController&&(this._touchController.dispose(),this._touchController=null)};return c}();ItemsTouchManager.prototype.__class__="ItemsTouchManager";
var GameAnimation=function(){function c(b,a){void 0===a&&(a=null);this._overTime=0;this._duration=b;this._ease=a}var d=c.prototype;d._tick=function(b){this._overTime+=b;b=this._overTime/this._duration;var a=1>b?b:1,a=0<a?a:0;this._ease&&(b=this._ease(a));this.update(b);1<=a&&(this._selector&&this._selector.apply(this._context,this._args),this.onComplete())};d.onComplete=function(){AnimationClear.removeAnimation(this)};d.getTarget=function(){return this._target};d.dispose=function(){egret.Ticker.getInstance().unregister(this._tick,
this);this._context=this._selector=null};d.setComplete=function(b,a){void 0===a&&(a=null);for(var e=[],c=2;c<arguments.length;c++)e[c-2]=arguments[c];this._selector=b;this._context=a;this._args=e;return this};d.update=function(b){};d._run=function(b,a){void 0===a&&(a=!0);this._target=b;a&&egret.Ticker.getInstance().register(this._tick,this);AnimationClear.addAnimation(this)};return c}();GameAnimation.prototype.__class__="GameAnimation";
var TabView=function(c){function d(){c.call(this);this._callArr=[];this._btnArray=[];this._tabHashtable={};this._selectedTab=null;this._disableTab={}}__extends(d,c);var b=d.prototype;b.init=function(){this._callArr=[];this._currentTag=0;for(var a=1,b=0;b<this.numChildren;b++){var c=this.getChildAt(b);if(c instanceof SimpleButton){var d=this,g=function(){var a=d._callArr.indexOf(this);d.chooseIdx(a+1)},l=this._formatKey(c.name);this[l]=c;this._tabHashtable[a]=l;this._callArr.push(g);this._btnArray.push(c);
c.addOnClick(g,g);c.useZoomOut(!1);a++}}};b._formatKey=function(a){return a.split("Button")[0].toLowerCase()};b.setTabItemDisable=function(a,b){this._disableTab[a]=b};b.unSelectAll=function(){for(var a=0;a<this._btnArray.length;a++)this._btnArray[a].setChoose(1,!1);this._currentTag=0};b.choseIdxState=function(a){this._currentTag=a+1;for(var b=0;b<this._btnArray.length;b++){var c=this._btnArray[b];b+1==a?c.setChoose(3,!0):c.setChoose(1,!1)}};b.chooseIdx=function(a){var b=this._tabHashtable[a];if(this._disableTab[a])console.log("\u672a\u5f00\u542f");
else if(this._currentTag!=a+1&&(!this._selector||this._selector.call(this._context,b))){this._oldType=this._selectedTab?this._tabHashtable[this._currentTag-1]:b;this._currentTag=a+1;for(var c=0;c<this._btnArray.length;c++){var d=this._btnArray[c];c+1==a?(d.setChoose(3,!0),this._selectedTab=d):d.setChoose(1,!1)}this.onSelectedTab(b,this[b],this[this._oldType])}};b.setDefaultTag=function(a){this.chooseIdx(a-1)};b.addOnClick=function(a,b){this._callBack=a;this._target=b};Object.defineProperty(b,"tabHashtable",
{get:function(){return this._tabHashtable},enumerable:!0,configurable:!0});b.useZoomOut=function(a){for(var b=0;b<this._btnArray.length;b++)this._btnArray[b].useZoomOut(a)};b.getCurrentTag=function(){var a=Math.max(this._currentTag,1);return a=Math.min(a,this.numChildren)};b.setFilterCallback=function(a,b){void 0===b&&(b=null);this._selector=a;this._context=b};b.onSelectedTab=function(a,b,c){this._callBack&&this._target&&this._callBack.call(this._target,a,b,c)};b.selectTabWithType=function(a){for(var b=
1;b<=this._btnArray.length;b++)if(this._tabHashtable[b]==a){this.chooseIdx(b);break}};return d}(egret.DisplayObjectContainer);TabView.prototype.__class__="TabView";
var TableView=function(c){function d(){c.call(this);this._currentIndex=0;this._itemArr=[];this.disappearContainer=new egret.DisplayObjectContainer;this.addChild(this.disappearContainer)}__extends(d,c);var b=d.prototype;b.changeDataListOnly=function(a){void 0===a&&(a=[]);this._dataArr=a};b.reloadData=function(a){void 0===a&&(a=[]);this._dataArr=a||[];var b,c;a=0;this.direction==Direction.HORIZONTAL?(b=this._itemWidth*this._dataArr.length,c=this._itemHeight,a=Math.floor(-this._container.x/this._itemWidth)):
(b=this._itemWidth,c=this._itemHeight*this._dataArr.length,a=Math.floor(-this._container.y/this._itemHeight));this._initWidth=b;this._initHeight=c;b=this._itemArr.length;for(c=0;c<b;c++)this.initItem(this._itemArr[c],a+c);this._currentIndex=a};b.showAnimation=function(){if(this.direction==Direction.VERTICAL)for(var a=0,b=0;a<this._itemArr.length;a++){var c=this._itemArr[a];if(c.visible){var d=egret.Tween.get(c);c.x=this._itemWidth;d.wait(100*b+10);d.to({x:6},200);b++}}};b.showAnimationAtLastOne=function(a,
b,c){if(this.direction==Direction.VERTICAL)for(b=this._itemArr.length-1,c=0;0<=b;b--){var d=this._itemArr[b];if(d.visible){var g=egret.Tween.get(d);g.wait(100*c+10);g.to({y:this._itemHeight+d.y},200);c++;0==b&&g.call(a)}else 0==b&&a()}};b.getItemList=function(){return this._itemArr};b.hideAnimation=function(){if(this.direction==Direction.VERTICAL)for(var a=0,b=0;a<this._itemArr.length;a++){var c=this._itemArr[a];if(c.visible){var d=egret.Tween.get(c);c.x=0;d.wait(100*b+10);d.to({x:this._itemWidth},
200);b++}}};b.setList=function(a,b,c,d,g){this._dataArr=a||[];this._delegate=c;this._itemWidth=d;this._itemHeight=g;this.direction=b;a=new BaseContainer;this.direction==Direction.HORIZONTAL?(a.width=this._itemWidth*this._dataArr.length,a.height=this._itemHeight,this.setContainer(a,this._itemWidth*this._dataArr.length,this._itemHeight)):(a.width=this._itemWidth,a.height=this._itemHeight*this._dataArr.length,this.setContainer(a,this._itemWidth,this._itemHeight*this._dataArr.length));this.initItemList()};
b.initItemList=function(){if(0!=this._itemWidth&&0!=this._itemHeight&&0!=this._viewWidth&&0!=this._viewHeight){var a=0,a=this.direction==Direction.HORIZONTAL?Math.ceil(this._viewWidth/this._itemWidth)+1:Math.ceil(this._viewHeight/this._itemHeight)+1;this._itemArr=[];for(var b=0;b<a;b++){var c=this._delegate.createItemRenderer();this._container.addChild(c);this._itemArr.push(c);this.initItem(c,b)}this._currentIndex=0}};b.getCurrent=function(){var a=0,a=this.direction==Direction.HORIZONTAL?Math.floor(-this._container.x/
this._itemWidth):Math.floor(-this._container.y/this._itemHeight);a>this._dataArr.length-this._itemArr.length?a=this._dataArr.length-this._itemArr.length:0>a&&(a=0);return a};b.moveList=function(){var a=this.getCurrent();if(!(0>a||a>=this._dataArr.length-this._itemArr.length+1||a==this._currentIndex)){var b=a-this._currentIndex;if(Math.abs(b)>this._itemArr.length)for(var d=0,h=this._itemArr.length;d<h;d++){var g=this._itemArr[d];this.initItem(g,a+d)}else if(0>b)for(d=0;d<-b;d++){g=this._itemArr[this._itemArr.length-
1];this.moveArrayItem(0,this._itemArr.length-1);var l=a+(-b-1)-d;this.initItem(g,l)}else for(h=this._itemArr.length,d=0;d<b;d++)g=this._itemArr[0],this.moveArrayItem(this._itemArr.length-1,0),l=b>=h?a+d:a+h-1-(b-1-d),this.initItem(g,l);this._currentIndex=a}c.prototype.moveList.call(this)};b.moveArrayItem=function(a,b){var c=this._itemArr[b];this._itemArr.splice(b,1);a>this._itemArr.length-1?this._itemArr.push(c):this._itemArr.splice(a,0,c)};b.initItem=function(a,b){b>=this._dataArr.length?a.visible=
!1:0>b?a.visible=!1:(a.visible=!0,this._delegate.updateItemRenderer(a,this._dataArr[b],b));this.direction==Direction.HORIZONTAL?a.x=this._itemWidth*b:a.y=this._itemHeight*b};return d}(ScrollView);TableView.prototype.__class__="TableView";
var BoxContainer=function(c){function d(){c.call(this);this._boxmask=new egret.Sprite;this._boxmask.graphics.clear();this._boxmask.graphics.beginFill(0,0.8);this._boxmask.graphics.drawRect(0,0,GameUtils.getWinWidth(),GameUtils.getWinHeight());this._boxmask.graphics.endFill();this._boxmask.width=GameUtils.getWinWidth();this._boxmask.height=GameUtils.getWinHeight();this._boxmask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMaskHandler,this);this.addChild(this._boxmask);this._boxmask.touchEnabled=
!0;this._boxContainer=new egret.DisplayObjectContainer;this.addChild(this._boxContainer)}__extends(d,c);var b=d.prototype;Object.defineProperty(b,"boxMask",{get:function(){return this._boxmask},enumerable:!0,configurable:!0});Object.defineProperty(b,"boxContainer",{get:function(){return this._boxContainer},enumerable:!0,configurable:!0});b.onMaskHandler=function(){};return d}(BaseContainer);BoxContainer.prototype.__class__="BoxContainer";
var ProgressItemLayer=function(c){function d(){c.call(this);this._icon=null;this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this._bg=ResourceUtils.createBitmapFromSheet("top_light_item","commonRes");this.addChild(this._bg);this._bg.x=3;this._bg.y=3;this._iconContainer=new egret.DisplayObjectContainer;this.addChild(this._iconContainer);this._iconContainer.x=3;this._iconContainer.y=3;this._container=new egret.DisplayObjectContainer;this._iconContainer.addChild(this._container);
this._container.x=18;this._container.y=13;this._nameLabel=new egret.TextField;this._nameLabel.x=110;this._nameLabel.y=15;this._nameLabel.size=22;this._nameLabel.text="\u540d\u79f0";this._iconContainer.addChild(this._nameLabel);this._nameLabel.textColor=16777215;this._progressLabel=new egret.TextField;this._iconContainer.addChild(this._progressLabel);this._progressLabel.x=290;this._progressLabel.y=56;this._progressLabel.size=20;this._progressLabel.textAlign=egret.HorizontalAlign.LEFT;this._progressLabel.text=
"100/100";this._progressLabel.textColor=2495759;this.createAwardIcon();this._awardLabel=new egret.TextField;this._iconContainer.addChild(this._awardLabel);this._awardLabel.x=530;this._awardLabel.y=10;this._awardLabel.size=22;this._awardLabel.width=80;this._awardLabel.text="15";this._iconContainer.cacheAsBitmap=!0;this._button=new ProgressItemButton;this._button.addOnClick(this.onRewardHandler,this);this._button.useZoomOut(!0);this._button.x=523;this._button.y=68;this.addChild(this._button);this._finishIcon=
ResourceUtils.createBitmapFromSheet("achieve_fh","commonRes");this._finishIcon.anchorX=this._finishIcon.anchorY=0.5;this._finishIcon.x=523;this._finishIcon.y=51;this._finishIcon.visible=!1;this.addChild(this._finishIcon);this._finishBorder=ResourceUtils.createBitmapFromSheet("achieve_fh_border","commonRes");this._finishBorder.anchorX=this._finishBorder.anchorY=0.5;this._finishBorder.x=3+this._bg.width/2;this._finishBorder.y=3+this._bg.height/2;this._finishBorder.visible=!1;this.addChild(this._finishBorder)};
b.createAwardIcon=function(){this._gold=ResourceUtils.createBitmapFromSheet("gold_icon");this._iconContainer.addChild(this._gold);this._gold.scaleX=this._gold.scaleY=0.45;this._gold.x=490;this._gold.y=8};b.create=function(a,b,c,d,g){var l=this;void 0===c&&(c="gold_icon");void 0===d&&(d=Const.ADD_DIAMOND);void 0===g&&(g=0.5);Time.setTimeout(function(){var b=ResourceUtils.createBitmapFromSheet(c);b.anchorX=0.5;b.anchorY=0.5;b.scaleX=b.scaleY=g;b.x=520;b.y=49;l.addChild(b);b.num=a;doAction(d,b)},this,
b)};b.getNumbers=function(){var a=parseInt(this._model.award),b=20,c=0,d=0;a<b?(b=a,d=1):(d=Math.floor(a/b),c=a%b);return[b,d,c]};b.onRewardHandler=function(){for(var a=this.getNumbers(),b=0;b<a[0];b++){var c=a[1];b==a[0]-1&&(c+=a[2]);this.onCreate(c.toString(),GameUtils.random(0,1E3))}this.onReward();this._model.addProgress();this.refreshView(this._model,this._idx)};b.onCreate=function(a,b){this.create(a.toString(),GameUtils.random(0,1E3))};b.onReward=function(){};b.refreshView=function(a,b){this._model=
a;this._idx=b;this._awardLabel.text=this._model.award;this._progressLabel.text=this._model.current+"/"+this._model.total;this._nameLabel.text=this._model.name;GameUtils.removeFromParent(this._icon);GameUtils.removeAllChildren(this._container);var c=this._model.pic.split(":");this._icon=1==c.length?egret.DynamicBitmap.create(this._model.pic,!1,null,null,"default_skill"):ResourceUtils.createBitmapFromSheet(c[0],c[1]);this._container.addChild(this._icon)};return d}(BaseContainer);
ProgressItemLayer.prototype.__class__="ProgressItemLayer";
var ProgressItemButton=function(c){function d(){c.call(this);this.anchorY=this.anchorX=0.5;this.init()}__extends(d,c);var b=d.prototype;b.setEnabledState=function(){this._nor.visible=this._enabled;this._dis.visible=!this._enabled};b.init=function(){this._container=new egret.DisplayObjectContainer;this.addChild(this._container);this._nor=ResourceUtils.createBitmapFromSheet("hero_lvup_btn");this._container.addChild(this._nor);this._dis=ResourceUtils.createBitmapFromSheet("hero_lvup_disable");this._dis.visible=
!1;this._container.addChild(this._dis);this._label=new egret.TextField;this._container.addChild(this._label);this._label.text="\u5956 \u52b1";this._label.width=150;this._label.x=85;this._label.y=20;this._label.size=26;this._label.textAlign=egret.HorizontalAlign.CENTER;this._label.anchorX=0.5;this._label.textColor=0;this._container.cacheAsBitmap=!0};b.refreshText=function(a){this._label.text=a};return d}(SimpleButton);ProgressItemButton.prototype.__class__="ProgressItemButton";
var Hero=function(c){function d(a){c.call(this);this._attackIdx=this._speed=0;this._atkTipTimeId=null;this._isLockAttack=!1;this.init(a);addFilter(Const.GET_HERO,this.getHero,this)}__extends(d,c);var b=d.prototype;Object.defineProperty(b,"dps",{get:function(){return this._hero.dps},enumerable:!0,configurable:!0});Object.defineProperty(b,"bossDps",{get:function(){return this._hero.bossDps},enumerable:!0,configurable:!0});b.getHero=function(a){if(a==this.heroId)return this};Object.defineProperty(b,
"heroId",{get:function(){return this._hero.heroId},enumerable:!0,configurable:!0});b.init=function(a){var b=this;this._hero=a;this._action=null;if(this._hero.isMainHero()){this._equipContainer1=new egret.DisplayObjectContainer;this._equipContainer1.x=-60;this._equipContainer1.y=-190;this.addChild(this._equipContainer1);this._equipContainer2=new egret.DisplayObjectContainer;this._equipContainer2.x=-30;this._equipContainer2.y=-100;this.addChild(this._equipContainer2);this._equipContainer3=new egret.DisplayObjectContainer;
this._equipContainer3.y=-120;this._equipContainer3.x=-20;this.addChild(this._equipContainer3);addAction(Const.CHANGE_HOME_EQUIP,this.changeEquipHandler,this);var c=DataCenter.getInstance().totalData.heroEquip,d;for(d in c)this.changeEquipHandler(c[d])}this._movieContainer=new egret.DisplayObjectContainer;this.addChild(this._movieContainer);this._nameLabel=new egret.TextField;this.addChild(this._nameLabel);this._nameLabel.size=24;this._nameLabel.strokeColor=0;this._nameLabel.stroke=2;this._nameLabel.anchorX=
0.5;this._nameLabel.x=DefaultHeroPos[a.configId].x-5;this._nameLabel.y=DefaultHeroPos[a.configId].y-180;this.changeName();c=ResourceUtils.createBitmapFromSheet("boss_default");c.x=DefaultHeroPos[a.configId].x;c.y=DefaultHeroPos[a.configId].y;c.anchorX=0.5;c.anchorY=1;c.alpha=0.7;this._movieContainer.addChild(c);GameUtils.preloadHeroMovieResource(this._hero.config.animationID,function(){b._movieContainer.removeChildren();b._action=new Movie("hero_"+b._hero.config.animationID+"_json","hero_"+b._hero.config.animationID);
b._action.play("stand");b._action.autoRemove=!1;b._action.setCallback(b.onMoveCallback,b);b._movieContainer.addChild(b._action)});this._speed=a.speed;GuildDataManager.getInstance().isGuildWulinStart?(this.attack(),this._timeId=Time.setInterval(this.attack,this,this._speed)):(Time.clearInterval(this._atkTipTimeId),this._hero.isMainHero()||(this.attack(),this._timeId=Time.setInterval(this.attack,this,this._speed)));this._effectContainer=new egret.DisplayObjectContainer;this.addChild(this._effectContainer);
addAction(Const.CHANGE_SPEED,this.changeSpeed,this);addAction(Const.HERO_DEAD,this.heroDead,this);addAction(Const.CHANGE_NAME,this.changeName,this);addFilter("get_hero_container",this.getHeroContainer,this);addAction(Const.EVOLVE_REFRESH,this.changeName,this)};b.getHeroContainer=function(a){return a.configId==this._hero.configId?this._effectContainer:null};b.changeEquipHandler=function(a){var b=this;switch(RES.getRes("equipConfig")[a].needType){case 1:this._equipContainer1.removeChildren();a=ResourceUtils.createBitmapFromSheet("equip_"+
a,"equipRes");a.scaleX=-0.8;a.scaleY=0.8;this._equipContainer1.addChild(a);break;case 2:this._equipContainer2.removeChildren();GameUtils.preloadAnimation("equip_"+a+"_json",function(a){RES.hasRes("equip_"+a+"_json")&&(b._equipContainer2.removeChildren(),a=new Movie("equip_"+a+"_json","equip_"+a),a.play("1"),a.autoRemove=!1,b._equipContainer2.addChild(a))},this,a);break;case 3:this._equipContainer3.removeChildren(),GameUtils.preloadAnimation("equip_"+a+"_json",function(a){RES.hasRes("equip_"+a+"_json")&&
(b._equipContainer3.removeChildren(),a=new Movie("equip_"+a+"_json","equip_"+a),a.play("1"),a.autoRemove=!1,b._equipContainer3.addChild(a))},this,a)}};b.changeName=function(){this._nameLabel.textColor=EvolveModel.getCurColor(this.heroId);this._nameLabel.text=1E3==this._hero.configId?EvolveModel.getPrefixKey(this.heroId)+GameUtils.getUserName():EvolveModel.getPrefixKey(this.heroId)+this._hero.config.name};b.hideNameLabel=function(){this._nameLabel.visible=!1};b.heroDead=function(a){a.configId==this._hero.configId&&
this.parent&&this.parent.removeChild(this)};b.onMoveCallback=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];a[0]==Movie.PLAY_COMPLETE&&this._action.play("stand")};b.changeSpeed=function(a){this._hero.isMainHero()||(Time.clearInterval(this._timeId),1>a&&(a=1),this._timeId=Time.setInterval(this.attack,this,this._hero.speed/a))};b.getCurrentSpeed=function(){return Time.getTimeById(this._timeId)};b.setCurrentSpeed=function(a){Time.setTimeById(this._timeId,a)};b.play=function(a,
b,c){void 0===b&&(b=null);void 0===c&&(c=null);b?this._action.setCallback(b,c):this._action.setCallback(this.onMoveCallback,this);this._action.play(a)};b.setAttackLock=function(a){this._isLockAttack=a};b.attack=function(a){void 0===a&&(a=!1);if(!this._isLockAttack)if(GuildDataManager.getInstance().isGuildWulinStart){if(this._action){var b=GuildWuLinDataManager.getInstance().dps;!0!=a?(GameUtils.drop(b),doAction("attackedHp"),null==this._atkTipTimeId&&(this._atkTipTimeId=Time.setInterval(this.onTimer,
this,333)),GuildWuLinDataManager.getInstance().addCurBossDamg(b),GuildModel.comCurSecDamge()):(GameUtils.drop(0.01*b),GuildWuLinDataManager.getInstance().addCurBossDamg(0.01*b),GuildModel.comCurSecDamge(0.01*b));this._action.play("attack");doAction("playInjured")}}else this._hero.isMainHero()&&(this._attackIdx+=1,4<this._attackIdx&&(this._attackIdx=1)),this._action&&this._action.play("attack")};b.isDead=function(){return this._hero.isDead()};b.onTimer=function(){var a=GuildWuLinDataManager.getInstance().dps/
3;1>a&&(a=1);a={dmg:GuildWuLinDataManager.getInstance().getFormatNum(a)};doAction("lala",a)};b.dispose=function(){c.prototype.dispose.call(this);Time.clearInterval(this._atkTipTimeId);this._timeId&&Time.clearInterval(this._timeId);removeEventsByTarget(this);this._action&&(this._action.dispose(),this._action=null)};return d}(BaseContainer);Hero.prototype.__class__="Hero";
var TimeInfo=function(){function c(b,a,e,c,d){this._listener=b;this._thisObject=a;this._oldTime=this._time=e;this._isOnce=c;this._params=d}var d=c.prototype;Object.defineProperty(d,"isPause",{get:function(){return this._isPause},set:function(b){this._isPause=b},enumerable:!0,configurable:!0});Object.defineProperty(d,"isOnce",{get:function(){return this._isOnce},enumerable:!0,configurable:!0});Object.defineProperty(d,"leftTime",{get:function(){return this._time},enumerable:!0,configurable:!0});Object.defineProperty(d,
"totalTime",{get:function(){return this._oldTime},set:function(b){this._oldTime=b},enumerable:!0,configurable:!0});Object.defineProperty(d,"time",{get:function(){return this._time},set:function(b){this._time=b},enumerable:!0,configurable:!0});d.tick=function(b){var a=!0;this._time&&(this._time-=b,a=0>=this._time);a&&(b=[].concat(this._params,b),this._listener.apply(this._thisObject,b),this._time=this._oldTime);return a};return c}();TimeInfo.prototype.__class__="TimeInfo";
var Time=function(){function c(){}c.setInterval=function(c,b,a){for(var e=[],f=3;f<arguments.length;f++)e[f-3]=arguments[f];e=new TimeInfo(c,b,a,!1,e);return this.setTime(e)};c.clearInterval=function(d){delete c.timeObject[d]};c.setTimeout=function(c,b,a){for(var e=[],f=3;f<arguments.length;f++)e[f-3]=arguments[f];e=new TimeInfo(c,b,a,!0,e);return this.setTime(e)};c.getLeftTime=function(d){return(d=c.timeObject[d])?d.leftTime:0};c.pauseInterval=function(d){if(d=c.timeObject[d])d.isPause=!0};c.resumeInterval=
function(d){if(d=c.timeObject[d])d.isPause=!1};c.clearTimeout=function(d){delete c.timeObject[d]};c.getTimeById=function(d){return c.timeObject.hasOwnProperty(d)?c.timeObject[d].totalTime:0};c.setTimeById=function(d,b){c.timeObject.hasOwnProperty(d)&&(c.timeObject[d].time>b&&(c.timeObject[d].time=b),c.timeObject[d].totalTime=b)};c.setTime=function(d){0==c.timeId&&egret.Ticker.getInstance().register(c.tick,null);c.timeId++;c.timeObject[c.timeId]=d;return c.timeId};c.tick=function(d){for(var b in c.timeObject){var a=
c.timeObject[b];!a.isPause&&a.tick(d)&&a.isOnce&&delete c.timeObject[b]}};c.dispose=function(){c.timeObject={}};c.timeObject={};c.timeId=0;return c}();Time.prototype.__class__="Time";
var Advertisement=function(){function c(){this.isTickPlay=!1;this.timeID=-1;c.instance=this;this.init()}var d=c.prototype;c.getInstace=function(){return this.instance=this.instance||new c};d.init=function(){GameUtils.isLieBao()&&window.cm&&(console.log(window.cm),window.cm.use("module/cmgame-sdk",function(b){window.cmcm_ad=new b({gameid:"ly_gulong",ads:[1,2]})}))};d.showAdverte=function(){!GameUtils.isLieBao()||0<ProxyUtils.playerRech||!window.cmcm_ad||(!this.isTickPlay&&30<=StatisticsModel.curTapCount&&
(window.cmcm_ad.show(),this.isTickPlay=!0),0>this.timeID&&(this.timeID=Time.setInterval(function(){window.cmcm_ad.show()},this,9E5)))};return c}();Advertisement.prototype.__class__="Advertisement";
var SkillController=function(){function c(){this._mainSkillList=[];this._skillList=[];this._holySkillList=[];this.holyEffect=[];this.holyAdd=0;this.equipAddCritHurt=this.equipDropCoin=this.equipAdd=1;this._buffList=[];this._equipList=[]}var d=c.prototype;c.getInstance=function(){null==this._instance&&(this._instance=new c);return this._instance};d.refreshSkillList=function(){this._skillList=[];for(var b=HeroController.getInstance().getHeroList(),a=0;a<b.length;a++)if(!b[a].isDead())for(var e=b[a].skillList,
c=0;c<e.length;c++)this._skillList.push(e[c]);this.boxDropCoinTimes=this.dropCoinTimes=1;b=this._skillList.length;for(a=0;a<b;a++)5==this._skillList[a].getEffectType()&&(this.dropCoinTimes*=this._skillList[a].config.value),7==this._skillList[a].getEffectType()&&(this.boxDropCoinTimes*=this._skillList[a].config.value);this.refreshMainSkill()};d.refreshBuffList=function(){this._buffList=[];for(var b=DataCenter.getInstance().totalData.buffList,a=0;a<b.length;a++){var e=BuffModel.createByConfigID(b[a]);
this._buffList.push(e)}};d.getBuffList=function(){return this._buffList};d.refreshEquipList=function(){this._equipList=[];this.equipAddCritHurt=this.equipDropCoin=this.equipAdd=1;for(var b=DataCenter.getInstance().totalData.equipList,a=0;a<b.length;a++){var e=EquipModel.createByConfigID(b[a]);this._equipList.push(e);1==e.getEffectType()?this.equipAdd+=e.getValue():5==e.getEffectType()?this.equipDropCoin+=e.getValue():3==e.getEffectType()&&(this.equipAddCritHurt+=e.getValue())}};d.getEquipList=function(){return this._equipList};
d.refreshHolySkillList=function(){this._holySkillList=[];this.holyEffect=[];this.holyAdd=0;this.dropCoinTimes1=1;for(var b=DataCenter.getInstance().totalData.rebornSkillList,a=0;a<b.length;a++){var e=RebornSkillModel.createByConfigId(b[a].id);e.lv=b[a].lv;e.callCost=b[a].cost;e.bindCost=b[a].bind;e.refreshEffect();this._holySkillList.push(e)}};d.addHolyEffect=function(b,a,e){var c={};c.type=b;c.value=e;c.targetHero=a;5==b&&(this.dropCoinTimes1+=e);this.holyEffect.push(c)};d.addHolyAdd=function(b){this.holyAdd+=
b};d.getHolySkillList=function(){return this._holySkillList};d.getSkillList=function(){return this._skillList};d.refreshMainSkill=function(){this._mainSkillList=[];for(var b=HeroController.getInstance().mainHero,a=0;a<b.skillList.length;a++)this._mainSkillList.push(b.skillList[a])};d.getAdditionByHeroModel=function(b){for(var a=[],e=0;e<this._skillList.length;e++){var c=this._skillList[e].getTargetHero();c!=TargetHeroAll&&c!=b.configId||a.push(this._skillList[e])}return a};d.dispose=function(){for(var b=
0;b<this._holySkillList.length;b++)this._holySkillList[b].destroy()};return c}();SkillController.prototype.__class__="SkillController";
var StatisticsType=function(){function c(){}c.enemy="enemy";c.coin="coin";c.level="level";c.skull="skull";c.halidome="halidome";c.dps="dps";c.boss="boss";c.tap="tap";c.metempsychosis="metempsychosis";c.upgradehero="upgradehero";c.openbox="openbox";c.gift="gift";c.jumpattack="jumpattack";c.crit="crit";c.diamond="diamond";c.rebornTime="rebornTime";c.maxLv="maxLv";c.rechargeHolyNum="rechargeHolyNum";c.loseSc="loseSc";c.loseDPS="loseDPS";c.startGameTime="startGameTime";c.onLineTime="onLineTime";return c}();
StatisticsType.prototype.__class__="StatisticsType";
var StatisticsModel=function(){function c(b){this._notifyName=null;this._data=b;this.format()}var d=c.prototype;d.format=function(){for(var b in this._data){var a=this._getDataValue(b);this._setDataValue(b,a)}};Object.defineProperty(d,"notifyName",{get:function(){return this._notifyName},set:function(b){this._notifyName=b},enumerable:!0,configurable:!0});d.resetValue=function(b,a){delete this._data[b];this.addValue(b,a)};d.updateValue=function(b,a){this._data.hasOwnProperty(b)||(this._data[b]="0");
var e=new NumberModel;e.add(this._getDataValue(b));e.compare(a)||(e=new NumberModel,e.add(a),this._setDataValue(b,e.getData()))};d.addTime=function(b){this.addValue(b)};d.resetData=function(b,a){this._setDataValue(b,a.toString())};d.getDataByType=function(b){return parseInt(this._getDataValue(b))||0};d.addValue=function(b,a){void 0===a&&(a="1");this._data.hasOwnProperty(b)||(this._data[b]="0");var e=new NumberModel,d=this._getDataValue(b);e.add(d);e.add(a);this._setDataValue(b,e.getData());null!=
this._notifyName&&doAction(this._notifyName);StatisticsType.tap==b&&(c.curTapCount++,30<=c.curTapCount&&GameUtils.isLieBao()&&0>=ProxyUtils.playerRech&&Advertisement.getInstace().showAdverte())};d.removeValue=function(b,a){void 0===a&&(a="1");this._data.hasOwnProperty(b)||(this._data[b]="0");var e=new NumberModel;e.add(this._data[b]);e.reduce(a);this._setDataValue(b,e.getData());null!=this._notifyName&&doAction(this._notifyName)};d.getValue=function(b){if(this._data.hasOwnProperty(b)){var a=new NumberModel;
b=this._getDataValue(b);a.add(b);return a.getNumer()}return"0"};d._getDataValue=function(b){return decodeURIComponent(this._data[b])};d._setDataValue=function(b,a){this._data[b]=encodeURIComponent(a)};d.reset=function(b){void 0===b&&(b={});this._data=b};d.getData=function(){return this._data};c.curTapCount=0;return c}();StatisticsModel.prototype.__class__="StatisticsModel";
(function(c){var d=function(b){function a(){b.apply(this,arguments);this._scale9Info=null;this._otherUrl=!1}__extends(a,b);var e=a.prototype;a.create=function(b,e,c,d,k){void 0===e&&(e=!1);void 0===c&&(c=null);void 0===d&&(d=null);void 0===k&&(k="");var m=new a;""!=k&&(k=RES.getRes("iconRes").getTexture(k),m.texture=k);m.startLoad(b,e,c,d);return m};e.setScale9Info=function(a,b,e,c){this._scale9Info={left:a,top:b,right:e,bottom:c}};e.startLoad=function(a,b,e,d){this._otherUrl=b;this._src=a;this._onLoadComplete=
e;this._onLoadCompleteThisObj=d;this._otherUrl?(b=new c.URLRequest,b.url=a,a=new c.URLLoader,a.dataFormat=c.URLLoaderDataFormat.TEXTURE,a.addEventListener(c.Event.COMPLETE,this.resourceLoadComplete,this),a.load(b)):RES.getResAsync(this._src,this.resourceLoadComplete,this)};e.resourceLoadComplete=function(a){this.texture=this._otherUrl?a.target.data:a;this._scale9Info&&(this.scale9Grid=new c.Rectangle(this._scale9Info.left,this._scale9Info.top,this.texture.textureWidth-this._scale9Info.left-this._scale9Info.right,
this.texture.textureHeight-this._scale9Info.top-this._scale9Info.bottom));this._setSizeDirty();this._onLoadComplete&&(this._onLoadComplete.call(this._onLoadCompleteThisObj),this._onLoadCompleteThisObj=this._onLoadComplete=null)};e._measureBounds=function(){return this.texture?b.prototype._measureBounds.call(this):c.Rectangle.identity.initialize(0,0,0,0)};return a}(c.Bitmap);c.DynamicBitmap=d;d.prototype.__class__="egret.DynamicBitmap"})(egret||(egret={}));
var GuildDataManager=function(){function c(){this.isHaveGuild=!1;this.myGuildInfo=this.isHaveGid=null;this.isGuildWulinStart=this.isGuildBoss=!1;this.isTapAttack=0;this.isFormGuildToggle=this.isInitData=this.isBossKillSuc=this.isCanReapeatReq=!1;this.timerForStart=-1;this.currentDamge=0;this._timeID=-1}var d=c.prototype;c.getInstance=function(){null==this.instance&&(this.instance=new c);return this.instance};d.setGldState=function(b){this.isHaveGuild=b;this.isHaveGuild||(this.timerForStart=this._timeID=
-1,this.setMyGldInfo(null))};d.setMyGldInfo=function(b){this.myGuildInfo=b};d.getMyGldInfo=function(){if(this.isHaveGuild&&null!=this.myGuildInfo)return this.myGuildInfo;console.log("\u5e2e\u4f1a\u6570\u636e\u6709\u8bef");return null};d.addItemToJoinList=function(b){null==this.joinGuildList&&(this.joinGuildList=[]);this.joinGuildList.push(b)};d.findItemByGID=function(b){if(0<b)for(var a=0;a<this.joinGuildList.length;a++)if(this.joinGuildList[a].guildID==b)return this.joinGuildList[a];return null};
d.clearJoinList=function(){this.joinGuildList=[]};d.addItemToGldRankList=function(b){null==this.gldRankList&&(this.gldRankList=[]);this.gldRankList.push(b)};d.clearGldRankList=function(){this.gldRankList=[]};d.addItemToGldOwnList=function(b){null==this.gldOWnRankList&&(this.gldOWnRankList=[]);this.gldOWnRankList.push(b)};d.clearGldWonRankList=function(){this.gldOWnRankList=[]};d.createTimer=function(){-1==this.timerForStart&&(this.timerForStart=Time.setInterval(this.onTimer,this,1E3))};d.onTimer=
function(){null!=this.myGuildInfo&&(this.myGuildInfo.guildNextOpenTime--,doAction(Const.Guild_refleshLeftTime),15>=this.myGuildInfo.guildNextOpenTime&&ProxyUtils.repCharMainIsEnroll(),0>=this.myGuildInfo.guildNextOpenTime&&(Time.clearInterval(this.timerForStart),this.onTimerComplete()))};d.onTimerComplete=function(){if(null==this.myGuildInfo||this.myGuildInfo.guildIsEnRoll)this.createWulinTimer(),GameMainLayer.instance.setGuildLayer(!1),this.localWulinData=null,this.enterWulin(!0)};d.countDown=function(){this.myGuildInfo.guildAcDuiTime--;
0==this.myGuildInfo.guildAcDuiTime%this.saveDamgTime&&(this.currentDamge=GuildWuLinDataManager.getInstance().bossToatalDamg-this.currentDamge,ProxyUtils.sendDamgToServer(this.currentDamge),this.currentDamge=GuildWuLinDataManager.getInstance().bossToatalDamg);doAction(Const.Guild_refleshWulinLeftTime);0>=this.myGuildInfo.guildAcDuiTime&&(this.currentDamge=GuildWuLinDataManager.getInstance().bossToatalDamg-this.currentDamge,ProxyUtils.sendDamgToServer(this.currentDamge),this.currentDamge=0,this.onWulinComplete(),
Time.clearInterval(this._timeID))};d.createWulinTimer=function(){-1==this._timeID&&(this._timeID=Time.setInterval(this.countDown,this,1E3))};d.onWulinComplete=function(){this.localWulinData=null;this.enterWulin(!1);GuildWuLinDataManager.getInstance().clearData()};d.enterWulin=function(b){GuildWuLinDataManager.getInstance();b?(this.isGuildWulinStart=!0,last_battle_status=GameMainLayer.instance.gameLayer._fightStatusBtn.getStatus(),GameUtils.pauseMainGame(),doAction(Const.Guild_ShowWuLin),doAction("hideBtn",
!1),doAction(Const.RESET_GAME)):(this.isGuildWulinStart=!1,this.isFormGuildToggle=!0,GameUtils.resumeMainGame(),doAction(Const.Guild_CloseWuLin),doAction("hideBtn",!0),doAction(Const.RESET_GAME),doAction(Const.ACTIVITY_BOSS_KILLED));GuildModel.refleshDPS();doAction(Const.REFRESH_HOME_BG);b=GuildWuLinDataManager.getInstance().getMainSkillList();doAction(Const.MAIN_HERO_SKILL_CHANGE,b);doAction(Const.REFRESH_UNOPEN_LIST);doAction(Const.CHANGE_COIN);doAction("changeCoinBg")};return c}();
GuildDataManager.prototype.__class__="GuildDataManager";
var GuildInfo=function(c){function d(){c.call(this);this.guildName="";this.guildCurMbCount=this.guildID=0;this.guildMaxMbCount=30;this.guildisApl=this.isMyGuild=!1;this.guildHostUID=this.guildHostName=this.guildNotice="";this.guildAcDuiTime=3600;this.guildPice=this.guildCb=0;this.guildAcLeftCount=5;this.guildIsEnRoll=!1;this.myGldRank=0;this.isCanRecAwd=!1;this.myGldDamg="0";this.exAwdNum=this.awdNum=0;this.myPersonDamg="0";this.myPersonRank=0}__extends(d,c);var b=d.prototype;b.setData=function(a,
b,c,d,g,l,k,m,n,p,r,s,v){""==a||0>=b||""==g?console.error("\u5e2e\u4f1a\u6570\u636e\u6709\u8bef"):(this.gldMbList=[],this.guildName=a,this.guildID=b,this.guildCurMbCount=c,this.guildMaxMbCount=d,this.guildHostName=l,this.guildHostUID=g,this.guildCb=k,this.guildPice=m,this.guildAcLeftCount=n,this.setGldIsEnRoll(0<p),this.guildCurTime=r,this.guildAcDuiTime=s,this.guildNextOpenTime=v)};b.setIsMyGuild=function(a){this.isMyGuild=a;this.setIsAplGuild(!0)};b.setGldNotice=function(a){this.guildNotice=a};
b.setIsAplGuild=function(a){this.guildisApl=a};b.setMbList=function(a){this.gldMbList=a};b.addMbItem=function(a){null==this.gldMbList&&(this.gldMbList=[]);this.gldMbList.push(a)};b.removeMbItem=function(a){null!=this.gldMbList&&0<this.gldMbList.length&&this.gldMbList.erase(a)};b.setGldIsEnRoll=function(a){this.guildIsEnRoll=a};b.addAplyItem=function(a){null==this.gldAplyList&&(this.gldAplyList=[]);this.gldAplyList.push(a)};b.clearAplyList=function(){this.gldAplyList=[]};b.removeAplyItem=function(a){null!=
this.gldAplyList&&0<this.gldAplyList.length&&this.gldAplyList.erase(a)};b.reduceAcCount=function(a){void 0===a&&(a=1);0<this.guildAcLeftCount&&(this.guildAcLeftCount-=a)};b.reducePiceCount=function(a){0<this.guildPice&&(this.guildPice+=a)};b.setMyRankInfo=function(a,b,c,d,g){this.myGldRank=a;this.isCanRecAwd=b;this.myGldDamg=c;this.awdNum=d;this.exAwdNum=g};b.setMyPersonRankInfo=function(a,b){this.myPersonDamg=a;this.myPersonRank=b};return d}(egret.HashObject);GuildInfo.prototype.__class__="GuildInfo";
var GuildMemberInfo=function(){function c(c,b,a,e,f,h,g){""!=b&&(this.mdUID=b,this.mbName=c,this.mbCb=a,this.mbOnTime=e,this.mbRole=f,this.mbrankNum=h,this.mbDamg=g,this.setRoleMark(f,b))}c.prototype.setRoleMark=function(c,b){this.mbRoleMark=1==c&&b==ProxyUtils.userId?0:1==c?1:b==ProxyUtils.userId?2:3};return c}();GuildMemberInfo.prototype.__class__="GuildMemberInfo";
var GldAplyInfo=function(){return function(c,d,b,a,e,f){this.uId=c;this.uName=d;this.aplyTime=b;this.onlineTime=e;this.shenbin=f;this.aplyId=a}}();GldAplyInfo.prototype.__class__="GldAplyInfo";var RoleMarkEnum;(function(c){c[c.PresidentAndSelf=0]="PresidentAndSelf";c[c.President=1]="President";c[c.MySelf=2]="MySelf";c[c.OtherMember=3]="OtherMember"})(RoleMarkEnum||(RoleMarkEnum={}));
var HeroController=function(){function c(){this._heroList=[];this._pieces={}}var d=c.prototype;c.getInstance=function(){null==this._instance&&(this._instance=new c);return this._instance};d.getHeroList=function(){return this._heroList};d.heroIsCall=function(b){for(var a=0;a<this._heroList.length;a++)if(this._heroList[a].configId==b)return!0;return!1};d.getAliveHero=function(){for(var b=[],a=0;a<this._heroList.length;a++)this._heroList[a].isDead()||b.push(this._heroList[a]);return b};d.getPieceData=
function(b){return this._pieces[b]||[]};d.cleanHeroList=function(){for(var b=0;b<this._heroList.length;b++)this._heroList[b].lv=0,this._heroList[b].refreshDataWithSkill()};d.initHeroList=function(){this._heroList=[];var b=DataCenter.getInstance().totalData.heroList,a;for(a in b){var e=HeroModel.createByConfigId(a);e.lv=b[a].lv;e.isDead()&&e.autoReborn();this._heroList.push(e)}this._pieces={};for(b=0;b<this._heroList.length;b++)a=this._heroList[b],this._pieces.hasOwnProperty(a.config.timePiece)||(this._pieces[a.config.timePiece]=
[]),this._pieces[a.config.timePiece].push(a);this.mainHero=HeroModel.createByConfigId(1E3);this.mainHero.lv=DataCenter.getInstance().totalData.mainHero.lv};d.addHero=function(b){this._heroList.push(b);this._pieces.hasOwnProperty(b.config.timePiece)||(this._pieces[b.config.timePiece]=[]);this._pieces[b.config.timePiece].push(b)};d.refreshHeroModel=function(){for(var b=new NumberModel,a=new NumberModel,e=0;e<this._heroList.length;e++){var c=this._heroList[e];c.refreshDataWithSkill();c.isDead()||(b.add(c.dps),
a.add(c.bossDps))}this.currentDPS=b.getNumer();this.currentBossDPS=a.getNumer();this.refreshMainHero();doAction(Const.REFRESH_SKILL_VIEW)};d.refreshCurrentDPS=function(){for(var b=new NumberModel,a=new NumberModel,e=0;e<this._heroList.length;e++){var c=this._heroList[e];c.isDead()||(b.add(c.dps),a.add(c.bossDps))}this.currentDPS=b.getNumer();this.currentBossDPS=a.getNumer();DataCenter.getInstance().statistics.resetValue(StatisticsType.dps,this.currentDPS);this.refreshMainHero();doAction(Const.REFRESH_SKILL_VIEW)};
d.refreshMainHero=function(){this.mainHero.refreshDataWithSkill()};d.dispose=function(){for(var b=0;b<this._heroList.length;b++)this._heroList[b].dispose()};return c}();HeroController.prototype.__class__="HeroController";
var GuildMainSkillItemData=function(){function c(){this.skillCostType=this.skillID=0;this.skillDes="\u65e0";this.skillCurLevel=this.skillMinLevel=this.skillMinLevel=0;this.skillMaxLevel=1;this.skillType=0;this.skillName="\u65e0";this.baseCost=this.baseDamg=0;this.wuxueInfo=[];this.skilState=0}var d=c.prototype;d.isMaxLevel=function(){return this.skillCurLevel==this.skillMaxLevel};d.isActive=function(){return this.skillCurLevel>this.skillMinLevel};d.getskillLevelCost=function(){if(1==this.skillType){if(null!=
this.getSkillFloorNeedActive()){var b=this.getSkillFloorNeedActive().floorCost;this.skillCostType=this.getSkillFloorNeedActive().floorCostType;return b}return this.isActive()?(this.skillCostType=1,this.baseCost*Math.pow(1.075,this.skillCurLevel-1)):this.baseCost}if(0==this.skillType)return this.isActive()?0:this.baseCost};d.skillCurFloor=function(){var b=[];if(null!=this.wuxueInfo){for(var a=0;a<this.wuxueInfo.length;a++)this.skillCurLevel>=this.wuxueInfo[a].floorActiveLevel&&this.wuxueInfo[a].isActive&&
b.push(this.wuxueInfo[a]);return b}return null};d.getSkillFloorNeedActive=function(){if(null!=this.wuxueInfo)for(var b=0;b<this.wuxueInfo.length;b++)if(this.skillCurLevel==this.wuxueInfo[b].floorActiveLevel&&!this.wuxueInfo[b].isActive)return this.wuxueInfo[b];return null};d.setCurrentLevel=function(b){this.skillCurLevel=b};Object.defineProperty(d,"skillState",{get:function(){if(!this.isActive()){if(0==this.skillCostType)return GuildWuLinDataManager.getInstance().getcurrentHaveGold()<this.getskillLevelCost()?
0:1;if(1==this.skillCostType)return GuildWuLinDataManager.getInstance().currentHaveCrytal<this.getskillLevelCost()?0:1}if(this.isActive()){if(0==this.skillType)return 2;if(0==this.skillCostType)return GuildWuLinDataManager.getInstance().getcurrentHaveGold()<this.getskillLevelCost()?null!=this.getSkillFloorNeedActive()?4:5:null!=this.getSkillFloorNeedActive()?3:2;if(1==this.skillCostType)return GuildWuLinDataManager.getInstance().currentHaveCrytal<this.getskillLevelCost()?null!=this.getSkillFloorNeedActive()?
4:5:null!=this.getSkillFloorNeedActive()?3:2}},enumerable:!0,configurable:!0});return c}();GuildMainSkillItemData.prototype.__class__="GuildMainSkillItemData";var CostType;(function(c){c[c.Glod=0]="Glod";c[c.Crytal=1]="Crytal"})(CostType||(CostType={}));var SkillType;(function(c){c[c.Main=0]="Main";c[c.WuXue=1]="WuXue"})(SkillType||(SkillType={}));var WuXueSkillInfo=function(){return function(){this.isActive=!1}}();WuXueSkillInfo.prototype.__class__="WuXueSkillInfo";var SkillState;
(function(c){c[c.UnActive=0]="UnActive";c[c.CanActive=1]="CanActive";c[c.Normal=2]="Normal";c[c.CanLock=3]="CanLock";c[c.DisLock=4]="DisLock";c[c.Disable=5]="Disable"})(SkillState||(SkillState={}));
var TargetHeroAll=-1,SkillModel=function(){function c(b){this.configId=0;this.config=null;this._lv=-1;this.init(b)}var d=c.prototype;Object.defineProperty(d,"lv",{get:function(){return this._lv},set:function(b){this._lv=b},enumerable:!0,configurable:!0});d.getRes=function(){var b="";return b="icon_skill_"+this.config.iconID};d.init=function(b){this.configId=parseInt(b);this.config=RES.getRes("skillConfig")[b]};d.getMainCost=function(){var b=new NumberModel;b.add(this.config.baseCost);b.times(Math.pow(this.config.cost,
this._lv));return GameUtils.getCallCost(b.getNumer())};d.getTargetHero=function(){return this.config.targetHero};d.getEffectType=function(){return this.config.effectType};d.getValue=function(){return this.config.value};d.getOpenLevel=function(){return this.config.level};d.getCDTime=function(){for(var b=SkillController.getInstance().holyEffect,a=1,e=SkillController.getInstance().getBuffList(),c=0;c<e.length;c++)31==e[c].getEffectType()&&(a*=e[c].getValue());for(e=0;e<b.length;e++)b[e].type==this.config.type1&&
(a*=1-b[e].value);return this.config.cd*a};d.getLastTime=function(){for(var b=SkillController.getInstance().holyEffect,a=1,e=0;e<b.length;e++)b[e].type==this.config.type2&&(a=Number(b[e].value)+1);return this.config.last*a};d.getDes=function(){var b;b=0==this.lv?this.config.base+this.config.value:this.config.base+this.lv*this.config.value;b*=this.config.showTimes;10<b.toString().length&&(b=b.toFixed(2));return this.config.des.replace("{0}",b)};c.createByConfigId=function(b){return SkillModelCache.getInstance().getCache(b)};
return c}();SkillModel.prototype.__class__="SkillModel";var SkillModelCache=function(){function c(){this._models=[]}var d=c.prototype;c.getInstance=function(){null==this._instance&&(this._instance=new c);return this._instance};d.getCache=function(b){if(this._models[b])return this._models[b];var a=new SkillModel(b);return this._models[b]=a};return c}();SkillModelCache.prototype.__class__="SkillModelCache";var getApplyString=function(c){return"get_holy_effect"+c},SkillEffectType;
(function(c){c[c.hurt=1]="hurt";c[c.critPro=2]="critPro";c[c.critHurt=3]="critHurt";c[c.hurt1=4]="hurt1";c[c.dropCoin=5]="dropCoin";c[c.bossHurt=6]="bossHurt";c[c.boxCoin=7]="boxCoin";c[c.skillLastTime6=8]="skillLastTime6";c[c.skillCDTime6=9]="skillCDTime6";c[c.skillLastTime5=10]="skillLastTime5";c[c.skillCDTime5=11]="skillCDTime5";c[c.skillLastTime4=12]="skillLastTime4";c[c.skillCDTime4=13]="skillCDTime4";c[c.skillLastTime3=14]="skillLastTime3";c[c.skillCDTime3=15]="skillCDTime3";c[c.skillLastTime2=
16]="skillLastTime2";c[c.skillCDTime2=17]="skillCDTime2";c[c.skillCDTime1=18]="skillCDTime1";c[c.holyAwardNum=19]="holyAwardNum";c[c.levelUpCost=20]="levelUpCost";c[c.boxMonster=21]="boxMonster";c[c.coinTenTimes=22]="coinTenTimes";c[c.bossCoin=23]="bossCoin";c[c.bossHP=24]="bossHP";c[c.bossTime=25]="bossTime";c[c.customPassNum=26]="customPassNum";c[c.dieProb=27]="dieProb";c[c.heroRebornTime=28]="heroRebornTime";c[c.offLineAward=29]="offLineAward";c[c.hurt2=30]="hurt2";c[c.allCDDown=31]="allCDDown"})(SkillEffectType||
(SkillEffectType={}));
var RebornItemView=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this._bg=ResourceUtils.createBitmapFromSheet("hero_item_bg","commonRes");this.addChild(this._bg);this._normalContainer=new egret.DisplayObjectContainer;this.addChild(this._normalContainer);this._specialContainer=new egret.DisplayObjectContainer;this.addChild(this._specialContainer);this._button1=new BuySkillButton;this._button1.init("hero_lvup_btn","hero_lvup_disable","holy_icon");
this._button1.x=523;this._button1.y=70;this._button1.useZoomOut(!0);this._button1.changeScale(1.01);this._button1.addOnClick(this.refreshSkill,this);this._specialContainer.addChild(this._button1);this._touchArea=ResourceUtils.createBitmapByName("mask");this._touchArea.alpha=0;this._touchArea.width=430;this._touchArea.height=100;this._touchArea.touchEnabled=!0;this._normalContainer.addChild(this._touchArea);this._touchArea.addEventListener(egret.TouchEvent.TOUCH_TAP,this.itemClick,this);this._iconContainer=
new egret.DisplayObjectContainer;this.addChild(this._iconContainer);this._staticContainer=new egret.DisplayObjectContainer;this._normalContainer.addChild(this._staticContainer);this._staticContainer.y=-8;this._staticContainer.x=15;this._lvStrLabel=new egret.TextField;this._staticContainer.addChild(this._lvStrLabel);this._lvStrLabel.x=360;this._lvStrLabel.y=15;this._lvStrLabel.size=20;this._lvStrLabel.text="Lv.";this._lvStrLabel.textColor=16777215;this._lvLabel=new egret.TextField;this._staticContainer.addChild(this._lvLabel);
this._lvLabel.x=390;this._lvLabel.y=15;this._lvLabel.size=20;this._lvLabel.textColor=16777215;this._nameLabel=new egret.TextField;this.addChild(this._nameLabel);this._nameLabel.x=107;this._nameLabel.y=10;this._nameLabel.size=20;this._nameLabel.textColor=15453202;this._desLabel1=new egret.TextField;this._staticContainer.addChild(this._desLabel1);this._desLabel1.x=90;this._desLabel1.y=47;this._desLabel1.size=20;this._desLabel1.textColor=16777215;this._desLabel2=new egret.TextField;this._staticContainer.addChild(this._desLabel2);
this._desLabel2.x=90;this._desLabel2.y=73;this._desLabel2.size=20;this._desLabel2.textColor=16777215;this._staticContainer.cacheAsBitmap=!0;this._button=new LevelUpButton2;this._button.init("reborn_lvup_btn","reborn_lvup_disable_btn","holy_icon");this._button.x=523;this._button.y=69;this._normalContainer.addChild(this._button);this._button.addOnClick(this.onClickHandler,this);this._button.useZoomOut(!0);addAction(Const.CHANGE_HOLY_NUM,this.refreshData,this)};b.refreshSkill=function(){if(this._button1._clickAble){doAction(Guide.BUY_HOLY);
var a=DataCenter.getInstance().totalData.rebornSkillList.length;DataCenter.getInstance().unlockRebornSkill(holyCostNum[a],bindHolyGc[a]);DataCenter.getInstance().statistics.addValue(StatisticsType.halidome)}else doAction(Const.SHOW_TIPS,"80\u5173\u540e\u6709\u51e0\u7387\u83b7\u5f97")};b.onClickHandler=function(){var a=DataCenter.getInstance().levelUpRebornSkill(this._data.configId);DataCenter.getInstance().loginAwardModel.isHolyFree()?DataCenter.getInstance().loginAwardModel.setAwarded():a&&(DataCenter.getInstance().changeHolyNum(-this._data.loop(this._data.lv-
1)),DataCenter.getInstance().addALog("lvup"+-this._data.loop(this._data.lv-1)));doAction(Const.CHANGE_HOLY_NUM)};b.itemClick=function(){0<this._data.lv?GameMainLayer.instance.showRebornSkillDetailLayer(this._data):0==this._idx&&GameMainLayer.instance.showRebornDetailLayer()};b.refreshLabel=function(){if(this._data){this._nameLabel.text=this._data.config.name;this._desLabel1.text=this._data.getDes1();this._desLabel2.text=this._data.getDes2();var a=this._data.getCostNum(),b=DataCenter.getInstance().totalData.holyNum;
this._button.setEnabled(b>=a);b="\u5347\u7ea7";0==this._data.lv?(this._lvStrLabel.visible=!1,this._lvLabel.visible=!1,b="\u672a\u83b7\u5f97",this._button.setEnabled(!1),this._button.refreshView("","",b)):(this._lvStrLabel.visible=!0,this._lvLabel.visible=!0,this._lvLabel.text=this._data.lv.toString(),this._button.refreshView(a,"",b),0==this._data.lvLimit()?DataCenter.getInstance().loginAwardModel.isHolyFree()?(this._button.refreshView("","","\u514d\u8d39"),this._button.setEnabled(!0)):this._button.refreshView(a,
"",b):this._data.lv>=this._data.lvLimit()?(this._button.setEnabled(!1),this._button.refreshView(a,"","\u7b49\u7ea7\u4e0a\u9650")):DataCenter.getInstance().loginAwardModel.isHolyFree()?(this._button.refreshView("","","\u514d\u8d39"),this._button.setEnabled(!0)):this._button.refreshView(a,"",b))}};b.refreshData=function(){if(0==this._idx){var a=DataCenter.getInstance().totalData.rebornSkillList.length>=Const.maxRebornSkill,b=DataCenter.getInstance().totalData.holyNum,c=holyCostNum[DataCenter.getInstance().totalData.rebornSkillList.length];
this._button1.setClickAble(b>=c&&!1==a);this._button1.refreshView(c,"","\u8d2d\u4e70\u795e\u5175");this._nameLabel.text=this._data.name;this._desLabel1.text=this._data.des;this._desLabel1.text="\u968f\u673a\u6fc0\u6d3b\u4e00\u628a\u65b0\u795e\u5175";this._desLabel2.text=""}else this.refreshLabel()};b.refreshView=function(a,b){this._data=a;this._idx=b;this._specialContainer.visible=0==b;this._button.visible=0!=b;this._lvStrLabel.visible=0!=b;this._lvLabel.visible=0!=b;this._iconContainer.removeChildren();
var c;c=0==this._idx?ResourceUtils.createBitmapFromSheet("holy_icon_0","iconRes"):egret.DynamicBitmap.create("holy_icon_"+this._data.configId,!1,null,null,"default_skill");c.x=18;c.y=12;this._iconContainer.addChild(c);0<this._idx&&0==this._data.lv&&(c=ResourceUtils.createBitmapFromSheet("head_mask"),c.x=16,c.y=10,this._iconContainer.addChild(c));this.refreshData()};return d}(BaseContainer);RebornItemView.prototype.__class__="RebornItemView";
var BuySkillButton=function(c){function d(){c.call(this);this.anchorX=this.anchorY=0.5}__extends(d,c);var b=d.prototype;b.setEnabledState=function(){};b.setClickAble=function(a){this._clickAble=a;this._normal.visible=this._clickAble;this._dis&&(this._dis.visible=!this._clickAble)};b.init=function(a,b,c){void 0===c&&(c="coin_icon");this._container=new egret.DisplayObjectContainer;this._normal=ResourceUtils.createBitmapFromSheet(a,"commonRes");this._container.addChild(this._normal);this._dis=ResourceUtils.createBitmapFromSheet(b,
"commonRes");this._dis.visible=!1;this._container.addChild(this._dis);a=ResourceUtils.createBitmapFromSheet(c);this._container.addChild(a);a.x=45;a.y=-28;a.scaleX=a.scaleY=0.58;this._staticLabel=new egret.TextField;this._container.addChild(this._staticLabel);this._staticLabel.text="\u8d2d\u4e70\u795e\u5175";this._staticLabel.width=150;this._staticLabel.x=85;this._staticLabel.y=20;this._staticLabel.size=20;this._staticLabel.textColor=0;this._staticLabel.textAlign=egret.HorizontalAlign.CENTER;this._staticLabel.anchorX=
0.5;this._costLabel=new egret.TextField;this._container.addChild(this._costLabel);this._costLabel.x=80;this._costLabel.y=-21;this._costLabel.size=20;this._costLabel.width=80;this._costLabel.textColor=16777215;this._valueLabel=new egret.TextField;this._container.addChild(this._valueLabel);this._valueLabel.x=80;this._valueLabel.y=35;this._valueLabel.size=20;this._valueLabel.width=145;this._valueLabel.textAlign=egret.HorizontalAlign.CENTER;this._valueLabel.anchorX=0.5;this._valueLabel.textColor=0;this.addChild(this._container);
this._container.cacheAsBitmap=!0};b.refreshView=function(a,b,c){this._costLabel.text=a;this._valueLabel.text=b;this._staticLabel.text=c};return d}(SimpleButton);BuySkillButton.prototype.__class__="BuySkillButton";
var holyCostNum=[1,3,7,13,22,36,57,88,134,201,298,439,643,934,1350,1940,2790,3990,5680,8080,11460,16200,22870,32220,45310,63620,89200,124880,174610,243850],bindHolyGc=[37,39,43,49,57,67,79,93,109,127,147,169,193,219,247,277,309,343,379,417,457,499,543,589,637,687,739,793,849,907],changeHolySc=[1,5,14,28,50,79,117,166,226,300,387,489,608,744,900,1075,1271,1490,1732,2E3,2293,2613,2962,3340,3750,4191,4665,5174,5718,6300],FriendController=function(){function c(){this._clickAdd=this._tickTime=1}var d=
c.prototype;c.getInstance=function(){null==this._instance&&(this._instance=new c);return this._instance};d.openFriend=function(b){void 0===b&&(b=!0);this.isOpen=b;0>this._tickTime||!1==b?ProxyUtils.getMyInfo(this.getMyInfo,this):this.myInfo&&this.friendList&&GameMainLayer.instance.showFriendLayer()};d.getMyInfo=function(b){0==b.s?(this.myInfo=b,ProxyUtils.getFriendList(this.getFriendList,this)):this.openFriend(this.isOpen)};d.getFriendList=function(b){0==b.s?(this.friendList=b.l,this.isOpen&&GameMainLayer.instance.showFriendLayer(),
this.setClickAdd(),this._tickTime=300):ProxyUtils.getFriendList(this.getFriendList,this)};d.init=function(){this._timeID=Time.setInterval(this.tick,this,1E3)};d.getBuffLeftTime=function(){return this.myInfo&&this.myInfo.medicine?this.myInfo.medicine.lfTime:0};d.dated=function(b){return this.myInfo.birthchild&&this.myInfo.birthchild.hasIds?null!=this.myInfo.birthchild.hasIds[b]:!1};d.isDating=function(b){return this.myInfo.birthchild&&this.myInfo.birthchild.going?this.myInfo.birthchild.going.uId==
b&&0<this.myInfo.birthchild.going.end:!1};d.getClickBuffLfTime=function(){return this.myInfo&&this.myInfo.birthchild&&this.myInfo.birthchild.going?this.myInfo.birthchild.going.end:0};d.getBuff=function(){ProxyUtils.getFriendBuff(this.getBuffCallback,this)};d.getTime=function(){var b=(new Date).getTime()-DataCenter.getInstance().gameStartTime;return ProxyUtils.currentServerTime+b};d.getBuffCallback=function(b){this.myInfo.medicine&&(this.myInfo.medicine.lfTime=b.lfTime,this.myInfo.medicine.num=b.num,
this.myInfo.medicine.buffNum=b.buffNum,doAction(Const.GET_FRIEND_BUFF_DONE),doAction(Const.FRIEND_INFO_CHANGE));GameMainLayer.instance.hideFriendDetail()};d.tick=function(){this.myInfo&&this.myInfo.birthchild&&this.myInfo.birthchild.going&&(this.myInfo.birthchild.going.end-=1);this.myInfo&&this.myInfo.medicine&&(this.myInfo.medicine.lfTime-=1);this.myInfo&&(this._tickTime-=1)};d.isInEffect=function(){return 0<this.getBuffLeftTime()};d.isInClickEffect=function(){return 0<this.getClickBuffLfTime()};
d.getDropCoin=function(){return!1!=PlatformFactory.getPlatform().isFriendOpen()&&this.isInEffect()?1+0.2*this.myInfo.medicine.buffNum:1};d.getEffect=function(){return 1+0.2*this.myInfo.medicine.num};d.getClickAdd=function(){return!1!=PlatformFactory.getPlatform().isFriendOpen()&&this.isInClickEffect()?this._clickAdd:1};d.setClickAdd=function(){if(this.myInfo.birthchild&&this.myInfo.birthchild.going&&this.myInfo.birthchild.going.uId)for(var b=this.myInfo.birthchild.going.uId,a=0;a<this.friendList.length;a++)if(b==
this.friendList[a].uId){this._clickAdd=0.01*this.friendList[a].level.toString().length+1;return}this._clickAdd=1};d.getProgress=function(){return 5*this.myInfo.medicine.num};d.setTogetherInfo=function(b){for(var a=0;a<this.friendList.length;a++)if(this.friendList[a].uId==b){this.friendList[a].hasDateNum+=1;break}this.myInfo.birthchild.hasIds||(this.myInfo.birthchild.hasIds={});this.myInfo.birthchild.hasIds[b]=1;this.myInfo.birthchild.going||(this.myInfo.birthchild.going={});this.myInfo.birthchild.going.end=
3600;this.myInfo.birthchild.going.uId=b;this.setClickAdd()};d.getAwardCoin=function(b){b=this.getHP(b);var a=new NumberModel;a.add(b);a.times(1/45);"0"==a.getNumer()&&a.add(1);return a};d.getHP=function(b){var a=new NumberModel,e=0.01*Math.floor((b-1)/50);0.3<e&&(e=0.3);var c=(b-1)%5;a.add(29*Math.pow(1.5704-e,b-1)*[2,4,6,7,10][c]);return a.getNumer()};d.dispose=function(){this._timeID&&Time.clearInterval(this._timeID)};return c}();FriendController.prototype.__class__="FriendController";
var GuildWuLinDataManager=function(){function c(){this._mainHero=null;this.allDataSave={};this.bossToatalDamg=0;this.listData=[];this.currentHaveCrytal=0;this.readData("guildMainSkill");this.readData("guildHeroSkill")}var d=c.prototype;c.getInstance=function(){null==this.instance&&(this.instance=new c);return this.instance};d.clearData=function(){c.instance=null};d.getcurrentHaveGold=function(){return DataCenter.getInstance().totalData.gcNum.getDataNum()};d.getCurrentHaveCrytal=function(){return this.getFormatNum(this.currentHaveCrytal)};
d.addCrytal=function(b){this.currentHaveCrytal+=b;this.currentHaveCrytal=Math.floor(this.currentHaveCrytal);doAction("Guild_listskill");doAction(Const.CHANGE_COIN)};d.addCurBossDamg=function(b){this.bossToatalDamg+=b;this.bossToatalDamg=Math.floor(this.bossToatalDamg)};d.getCurBossDamg=function(){0>=this.bossToatalDamg&&(this.bossToatalDamg=1);return this.getFormatNum(this.bossToatalDamg)};d.getMoneyByType=function(b){return 1==b?this.currentHaveCrytal:this.getcurrentHaveGold()};d.reduceCrytal=function(b){0>=
this.currentHaveCrytal-b||(this.currentHaveCrytal-=b,doAction("Guild_listskill"),doAction(Const.CHANGE_COIN))};d.readData=function(b){this.resName=b;this.resConfig=RES.getRes(b);this.fillData()};d.fillData=function(){GuildModel.checkTimeToDo()||(GuildDataManager.getInstance().localWulinData=null);if(null!=GuildDataManager.getInstance().localWulinData){var b=GuildDataManager.getInstance().localWulinData;this.currentHaveCrytal=b.curHaveCrytal;this.bossToatalDamg=b.curTotalDamg}if("guildMainSkill"==
this.resName)for(var a in this.resConfig){var e=this.resConfig[a],b=new GuildMainSkillItemData;b.skillID=e.id;var c=GuildModel.findLocalDataByID(b.skillID);b.skillName=e.name;b.baseDamg=e.times;b.skillType=0;b.skillMaxLevel=1;null!=c&&b.setCurrentLevel(c.skillCurLevel);b.skillIcon="\u695a\u7559\u9999"==b.skillName?"icon_hero_skill_1":"\u521d\u7ea7\u52a0\u901f"==b.skillName?"simpleSpeed_0":"heightSpeed_0";null!=e.stoneCost&&""!=e.stoneCost?(b.skillCostType=1,b.baseCost=e.stoneCost):null!=e.goldCost&&
""!=e.goldCost&&(b.skillCostType=0,b.baseCost=e.goldCost);b.skillDes="\u4f24\u5bb3\u63d0\u9ad8:"+b.baseDamg+"\u500d";this.listData.push(b)}else if("guildHeroSkill"==this.resName)for(a in this.resConfig){e=this.resConfig[a];b=new GuildMainSkillItemData;b.skillID=e.id;b.skillName=e.name;b.baseDamg=e.damage;b.baseCost=e.cost;b.skillDes=e.intro;b.skillCostType=1;b.skillType=1;b.skillIcon="icon_head_"+e.icon;c=new WuXueSkillInfo;c.floorNum=1;c.floorCostType=1;c.floorActiveBuff=2*e.damageOne;c.floorActiveLevel=
e.lvOne;c.floorCost=e.costOne;c.floorIcon="icon_skill_1";b.wuxueInfo.push(c);c=new WuXueSkillInfo;c.floorNum=2;c.floorCostType=0;c.floorActiveBuff=e.damageTwo;c.floorActiveLevel=e.lvTwo;c.floorCost=e.costTwo;c.floorIcon="icon_skill_4";b.wuxueInfo.push(c);c=new WuXueSkillInfo;c.floorNum=3;c.floorCostType=0;c.floorActiveLevel=e.lvThree;c.floorActiveBuff=e.damageThree;c.floorCost=e.costThree;c.floorIcon="icon_skill_7";b.wuxueInfo.push(c);e=GuildModel.findLocalDataByID(b.skillID);if(null!=e&&(b.skillCurLevel=
e.skillCurLevel,null!=e.wuxueList&&0<e.wuxueList.length))for(c=0;c<b.wuxueInfo.length;c++)b.wuxueInfo[c].floorActiveLevel==e.wuxueList[c].floorCurLvl&&(b.wuxueInfo[c].isActive=e.wuxueList[c].isActive);this.listData.push(b)}};d.findSkillDataByID=function(b){for(var a=0;a<this.listData.length;a++)if(b==this.listData[a].skillID)return this.listData[a]};d.findSkillDataByName=function(b){for(var a=0;a<this.listData.length;a++)if(b==this.listData[a].skillName)return this.listData[a]};d.getNextLvDameg=function(b){b=
this.findSkillDataByID(b);if(1==b.skillType){var a=b.getSkillFloorNeedActive();return null==a?b.baseDamg*Math.pow(1.04,b.skillCurLevel)*this.items:a.floorActiveBuff}return 0};d.getClickDamnge=function(){var b=0.01*this.dps;1>b&&(b=1);return this.getFormatNum(b)};d.getTotalDamge=function(){return this.getFormatNum(this.dps)};d.computerAllDamge=function(){for(var b=0,a=this.items=0;a<this.listData.length;a++){var e=this.listData[a];if(e.isActive())if(0==e.skillType)this.items+=e.baseDamg;else if(1==
e.skillType){for(var c=1;c<=e.skillCurLevel;c++)b+=e.baseDamg*Math.pow(1.04,c-1);if(null!=e.skillCurFloor()&&0<e.skillCurFloor().length)for(c=0;c<e.skillCurFloor().length;c++)this.items+=e.skillCurFloor()[c].floorActiveBuff}}a=SkillController.getInstance().holyEffect;for(c=0;c<a.length;c++)1==a[c].type&&a[c].targetHero==TargetHeroAll&&(this.items+=1+a[c].value);a=SkillController.getInstance().getBuffList();for(e=0;e<a.length;e++)100001==a[e].configId&&(this.items+=a[e].getValue());return b*this.items};
Object.defineProperty(d,"dps",{get:function(){var b=this.computerAllDamge();1>b&&(b=1);return b},enumerable:!0,configurable:!0});d.getMainSkillList=function(){for(var b=[],a=0;a<this.listData.length;a++)"\u695a\u7559\u9999"==this.listData[a].skillName&&b.push(this.listData[a]);for(a=0;a<this.listData.length;a++)0==this.listData[a].skillType&&b.push(this.listData[a]);return b};d.getHeroSkillList=function(){for(var b=[],a=0;a<this.listData.length;a++)"\u695a\u7559\u9999"!=this.listData[a].skillName&&
0!=this.listData[a].skillType&&b.push(this.listData[a]);return b};d.getListDataFill=function(){return 0==this.currentClickTab?this.getMainSkillList():1==this.currentClickTab?this.getHeroSkillList():null};d.getSecDamg=function(b){for(var a=0,e=1;e<=b.skillCurLevel;e++)a+=b.baseDamg*Math.pow(1.04,e);0<this.items&&(a*=this.items);return 0<a?(b=new NumberModel,b.add(a),"\u6bcf\u79d2\u4f24\u5bb3:"+b.getNumer()):"\u672a\u9886\u609f"};d.getSecDamgNum=function(b){for(var a=0,e=1;e<=b.skillCurLevel;e++)a+=
b.baseDamg*Math.pow(1.04,e);0<this.items&&(a*=this.items);return a};d.getFormatNum=function(b){var a=new NumberModel;a.add(b);return a.getNumer()};Object.defineProperty(d,"mainHero",{get:function(){null==this._mainHero&&(this._mainHero=GuildHeroModel.createByConfigId(1E3));return this._mainHero},enumerable:!0,configurable:!0});d.fillDataToSave=function(){var b={};b.curHaveCrytal=this.currentHaveCrytal;b.curTotalDamg=this.bossToatalDamg;b.lastSaveTime=ProxyUtils.currentServerTime;b.skillInfo={};b.skillInfo.listSkill=
[];for(var a=0;a<this.listData.length;a++){var e={};e.skillID=this.listData[a].skillID;e.skillCurLevel=this.listData[a].skillCurLevel;if(null!=this.listData[a].wuxueInfo&&0<this.listData[a].wuxueInfo.length){e.wuxueList=[];for(var c=0;c<this.listData[a].wuxueInfo.length;c++){var d={};d.floorCurLvl=this.listData[a].wuxueInfo[c].floorActiveLevel;d.isActive=this.listData[a].wuxueInfo[c].isActive;e.wuxueList.push(d)}}b.skillInfo.listSkill.push(e)}return b};return c}();
GuildWuLinDataManager.prototype.__class__="GuildWuLinDataManager";var ClickTab;(function(c){c[c.Main=0]="Main";c[c.Hero=1]="Hero";c[c.Weapon=2]="Weapon"})(ClickTab||(ClickTab={}));
var MainSkill=function(){function c(b){this._skillModel=b}var d=c.prototype;d.execute=function(){this._status=2;this._lastTimeBeforeChange=this._lastTime=this._skillModel.getLastTime();this._timeID=Time.setInterval(this.countDown,this,1E3);this._lastValue=this._skillModel.config.base+this._skillModel.config.value*this._skillModel.lv;switch(this._skillModel.configId){case 22001:DataCenter.getInstance().statistics.addValue(StatisticsType.jumpattack);doAction(Const.BEGIN_MAIN_SKILL_1,this._lastValue);
break;case 22002:doAction(Const.BEGIN_MAIN_SKILL_2,this._lastValue);break;case 22003:doAction(Const.BEGIN_MAIN_SKILL_3);HeroController.getInstance().mainHero.changeCritPro(this._lastValue);break;case 22004:doAction(Const.CHANGE_SPEED,this._lastValue+1);break;case 22005:doAction(Const.BEGIN_MAIN_SKILL_4);this._lastValue+=1;HeroController.getInstance().mainHero.extraHurt=this._lastValue;break;case 22006:doAction(Const.BEGIN_MAIN_SKILL_5),HeroController.getInstance().mainHero.tapCoin=this._lastValue,
doAction(Const.CHANGE_CLICK_COIN)}addAction(Const.LEVELUP_MAIN_SKILL,this.mainSkillLevelUp,this);addAction(Const.REBORN_SKILL_REFRESH,this.rebornSkillListChange,this);addAction(Const.GAME_LOGOUT,this.dispose,this);addAction("clearnReborn",this.dispose,this)};d.mainSkillLevelUp=function(b){if(b==this._skillModel.configId){b=this._skillModel.config.base+this._skillModel.config.value*this._skillModel.lv;switch(this._skillModel.configId){case 22002:doAction(Const.STOP_MAIN_SKILL_VALUE_2);doAction(Const.BEGIN_MAIN_SKILL_2,
b);break;case 22003:HeroController.getInstance().mainHero.changeCritPro(-this._lastValue);HeroController.getInstance().mainHero.changeCritPro(b);break;case 22004:doAction(Const.CHANGE_SPEED,1/(this._lastValue+1));doAction(Const.CHANGE_SPEED,b+1);break;case 22005:this._lastValue+=1;HeroController.getInstance().mainHero.extraHurt=b;break;case 22006:HeroController.getInstance().mainHero.tapCoin=b}this._lastValue=b}};d.rebornSkillListChange=function(){var b=this._skillModel.getLastTime();b!=this._lastTimeBeforeChange&&
(this._lastTime+=b-this._lastTimeBeforeChange,this._lastTimeBeforeChange=b)};d.countDown=function(){this._lastTime-=1;if(0>=this._lastTime){Time.clearInterval(this._timeID);removeEventsByTarget(this);var b=this._skillModel.config.base+this._skillModel.config.value*this._skillModel.lv;switch(this._skillModel.configId){case 22002:doAction(Const.STOP_MAIN_SKILL_2);break;case 22003:doAction(Const.STOP_MAIN_SKILL_3);HeroController.getInstance().mainHero.changeCritPro(-b);break;case 22004:doAction(Const.CHANGE_SPEED,
1/(b+1));break;case 22005:doAction(Const.STOP_MAIN_SKILL_4);HeroController.getInstance().mainHero.extraHurt=1;break;case 22006:doAction(Const.STOP_MAIN_SKILL_5),HeroController.getInstance().mainHero.tapCoin=0,doAction(Const.CHANGE_CLICK_COIN)}}};d.initData=function(){var b=this._skillModel.config.base+this._skillModel.config.value*this._skillModel.lv;doAction(Const.STOP_MAIN_SKILL_2);doAction(Const.STOP_MAIN_SKILL_3);HeroController.getInstance().mainHero.changeCritPro(-b);doAction(Const.CHANGE_SPEED,
1/(b+1));HeroController.getInstance().mainHero.extraHurt=1;HeroController.getInstance().mainHero.tapCoin=0};d.dispose=function(){this.initData();removeEventsByTarget(this);this._timeID&&Time.clearInterval(this._timeID)};return c}();MainSkill.prototype.__class__="MainSkill";
var RebornSkillModel=function(){function c(b){this._lv=0;this.init(b)}var d=c.prototype;d.init=function(b){this.configId=b;this.config=RES.getRes("rebornConfig")[b];addFilter(Const.GET_HOLY_EFFECT,this.getHolyEffect,this)};d.getRes=function(){return"holy_icon_"+this.configId};d.lvLimit=function(){return this.config.maxLevel};d.getHolyEffect=function(b){return 0<this._lv&&b==getApplyString(this.config.effectType1)?this.config.base1+this.config.up1*(this._lv-1):b};Object.defineProperty(d,"lv",{get:function(){return this._lv},
set:function(b){this._lv=b},enumerable:!0,configurable:!0});d.getCostNum=function(){return this.loop(this._lv)};d.loop=function(b){return 0==b?0:1==b?Math.floor(this.config.cost+this.config.cost*Math.pow(1+this.config.up2/2.5,1)):Math.floor(this.loop(b-1)+this.config.cost*Math.pow(1+this.config.up2/2.5,b))};d.getNeedGc=function(){var b=DataCenter.getInstance().totalData.rebornSkillList;return changeHolySc[b.length-1]+this.bindCost};d.getNeedGc1=function(){var b=DataCenter.getInstance().totalData.rebornSkillList;
return changeHolySc[b.length]+this.bindCost};d.getTotalCost=function(){for(var b=this.callCost,a=1;a<this._lv;a++)b+=this.loop(a);return b};d.refreshEffect=function(){SkillController.getInstance().addHolyEffect(this.config.effectType1,this.config.targetHero1,this.config.base1+this.config.up1*(this._lv-1));SkillController.getInstance().addHolyAdd(this.config.base2+this.config.up2*(this._lv-1))};d.getDes1=function(){for(var b=[],a=0;a<arguments.length;a++)b[a-0]=arguments[a];b=b[0]||this._lv;0==b&&
(b=1);b=this.config.base1+this.config.up1*(b-1);b*=100;10<b.toString().length&&(b=b.toFixed(2));return this.config.des1.replace("{0}",b)};d.getDes2=function(){for(var b=[],a=0;a<arguments.length;a++)b[a-0]=arguments[a];b=b[0]||this._lv;0==b&&(b=1);b=this.config.base2+this.config.up2*(b-1);b*=100;10<b.toString().length&&(b=b.toFixed(2));return this.config.des2.replace("{0}",b)};d.destroy=function(){removeEventsByTarget(this);RebornSkillModelCache.getInstance().destroy(this.configId)};c.createByConfigId=
function(b){return RebornSkillModelCache.getInstance().getCache(b)};return c}();RebornSkillModel.prototype.__class__="RebornSkillModel";var RebornSkillModelCache=function(){function c(){this._models=[]}var d=c.prototype;c.getInstance=function(){null==this._instance&&(this._instance=new c);return this._instance};d.getCache=function(b){if(this._models[b])return this._models[b];var a=new RebornSkillModel(b);return this._models[b]=a};d.destroy=function(b){delete this._models[b]};return c}();
RebornSkillModelCache.prototype.__class__="RebornSkillModelCache";
var DataCenter=function(){function c(){this.currentTime=0;this.countdown=this.payAward=this.achieve=this.statistics=null;this.achieveList=[];this.payAwardList=[];this.topList=[];this.topTime=this.top=0;this.isUseCoinSkill=this.isPay=null;this.topPic="";this._paymentList=null;this.gameStartTime=-1;this.rebornAwardList=[];this.rechargeAwardList=[];this._logList=[];this._holySetList=[];this._dieModel=null}var d=c.prototype;d.init=function(){this._currentDPSList=[];this._tempList=[];FateController.getInstance().init();
SkillController.getInstance().refreshHolySkillList();HeroController.getInstance().initHeroList();SkillController.getInstance().refreshSkillList();SkillController.getInstance().refreshBuffList();SkillController.getInstance().refreshEquipList();HeroController.getInstance().refreshHeroModel();MainTickController.getInstance().startTick();(new EquipListener).init()};c.getInstance=function(){null==this._instance&&(this._instance=new c);return this._instance};Object.defineProperty(d,"paymentList",{get:function(){null==
this._paymentList&&(this._paymentList=PlatformFactory.getPlatform().getPayments());return this._paymentList},enumerable:!0,configurable:!0});d.getShowPaymentList=function(){return this.paymentList.filter(function(b){return b.canShow})};d.formatData=function(b){return b&&Array.isArray(b)?{}:b};d.addALog=function(b){GameUtils.isAWY()&&(this._logList.push(b),b=JSON.stringify(this._logList),b+="now"+this.totalData.holyNum,egret.localStorage.setItem(ProxyUtils.userId+"bearjoyTapGameDataHoly",b))};d.addHolySetLog=
function(b){GameUtils.isAWY()&&(this._holySetList.push(b),b=JSON.stringify(this._holySetList),egret.localStorage.setItem(ProxyUtils.userId+"bearjoyTapGameDataHolySet",b))};d.initGameData=function(b){this.totalData=new DataModel(b);this.currentTime=b.time||(new Date).getTime();this.countdown=new CountdownModel(this.formatData(b.countdown)||{});GuildDataManager.getInstance().localWulinData=b.wulinData;this.isPay=new ObjectModel(b.isPay||0);this.isPay.notify=Const.CHANGE_PAY;this.isUseCoinSkill=new ObjectModel(b.isUseCoinSkill||
0);this.isUseCoinSkill.notify=Const.CHANGE_USE_SKILL;this.lanternModel=new ActivityModel(b.newYear||{});this.loginAwardModel=new LoginAwardModel(b.loginAward||{});this.loginAwardModel.day=ProxyUtils.loginDay;this.gameStartDate=new Date(ProxyUtils.currentServerTime);this.saved=new NumberModel;var a=(new Date).getTime()-this.currentTime;1E3<a&&this.countdown.over(Math.floor(a/1E3));this.statistics=new StatisticsModel(b.statistics||{});this.statistics.notifyName=Const.CHANGE_STATISTICS;this.achieve=
new StatisticsModel(this.formatData(b.achieve)||{});this.achieve.notifyName=Const.CHANGE_STATISTICS;this.payAward=new StatisticsModel(b.payAward||{});this.payAward.notifyName=Const.CHANGE_STATISTICS;this.achieveList=[];var a=RES.getRes("achieveConfig"),e;for(e in a)this.achieveList.push(new AchieveModel(a[e]));this.payAwardList=[];a=RES.getRes("diamond_award");for(e in a)this.payAwardList.push(new PayAwardModel(a[e]));this.gameStartTime=(new Date).getTime();this.rebornAwardList=b.ral||[];this.rechargeAwardList=
b.rechargeAL||[];this.init()};d.getPaymentModel=function(b){for(var a=0;a<this.paymentList.length;a++)if(this.paymentList[a].goodType==b)return this.paymentList[a];return null};d.hasPaymentCountdown=function(b){return 0!=this.countdown.getTime("payment_"+b)};d.getBossHP=function(b,a){void 0===b&&(b=!1);void 0===a&&(a=!1);var e=1,d=applyFilters(Const.GET_HOLY_EFFECT,getApplyString(24));d!=getApplyString(24)&&(e=1-d);!1==a&&(e=1);var d=[2,4,6,7,10],h=c.getInstance().totalData,g=new NumberModel,l=0.01*
Math.floor((h.currentLevel-1)/50);0.3<l&&(l=0.3);if(GameUtils.isBoss()&&b){var k=(h.currentLevel-1)%5;g.add(29*Math.pow(1.5704-l,h.currentLevel-1)*d[k]*e)}else g.add(29*Math.pow(1.5704-l,h.currentLevel-1)*e);return g.getNumer()};d.getActivityHP=function(b,a){void 0===b&&(b=!1);void 0===a&&(a=!0);var e=this.getBossHP(b,a),c=new NumberModel;c.add(e);c.times(20);GuildDataManager.getInstance().isGuildBoss&&c.addStringNum(e);return c.getNumer()};d.getGcNum=function(){return this.totalData.gcNum.getNumer()};
d.getScNum=function(){return this.totalData.scNum.getNumer()};d.hasEnoughLantern=function(b){return this.lanternModel.itemNum>=b};d.hasEnoughSc=function(b){return this.totalData.scNum.compare(b)};d.hasEnoughGc=function(b){return this.totalData.gcNum.compare(b)};d.checkKillHero=function(){if(!GuildDataManager.getInstance().isGuildWulinStart)if(GuildDataManager.getInstance().isFormGuildToggle)GuildDataManager.getInstance().isFormGuildToggle=!1;else if(!this.hasPaymentCountdown("shield")){var b=c.getInstance().totalData.currentLevel,
a=0.1,e=applyFilters(Const.GET_HOLY_EFFECT,getApplyString(27));e!=getApplyString(27)&&(a*=1-e);e=Math.random();50<b&&0==b%5&&e<a&&0<HeroController.getInstance().getAliveHero().length&&c.getInstance().killHero()}};d.checkDrop=function(){this.lanternModel.clickNum+=1;var b=0.02;10>=this.lanternModel.clickNum&&(b=0.2);Math.random()<=b&&doAction(Const.SHOW_LANTERNCOIN)};d.changeLanternNum=function(b){this.lanternModel.itemNum+=parseInt(b);0>this.lanternModel.itemNum&&(this.lanternModel.itemNum=0);doAction(Const.CHANGE_LANTERN_NUM)};
d.evolutionHero=function(b){this.totalData.heroList[b.configId]&&(this.totalData.heroList[b.configId].lv+=1,this.totalData.heroList[b.configId].skill=[],b.refreshHeroSkillList(),b.refreshDataWithSkill(),SkillController.getInstance().refreshSkillList(),HeroController.getInstance().refreshHeroModel(),doAction(Const.REFRESH_UNOPEN_LIST))};d.killHero=function(){var b=HeroController.getInstance().getAliveHero(),a=GameUtils.random(0,b.length-1);b[a].killMe();SkillController.getInstance().refreshSkillList();
HeroController.getInstance().refreshHeroModel();doAction(Const.HERO_DEAD,b[a]);doAction(Const.REFRESH_UNOPEN_LIST);this._dieModel=b[a]};d.addHero=function(b){b.configId&&(this.totalData.heroList[b.configId]={},this.totalData.heroList[b.configId].lv=1,this.totalData.heroList[b.configId].skill=[],this.totalData.heroList[b.configId].dieTime=0,b.refreshDataWithSkill(),HeroController.getInstance().addHero(b),SkillController.getInstance().refreshSkillList(),HeroController.getInstance().refreshHeroModel(),
doAction(Const.ADD_HERO,b))};d.hasEnoughCallHero=function(){var b=c.getInstance().totalData.heroList,a=RES.getRes("heroConfig"),e;for(e in a){var d=a[e];if((!b.hasOwnProperty(e)||0==b[e].lv)&&0==d.isMain&&(d=d.callCost.split(","),this.hasEnoughSc(GameUtils.getCallCost(d[0]))))return!0}return!1};d.hasEnoughNewSkill=function(){var b=this.totalData.mainHero.skill,a=RES.getRes("skillConfig"),e;for(e in b)if(0==b[e]){var c=a[e];if(this.totalData.mainHero.lv>=c.level&&this.hasEnoughSc(GameUtils.getCallCost(c.baseCost)))return!0}return!1};
d.mainSkillUp=function(b,a){void 0===a&&(a=1);if(!isNaN(b)&&null!=this.totalData.mainHero.skill[b])if(this.totalData.mainHero.skill[b]+=a,1==this.totalData.mainHero.skill[b]){doAction(Const.UNLOCK_MAIN_SKILL);var e=RES.getRes("skillConfig");doAction(Const.SHOW_TIPS,"\u89e3\u9501\u65b0\u6280\u80fd:"+e[b].name)}else doAction(Const.LEVELUP_MAIN_SKILL,b)};d.levelUpHero=function(b,a){void 0===a&&(a=1);this.totalData.heroList[b.configId]?(this.totalData.heroList[b.configId].lv+=a,c.getInstance().statistics.addValue(StatisticsType.upgradehero,
a.toString())):b.isMainHero()&&(this.totalData.mainHero.lv+=a,doAction("mainHeroLevelUp"),this.statistics.updateValue(StatisticsType.maxLv,this.totalData.mainHero.lv));doAction(Const.HERO_UPGRADE,b);b.refreshDataWithSkill();HeroController.getInstance().refreshCurrentDPS()};d.unlockSkill=function(b,a){this.totalData.heroList[b.configId].skill.push(a);b.refreshHeroSkillList();SkillController.getInstance().refreshSkillList();HeroController.getInstance().refreshHeroModel();doAction(Const.REFRESH_UNOPEN_LIST)};
d.showDieLayer=function(){this._dieModel&&(GameMainLayer.instance.showDieLayer(this._dieModel),this._dieModel=null)};d.bossLevelUp=function(b,a){this.totalData.currentPass+=1;this.totalData.currentPass>=GameUtils.getMaxCustomPass()+1?!1==applyFilters(Const.ISBOSS,!1)?doAction(Const.FIGHT_BOSS):(this.showDieLayer(),this.totalData.currentPass=1,this.totalData.currentLevel+=1,this.totalData.currentLevel>Const.maxLevel&&(this.totalData.currentLevel=Const.maxLevel),doAction(Const.BOSS_KILLED,b,a),doAction(Const.REFRESH_HOME_BG),
80<this.totalData.currentLevel&&this.totalData.currentLevel<Const.maxLevel&&1==this.totalData.currentLevel%10&&this.dropHoly(),ProxyUtils.crossLevel(this.totalData.currentLevel)):this.totalData.currentPass>=GameUtils.getMaxCustomPass()?doAction(Const.FIGHT_BOSS):doAction(Const.REFRESH_BOSS)};d.dropHoly=function(){doAction(Const.SHOW_HOLYCOIN)};d.reduceSc=function(b){this.totalData.scNum.reduce(b);doAction(Const.CHANGE_COIN)};d.reduceGc=function(b,a,e,c,d){void 0===a&&(a=!1);void 0===e&&(e=-1);void 0===
c&&(c=null);void 0===d&&(d=null);!1==a?(a=new NumberModel,a.add(b),ProxyUtils.reduceDiamond(a.getData(),e,c,d)):(ActivityManager.getInstance().useGc(b),this.totalData.gcNum.reduce(b),doAction(Const.CHANGE_DIAMOND))};d.changeGc=function(b){this.totalData.gcNum.add(b);doAction(Const.CHANGE_DIAMOND)};d.refreshGc=function(b){this.totalData.gcNum=new NumberModel;this.totalData.gcNum.add(b);doAction(Const.CHANGE_DIAMOND)};d.changeSc=function(b){this.totalData.scNum.add(b);c.getInstance().statistics.addValue(StatisticsType.coin,
b);doAction(Const.CHANGE_COIN)};d.changeHolyNum=function(b){this.totalData.holyNum+=parseInt(b);c.getInstance().statistics.addValue(StatisticsType.skull,b);doAction(Const.CHANGE_HOLY_NUM);this.saveData()};d.SaveHolyNum=function(b){this.totalData.holyNum=b;doAction(Const.CHANGE_HOLY_NUM);this.saveData()};d.getHolyNum=function(){return this.totalData.holyNum};d.resetGame=function(){this.statistics.addValue(StatisticsType.loseSc,this.getScNum());this.statistics.addValue(StatisticsType.loseDPS,HeroController.getInstance().currentDPS);
this.totalData.resetData();this.statistics.removeValue(StatisticsType.dps);this.statistics.removeValue(StatisticsType.level);this._currentDPSList=[];this._tempList=[];HeroController.getInstance().cleanHeroList();HeroController.getInstance().initHeroList();SkillController.getInstance().refreshSkillList();SkillController.getInstance().refreshHolySkillList();HeroController.getInstance().refreshHeroModel();doAction(Const.RESET_GAME);doAction(Const.CHANGE_COIN);doAction("clearnReborn");var b=(new Date).getTime();
this.statistics.resetData(StatisticsType.rebornTime,b);this.statistics.addValue(StatisticsType.metempsychosis)};d.destroyRebornSkill=function(b){for(var a=0;a<this.totalData.rebornSkillList.length&&this.totalData.rebornSkillList[a].id!=b.configId;a++);b.destroy();this.totalData.rebornSkillList.splice(a,1);SkillController.getInstance().refreshHolySkillList();HeroController.getInstance().refreshHeroModel();doAction(Const.CHANGE_REBORN_SKILL);doAction(Const.REBORN_SKILL_REFRESH);this.reduceGc(b.getNeedGc1());
b=b.getTotalCost();this.changeHolyNum(b);this.addALog("destroy"+b)};d.unlockRebornSkill=function(b,a){for(var e=[],c=0;29>c;c++)e.push(10001+c);for(c=0;c<this.totalData.rebornSkillList.length;c++){var d=e.indexOf(this.totalData.rebornSkillList[c].id);-1!=d&&e.splice(d,1)}c=GameUtils.random(0,e.length-1);d={};d.id=e[c];d.lv=1;d.cost=b;d.bind=a;this.totalData.rebornSkillList.push(d);SkillController.getInstance().refreshHolySkillList();HeroController.getInstance().refreshHeroModel();doAction(Const.CHANGE_REBORN_SKILL);
doAction(Const.REBORN_SKILL_REFRESH);this.changeHolyNum(-b);this.addALog("unlock"+-b);e=RebornSkillModel.createByConfigId(d.id);GameMainLayer.instance.showHolyAnimation(e)};d.buyBuff=function(b){-1<this.totalData.buffList.indexOf(b)||(this.totalData.buffList.push(b),SkillController.getInstance().refreshBuffList(),100004!=b?HeroController.getInstance().refreshHeroModel():doAction(Const.BUFF_CD))};d.buyEquip=function(b){-1<this.totalData.equipList.indexOf(b)||(this.totalData.equipList.push(b),SkillController.getInstance().refreshEquipList(),
HeroController.getInstance().refreshHeroModel(),doAction(Const.REFRESH_EQUIP))};d.levelUpRebornSkill=function(b){var a=RebornSkillModel.createByConfigId(b);if(c.getInstance().totalData.holyNum<a.getCostNum()&&!c.getInstance().loginAwardModel.isHolyFree())return doAction(Const.SHOW_TIPS,"\u9b42\u7389\u4e0d\u8db3"),!1;for(a=0;a<this.totalData.rebornSkillList.length;a++)if(this.totalData.rebornSkillList[a].id==b){this.totalData.rebornSkillList[a].lv+=1;break}SkillController.getInstance().refreshHolySkillList();
HeroController.getInstance().refreshHeroModel();doAction(Const.REFRESH_UNOPEN_LIST);doAction(Const.REBORN_SKILL_REFRESH);return!0};d.useSkill=function(b){(new MainSkill(b)).execute()};d.disposeSkill=function(b){(new MainSkill(b)).initData()};d.refreshSkillCD=function(b,a){this.totalData.mainSkillCD[b]||(this.totalData.mainSkillCD[b]={});this.totalData.mainSkillCD[b]=a};d.hasNewPayAward=function(){for(var b=0;b<this.payAwardList.length;b++)if(this.payAwardList[b].canAward())return!0;return!1};d.hasNewAchieve=
function(){for(var b=0;b<this.achieveList.length;b++)if(this.achieveList[b].canAward())return!0;return!1};d.getAttackInfo=function(b){void 0===b&&(b="touch");if(GuildDataManager.getInstance().isGuildWulinStart)return b=0.01*GuildWuLinDataManager.getInstance().dps,1>b&&(b=1),{crit:!1,dmg:GuildWuLinDataManager.getInstance().getFormatNum(b)};var a=HeroController.getInstance().mainHero,e=a.critPro,c=!1;Math.random()<e&&(c=!0);c=applyFilters(Const.FORMAT_ATTACK_CRIT,c,b);e=applyFilters(Const.ISBOSS,!1)?
a.bossDps:a.tapDamage;if(c){this.statistics.addValue(StatisticsType.crit);var d=new NumberModel;d.add(e);d.times(a.critHurt);1<a.extraHurt&&d.times(a.extraHurt);FriendController.getInstance().isInClickEffect()&&d.times(FriendController.getInstance().getClickAdd());e=d.getNumer()}else 1<a.extraHurt&&(d=new NumberModel,d.add(e),d.times(a.extraHurt),FriendController.getInstance().isInClickEffect()&&d.times(FriendController.getInstance().getClickAdd()),e=d.getNumer());e=applyFilters(Const.FORMAT_ATTACK_DMG,
e,b);return{crit:c,dmg:e}};d.getTheDamage=function(b){var a=HeroController.getInstance().mainHero,e;e=applyFilters(Const.ISBOSS,!1)?a.bossDps:a.tapDamage;var c=new NumberModel;c.add(e);c.times(b);1<a.extraHurt&&c.times(a.extraHurt);FriendController.getInstance().isInClickEffect()&&c.times(FriendController.getInstance().getClickAdd());e=c.getNumer();return{dmg:e}};d.recordAttackDPS=function(b){this._currentDPSList.push(b)};d.resetRecordAttack=function(){this._tempList=this._currentDPSList;this._currentDPSList=
[]};d.getRecordAttack=function(){return this._tempList};d.refreshCurrentDPS=function(){for(var b=this._tempList,a=new NumberModel,e=0;e<b.length;e++)a.add(b[e]);doAction(Const.REFRESH_CURRENT_DPS,a.getNumer())};d.serialize=function(){var b={};b.hyList=this.totalData.hyList;b.sc=encodeURIComponent(this.totalData.scNum.getData());b.gc=this.totalData.gcNum.getData();b.curLife=this.totalData.currentLife;b.curLv=this.totalData.currentLevel;b.curPass=this.totalData.currentPass;b.hl=this.totalData.heroList;
b.time=this.currentTime;b.mh=this.totalData.mainHero;b.skillCD1=this.totalData.mainSkillCD;b.statistics=this.statistics.getData();b.achieve=this.achieve.getData();b.showNum=this.totalData.showHeroNum;b.rebornSkill=this.totalData.rebornSkillList;b.yu=this.totalData.getKey();b.countdown=this.countdown.getData();b.guideStep=this.totalData.guideStep;b.shareFalls=this.totalData.shareFalls;b.isUseCoinSkill=this.isUseCoinSkill.getValue();b.isPay=this.isPay.getValue();b.payAward=this.payAward.getData();b.saved=
encodeURIComponent(this.saved.getData());b.buffList=this.totalData.buffList;b.ral=this.rebornAwardList;b.rechargeAL=this.rechargeAwardList;b.loginAward=this.loginAwardModel.getData();b.newYear=this.lanternModel.getData();b.equipList=this.totalData.equipList;b.heroEquip=this.totalData.heroEquip;b.wulinData=GuildWuLinDataManager.getInstance().fillDataToSave();b.uId=ProxyUtils.userId;var a=new NumberModel;a.add(HeroController.getInstance().currentDPS);b.heroDPS=encodeURIComponent(a.getData());a=new NumberModel;
a.add(this.statistics.getValue(StatisticsType.coin));b.totalCoin=encodeURIComponent(a.getData());a=(new Date).getTime()-c.getInstance().gameStartTime;b.saveTime=ProxyUtils.currentServerTime+a;return b};d.saveLocalData=function(){var b=PlatformFactory.getPlatform().getSaveData(this);egret.localStorage.setItem(ProxyUtils.userId+"bearjoyTapGameData",b)||egret.localStorage.setItem(ProxyUtils.userId+"bearjoyTapGameData",b)};d.saveData=function(){PlatformFactory.getPlatform().serialize(this)};d.getDropCoinAdd=
function(){var b;b=1*SkillController.getInstance().dropCoinTimes;b*=SkillController.getInstance().dropCoinTimes1;b*=SkillController.getInstance().equipDropCoin;return b*=FateController.getInstance().getEffectByType(5)};d.computerTottalCost=function(){var b=this.totalData.rebornSkillList,a=0,e;for(e in b)for(var c=b[e],d=RebornSkillModel.createByConfigId(c.id),a=a+c.cost,g=1,c=c.lv-1;g<=c;g++)d.lv=g,a+=d.getCostNum();return a};return c}();DataCenter.prototype.__class__="DataCenter";
var _net_url_="http://sglqxz.egret-labs.org/static/misc/activity/",ResourceUtils=function(){function c(){}c.createBitmapByName=function(c){var b=new egret.Bitmap;c=RES.getRes(c);b.texture=c;return b};c.createBitmapFromSheet=function(c,b){void 0===b&&(b="commonRes");var a=RES.getRes(b).getTexture(c),e=new egret.Bitmap;e.texture=a;return e};c.getTextureFromSheet=function(c,b){void 0===b&&(b="commonRes");return RES.getRes(b).getTexture(c)};c.removeFromParent=function(c){c&&c.parent&&c.parent.removeChild(c)};
c.addNetImageName=function(d){c.hasNetImage(d)||c.STATIC_CACHE.push(d)};c.getImgUrl=function(c){return _net_url_+c+".png"};c.hasNetImage=function(d){return-1!=c.STATIC_CACHE.indexOf(d)};c.STATIC_CACHE=["icon_lantern_0"];return c}();ResourceUtils.prototype.__class__="ResourceUtils";
var FateModel=function(){function c(b){this.configId=b;this.config=RES.getRes("fateConfig")[b]}var d=c.prototype;d.getTargetHero=function(){return this.config.targetHero};d.getEffectType=function(){return this.config.effectType};d.getValue=function(){var b=this.getLevel();return 0==b?this.config.base:this.config.base+this.config.up*(b-1)};d.getLevel=function(){return FateController.getInstance().getFateList()[this.configId]||0};d.getNeedList=function(){for(var b=this.config.cost,a={},e=0;e<b.length;e++)a[b[e].costID]=
Math.floor(b[e].base*Math.pow(1.5,this.getLevel()));return a};d.getDes=function(){return this.config.des.replace("{0}",parseInt((100*this.getValue()).toString()))};d.canActivation=function(){var b=FateController.getInstance().getCardList(),a=this.getNeedList(),e;for(e in a)if(!b[e]||b[e]<a[e])return!1;return!0};d.getNameStr=function(){return"fate_name_"+this.configId};c.createByConfigID=function(b){return FateModelCache.getInstance().getCache(b)};return c}();FateModel.prototype.__class__="FateModel";
var FateModelCache=function(){function c(){this._models=[]}var d=c.prototype;c.getInstance=function(){null==this._instance&&(this._instance=new c);return this._instance};d.getCache=function(b){if(this._models[b])return this._models[b];var a=new FateModel(b);return this._models[b]=a};return c}();FateModelCache.prototype.__class__="FateModelCache";
var PayAwardModel=function(c){function d(a){c.call(this,a)}__extends(d,c);var b=d.prototype;b._getName=function(){return this._config.title};b._current=function(){var a=DataCenter.getInstance().statistics.getValue(StatisticsType.diamond),b=new NumberModel;b.add(a);return b.getData()};b.canAward=function(){var a=new NumberModel;a.add(this.current);return a.compare(this.total)&&!this.forParcel()};b.forParcel=function(){return"0"!=DataCenter.getInstance().payAward.getValue(this.id)};b._getTotal=function(){return this._config.total};
b._getAward=function(){return this._config.award};return d}(ProgressModel);PayAwardModel.prototype.__class__="PayAwardModel";
var HPProgress=function(c){function d(a,b,d){void 0===b&&(b="");void 0===d&&(d=!1);c.call(this);this._isMask=!0;this._textureHeight=0;""!=b&&(this._bg=ResourceUtils.createBitmapFromSheet(b,"commonRes"),this.addChild(this._bg));a=ResourceUtils.createBitmapFromSheet(a,"commonRes");this._barWidth=a.width;this._textureHeight=a.height;this._bar=a;this.addChild(this._bar);d&&(this._label=new egret.TextField,this._label.size=24,this._label.anchorX=this._label.anchorY=0.5,this._label.x=a.width/2,this._label.y=
a.height/2,this.addChild(this._label))}__extends(d,c);var b=d.prototype;Object.defineProperty(b,"percentage",{get:function(){return this._percentage},set:function(a){this._percentage=a;this.setProgress(this._percentage,100);this._label&&(this._label.text=a+"%")},enumerable:!0,configurable:!0});Object.defineProperty(b,"isMask",{get:function(){return this._isMask},set:function(a){this._isMask=a},enumerable:!0,configurable:!0});b.setOffset=function(a,b){this._bar.x=a;this._bar.y=b;this._label&&(this._label.x+=
a/2,this._label.y+=b/2)};b.setProgress=function(a,b){this._isMask&&!this._bar.mask&&(this._bar.mask={x:0,y:0,width:this._barWidth,height:this._textureHeight});this._percentage=a/b*100;this._isMask?(this._bar.mask.width=this._barWidth*a/b,this._bar._setDirty()):this._bar.scaleX=a/b};return d}(egret.DisplayObjectContainer);HPProgress.prototype.__class__="HPProgress";
var FateController=function(){function c(){this._effectDict={};this._cardList={};this._fateList={};this._heroAdd=this.clickAdd=1;this.isInit=!1}var d=c.prototype;c.getInstance=function(){null==this._instance&&(this._instance=new c);return this._instance};d.init=function(){ProxyUtils.getCardList()};d.initData=function(b){this.isInit=!0;this._cardList=b.cards;this._fateList=b.fates;0==this._cardList.length&&(this._cardList={});0==this._fateList.length&&(this._fateList={});this.refreshEffect()};d.getCardNum=
function(b){return this._cardList[b]||0};d.getCardList=function(){return this._cardList};d.getFateList=function(){return this._fateList};d.useCard=function(b){for(var a in b)this._cardList[a]&&(this._cardList[a]-=b[a])};d.addCard=function(b){for(var a=0;a<b.length;a++)null==this._cardList[b[a]]&&(this._cardList[b[a]]=0),this._cardList[b[a]]+=1};d.getCard=function(b){this.addCard(b);GameMainLayer.instance.showCardAnimation(b)};d.refreshEffect=function(){this._effectDict={};this.clickAdd=this._heroAdd=
1;for(var b in this._fateList){var a=FateModel.createByConfigID(b),e=a.getEffectType(),c=a.getValue();-2==a.getTargetHero()?this._heroAdd+=c:1E3==a.getTargetHero()?this.clickAdd+=c:(null==this._effectDict[e]&&(this._effectDict[e]=1),this._effectDict[e]+=c)}if(1<this._heroAdd||1<this.clickAdd)HeroController.getInstance().refreshCurrentDPS(),HeroController.getInstance().refreshHeroModel()};Object.defineProperty(d,"heroAdd",{get:function(){return this._heroAdd},enumerable:!0,configurable:!0});d.fateLevelUp=
function(b){null==this._fateList[b]&&(this._fateList[b]=0);this._fateList[b]+=1;this.refreshEffect()};d.canLevelUp=function(){var b=RES.getRes("fateConfig"),a;for(a in b)if(FateModel.createByConfigID(a).canActivation())return!0;return!1};d.getEffectByType=function(b){return this._effectDict[b]||1};return c}();FateController.prototype.__class__="FateController";var EffectUtils;
(function(c){c.shakeObj=function(c){var b=c.x;egret.Tween.get(c).to({x:c.x-10},80);egret.setTimeout(function(){egret.Tween.get(c).to({x:c.x+20},80)},this,160);egret.setTimeout(function(){egret.Tween.get(c).to({x:c.x-20},80)},this,240);egret.setTimeout(function(){egret.Tween.get(c).to({x:c.x+20},80)},this,320);egret.setTimeout(function(){egret.Tween.get(c).to({x:b},80)},this,400)};c.loopScale=function(c,b){return egret.Tween.get(c,{loop:!0}).to({scaleX:1.2,scaleY:1.2},500).to({scaleX:1,scaleY:1},500)};
c.jumpMsg=function(c){var b=new egret.Point(c.x,c.y),a=new egret.Point(-c.txtMsg.width,c.y);return egret.Tween.get(c).to({x:a.x},10*egret.Point.distance(b,a))}})(EffectUtils||(EffectUtils={}));
var EncodeDecode=function(){function c(){}c.base64encode=function(d){var b,a,e,f,h,g;e=d.length;a=0;for(b="";a<e;){f=d.charCodeAt(a++)&255;if(a==e){b+=c.base64EncodeChars.charAt(f>>2);b+=c.base64EncodeChars.charAt((f&3)<<4);b+="==";break}h=d.charCodeAt(a++);if(a==e){b+=c.base64EncodeChars.charAt(f>>2);b+=c.base64EncodeChars.charAt((f&3)<<4|(h&240)>>4);b+=c.base64EncodeChars.charAt((h&15)<<2);b+="=";break}g=d.charCodeAt(a++);b+=c.base64EncodeChars.charAt(f>>2);b+=c.base64EncodeChars.charAt((f&3)<<
4|(h&240)>>4);b+=c.base64EncodeChars.charAt((h&15)<<2|(g&192)>>6);b+=c.base64EncodeChars.charAt(g&63)}return b};c.base64decode=function(d){var b,a,e,f,h;f=d.length;e=0;for(h="";e<f;){do b=c.base64DecodeChars[d.charCodeAt(e++)&255];while(e<f&&-1==b);if(-1==b)break;do a=c.base64DecodeChars[d.charCodeAt(e++)&255];while(e<f&&-1==a);if(-1==a)break;h+=String.fromCharCode(b<<2|(a&48)>>4);do{b=d.charCodeAt(e++)&255;if(61==b)return h;b=c.base64DecodeChars[b]}while(e<f&&-1==b);if(-1==b)break;h+=String.fromCharCode((a&
15)<<4|(b&60)>>2);do{a=d.charCodeAt(e++)&255;if(61==a)return h;a=c.base64DecodeChars[a]}while(e<f&&-1==a);if(-1==a)break;h+=String.fromCharCode((b&3)<<6|a)}return h};c.base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";c.base64DecodeChars=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,
14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];return c}();EncodeDecode.prototype.__class__="EncodeDecode";
var BottomView=function(c){function d(){c.call(this);this._tabTips={};this.initButton();this.init()}__extends(d,c);var b=d.prototype;b.initButton=function(){this._button1=new TabButton;this._button1.initButton("tab_1_1","tab_1_2",90);this.addChild(this._button1);this._button1.name="mainButton";this._button1.x=60;this._button2=new TabButton;this._button2.initButton("tab_2_1","tab_2_2",90);this.addChild(this._button2);this._button2.x=184;this._button2.name="heroButton";this._button3=new TabButton;this._button3.initButton("tab_3_1",
"tab_3_2",90);this.addChild(this._button3);this._button3.x=308;this._button3.name="cardButton";this._button4=new TabButton;this._button4.initButton("tab_4_1","tab_4_2",90);this.addChild(this._button4);this._button4.x=432;this._button4.name="holyButton";this._button5=new TabButton;this._button5.initButton("tab_5_1","tab_5_2",90);this.addChild(this._button5);this._button5.x=556;this._button5.name="adButton";ActivityManager.getInstance().isActivityOpen(ActivityType.buyyu)&&this.refreshTab("ad",!0,600,
-15);addAction(Const.CHANGE_COIN,this.onChangeCoin,this);this.onChangeCoin()};b.hideTab=function(){this._button3.visible=!1;this._button4.visible=!1;this._button5.visible=!1};b.showTab=function(){this._button3.visible=!0;this._button4.visible=!0;this._button5.visible=!0};b.showGuildTab=function(){this._button1.setSkin("btn_char_1","btn_char_0");this._button1.setPosxBmp(78);this._button1.x=120;this._button2.setSkin("btn_wuXue_1","btn_wuXue_0");this._button2.setPosxBmp(78);this._button2.x=340;this._button3.visible=
!1;this._button4.visible=!0;this._button4.setSkin("btn_equipBook_1","btn_equipBook_0");this._button4.setPosxBmp(78);this._button4.x=560;this._button5.visible=!1};b.closeGuildTab=function(){this._button1.setSkin("tab_1_1","tab_1_2");this._button1.x=60;this._button2.setSkin("tab_2_1","tab_2_2");this._button2.x=184;this._button4.setSkin("tab_4_1","tab_4_2");this._button4.x=432;this._button5.visible=!0;this._button3.visible=!0};b.refreshTab=function(a,b,c,d){b?this._tabTips[a]||(b=ResourceUtils.createBitmapFromSheet("new_hero_tip"),
b.x=c,b.y=d,b.anchorX=b.anchorY=0.5,this.addChild(b),this._tabTips[a]=b,egret.Tween.get(b,{loop:!0}).to({scaleX:1.2,scaleY:1.2},500).to({scaleX:1,scaleY:1},500)):this._tabTips[a]&&(egret.Tween.removeTweens(this._tabTips[a]),this.removeChild(this._tabTips[a]),delete this._tabTips[a])};b.onChangeCoin=function(){GuildDataManager.getInstance().isGuildWulinStart?(this.refreshTab("hero",!1,160,-15),this.refreshTab("skill",!1,30,-15)):(this.refreshTab("hero",DataCenter.getInstance().hasEnoughCallHero(),
160,-15),this.refreshTab("skill",DataCenter.getInstance().hasEnoughNewSkill(),30,-15))};b._onRemoveFromStage=function(){c.prototype._onRemoveFromStage.call(this);removeEventsByTarget(this)};return d}(TabView);BottomView.prototype.__class__="BottomView";
var TabButton=function(c){function d(){c.call(this);this.anchorX=this.anchorY=0.5}__extends(d,c);var b=d.prototype;b.initButton=function(a,b,c){void 0===c&&(c=78);this._frame1=ResourceUtils.createBitmapFromSheet(a,"commonRes");this._frame1.anchorX=this._frame1.anchorY=0.5;this._frame1.x=78;this._frame1.y=30;this.addChild(this._frame1);this._frame2=ResourceUtils.createBitmapFromSheet(b,"commonRes");this._frame2.anchorX=this._frame2.anchorY=0.5;this.addChild(this._frame2);this._frame2.x=c;this._frame2.y=
30;this._frame2.visible=!1};b.addLabel=function(a,b){void 0===b&&(b=0);null==this._label&&(this._label=new egret.TextField,this._label.textColor=b,this._label.size=26,this._label.bold=!0,this._label.anchorX=this._label.anchorY=0.5,this._label.x=78,this._label.y=30,this.addChild(this._label));this._label.text=a};b.setFrameChild=function(a){this._frame1.visible=1>=a;this._frame2.visible=1<a};b.setWidthBmp=function(a){this._frame1.width=a;this._frame2.width=a};b.setSkin=function(a,b){this._frame1.texture=
ResourceUtils.createBitmapFromSheet(a,"commonRes").texture;this._frame2.texture=ResourceUtils.createBitmapFromSheet(b,"commonRes").texture};b.setPosxBmp=function(a){this._frame1.x=a;this._frame2.x=a};b.setVisible=function(a){this._frame1.visible=a;this._frame2.visible=!a};return d}(SimpleButton);TabButton.prototype.__class__="TabButton";
var PoolManager=function(){function c(b){this.listItem=[];this.maxLimitCount=b}var d=c.prototype;d.getCurFree=function(){for(var b=0;b<this.listItem.length;b++){var a=this.listItem[b];if(a.isFree)return a.setState(!1),a}return null};d.combinItem=function(b){this.listItem.length<=this.maxLimitCount?this.addItem(new PoolItem(b)):console.log("\u5bf9\u8c61\u8d85\u8fc7\u6c60\u4e0a\u9650")};d.hasItem=function(b){return this.listItem.contains(b)};d.addItem=function(b){this.listItem.push(b)};d.removeItem=
function(b){this.listItem.erase(b)};d.clearItem=function(){this.listItem=[]};d.dispose=function(){this.listItem=null};return c}();PoolManager.prototype.__class__="PoolManager";var PoolItem=function(){function c(c){this.item=c;this.isFree=!0;this.setState(!0)}c.prototype.setState=function(c){this.isFree=c;this.item.visible=!c};return c}();PoolItem.prototype.__class__="PoolItem";
var AlertPanel=function(c){function d(a){void 0===a&&(a=1);c.call(this);this.descStr=this.titleStr="";this.type=1;this.type=a;this.initUI()}__extends(d,c);var b=d.prototype;b.initUI=function(){var a=egret.DynamicBitmap.create("set_bg");this.boxContainer.addChild(a);a.x=34;a.y=160;a.height=440;a.touchEnabled=!1;var b=new SimpleButton,c=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");b.addChild(c);b.addOnClick(this.onHandler.bind(this,"cancel"),this);b.x=510;b.y=130;b.useZoomOut(!0);this.boxContainer.addChild(b);
this.titleTF=new egret.TextField;this.addChild(this.titleTF);this.titleTF.textColor=0;this.titleTF.size=38;this.titleTF.x=280;this.titleTF.y=250;this.titleTF.textAlign="center";this.titleTF.text=this.titleStr;this.descTF=new egret.TextField;this.addChild(this.descTF);this.descTF.textColor=0;this.descTF.size=30;this.descTF.x=320;this.descTF.y=350;this.descTF.width=420;this.descTF.anchorX=this.descTF.anchorY=0.5;this.descTF.textAlign="center";this.descTF.text=this.descStr;this.acceptBtn=new SimpleButton;
c=ResourceUtils.createBitmapFromSheet("btn_yellow","commonRes");this.acceptBtn.addChild(c);this.acceptBtn.addOnClick(this.onHandler.bind(this,"ok"),this);this.acceptBtn.setFontText("\u786e\u8ba4",26);this.addChild(this.acceptBtn);1==this.type?(this.acceptBtn.x=a.width/2-this.acceptBtn.width/2,this.acceptBtn.y=a.height-this.acceptBtn.height/2-10):(this.cancelBtn=new SimpleButton,c=ResourceUtils.createBitmapFromSheet("btn_red","commonRes"),this.cancelBtn.addChild(c),this.cancelBtn.x=110,this.cancelBtn.setFontText("\u53d6\u6d88",
26),this.cancelBtn.y=460,this.cancelBtn.addOnClick(this.onHandler.bind(this,"cancel"),this),this.addChild(this.cancelBtn),this.acceptBtn.x=400,this.acceptBtn.y=460);3==this.type&&(this.cancelBtn&&(this.cancelBtn.visible=!1),this.acceptBtn&&(this.acceptBtn.visible=!1))};b.setHandler=function(a,b){void 0===b&&(b=null);this._handler=a;this._context=b};b.onHandler=function(a){this._handler&&("cancel"==a&&(this.visible=!1),this._handler.call(this._context,a))};b.setData=function(a,b){void 0===a&&(a="");
void 0===b&&(b="");this.titleTF.text=a;this.descTF.text=b};b.getWidth=function(){return this.bg.width};b.getHeight=function(){return this.bg.height};return d}(BoxContainer);AlertPanel.prototype.__class__="AlertPanel";
var NewFriendController=function(){function c(){this.dpsAdd=this.clickAdd=this._selectType=this._curEvent=0;this._friend={};this._isPause=!1}var d=c.prototype;c.getInstance=function(){null==this._instance&&(this._instance=new c);return this._instance};d.start=function(){addAction("pause_main_game",this.pause,this);addAction("resume_main_game",this.resume,this);this._evtObj=[];this.getEventList()};d.pause=function(){this._isPause=!0};d.resume=function(){this._isPause=!1};d.getEventList=function(){ProxyUtils.getFriendEventList(this.getListCallback,
this)};d.getListCallback=function(b){0<b.l.length&&GameMainLayer.instance.showFriendAward(b.l);this.countDown()};d.countDown=function(){this._isPause||0==this._curEvent&&ProxyUtils.getFriendEvent(this.registerEvent,this)};d.getCurEvent=function(){return this._curEvent};d.getCurFriend=function(){return this._friend};d.registerEvent=function(b){this._curEvent=b.eventId;0<this._curEvent?(this._friend=b.friend,doAction(Const.FRIEND_EVENT)):this._timeID=Time.setTimeout(this.countDown,this,1E3*b.lfTime||
6E5);b.effect&&(this._evtObj=b.effect,this.setAdd())};d.executeEvent=function(b,a){void 0===a&&(a="");this._selectType=b;0<this._curEvent&&ProxyUtils.executeFriendEvent(b,this.executeCallback,this,a)};d.getAwardCoin=function(){var b=DataCenter.getInstance().totalData.currentLevel,b=this.getHP(b),a=new NumberModel;a.add(b);a.times(1/45);"0"==a.getNumer()&&a.add(1);return a};d.getHP=function(b){var a=new NumberModel,e=0.01*Math.floor((b-1)/50);0.3<e&&(e=0.3);var c=(b-1)%5;a.add(29*Math.pow(1.5704-e,
b-1)*[2,4,6,7,10][c]);return a.getNumer()};d.executeCallback=function(b){var a=RES.getRes("friendEvent")[this._curEvent];if(1==a["effect"+this._selectType]||3==a["effect"+this._selectType]){this._evtObj.push({id:this._curEvent,endTime:3600});this.setAdd();1==a.type&&doAction(Const.SHOW_TIPS,"\u83b7\u5f97\u5143\u5b9d:"+a.value);if(2==a.type){var e=this.getAwardCoin();e.times(a.value);doAction(Const.SHOW_TIPS,"\u83b7\u5f97\u94dc\u94b1:"+e.getNumer())}3==a.type&&doAction(Const.SHOW_TIPS,"\u70b9\u51fb\u4f24\u5bb3\u63d0\u5347:"+
100*this.clickAdd+"%");4==a.type&&doAction(Const.SHOW_TIPS,"\u4fa0\u5ba2\u79d2\u4f24\u63d0\u5347:"+100*this.dpsAdd+"%")}this._curEvent=0;this._timeID&&Time.clearInterval(this._timeID);this._timeID=Time.setInterval(this.countDown,this,1E3*b.lfTime||6E4);doAction(Const.FRIEND_EVENT_DONE);GameMainLayer.instance.hideFriendSuprise();GameMainLayer.instance.hideFriendConfirm()};d.setAdd=function(){this._tickID&&(Time.clearInterval(this._tickID),this._tickID=0);for(var b=0;b<this._evtObj.length;b++){var a=
RES.getRes("friendEvent")[this._evtObj[b].id];if(1==a.type){var e=new NumberModel(a.value),a={};a.coins=e.pieces(1);a.type=2;a.updated=!0;doAction(Const.DROP_COIN,a)}else 2==a.type?(e=this.getAwardCoin(),e.times(a.value),a={},a.coins=e.pieces(5),a.type=1,doAction(Const.DROP_COIN,a)):3==a.type?(this.clickAdd=a.value,HeroController.getInstance().refreshMainHero(),0==this._tickID&&(this._tickID=Time.setInterval(this.tick,this,1E3))):4==a.type&&(this.dpsAdd=a.value,HeroController.getInstance().refreshHeroModel(),
0==this._tickID&&(this._tickID=Time.setInterval(this.tick,this,1E3)))}};d.tick=function(){if(this._evtObj)for(var b=0;b<this._evtObj.length;b++)if(this._evtObj[b].endTime-=1,0>=this._evtObj[b].endTime){var a=RES.getRes("friendEvent")[this._evtObj[b].id];3==a.type?(this.clickAdd=0,HeroController.getInstance().refreshMainHero()):4==a.type&&(this.dpsAdd=0,HeroController.getInstance().refreshHeroModel());this._evtObj.splice(b,1)}};d.dispose=function(){this._timeID&&Time.clearTimeout(this._timeID);this._tickID&&
Time.clearInterval(this._tickID);removeEventsByTarget(this)};return c}();NewFriendController.prototype.__class__="NewFriendController";
var AchieveItemLayer=function(c){function d(){c.apply(this,arguments)}__extends(d,c);var b=d.prototype;b.initView=function(){c.prototype.initView.call(this);this._starContainer=new egret.DisplayObjectContainer;this._iconContainer.addChild(this._starContainer)};b.onReward=function(){doAction(Const.ACHIEVE,this._model);DataCenter.getInstance().achieve.addValue(this._achieveModel.type)};b.refreshView=function(a,b){c.prototype.refreshView.call(this,a,b);this._achieveModel=this._model;var d=this._achieveModel.isMax();
this._button.visible=!d;this._awardLabel.visible=!d;this._gold.visible=!d;this._gold.scaleX=this._gold.scaleY=0.75;this._gold.y=9;this._progressLabel.textColor=16777215;this._achieveModel.isMax()?(this._button.visible=!1,this._finishBorder.visible=!0,this._finishIcon.visible=!0,this._gold.visible=!1,this._awardLabel.visible=!1):(this._button.refreshText("\u5956\u52b1"),this._button.setEnabled(this._achieveModel.canAward()),this._finishBorder.visible=!1,this._finishIcon.visible=!1,this._gold.visible=
!0,this._awardLabel.visible=!0);this.initStars()};b.initStars=function(){GameUtils.removeAllChildren(this._starContainer);for(var a=this._achieveModel.index,b=0;5>b;b++){var c=null,c=a>b?ResourceUtils.createBitmapFromSheet("star"):ResourceUtils.createBitmapFromSheet("star_bg");c.x=120+35*b;c.y=65;c.anchorX=c.anchorY=0.5;this._starContainer.addChild(c)}};return d}(ProgressItemLayer);AchieveItemLayer.prototype.__class__="AchieveItemLayer";
var PayAwardItemLayer=function(c){function d(){c.apply(this,arguments)}__extends(d,c);var b=d.prototype;b.initView=function(){c.prototype.initView.call(this);this._progress=new HPProgress("pay_award_progress","pay_award_progress_bg");this._iconContainer.addChild(this._progress);this._progress.setOffset(4,4);this._progress.x=100;this._progress.y=55;this._iconContainer.addChild(this._progressLabel);this._progressLabel.textColor=16777215;this._progressLabel.anchorX=this._progressLabel.anchorY=0.5;this._progressLabel.x=
225;this._progressLabel.y=68;this._nameLabel.size=20};b.onReward=function(){doAction(Const.PAY_AWARD,this._model);DataCenter.getInstance().payAward.addValue(this._model.id)};b.createAwardIcon=function(){this._gold=ResourceUtils.createBitmapFromSheet("holy_icon");this._iconContainer.addChild(this._gold);this._gold.scaleX=this._gold.scaleY=0.66;this._gold.x=490;this._gold.y=0};b.onCreate=function(a,b){this.create(a,b,"holy_icon",Const.ADD_HOLY,0.8)};b.refreshView=function(a,b){c.prototype.refreshView.call(this,
a,b);this._payAwardModel=this._model;this._progress.percentage=parseInt(this._model.current)/parseInt(this._model.total)*100;var d=this._payAwardModel.forParcel();this._button.visible=!d;this._awardLabel.visible=!d;this._gold.visible=!d;this._finishBorder.visible=d;this._finishIcon.visible=d;this._progress.visible=!d;this._progressLabel.visible=!d;d||(this._button.refreshText("\u5956\u52b1"),this._button.setEnabled(this._payAwardModel.canAward()))};return d}(ProgressItemLayer);
PayAwardItemLayer.prototype.__class__="PayAwardItemLayer";var IconButton=function(c){function d(b,a){this._icon=b;this._sheet=a;c.call(this);this.initView()}__extends(d,c);d.prototype.initView=function(){this.anchorX=this.anchorY=0.5;this.useZoomOut(!0);var b=ResourceUtils.createBitmapFromSheet(this._icon,this._sheet);b.anchorX=b.anchorY=0.5;this.addChild(b);this.width=b.width;this.height=b.height;b.x=b.width/2;b.y=b.height/2};return d}(SimpleButton);IconButton.prototype.__class__="IconButton";
var NormalButton=function(c){function d(){c.call(this);this.anchorX=this.anchorY=0.5;this.useZoomOut(!0);this._frame1=ResourceUtils.createBitmapFromSheet("hero_lvup_btn");this._frame1.anchorX=this._frame1.anchorY=0.5;this.addChild(this._frame1);this._frame2=ResourceUtils.createBitmapFromSheet("btn_disable");this._frame2.anchorX=this._frame2.anchorY=0.5;this.addChild(this._frame2);this._frame1.x=this._frame2.x=this._frame1.width/2;this._frame1.y=this._frame2.y=this._frame2.height/2;this._label=new egret.TextField;
this._label.size=30;this._label.anchorX=this._label.anchorY=0.5;this.addChild(this._label);this._label.x=88;this._label.y=30;this._label.textColor=0}__extends(d,c);var b=d.prototype;b.setEnable=function(a){c.prototype.setEnabled.call(this,a);this._frame1.visible=a;this._frame2.visible=!a};b.setLabel=function(a){this._label.text=a};return d}(SimpleButton);NormalButton.prototype.__class__="NormalButton";
var FateButton=function(c){function d(){c.call(this);this.anchorX=this.anchorY=0.5;this._frame1=ResourceUtils.createBitmapFromSheet("btn_fate_1","cardRes");this._frame1.anchorX=this._frame1.anchorY=0.5;this.addChild(this._frame1);this._frame2=ResourceUtils.createBitmapFromSheet("btn_fate_2","cardRes");this._frame2.anchorX=this._frame2.anchorY=0.5;this.addChild(this._frame2);this._frame2.visible=!1;this._frame1.x=this._frame2.x=this._frame1.width/2;this._frame1.y=this._frame2.y=this._frame2.height/
2}__extends(d,c);d.prototype.setFrameChild=function(b){this._frame1.visible=1>=b;this._frame2.visible=1<b};return d}(SimpleButton);FateButton.prototype.__class__="FateButton";
var EvolveButton=function(c){function d(){c.call(this);this.anchorX=this.anchorY=0.5;this._frame1=ResourceUtils.createBitmapFromSheet("btn_evolve_1","cardRes");this._frame1.anchorX=this._frame1.anchorY=0.5;this.addChild(this._frame1);this._frame2=ResourceUtils.createBitmapFromSheet("btn_evolve_2","cardRes");this._frame2.anchorX=this._frame2.anchorY=0.5;this.addChild(this._frame2);this._frame2.visible=!1;this._frame1.x=this._frame2.x=this._frame1.width/2;this._frame1.y=this._frame2.y=this._frame2.height/
2}__extends(d,c);d.prototype.setFrameChild=function(b){this._frame1.visible=1>=b;this._frame2.visible=1<b};return d}(SimpleButton);EvolveButton.prototype.__class__="EvolveButton";
var FateActButton=function(c){function d(){c.call(this);this.anchorX=this.anchorY=0.5;this._frame1=ResourceUtils.createBitmapFromSheet("btn_fate_disable","cardRes");this._frame1.anchorX=this._frame1.anchorY=0.5;this.addChild(this._frame1);this._frame2=ResourceUtils.createBitmapFromSheet("btn_fate_up","cardRes");this._frame2.anchorX=this._frame2.anchorY=0.5;this.addChild(this._frame2);this._frame3=ResourceUtils.createBitmapFromSheet("btn_fate_down","cardRes");this._frame3.anchorX=this._frame3.anchorY=
0.5;this.addChild(this._frame3);this._frame1.visible=!1;this._frame3.visible=!1;this._label=new egret.TextField;this._label.anchorX=this._label.anchorY=0.5;this.addChild(this._label);this._label.x=this._frame1.x=this._frame2.x=this._frame3.x=this._frame1.width/2;this._label.y=this._frame1.y=this._frame2.y=this._frame3.y=this._frame1.height/2}__extends(d,c);var b=d.prototype;b.setFrameChild=function(a){this._frame2.visible=1>=a;this._frame3.visible=1<a};b.setEnable=function(a){c.prototype.setEnabled.call(this,
a);a?(this._frame1.visible=!1,this._frame2.visible=!0):(this._frame1.visible=!0,this._frame2.visible=!1);this._frame3.visible=!1};b.setLabel=function(a){this._label.text=a};return d}(SimpleButton);FateActButton.prototype.__class__="FateActButton";
var PayAwardButton=function(c){function d(){c.call(this,"rebates","iconRes");addAction(Const.CHANGE_STATISTICS,this.changeStatistics,this)}__extends(d,c);var b=d.prototype;b.initView=function(){c.prototype.initView.call(this);this._newFlag=ResourceUtils.createBitmapFromSheet("new_achieve","commonRes");this.addChild(this._newFlag);this._newFlag.x=40;this._newFlag.y=10;this._newFlag.visible=!1;this.changeStatistics()};b.changeStatistics=function(){this._newFlag.visible=DataCenter.getInstance().hasNewPayAward()};
return d}(IconButton);PayAwardButton.prototype.__class__="PayAwardButton";var BuffIconButton=function(c){function d(){c.call(this);this.anchorX=this.anchorY=0.5;this.initView()}__extends(d,c);d.prototype.initView=function(){var b=ResourceUtils.createBitmapFromSheet("super_hero_btn","iconRes");this.addChild(b);this.width=81;this.height=74};return d}(SimpleButton);BuffIconButton.prototype.__class__="BuffIconButton";
var RechargeButton=function(c){function d(){c.call(this);this.anchorX=this.anchorY=0.5;this.initView()}__extends(d,c);d.prototype.initView=function(){var b=ResourceUtils.createBitmapFromSheet("payBack","iconRes");this.addChild(b);this.useZoomOut(!0)};return d}(SimpleButton);RechargeButton.prototype.__class__="RechargeButton";
var GuildBtn=function(c){function d(){c.call(this,"btn_wulin","iconRes");addAction("closeRedDot",this.closeDot,this)}__extends(d,c);var b=d.prototype;b.initView=function(){c.prototype.initView.call(this);if(GameUtils.isShowGuildRedDot()){var a=ResourceUtils.createBitmapFromSheet("redDot");a.x=60;a.y=0;a.name="redDot";this.addChild(a)}};b.closeDot=function(a){this.sprBmp&&!a&&(this.sprBmp.visible=a)};return d}(IconButton);GuildBtn.prototype.__class__="GuildBtn";
var ChatBtn=function(c){function d(){c.call(this,"cahtEnterIcon","commonRes")}__extends(d,c);d.prototype.initView=function(){c.prototype.initView.call(this)};return d}(IconButton);ChatBtn.prototype.__class__="ChatBtn";var ActionPackBtn=function(c){function d(){c.call(this,"active_0","iconRes")}__extends(d,c);d.prototype.initView=function(){c.prototype.initView.call(this);var b=ResourceUtils.createBitmapFromSheet("redDot");b.x=40;b.y=0;this.addChild(b)};return d}(IconButton);
ActionPackBtn.prototype.__class__="ActionPackBtn";var DaySigninButton=function(c){function d(){c.call(this,"daysignin_btn","iconRes")}__extends(d,c);d.prototype.initView=function(){c.prototype.initView.call(this);this.scaleX=this.scaleY=0.85};return d}(IconButton);DaySigninButton.prototype.__class__="DaySigninButton";var WeixinAwardButton=function(c){function d(){c.call(this,"rewardBox","iconRes")}__extends(d,c);d.prototype.initView=function(){c.prototype.initView.call(this)};return d}(IconButton);
WeixinAwardButton.prototype.__class__="WeixinAwardButton";var LoginAwardButton=function(c){function d(){c.call(this,"icon_login","iconRes")}__extends(d,c);return d}(IconButton);LoginAwardButton.prototype.__class__="LoginAwardButton";
var ShareButton=function(c){function d(){c.call(this,"icon_weibo_share","iconRes")}__extends(d,c);d.prototype.initView=function(){c.prototype.initView.call(this);var b=ResourceUtils.createBitmapFromSheet("offline_light");b.anchorX=b.anchorY=0.5;b.x=this.width/2;b.y=this.height/2;egret.Tween.get(b,{loop:!0}).to({rotation:360},1E3);this.addChild(b)};return d}(IconButton);ShareButton.prototype.__class__="ShareButton";
var EquipButton=function(c){function d(){c.call(this,"cahnge","iconRes")}__extends(d,c);d.prototype.initView=function(){c.prototype.initView.call(this)};return d}(IconButton);EquipButton.prototype.__class__="EquipButton";
var FriendButton=function(c){function d(){c.call(this,"icon_friend","iconRes")}__extends(d,c);d.prototype.initView=function(){c.prototype.initView.call(this);this._light=ResourceUtils.createBitmapFromSheet("offline_light");this._light.anchorX=this._light.anchorY=0.5;this._light.x=this.width/2;this._light.y=this.height/2;egret.Tween.get(this._light,{loop:!0}).to({rotation:360},1E3);this.addChild(this._light)};return d}(IconButton);FriendButton.prototype.__class__="FriendButton";
var SpringIconButton=function(c){function d(){c.call(this,"spring_icon","iconRes")}__extends(d,c);return d}(IconButton);SpringIconButton.prototype.__class__="SpringIconButton";var BBSIconButton=function(c){function d(){c.call(this,"icon_bbs","iconRes")}__extends(d,c);return d}(IconButton);BBSIconButton.prototype.__class__="BBSIconButton";var SwitchIconButton=function(c){function d(){c.call(this,"icon_switch","iconRes")}__extends(d,c);return d}(IconButton);SwitchIconButton.prototype.__class__="SwitchIconButton";
var VuTimesButton=function(c){function d(){c.call(this);this.anchorX=this.anchorY=0.5;this.initView()}__extends(d,c);d.prototype.initView=function(){var b=ResourceUtils.createBitmapFromSheet("icon_wx_award","iconRes");b.scaleX=b.scaleY=0.8;this.addChild(b);this.width=81;this.height=74};return d}(SimpleButton);VuTimesButton.prototype.__class__="VuTimesButton";
var LoopBuyButton=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this.anchorX=this.anchorY=0.5;this.useZoomOut(!0);this._icon=ResourceUtils.createBitmapFromSheet("btn_buy_1","iconRes");this._icon.anchorX=this._icon.anchorY=0.5;this.addChild(this._icon);this.width=this._icon.width;this.height=this._icon.height;this._icon.x=this._icon.width/2;this._icon.y=this._icon.height/2;addAction("loopbuy_change",this.statusChange,this);this.statusChange()};
b.statusChange=function(){var a=LoopBuyMonitor.getInstance().getCurIdx()+1;this.removeChild(this._icon);this._icon=ResourceUtils.createBitmapFromSheet("btn_buy_"+a,"iconRes");this._icon.anchorX=this._icon.anchorY=0.5;this.addChild(this._icon);this._icon.x=this._icon.width/2;this._icon.y=this._icon.height/2;this.visible=!LoopBuyMonitor.getInstance().isDone()};return d}(SimpleButton);LoopBuyButton.prototype.__class__="LoopBuyButton";
var ChatManager=function(){function c(){this.timeOutID=this.timeID=-1;c.instance=this;this.isInitData=this.isServerClose=!1;this.curAtChatType=2;this.lastReadGuildTime=this.lastGetListTime=this.IntervalSendTime=this.leftNoramlFreeCout=this.lastReadJumpMsgTime=0;this.isCanSendSuc=!1;this.myGldID=0;this.myHeadIcon=this.myGldName="";this.listGuildData=[];this.listJumpScreenData=[];this.listNormalData=[];this.intervalGetMsg(!1)}var d=c.prototype;c.getInstace=function(){null==this.instance&&(this.instance=
new c);return this.instance};Object.defineProperty(d,"myGldID",{get:function(){return this._myGldID},set:function(b){this._myGldID=b;0>=b&&(this.listGuildData=[])},enumerable:!0,configurable:!0});d.intervalGetMsg=function(b){var a=this;void 0===b&&(b=!1);b?(Time.clearTimeout(this.timeOutID),0>this.timeID&&(this.timeID=Time.setInterval(function(){ProxyUtils.getChatList(a.lastGetListTime)},this,1E3*this.IntervalSendTime))):0>this.timeOutID&&(this.timeOutID=Time.setTimeout(function(){Time.clearTimeout(a.timeOutID);
a.intervalGetMsg(!0)},this,2E4))};d.readLocalData=function(b){null!=b&&(this.listGuildData=b.listGuildData,this.listNormalData=b.listNormalData,this.listJumpScreenData=b.listJumpScreenData,this.lastGetListTime=b.lastGetListTime,this.lastReadJumpMsgTime=b.lastReadJumpMsgTime,this.lastReadGuildTime=b.lastReadGuildTime)};d.saveDataToLocal=function(){var b={};b.listNormalData=this.listNormalData;b.listGuildData=this.listGuildData;b.listJumpScreenData=this.listJumpScreenData;b.lastGetListTime=this.lastGetListTime;
b.lastReadJumpMsgTime=this.lastReadJumpMsgTime;b.lastReadGuildTime=this.lastReadGuildTime;return b};d.getListByNum=function(b,a){var e=this.getListByType(b);if(e&&e.length>a){for(var c=[],d=0;d<a;d++)c.push(e[d]);return c}return e};d.getListByType=function(b){var a=null;0==b?a=this.listNormalData:1==b?a=this.listGuildData:2==b&&(a=this.listJumpScreenData);a.sort(function(a,b){return b.sendTime-a.sendTime});return a};d.addMsgItemWithNoReapeat=function(b){if(b){var a=this.getListByType(b.chatType);
a&&!this.IsContains(b,a)&&(10<a.length&&a.pop(),a.unshift(b))}};d.IsContains=function(b,a){if(!b||!a||!b.msgID)return!1;for(var e=0;e<a.length;e++)if(a[e].msgID==b.msgID)return!0;return!1};d.reduceLeftFreeCount=function(b){void 0===b&&(b=1);0<this.leftNoramlFreeCout&&(this.leftNoramlFreeCout-=b)};return c}();ChatManager.prototype.__class__="ChatManager";
var ChatItemData=function(){return function(){this.chatContent=this.playerName=this.uid="";this.sendTime=0;this.isSelfSend=!1;this.chatType=0;this.playerIcon="";this.guildID=0;this.playiconTexure=null}}();ChatItemData.prototype.__class__="ChatItemData";var ChatType;(function(c){c[c.Normal=0]="Normal";c[c.Guild=1]="Guild";c[c.JumpScreen=2]="JumpScreen"})(ChatType||(ChatType={}));
var EquipModel=function(){function c(b){this.configId=b;this.config=RES.getRes("equipConfig")[b]}var d=c.prototype;d.getTargetHero=function(){return this.config.targetHero};d.getEffectType=function(){return this.config.effectType};d.getValue=function(){return this.config.value};d.getCost=function(){return this.config.needGc};d.getType=function(){return this.config.needType};d.getCondition=function(){if(2==this.config.needType)return"\u91cd\u751f"+this.config.needValue+"\u6b21";if(3==this.config.needType)return GameUtils.isAiWeiGame()?
"\u5175\u5668\u8c31Lv:"+this.config.needValue:"\u5175\u5668\u8c31\u603b\u7b49\u7ea7:"+this.config.needValue;if(1==this.config.needType)return"\u901a\u8fc7"+this.config.needValue+"\u5173"};d.getRes=function(){return"equip_"+this.configId};d.getDes=function(){return this.config.des};d.isOpen=function(){return-1<DataCenter.getInstance().totalData.equipList.indexOf(this.configId)};d.needGc=function(){return null!=this.getCost()};c.createByConfigID=function(b){return EquipModelCache.getInstance().getCache(b)};
return c}();EquipModel.prototype.__class__="EquipModel";var EquipModelCache=function(){function c(){this._models=[]}var d=c.prototype;c.getInstance=function(){null==this._instance&&(this._instance=new c);return this._instance};d.getCache=function(b){if(this._models[b])return this._models[b];var a=new EquipModel(b);return this._models[b]=a};return c}();EquipModelCache.prototype.__class__="EquipModelCache";
var HeroModel=function(){function c(b){this.configId=0;this.config=null;this._need=0;this.autoTimeID=-1;this._lv=1;this._speed=1E3;this._skillList=[];this._critPro=0;this._critHurt=10;this.extraHurt=1;this.tapCoin=0;this.init(b)}var d=c.prototype;d.init=function(b){this.configId=b;this.config=RES.getRes("heroConfig")[b];this._lv=0;this.cdChange();addAction(Const.REBORN_SKILL_REFRESH,this.cdChange,this)};Object.defineProperty(d,"heroId",{get:function(){return c.getHeroId(this.configId)},enumerable:!0,
configurable:!0});c.getHeroId=function(b){return c.heroConf.hasOwnProperty(b)?c.heroConf[b]:0};d.cdChange=function(){this._need=this.configId%1E3*3600;var b=applyFilters(Const.GET_HOLY_EFFECT,getApplyString(28));b!=getApplyString(28)&&(this._need*=1-b,-1<this.autoTimeID&&(Time.clearTimeout(this.autoTimeID),this.isDead()?this.autoReborn():this.reborn()))};d.getDes=function(){return this.config.heroIntroduction};d.getRes=function(){return"icon_head_"+this.config.iconID};d.isMainHero=function(){return 1==
this.config.isMain};Object.defineProperty(d,"lv",{get:function(){return this._lv},set:function(b){this._lv=b},enumerable:!0,configurable:!0});Object.defineProperty(d,"speed",{get:function(){return this._speed},enumerable:!0,configurable:!0});d.getEffectDps=function(b){if(!this.isHero())return b;var a=c.dpsEffects[this.getQuality()];if(1==a)return b;b=new NumberModel(b);b.times(a);return b.getNumer()};Object.defineProperty(d,"dps",{get:function(){return this.getEffectDps(this._dps)},enumerable:!0,
configurable:!0});Object.defineProperty(d,"bossDps",{get:function(){return this.getEffectDps(this._bossDPS)},enumerable:!0,configurable:!0});Object.defineProperty(d,"nextDPS",{get:function(){return this.getEffectDps(this._nextDPS)},enumerable:!0,configurable:!0});Object.defineProperty(d,"tapDamage",{get:function(){return this.getEffectDps(this._dps)},enumerable:!0,configurable:!0});Object.defineProperty(d,"nextTapDamage",{get:function(){return this.getEffectDps(this._nextDPS)},enumerable:!0,configurable:!0});
Object.defineProperty(d,"skillList",{get:function(){return this._skillList},enumerable:!0,configurable:!0});Object.defineProperty(d,"nextSkill",{get:function(){return this._nextSkill},enumerable:!0,configurable:!0});Object.defineProperty(d,"critPro",{get:function(){return 0>this._critPro?-this._critPro:this._critPro},enumerable:!0,configurable:!0});Object.defineProperty(d,"critHurt",{get:function(){return this._critHurt},enumerable:!0,configurable:!0});d.changeCritPro=function(b){return this._critPro+=
b};d.canLevelUp=function(b){return 1E3>=this._lv?1E3>=this._lv+b:!0};d.getQuality=function(){return ProxyUtils.heroCards[this.heroId]};d.isEvolution=function(){return 1E3<this._lv};d.getSkillOpenLv=function(){return this.isEvolution()?this._lv-1E3:this._lv};d.isHero=function(){return null!=this.config.animationID};d.isDead=function(){return 0<this.getRebornTime()};d.autoReborn=function(){var b=DataCenter.getInstance().totalData.heroList[this.configId].dieTime,a=(new Date).getTime();this.autoTimeID=
Time.setTimeout(this.reborn,this,1E3*(this._need-Math.floor((a-b)/1E3)))};d.killMe=function(){var b=(new Date).getTime();DataCenter.getInstance().totalData.heroList[this.configId].dieTime=b;this.autoTimeID=Time.setTimeout(this.reborn,this,1E3*this._need)};d.reborn=function(){Time.clearTimeout(this.autoTimeID);this.autoTimeID=-1;DataCenter.getInstance().totalData.heroList[this.configId].dieTime=0;this.refreshDataWithSkill();SkillController.getInstance().refreshSkillList();HeroController.getInstance().refreshHeroModel();
doAction(Const.REBORN_HERO,this);doAction(Const.REFRESH_UNOPEN_LIST)};d.getRebornTime=function(){if(!DataCenter.getInstance().totalData.heroList[this.configId])return 0;var b=DataCenter.getInstance().totalData.heroList[this.configId].dieTime;if(0==b)return 0;var a=(new Date).getTime(),b=Math.floor((a-b)/1E3);return b>this._need?DataCenter.getInstance().totalData.heroList[this.configId].dieTime=0:this._need-b};d.refreshHeroSkillList=function(){this._skillList=[];if(this.isMainHero()){var b=DataCenter.getInstance().totalData.mainHero.skill,
a;for(a in b){var e=SkillModel.createByConfigId(a);e.lv=b[a];this._skillList.push(e)}}else{b=DataCenter.getInstance().totalData.heroList;for(a in b)if(a==this.configId){for(var c=0;c<b[a].skill.length;c++)e=SkillModel.createByConfigId(b[a].skill[c]),this._skillList.push(e);break}this.refreshNextSkill()}};d.refreshNextSkill=function(){if(this.config.skill){var b=this.config.skill.split(",")[this._skillList.length];this._nextSkill=b?SkillModel.createByConfigId(b):null}};d.refreshSpeed=function(){this._speed=
this.config.speed};d.refreshBossDPS=function(b,a){1<b?(a.times(b),this._bossDPS=a.getNumer()):this._bossDPS=this._dps};d.refreshDPS=function(){if(GuildDataManager.getInstance().isGuildWulinStart){var b=GuildWuLinDataManager.getInstance().computerAllDamge(),a=new NumberModel;a.add(b);this._dps=a.getNumer()}else{var e=SkillController.getInstance().getAdditionByHeroModel(this);this._critPro=0.04;this._critHurt=5;for(var c=1,b=1,d=0,g=1,a=0;a<e.length;a++)1==e[a].getEffectType()&&(b*=e[a].getValue()),
30==e[a].getEffectType()&&(c+=e[a].getValue()),2==e[a].getEffectType()&&(this._critPro+=e[a].getValue()),3==e[a].getEffectType()&&(this._critHurt*=e[a].getValue()),4==e[a].getEffectType()&&(d+=e[a].getValue()),6==e[a].getEffectType()&&(g*=e[a].getValue());e=SkillController.getInstance().holyEffect;for(a=0;a<e.length;a++)1!=e[a].type||e[a].targetHero!=TargetHeroAll&&e[a].targetHero!=this.configId||(b*=1+e[a].value),2==e[a].type&&(this._critPro+=e[a].value),3==e[a].type&&(this._critHurt*=1+e[a].value);
this._critHurt*=SkillController.getInstance().equipAddCritHurt;this._critHurt*=FateController.getInstance().getEffectByType(3);this.baseDamg=b*=SkillController.getInstance().equipAdd;this.isMainHero()||this.isEvolution()&&(b*=45E6);this.isMainHero()?b*=NewFriendController.getInstance().clickAdd+1:(b*=SkillController.getInstance().holyAdd+1,b*=NewFriendController.getInstance().dpsAdd+1,b*=FateController.getInstance().heroAdd);b*=c;c=this.config.dps.split(",");this._bossDPS=this._nextDPS=this._dps=
"0";e=new NumberModel;if(c.length>=this._lv){for(a=0;a<this._lv;a++)e.add(c[a]);1<b&&e.times(b);0<d&&(a=new NumberModel,a.add(HeroController.getInstance().currentDPS),a.times(d),e.add(a.getNumer()));var a=SkillController.getInstance().getBuffList(),l=0}else{e.add(c[c.length-1]);e.times(this.config.ratio);e.times((1-Math.pow(this.config.ratio,this.lv-c.length))/(1-this.config.ratio));for(a=0;a<c.length;a++)e.add(c[a]);1<b&&e.times(b);0<d&&(a=new NumberModel,a.add(HeroController.getInstance().currentDPS),
a.times(d),e.add(a.getNumer()));a=SkillController.getInstance().getBuffList();l=0}for(;l<a.length;l++)1==a[l].getEffectType()&&(a[l].getTargetHero()!=TargetHeroAll&&a[l].getTargetHero()!=this.configId||e.times(a[l].getValue())),3==a[l].getEffectType()&&(this._critHurt*=a[l].getValue());this.isMainHero()&&e.times(FateController.getInstance().clickAdd);a=GuildModel.addDamgeFromWeapon(e.getDataNum());e.add(a);this._dps=e.getNumer();this.refreshBossDPS(g,e);g=new NumberModel;if(c.length>=this._lv+1){for(a=
0;a<this._lv+1;a++)g.add(c[a]);1<b&&g.times(b);0<d&&(a=new NumberModel,a.add(HeroController.getInstance().currentDPS),a.times(d),g.add(a.getNumer()));g.reduce(this._dps)}else g.add(c[c.length-1]),g.times(Math.pow(this.config.ratio,this.lv+1-c.length)),1<b&&g.times(b);this._nextDPS=g.getNumer()}};d.getCostNum=function(){return this.isMainHero()||1001==this.configId?[this.levelup1(),this.levelup10(),this.levelup100()]:[this.getCostNumByLevel(this.lv+1),this.getCostNumByLevel(this.lv+10),this.getCostNumByLevel(this.lv+
100)]};d.levelup1=function(){var b=this.config.callCost.split(","),a=new NumberModel;b.length>this.lv?a.add(b[this.lv]):a.add(b[b.length-1]*Math.pow(this.config.costRatio,this.lv-b.length+1));return GameUtils.getCallCost(a.getNumer())};d.levelup10=function(){var b=this.config.callCost.split(","),a=0,e=new NumberModel;if(b.length>this.lv+10){for(var c=this.lv;c<this.lv+10;c++)a+=parseInt(b[c]);e.add(a)}else if(this.lv<b.length){for(c=this.lv;c<b.length;c++)a+=parseInt(b[c]);e.add(b[b.length-1]*this.config.costRatio);
e.times((1-Math.pow(this.config.costRatio,this.lv+10-b.length))/(1-this.config.costRatio));e.add(a)}else e.add(b[b.length-1]*Math.pow(this.config.costRatio,this.lv-b.length+1)),e.times((1-Math.pow(this.config.costRatio,10))/(1-this.config.costRatio));return GameUtils.getCallCost(e.getNumer())};d.levelup100=function(){var b=this.config.callCost.split(","),a=0,e=new NumberModel;if(this.lv<b.length){for(var c=this.lv;c<b.length;c++)a+=parseInt(b[c]);e.add(b[b.length-1]*this.config.costRatio);e.times((1-
Math.pow(this.config.costRatio,this.lv+100-b.length))/(1-this.config.costRatio));e.add(a)}else e.add(b[b.length-1]*Math.pow(this.config.costRatio,this.lv-b.length+1)),e.times((1-Math.pow(this.config.costRatio,100))/(1-this.config.costRatio));return GameUtils.getCallCost(e.getNumer())};d.getCostNumByLevel=function(b){var a=this.config.callCost,e=new NumberModel;e.add(a);e.times(Math.pow(this.config.costRatio,this.lv));e.times((1-Math.pow(this.config.costRatio,b-this.lv))/(1-this.config.costRatio));
return GameUtils.getCallCost(e.getNumer())};d.getEvolutionCost=function(){var b=this.config.callCost,a=new NumberModel;a.add(b);a.times(Math.pow(this.config.costRatio,100));return GameUtils.getCallCost(a.getNumer())};d.refreshDataWithSkill=function(){this.isMainHero()||this.refreshSpeed();this.refreshDPS()};d.dispose=function(){removeEventsByTarget(this);-1<this.autoTimeID&&Time.clearTimeout(this.autoTimeID);HeroModelCache.getInstance().destroy(this.configId)};c.createByConfigId=function(b){return HeroModelCache.getInstance().getCache(b)};
c.heroConf={1E3:1,1001:2,1007:3,1013:4,1019:5,1025:6};c.dpsEffects={0:1,1:1.5,2:2,3:2.5};return c}();HeroModel.prototype.__class__="HeroModel";
var HeroModelCache=function(){function c(){this._models=[]}var d=c.prototype;c.getInstance=function(){null==this._instance&&(this._instance=new c);return this._instance};d.getCache=function(b){if(this._models[b])return this._models[b].refreshHeroSkillList(),this._models[b];var a=new HeroModel(b);a.refreshHeroSkillList();return this._models[b]=a};d.destroy=function(b){delete this._models[b]};return c}();HeroModelCache.prototype.__class__="HeroModelCache";
var VuTimesShareData=function(){function c(){this._isAttentionBefore=!1}var d=c.prototype;c.getInstance=function(){null==this._instance&&(this._instance=new c);return this._instance};d.setAttention=function(b){this._isAttentionBefore=b};d.getAttention=function(){return this._isAttentionBefore};d.init=function(){ProxyUtils.getVuInfo(this.initHandler,this)};d.initHandler=function(b){0===b.s&&(this._data=b)};d.isInited=function(){return null!=this._data};d.isCounting=function(){return 0<this._data.lfTime};
d.countDown=function(){this.isInited()&&0<this._data.lfTime&&(this._data.lfTime-=1)};d.getLeftTime=function(){return this._data.lfTime};d.isAttentionAwarded=function(){return 0!=this._data.att};d.setAttentionAwarded=function(){this._data.att=1};d.canShareAward=function(){return!this.isMaxAwarded()&&0>=this.getLeftTime()};d.isMaxAwarded=function(){return 0>=this._data.num};d.shareSuccess=function(){ProxyUtils.getVUShareAward(this.awardHandler,this);GameMainLayer.instance.hideVuTip()};d.awardHandler=
function(b){0===b.s&&(b.gc&&(doAction(Const.SHOW_TIPS,"\u83b7\u5f97"+b.gc+"\u5143\u5b9d"),DataCenter.getInstance().changeGc(b.gc)),this._data.num=b.num,this._data.lfTime=b.lfTime,doAction("vutimes_share_change"))};return c}();VuTimesShareData.prototype.__class__="VuTimesShareData";var PlatformTypes=function(){function c(){}c.WEIXIN="wx";c.EGRET="egret";c.QQBROWSER="qqb";c.WEIBORUNTIME="wb_runtime";c.WANBA="wb";return c}();PlatformTypes.prototype.__class__="PlatformTypes";
var Guide=function(){function c(){}c.doGuide=function(c){};c.updateStatus=function(c){};c.HIDE_BOTTOM="hide_bottom";c.SHOW_BOTTOM1="show_bottom_1";c.SHOW_BOTTOM2="show_bottom_2";c.CLICK_HOME="click_home";c.UP_HERO="up_hero";c.UNLOCK_MAIN_SKILL="unlock_main_skill";c.CLICK_DOWN_JIANTOU="click_down_jiantou";c.BUY_HOLY="buy_holy";c.USE_SKILL="use_skill";c.BUY_HERO="buy_hero";c.IS_SKILL_LAYER_EXSIT="is_skill_layer_exsit";c.IS_SKILL_CDING="is_skill_cding";c.handPositions={hitBoss:{x:550,y:325,pow:0},upSkill:{x:535,
y:655,pow:1},buyHero:{x:535,y:655,pow:2},clickStore:{x:565,y:935,pow:3},showStoreSkill:{x:535,y:865,pow:4},bottom2:{x:210,y:925},useSkill:{x:70,y:830},bottom3:{x:440,y:925},clickMain:{x:85,y:925,pow:5},buyMainSkill:{x:525,y:755,pow:6},clickSanjiao:{x:575,y:570,pow:7},showMainSkill:{x:70,y:830,pow:8},buyShengwu:{x:535,y:655,pow:10}};return c}();Guide.prototype.__class__="Guide";
var MovieBone=function(){function c(b,a,e,c,d,g){void 0===g&&(g=!1);this.parentBoneName=b;this.display=a;this.boneName=e;this.completeRemove=c;this.zorder=d;this.isAdded=g}var d=c.prototype;d.addToParent=function(b){b=b.getChildByName(this.parentBoneName);null!=b&&(null==this.zorder?b.addChild(this.display):b.addChildAt(this.display,this.zorder),this.isAdded=!0)};d.clear=function(){this.display&&this.display.parent&&GameUtils.removeAllChildren(this.display.parent)};d.removeFromParent=function(){GameUtils.removeFromParent(this.display)};
return c}();MovieBone.prototype.__class__="MovieBone";var MovieInfo=function(){function c(c,b){this.filename=c;this.armature=b;var a=this.parserTemplateFile(c),e=RES.getRes(a[1]),f=RES.getRes(a[0]),h=new starlingswf.SwfAssetManager;h.addSpriteSheet(a[0],f);this.swfObj=new starlingswf.Swf(e,h,24)}c.prototype.parserTemplateFile=function(c){var b=[c];c=c.split("_");c.splice(c.length-1,0,"swf");b.push(c.join("_"));return b};return c}();MovieInfo.prototype.__class__="MovieInfo";
var MovieCache=function(){function c(){this._cache={};this._info={}}var d=c.prototype;d.getInfo=function(b,a){var e=[b,a].join("-");this._info[e]||(this._info[e]=new MovieInfo(b,a));return this._info[e]};d.getMovie=function(b,a,e){var c=[b,a,e].join("-");this._cache[c]||(this._cache[c]=[]);if(0==this._cache[c].length){var d=this.getInfo(b,a).swfObj.createMovie("mc_"+a+"_"+e);d.filename=b;d.armature=a;d.action=e;this._cache[c].push(d)}return this._cache[c].pop()};d.setMovie=function(b){var a=[b.filename,
b.armature,b.action].join("-");this._cache[a]||(this._cache[a]=[]);this._cache[a].push(b)};c.getInstance=function(){null==this._inst&&(this._inst=new c);return this._inst};return c}();MovieCache.prototype.__class__="MovieCache";
var Movie=function(c){function d(a,b,d){c.call(this);this._bones=[];this._boneCount=0;this._autoRemove=!0;this._isCache=this._isComplete=this._autoDispose=this._forceCompleteRemove=!1;this._currentActionName=null;this._isPause=!1;this._allowSound=!0;this._filename=a;this._armatureName=b}__extends(d,c);var b=d.prototype;Object.defineProperty(b,"autoDispose",{get:function(){return this._autoDispose},set:function(a){(this._autoDispose=a)&&this._isComplete&&this.dispose()},enumerable:!0,configurable:!0});
Object.defineProperty(b,"allowSound",{get:function(){return this._allowSound},set:function(a){this._allowSound=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"isCache",{get:function(){return this._isCache},set:function(a){this._isCache=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"autoRemove",{get:function(){return this._autoRemove},set:function(a){this._autoRemove=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"forceCompleteRemove",{get:function(){return this._forceCompleteRemove},
set:function(a){this._forceCompleteRemove=a},enumerable:!0,configurable:!0});b.play=function(a,b){void 0===b&&(b=!1);this._currentActionName=a;this.removeListeners();this._isPause=!1;this._movieClip=MovieCache.getInstance().getMovie(this._filename,this._armatureName,a);this._movieClip.gotoAndPlay(1);this._movieClip.addEventListener(egret.Event.COMPLETE,this.onComplete,this);this._movieClip.addEventListener(starlingswf.SwfEvent.SWF_FRAME,this.onFrame,this);this._movieClip.rewind=b;this.addChild(this._movieClip);
this.addBonesToParent();this._movieClip.loop&&(this._autoRemove=!1)};b.addBonesToParent=function(){for(var a=0;a<this._bones.length;a++)this._bones[a].addToParent(this._movieClip)};b.setCallback=function(a,b){void 0===b&&(b=null);for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];this._selector=a;this._context=b;this._args=c};b.onComplete=function(a){this.doCallback(d.PLAY_COMPLETE);this.removeBones();if(this._autoRemove||this._forceCompleteRemove)this.doCallback(d.REMOVED),GameUtils.removeFromParent(this),
this._isComplete=!0};b.removeListeners=function(){this._movieClip&&(this.pause(!0),this.removeMovie())};b.doCallback=function(a,b){void 0===b&&(b=null);this._selector&&this._selector.apply(this._context,this._args.concat(a,b,this))};b.onFrame=function(a){for(var b=0;b<a.frames.length;b++)this.onFrameItem(a.frames[b])};b.onFrameItem=function(a){a=a.split("-");var b="",c="";2<=a.length?(b=a[0],c=a[1]):c=a[0];this.doCallback(c,b);2<=a.length&&"sound"==a[0]&&this.playSound(a[1].replace(/\./gi,"_"));2<=
a.length&&"bone"==a[0]&&this.refreshBones(a[1])};b.refreshBones=function(a){var b=this;this._bones.filter(function(b){return b.parentBoneName==a&&!b.isAdded}).forEach(function(a){a.addToParent(b._movieClip)})};b.removeBones=function(){for(var a=this._bones.filter(function(a){return a.completeRemove});a.length;)this.removeBoneDisplay(a.shift().boneName)};b.playSound=function(a){};b.addBoneDisplay=function(a,b,c,d,g){void 0===c&&(c=null);void 0===d&&(d=!1);void 0===g&&(g="");this._boneCount++;var l=
"custom_bone_"+this._boneCount;""!=g&&(l=g);a=new MovieBone(a,b,l,d,c);this._bones.push(a);return l};b.removeBoneDisplay=function(a){for(var b=0;b<this._bones.length&&this._bones[b].boneName!=a;b++);this._bones[b].removeFromParent();this._bones.splice(b,1)};b.resume=function(a){void 0===a&&(a=!1);this._movieClip&&this._isPause&&(this._movieClip.play(),this._isPause=!1,a&&(this._movieClip.addEventListener(egret.Event.COMPLETE,this.onComplete,this),this._movieClip.addEventListener(starlingswf.SwfEvent.SWF_FRAME,
this.onFrame,this)))};b.pause=function(a){void 0===a&&(a=!1);this._movieClip&&!this._isPause&&(this._movieClip.stop(!0),this._isPause=!0,a&&(this._movieClip.removeEventListener(egret.Event.COMPLETE,this.onComplete,this),this._movieClip.removeEventListener(starlingswf.SwfEvent.SWF_FRAME,this.onFrame,this)))};b.gotoAndPlay=function(a){this._movieClip.setCurrentFrame(Number(a))};b.gotoAndStop=function(a){this._movieClip.gotoAndStop(a)};b._onRemoveFromStage=function(){c.prototype._onRemoveFromStage.call(this);
this.pause(!0)};b._onAddToStage=function(){c.prototype._onAddToStage.call(this);this.resume(!0)};b.removeMovie=function(){this._movieClip&&(MovieCache.getInstance().setMovie(this._movieClip),GameUtils.removeFromParent(this._movieClip),this._movieClip=null)};b.dispose=function(){this.pause(!0);for(this.removeMovie();0<this._bones.length;)this._bones.shift().clear();this._context=this._selector=this._args=null;c.prototype.dispose.call(this)};d.PLAY_COMPLETE="complete";d.REMOVED="removed";return d}(BaseContainer);
Movie.prototype.__class__="Movie";
var FirstLoginAwardLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this._container=new egret.DisplayObjectContainer;this.boxContainer.addChild(this._container);var a=egret.DynamicBitmap.create("paymen_recommend");this._container.addChild(a);a.x=35;a.y=200;a=ResourceUtils.createBitmapFromSheet("weixin_bg2");a.x=80;a.y=280;this._container.addChild(a);a=new SimpleButton;a.anchorX=a.anchorY=0.5;var b=ResourceUtils.createBitmapFromSheet("close_btn");
a.addChild(b);a.addOnClick(this.onCloseHandler,this);a.useZoomOut(!0);a.x=570;a.y=230;this.boxContainer.addChild(a);a=ResourceUtils.createBitmapFromSheet("weixin_award_icon");a.x=90;a.y=290;this._container.addChild(a);this._awardLabel=new egret.TextField;this._container.addChild(this._awardLabel);this._awardLabel.x=170;this._awardLabel.y=315;this._awardLabel.size=22;this._awardLabel.textColor=16777215;this._awardLabel.text="\u6d3b\u52a8\u671f\u95f4\u9996\u6b21\u767b\u9646\u8d60\u9001200\u5143\u5b9d\uff01";
this._btn=new FriendItemButton;this._btn.x=310;this._btn.y=500;this._btn.initButton("buy_btn","buy_btn");this._btn.useZoomOut(!0);this._btn.addOnClick(this.onClickHandler,this);this.boxContainer.addChild(this._btn);this._btn.addLabel("\u9886\u53d6\u5956\u52b1")};b.onClickHandler=function(){ProxyUtils.firstLogin(this.onCloseHandler,this)};b.onCloseHandler=function(){GameMainLayer.instance.removeFirstLogin()};b.dispose=function(){c.prototype.dispose.call(this)};return d}(BoxContainer);
FirstLoginAwardLayer.prototype.__class__="FirstLoginAwardLayer";
var LoopBuyLayer=function(c){function d(){c.call(this);this._timeId=-1;this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("paymen_recommend");a.x=20;a.y=200;this.boxContainer.addChild(a);var a=new SimpleButton,b=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");a.addChild(b);a.addOnClick(this.onCloseHandler,this);a.x=510;a.y=170;a.useZoomOut(!0);this.boxContainer.addChild(a);a=LoopBuyMonitor.getInstance().getCurIdx()+1;a=ResourceUtils.createBitmapFromSheet("icon_discount_"+
a,"iconRes");a.x=30;a.y=210;this.boxContainer.addChild(a);this._nameLabel=new egret.TextField;this._nameLabel.size=30;this._nameLabel.anchorX=0.5;this._nameLabel.textColor=16776960;this._nameLabel.stroke=1;this._nameLabel.strokeColor=0;this._nameLabel.x=320;this._nameLabel.y=270;this.boxContainer.addChild(this._nameLabel);a=new egret.TextField;a.text="\u83b7\u5f97\u4ee5\u4e0b\u7269\u54c1:";a.size=26;a.textColor=0;a.anchorX=0.5;a.x=320;a.y=310;this.boxContainer.addChild(a);this._awdContainer=new egret.DisplayObjectContainer;
this._awdContainer.x=320;this._awdContainer.y=345;this.boxContainer.addChild(this._awdContainer);var b=LoopBuyMonitor.getInstance().getCurData(),c=0,d;for(d in b.awards)a=new egret.TextField,a.anchorX=0.5,a.textColor=0,a.size=24,a.y=27*c,c+=1,"card"==d?a.text="\u968f\u673a\u4fa0\u5ba2\u5361\u724cX"+b.awards[d]:"gc"==d?a.text="\u5143\u5b9dX"+b.awards[d]:"giveYu"==d?a.text="\u9b42\u7389X"+b.awards[d]:"yuanqi"==d&&(a.text="\u4e09\u5206\u5f52\u5143\u6c14\u4f7f\u75281\u5c0f\u65f6"),this._awdContainer.addChild(a);
this._timeText=new egret.TextField;this._timeText.size=24;this._timeText.textColor=16711680;this._timeText.anchorX=0.5;this._timeText.x=320;this._timeText.y=460;this.boxContainer.addChild(this._timeText);this._btn=new DiscountButton;this._btn.addOnClick(this.onBuyClick,this);this._btn.refreshView();this._btn.x=320;this._btn.y=520;this.boxContainer.addChild(this._btn)};b.refreshView=function(){var a=LoopBuyMonitor.getInstance().getCurData();this._nameLabel.text=a.name;this._timeId=Time.setInterval(this.countDown,
this,1E3);this.countDown()};b.countDown=function(){this._timeText.text="\u5269\u4f59\u6253\u6298\u65f6\u95f4:"+GameUtils.formatTime1(ProxyUtils.leftTime)};b.onBuyClick=function(){var a=LoopBuyMonitor.getInstance().getCurData(),b={};b.id=a.id;b.productId=a.productId;b.ext=a.ext;b.need=10*a.money;b.type="buy";a=new PaymentModel(b);PaymentFactory.getInstance().effect(a);this.onCloseHandler()};b.onCloseHandler=function(){this.parent&&this.parent.removeChild(this)};b.dispose=function(){Time.clearInterval(this._timeId);
c.prototype.dispose.call(this)};return d}(BoxContainer);LoopBuyLayer.prototype.__class__="LoopBuyLayer";
var DiscountButton=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this.anchorX=this.anchorY=0.5;this.useZoomOut(!0);var a=ResourceUtils.createBitmapFromSheet("hero_lvup_btn");a.anchorX=a.anchorY=0.5;this.addChild(a);this.width=a.width;this.height=a.height;a.x=this.width/2;a.y=this.height/2;this._oldLabel=new egret.TextField;this._oldLabel.textColor=0;this._oldLabel.size=26;this._oldLabel.y=18;this._oldLabel.x=28;this.addChild(this._oldLabel);
a=ResourceUtils.createBitmapFromSheet("split_discount");a.y=this.height/2;a.x=28;this.addChild(a);this._newLabel=new egret.TextField;this._newLabel.textColor=0;this._newLabel.size=26;this._newLabel.y=18;this._newLabel.x=103;this.addChild(this._newLabel)};b.refreshView=function(){var a=LoopBuyMonitor.getInstance().getCurData()||{};this._oldLabel.text=a.price+"\u5143";this._newLabel.text=a.money+"\u5143"};return d}(SimpleButton);DiscountButton.prototype.__class__="DiscountButton";
var LoopBuyConfirmLayer=function(c){function d(){c.call(this)}__extends(d,c);var b=d.prototype;b.initView=function(a){this._data=a;var b=egret.DynamicBitmap.create("paymen_recommend");b.x=20;b.y=200;this.boxContainer.addChild(b);var b=new SimpleButton,c=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");b.addChild(c);b.addOnClick(this.onCloseHandler,this);b.x=510;b.y=170;b.useZoomOut(!0);this.boxContainer.addChild(b);this._nameLabel=new egret.TextField;this._nameLabel.size=30;this._nameLabel.anchorX=
0.5;this._nameLabel.textColor=16776960;this._nameLabel.stroke=1;this._nameLabel.strokeColor=0;this._nameLabel.x=320;this._nameLabel.y=270;this.boxContainer.addChild(this._nameLabel);b=new egret.TextField;b.text="\u83b7\u5f97\u4ee5\u4e0b\u7269\u54c1:";b.size=26;b.textColor=0;b.anchorX=0.5;b.x=320;b.y=310;this.boxContainer.addChild(b);this._awdContainer=new egret.DisplayObjectContainer;this._awdContainer.x=320;this._awdContainer.y=345;this.boxContainer.addChild(this._awdContainer);var c=0,d;for(d in a)b=
new egret.TextField,b.anchorX=0.5,b.textColor=0,b.size=24,b.y=27*c,c+=1,"card"==d?b.text="\u4fa0\u5ba2\u5361\u724cX"+a[d].length:"gc"==d?b.text="\u5143\u5b9dX"+a[d]:"giveYu"==d?b.text="\u9b42\u7389X"+a[d]:"yuanqi"==d&&(b.text="\u4e09\u5206\u5f52\u5143\u6c14\u4f7f\u75281\u5c0f\u65f6"),this._awdContainer.addChild(b);this._btn=new NormalButton;this._btn.addOnClick(this.onCloseHandler,this);this._btn.setLabel("\u786e\u5b9a");this._btn.x=320;this._btn.y=520;this.boxContainer.addChild(this._btn)};b.refreshView=
function(a){this.initView(a);this._nameLabel.text="\u83b7\u5f97\u5956\u52b1"};b.onCloseHandler=function(){LoopBuyMonitor.getInstance().realAddAward(this._data);this.parent&&this.parent.removeChild(this)};b.dispose=function(){c.prototype.dispose.call(this)};return d}(BoxContainer);LoopBuyConfirmLayer.prototype.__class__="LoopBuyConfirmLayer";
var LoopBuyMonitor=function(){function c(){this._award=!1;this._data=null}var d=c.prototype;c.getInstance=function(){null==c._instance&&(c._instance=new c);return c._instance};d.setAward=function(){this._award=!0};d.getAward=function(){if(this._award){var b=new SingleProxy({mod:"Store.orderGift"});b.addEventListener(ProxyEvent.RESPONSE_SUCCEED,this.getAwardDone,this);b.load();this._award=!1}};d.getAwardDone=function(b){this.addAward(b.responseData.orderGift,!1)};d.initData=function(b){this._data=
b};d.getCurIdx=function(){return this._data?this._data.buyNum:3};d.getCurData=function(){if(this._data&&this._data.gifts){var b=this.getCurIdx()+1;return this._data.gifts[b]}return{}};d.isDone=function(){return 3<=this.getCurIdx()};d.addAward=function(b,a){void 0===a&&(a=!0);GameMainLayer.instance.showLoopBuyConfirm(b);a&&this._data&&(this._data.buyNum+=1)};d.realAddAward=function(b){for(var a in b)"card"==a?(FateController.getInstance().addCard(b[a]||[]),doAction(Const.SHOW_TIPS,"\u4fa0\u5ba2\u5361\u724cx"+
b[a].length)):"giveYu"==a?(DataCenter.getInstance().changeHolyNum(b[a]||0),doAction(Const.SHOW_TIPS,"\u9b42\u7389x"+b[a])):"yuanqi"==a?(DataCenter.getInstance().countdown.setTime("payment_touch",b[a]||3600),doAction("add_touch_skill"),doAction(Const.SHOW_TIPS,"\u4e09\u5206\u5f52\u5143\u6c141\u5c0f\u65f6")):"gc"==a&&doAction(Const.SHOW_TIPS,"\u5143\u5b9dx"+b[a]);doAction("loopbuy_change")};return c}();LoopBuyMonitor.prototype.__class__="LoopBuyMonitor";
var CardFateLayer=function(c){function d(){c.call(this);this._dataList=[];this._isChange=!0;this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("buff_bg");a.touchEnabled=!0;this.boxContainer.addChild(a);a.x=23;a.y=GameUtils.getPosY(23);a=ResourceUtils.createBitmapFromSheet("title_fate","cardRes");this.boxContainer.addChild(a);a.x=220;a.y=GameUtils.getPosY(30);this.initTableView();a=new SimpleButton;a.anchorX=a.anchorY=0.5;var b=ResourceUtils.createBitmapFromSheet("close_btn");
a.addChild(b);a.addOnClick(this.onCloseHandler,this);a.useZoomOut(!0);a.x=560;a.y=GameUtils.getPosY(72);this.addChild(a);addAction(Const.FATE_REFRESH,this.refreshView,this)};b.onCloseHandler=function(){GameMainLayer.instance.hideFateLayer()};b.initTableView=function(){this._tableView=new TableView;this._tableView.y=GameUtils.getPosY(140);this._tableView.x=55;this.addChild(this._tableView);this._tableView.width=GameUtils.getWinWidth();this._tableView.height=750;this._tableView.setList([],Direction.VERTICAL,
this,GameUtils.getWinWidth(),190);this._dataList=[];var a=RES.getRes("fateConfig"),b;for(b in a)a=FateModel.createByConfigID(b),this._dataList.push(a)};b.createItemRenderer=function(){return new FateItemLayer};b.updateItemRenderer=function(a,b,c){a.refreshView(b,c)};b.refreshView=function(){this._isChange=!0;!1!=this.visible&&(this._tableView.reloadData(this._dataList),this._isChange=!1)};b.refresh=function(){this._isChange&&this._tableView.reloadData(this._dataList);this._isChange=!1};b.dispose=
function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};return d}(BoxContainer);CardFateLayer.prototype.__class__="CardFateLayer";
var FateItemLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=new egret.DisplayObjectContainer;this.addChild(a);this._bgContainer=new egret.DisplayObjectContainer;a.addChild(this._bgContainer);this._cardContainer=new egret.DisplayObjectContainer;this._cardContainer.x=80;this._cardContainer.y=20;a.addChild(this._cardContainer);this._desLabel=new egret.TextField;this._desLabel.size=20;this._desLabel.x=100;this._desLabel.y=153;this._desLabel.text=
"\u6fc0\u6d3b\u5c5e\u6027:\u6240\u6709\u653b\u51fb\u4f24\u5bb3\u63d0\u534710%";this._desLabel.textAlign="center";a.addChild(this._desLabel);var b=ResourceUtils.createBitmapFromSheet("item_name_bg","cardRes");b.x=15;b.y=13;a.addChild(b);this._title=new egret.DisplayObjectContainer;this._title.x=17;this._title.y=20;a.addChild(this._title);this._btn=new FateActButton;this._btn.x=450;this._btn.y=80;this._btn.setLabel("\u6fc0\u6d3b");this._btn.addOnClick(this.onFateHandler,this);a.addChild(this._btn);
a.cacheAsBitmap=!0};b.onFateHandler=function(){ProxyUtils.exchangeFate(this._model.configId,this.onFateCallBack,this);GameMainLayer.instance.showLoadingRotation(!0);var a=Time.setTimeout(function(){GameMainLayer.instance.showLoadingRotation(!1);Time.clearTimeout(a)},this,3E3)};b.onFateCallBack=function(){var a=this._model.getNeedList();FateController.getInstance().useCard(a)};b.refreshView=function(a,b){this._model=a;this._idx=b;this._cardContainer.removeChildren();var c=this._model.getNeedList(),
d=0,g;for(g in c){var l=new CardItem;l.refreshView(g,c[g]);l.x=110*d;d+=1;this._cardContainer.addChild(l)}this._title.removeChildren();c=ResourceUtils.createBitmapFromSheet(this._model.getNameStr(),"cardRes");this._title.addChild(c);this._btn.setEnable(this._model.canActivation());c="";0==this._model.getLevel()?(this._btn.setLabel("\u6fc0\u6d3b"),this._desLabel.text="\u6fc0\u6d3b\u5c5e\u6027Lv1:"+this._model.getDes(),c="lock_fate_item_bg"):(this._btn.setLabel("\u5347\u7ea7"),this._desLabel.text="\u5f53\u524d\u5c5e\u6027Lv"+
this._model.getLevel()+":"+this._model.getDes(),c="fate_item_bg");this._bgContainer.removeChildren();c=ResourceUtils.createBitmapFromSheet(c,"cardRes");this._bgContainer.addChild(c)};return d}(BaseContainer);FateItemLayer.prototype.__class__="FateItemLayer";
var CardItem=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this._iconContainer=new egret.DisplayObjectContainer;this.addChild(this._iconContainer);this._needLabel=new egret.TextField;this._needLabel.x=30;this._needLabel.y=73;this._needLabel.size=20;this._needLabel.textAlign="center";this.addChild(this._needLabel);this._nameLabel=new egret.TextField;this._nameLabel.y=100;this._nameLabel.size=20;this._nameLabel.textAlign="center";this.addChild(this._nameLabel)};
b.refreshView=function(a,b,c){void 0===c&&(c=!1);var d=0,d=c?DataCenter.getInstance().getHolyNum():FateController.getInstance().getCardNum(a);this._iconContainer.removeChildren();var g=ResourceUtils.createBitmapFromSheet(0<d||c?"fate_mask":"lock_fate_mask","cardRes");this._iconContainer.addChild(g);g=null;c?(g=ResourceUtils.createBitmapFromSheet("holy_icon","commonRes"),g.x=g.y=20):(g=ResourceUtils.createBitmapFromSheet("icon_card_"+a,"cardRes"),g.x=5,g.y=6);g.scaleX=g.scaleY=0.9;this._iconContainer.addChild(g);
g=ResourceUtils.createBitmapFromSheet(0<d||c?"fate_num_bg":"lock_fate_num_bg","cardRes");g.x=23;g.y=75;this._iconContainer.addChild(g);this._needLabel.text=d+"/"+b;this._needLabel.textColor=d>=b?65280:16711680;c?(this._nameLabel.text="\u9b42\u7389",this._nameLabel.x=25):(b=RES.getRes("cardConfig"),this._nameLabel.text=b[a].name,this._nameLabel.x=15)};return d}(egret.DisplayObjectContainer);CardItem.prototype.__class__="CardItem";
var EvolveModel=function(){function c(b){this._heroId=b}var d=c.prototype;d.getCurName=function(){var b=this.getQuality();return c.qualityNames[b]+c.heroName[this._heroId]};d.getNextName=function(){var b=this.getQuality();return c.qualityNames[b+1]+c.heroName[this._heroId]};d.getCurColor=function(){var b=this.getQuality();return c.qualityColors[b]};c.getCurName=function(b){return c.qualityNames[ProxyUtils.heroCards[b]]+c.heroName[b]};c.getCurColor=function(b){return c.qualityColors[ProxyUtils.heroCards[b]]};
c.getPrefixKey=function(b){return c.qualityNames[ProxyUtils.heroCards[b]]};d.getSkillName=function(){var b=this.getQuality();return c.skillNames[this._heroId][b]};d.changeMaterial=function(){var b=this.getValue("soul"),a=this.getValue("card1"),c=this.getValue("num1"),d=this.getValue("card2"),h=this.getValue("num2"),g=this.getValue("card3"),l=this.getValue("num3"),k={};k[a]=c;k[d]=h;k[g]=l;DataCenter.getInstance().changeHolyNum(-b);FateController.getInstance().useCard(k)};d.isAlready=function(){var b=
this.getValue("soul"),a=this.getValue("card1"),c=this.getValue("num1"),d=this.getValue("card2"),h=this.getValue("num2"),g=this.getValue("card3"),l=this.getValue("num3"),a=FateController.getInstance().getCardNum(a),d=FateController.getInstance().getCardNum(d),g=FateController.getInstance().getCardNum(g);return DataCenter.getInstance().getHolyNum()>=b&&a>=c&&d>=h&&g>=l};d.getNextColor=function(){var b=this.getQuality();return c.qualityColors[b+1]};d.getQuality=function(){return ProxyUtils.heroCards[this._heroId]};
d.isMaxLevel=function(){return 3==this.getQuality()};d.getNextObject=function(){this.getQuality();return RES.getRes("evolutionConfig")[this._heroId][this.getQuality()]};d.getValue=function(b,a){void 0===a&&(a=null);if("quality"==b)return this.getQuality();if("id"==b)return this._heroId;var c=this.getNextObject();return c&&c.hasOwnProperty(b)?c[b]:a};c.create=function(b){return new c(b)};c.getList=function(){if(null==c._list){c._list=[];for(var b=1;6>=b;b++)c._list.push(c.create(b))}return c._list};
c.getFilterList=function(){return c.getList().filter(function(b,a){if(b.isMaxLevel())return!1;if(0<DataCenter.getInstance().totalData.currentLife)return!0;var c=b.getValue("id");return applyFilters(Const.GET_HERO,c)!=c?!0:!1})};c.hasAlready=function(){for(var b=c.getFilterList(),a=0;a<b.length;a++)if(b[a].isAlready())return!0;return!1};c.qualityNames={0:"",1:"\u771f\u00b7",2:"\u9b54\u00b7",3:"\u72c2\u00b7"};c.qualityColors={0:16777215,1:458496,2:583167,3:13177840};c.heroName={1:"\u695a\u7559\u9999",
2:"\u6c5f\u5c0f\u9c7c",3:"\u82b1\u65e0\u7f3a",4:"\u674e\u5bfb\u6b22",5:"\u53f6\u5b64\u57ce",6:"\u897f\u95e8\u5439\u96ea"};c.skillNames={1:["\u65e0\u53cc\u98de\u6247","\u6697\u706d\u98de\u6247","\u70c8\u7130\u98de\u6247"],2:["\u4e94\u6bd2\u795e\u529f","\u9b54\u715e\u6bd2\u653b","\u72c2\u66b4\u5267\u6bd2"],3:["\u6ee1\u5929\u82b1\u96e8","\u66b4\u96e8\u68a8\u82b1","\u98ce\u5377\u6b8b\u4e91"],4:["\u98de\u53f6\u7edd\u60c5","\u6781\u70b9\u5bf8\u8292","\u661f\u65e5\u7edd\u5c18"],5:["\u5929\u5916\u98de\u4ed9",
"\u5929\u9b54\u964d\u4e16","\u6ee1\u5929\u795e\u4f5b"],6:["\u5251\u795e\u4e00\u7b11","\u9b54\u5251\u6ed4\u5929","\u6d74\u706b\u795e\u5251"]};c._list=null;return c}();EvolveModel.prototype.__class__="EvolveModel";
var EvolveItemButton=function(c){function d(){c.call(this);this._normalButton=ResourceUtils.createBitmapFromSheet("hero_lvup_btn");this.addChild(this._normalButton);this._disabledButton=ResourceUtils.createBitmapFromSheet("hero_lvup_disable");this.addChild(this._disabledButton);this._disabledButton.visible=!1;this._text=new egret.TextField;this._text.text="\u8fdb \u5316";this._text.size=30;this._text.textColor=0;this._text.x=55;this._text.y=15;this.addChild(this._text);this.cacheAsBitmap=!0;this.useZoomOut(!0);
this.anchorY=this.anchorX=0.5}__extends(d,c);return d}(SimpleButton);EvolveItemButton.prototype.__class__="EvolveItemButton";
var EvolveLayer=function(c){function d(){c.call(this);this._dataList=[];this._isChange=!0;this.initView();addAction(Const.EVOLVE_REFRESH,this.refresh,this)}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("buff_bg");a.touchEnabled=!0;this.boxContainer.addChild(a);a.x=23;a.y=GameUtils.getPosY(23);a=ResourceUtils.createBitmapFromSheet("title_evolve","cardRes");this.boxContainer.addChild(a);a.x=220;a.y=GameUtils.getPosY(30);this._tf=new egret.TextField;this._tf.text=
"\u6240\u6709\u4fa0\u5ba2\u90fd\u5df2\u8fdb\u5316\u5230\u6700\u9ad8\u7ea7\uff01\uff01";this._tf.size=30;this._tf.textColor=0;this._tf.textAlign="center";this._tf.anchorX=this._tf.anchorY=0.5;this._tf.x=320;this._tf.y=450;this.addChild(this._tf);this.initTableView();a=new SimpleButton;a.anchorX=a.anchorY=0.5;var b=ResourceUtils.createBitmapFromSheet("close_btn");a.addChild(b);a.addOnClick(this.onCloseHandler,this);a.useZoomOut(!0);a.x=560;a.y=GameUtils.getPosY(72);this.addChild(a)};b.refresh=function(){var a=
EvolveModel.getFilterList(),b=this._tableView._container?this._tableView._container.y:0;0==a.length?(this._tf.visible=!0,this._tableView.setList([],Direction.VERTICAL,this,GameUtils.getWinWidth(),498)):(this._tf.visible=!1,this._tableView.setList(a,Direction.VERTICAL,this,GameUtils.getWinWidth(),498),this._tableView.scrollTo(0,b,0))};b.onCloseHandler=function(){GameMainLayer.instance.hideEvolveLayer()};b.initTableView=function(){this._tableView=new TableView;this._tableView.y=GameUtils.getPosY(140);
this._tableView.x=55;this.addChild(this._tableView);this._tableView.width=GameUtils.getWinWidth();this._tableView.height=750;this.refresh()};b.createItemRenderer=function(){return new EvolveItem};b.updateItemRenderer=function(a,b,c){a.refreshView(b)};b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};return d}(BoxContainer);EvolveLayer.prototype.__class__="EvolveLayer";
var EvolveItem=function(c){function d(){c.call(this);this.initView();addAction(Const.FATE_REFRESH,this.onRefresh,this);addAction(Const.CHANGE_HOLY_NUM,this.onRefresh,this)}__extends(d,c);var b=d.prototype;b.onRefresh=function(){this.refreshView(this._model)};b.createText=function(a,b,c,d,g,l){void 0===g&&(g=16777215);void 0===l&&(l="left");var k=new egret.TextField;-1<a.indexOf("<font")?k.textFlow=(new egret.HtmlTextParser).parser(a):k.text=a;k.size=b;k.textColor=g;k.x=c;k.y=d;k.anchorX="left"==l?
0:"center"==l?0.5:1;k.anchorY=0.5;this.addChild(k);return k};b.evolveHandler=function(){ProxyUtils.updateHero(this._model)};b.initView=function(){this._iconContainer=new egret.DisplayObjectContainer;this.addChild(this._iconContainer);this._oldHeadNode=new egret.DisplayObjectContainer;this.addChild(this._oldHeadNode);this._oldHeadNode.x=94;this._oldHeadNode.y=30;this._newHeadNode=new egret.DisplayObjectContainer;this.addChild(this._newHeadNode);this._newHeadNode.x=338;this._newHeadNode.y=30;this._btn=
new EvolveItemButton;this._btn.addOnClick(this.evolveHandler,this);this._btn.x=250;this._btn.y=438;this.addChild(this._btn);this._cardItem1=new CardItem;this._cardItem1.refreshView(1000012,20);this.addChild(this._cardItem1);this._cardItem1.x=55;this._cardItem1.y=266;this._cardItem2=new CardItem;this._cardItem2.refreshView(1000012,20);this.addChild(this._cardItem2);this._cardItem2.x=160;this._cardItem2.y=266;this._cardItem3=new CardItem;this._cardItem3.refreshView(1000012,20);this.addChild(this._cardItem3);
this._cardItem3.x=265;this._cardItem3.y=266;this._cardItem4=new CardItem;this._cardItem4.refreshView(0,20,!0);this.addChild(this._cardItem4);this._cardItem4.x=370;this._cardItem4.y=266;var a=ResourceUtils.createBitmapFromSheet("bg_evolve_item","cardRes");this._iconContainer.addChild(a);this._curNameLabel=this.createText("\u540d\u79f01",22,130,125,16777215,"center");this._nextNameLael=this.createText("\u540d\u79f02",22,375,125,16777215,"center");this._descLabel=this.createText("\u8fd9\u662f\u8bf4\u660e",
20,25,190,16777215,"left");this._descLabel.width=460;this._descLabel.lineSpacing=5;this._descLabel.height=60;this._materialLabel=this.createText("\u8fdb\u8d27\u6d88\u8017:",22,20,20,16777215,"left");this._materialLabel.x=20;this._materialLabel.y=240;this.createHead(1)};b.createHead=function(a){var b=d.iconHead[a];a=ResourceUtils.createBitmapFromSheet(b,"iconRes");b=ResourceUtils.createBitmapFromSheet(b,"iconRes");GameUtils.removeAllChildren(this._oldHeadNode);GameUtils.removeAllChildren(this._newHeadNode);
this._oldHeadNode.addChild(a);this._newHeadNode.addChild(b)};b.refreshView=function(a){if((this._model=a)&&!a.isMaxLevel()){var b=a.getValue("card1"),c=a.getValue("card2"),d=a.getValue("card3"),g=a.getValue("num1"),l=a.getValue("num2"),k=a.getValue("num3"),m=a.getValue("soul");this._curNameLabel.text=a.getCurName();this._curNameLabel.textColor=a.getCurColor();this._nextNameLael.text=a.getNextName();this._nextNameLael.textColor=a.getNextColor();this._cardItem1.refreshView(b,g);this._cardItem2.refreshView(c,
l);this._cardItem3.refreshView(d,k);this._descLabel.text="\u8fdb\u5316\u540e\u5927\u5e45\u63d0\u5347\u89d2\u8272\u5c5e\u6027\uff0c\u4e14\u70b9\u51fb\u5c4f\u5e55\u65f6\u51e0\u7387\u7edd\u6280"+a.getSkillName()+"\u3002";this.createHead(a.getValue("id"));this._cardItem4.refreshView(0,m,!0);this._btn.setEnabled(a.isAlready())}};d.iconHead={1:"icon_hero_skill_1",2:"icon_head_1",3:"icon_head_7",4:"icon_head_13",5:"icon_head_19",6:"icon_head_25"};return d}(egret.DisplayObjectContainer);
EvolveItem.prototype.__class__="EvolveItem";
var JumpScreenMsg=function(c){function d(){c.call(this);addAction(Const.Chat_jumpScreen,this.showMsg,this);this.allColor=[16711680,16736431,16729343,13870335,65535,8454143,1768860,9895633,5504851,16777015,12779368,14614444,16777107,16772503,16777204,16711808,16744448,16207872,16752706,11075364,13553407,16770815,35723,16777145];this.pool=new PoolManager(10);for(var a=0;10>a;a++){var b=new jumpMsgItem;b.x=GameUtils.getWinWidth();this.addChild(b);this.pool.combinItem(b)}}__extends(d,c);var b=d.prototype;
b.showMsg=function(a){if(a){var b=this.pool.getCurFree();if(null!=b){var c=b.item;c.txtMsg.size=this.getRandomSize();var d=this.getRandomColor();c.txtMsg.textColor=d;c.setTxtContent(a);c.y=this.getRandomY(c.txtMsg.size);EffectUtils.jumpMsg(c).call(function(){b.setState(!0);c.x=GameUtils.getWinWidth()})}}};b.getRandomY=function(a){a=GameUtils.getWinHeight()-a;return GameUtils.random(0,a)};b.getRandomColor=function(){var a=GameUtils.random(0,this.allColor.length-1);return this.allColor[a]};b.getRandomSize=
function(){return GameUtils.random(32,40)};return d}(BaseContainer);JumpScreenMsg.prototype.__class__="JumpScreenMsg";var jumpMsgItem=function(c){function d(){c.call(this);this.txtMsg=new egret.TextField;this.txtMsg.stroke=2;this.txtMsg.strokeColor=0;this.addChild(this.txtMsg)}__extends(d,c);d.prototype.setTxtContent=function(b){b&&(this.txtMsg.text=b)};return d}(egret.DisplayObjectContainer);jumpMsgItem.prototype.__class__="jumpMsgItem";
var JoinGuildView=function(c){function d(){c.call(this);addAction(Const.Guild_Search,this.reload,this);this.InitView()}__extends(d,c);var b=d.prototype;b.InitView=function(){var a=egret.DynamicBitmap.create("achieve_bg");a.touchEnabled=!0;a.y=GameUtils.getPosY(0);this.addChild(a);a=new SimpleButton;a.addOnClick(this.close,this);a.x=610;a.y=GameUtils.getPosY(75);a.anchorX=a.anchorY=0.5;a.useZoomOut(!0);a.addChild(ResourceUtils.createBitmapFromSheet("close_btn"));this.addChild(a);this.infoContainer=
new egret.DisplayObjectContainer;this.addChild(this.infoContainer);this.infoContainer.y=GameUtils.getPosY(0);a=ResourceUtils.createBitmapFromSheet("gldTitle_1","commonRes");a.x=325;a.y=65;a.anchorX=a.anchorY=0.5;this.infoContainer.addChild(a);var b=ResourceUtils.createBitmapFromSheet("\u5206\u5272\u7ebf","commonRes");this.infoContainer.addChild(b);b.y=120;b.width=GameUtils.getWinWidth()-30;b.x=GameUtils.getWinWidth()/2;b.anchorX=b.anchorY=0.5;var c=ResourceUtils.createBitmapFromSheet("\u5206\u5272\u7ebf",
"commonRes");this.infoContainer.addChild(c);c.y=b.y+80;c.width=b.width;c.x=GameUtils.getWinWidth()/2;c.anchorX=c.anchorY=0.5;var d=ResourceUtils.createBitmapFromSheet("\u5206\u5272\u7ebf","commonRes");this.infoContainer.addChild(d);d.rotation=90;d.width=b.y-c.y;d.x=GameUtils.getWinWidth()/3;d.y=c.y+d.width/2;d.anchorX=c.anchorY=0.5;a=ResourceUtils.createBitmapFromSheet("\u5206\u5272\u7ebf","commonRes");this.infoContainer.addChild(a);a.rotation=90;a.width=b.y-c.y;a.x=GameUtils.getWinWidth()/3*2;a.y=
c.y+d.width/2;a.anchorX=c.anchorY=0.5;var g=ResourceUtils.createBitmapFromSheet("\u5206\u5272\u7ebf","commonRes");this.infoContainer.addChild(g);g.rotation=90;g.width=b.y-c.y;g.x=GameUtils.getWinWidth()/3*3;g.y=c.y+d.width/2;g.anchorX=c.anchorY=0.5;var l=new egret.TextField;this.infoContainer.addChild(l);l.size=30;l.text="\u5e2e\u6d3e\u540d\u79f0";l.anchorX=l.anchorY=0.5;l.x=d.x/2;l.y=(c.y-b.y)/2+b.y;b=new egret.TextField;this.infoContainer.addChild(b);b.size=30;b.text="\u4eba\u6570";b.x=(a.x-d.x)/
2+d.x;b.y=l.y;b.anchorX=b.anchorY=0.5;d=new egret.TextField;this.infoContainer.addChild(d);d.size=30;d.text="\u7533\u8bf7\u60c5\u51b5";d.x=(g.x-a.x)/2+a.x;d.y=l.y;d.anchorX=d.anchorY=0.5;a=ResourceUtils.createBitmapFromSheet("bg_mark","commonRes");this.infoContainer.addChild(a);a.anchorX=a.anchorY=0.5;a.y=840+a.height/2;a.x=a.width/2+10;a=ResourceUtils.createBitmapFromSheet("inputBg","commonRes");this.infoContainer.addChild(a);a.x=20;a.y=870;this.txtSearch=new egret.TextField;this.infoContainer.addChild(this.txtSearch);
this.txtSearch.type=egret.TextFieldType.INPUT;this.txtSearch.width=a.width;this.txtSearch.text="";this.txtSearch.x=a.x+10;this.txtSearch.y=a.y+10;this.txtSearch.size=26;g=new SimpleButton;l=ResourceUtils.createBitmapFromSheet("btn_yellow","commonRes");g.addChild(l);g.setFontText("\u641c\u7d22");this.infoContainer.addChild(g);g.x=this.txtSearch.x+this.txtSearch.width+40;g.y=a.y;g.addOnClick(this.onSearch,this);d=new SimpleButton;l=ResourceUtils.createBitmapFromSheet("btn_yellow","commonRes");d.addChild(l);
d.y=a.y;d.setFontText("\u5237\u65b0");this.infoContainer.addChild(d);d.x=g.x+g.width+40;d.addOnClick(this.onReflesh,this);this.guildMbTable=new TableView;this.guildMbTable.y=200;this.guildMbTable.x=13;this.infoContainer.addChild(this.guildMbTable);this.guildMbTable.width=GameUtils.getWinWidth();this.guildMbTable.height=640;this.guildMbTable.setList(GuildDataManager.getInstance().joinGuildList,Direction.VERTICAL,this,GameUtils.getWinWidth(),60)};b.onSearch=function(){""==this.txtSearch.text||"\u8bf7\u8f93\u5165\u5e2e\u6d3e\u540d\u79f0..."==
this.txtSearch.text?doAction(Const.SHOW_TIPS,"\u8bf7\u8f93\u5165\u5e2e\u6d3e\u540d\u79f0"):GuildModel.CheckInptGldName(this.txtSearch.text)?doAction(Const.SHOW_TIPS,"\u5f53\u524d\u5e2e\u4f1a\u5df2\u5728\u663e\u793a\u5217\u8868\u4e2d"):ProxyUtils.searchGuild(this.txtSearch.text)};b.onReflesh=function(){ProxyUtils.joinGuild()};b.reload=function(){this.guildMbTable.reloadData(GuildDataManager.getInstance().joinGuildList)};b.createItemRenderer=function(){return new JoinGldItem};b.updateItemRenderer=function(a,
b,c){a.refreshView(b,c)};b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};b.close=function(){GameMainLayer.instance.showGuildJoinView(!1)};return d}(BaseContainer);JoinGuildView.prototype.__class__="JoinGuildView";
var MyGuildView=function(c){function d(){c.call(this);this.currentType="..";addAction(Const.Guild_showAplyList,this.refleshAply,this);addAction(Const.Guild_ShowMain,this.reloadMainData,this);addAction(Const.Guild_refleshTopData,this.roLoadTopData,this);addAction(Const.Guild_ChangeTitle,this.changeTitleBg,this);addAction("killMb",this.killMb,this);addAction("reloadDataAgain",this.reloadMainDataAgain,this);this.initView();this.isFrist=!0;this.refleshMain()}__extends(d,c);var b=d.prototype;b.initView=
function(){var a=egret.DynamicBitmap.create("achieve_bg");a.touchEnabled=!0;a.y=GameUtils.getPosY(0);this.addChild(a);a=new SimpleButton;a.addOnClick(this.close,this);a.x=610;a.y=GameUtils.getPosY(75);a.anchorX=a.anchorY=0.5;a.useZoomOut(!0);a.addChild(ResourceUtils.createBitmapFromSheet("close_btn"));this.addChild(a);this.infoContainer=new egret.DisplayObjectContainer;this.addChild(this.infoContainer);this.infoContainer.y=GameUtils.getPosY(0);this.bmpTtileBg=ResourceUtils.createBitmapFromSheet("gldTitle_0",
"commonRes");this.bmpTtileBg.x=325;this.bmpTtileBg.y=65;this.bmpTtileBg.anchorX=this.bmpTtileBg.anchorY=0.5;this.infoContainer.addChild(this.bmpTtileBg);a=ResourceUtils.createBitmapFromSheet("decorative","commonRes");a.x=100;a.y=145;this.infoContainer.addChild(a);this.gldName=new egret.TextField;this.infoContainer.addChild(this.gldName);this.gldName.text="\u65a7\u5934\u5e2e";this.gldName.anchorX=this.gldName.anchorY=0.5;this.gldName.x=320;this.gldName.y=157;this.gldMbCount=new egret.TextField;this.infoContainer.addChild(this.gldMbCount);
this.gldMbCount.text="\u4eba\u6570: 1/30";this.gldMbCount.textColor=16777215;this.gldMbCount.y=195;this.gldMbCount.x=20;this.gldCbCount=new egret.TextField;this.infoContainer.addChild(this.gldCbCount);this.gldCbCount.text="\u7d2f\u8ba1\u8d21\u732e\u503c: 0";this.gldCbCount.x=400;this.gldCbCount.y=this.gldMbCount.y;a=ResourceUtils.createBitmapFromSheet("\u5206\u5272\u7ebf","commonRes");this.infoContainer.addChild(a);a.y=this.gldMbCount.y+this.gldMbCount.height+3;a.width=GameUtils.getWinWidth()-30;
a.x=GameUtils.getWinWidth()/2;a.anchorX=a.anchorY=0.5;this.titleContainer=new egret.DisplayObjectContainer;this.infoContainer.addChild(this.titleContainer);var b=ResourceUtils.createBitmapFromSheet("\u5206\u5272\u7ebf","commonRes");this.titleContainer.addChild(b);b.y=a.y+70;b.width=a.width;b.x=GameUtils.getWinWidth()/2;b.anchorX=b.anchorY=0.5;var c=ResourceUtils.createBitmapFromSheet("\u5206\u5272\u7ebf","commonRes");this.titleContainer.addChild(c);c.rotation=90;c.width=a.y-b.y;c.x=GameUtils.getWinWidth()/
3;c.y=b.y+c.width/2;c.anchorX=b.anchorY=0.5;var d=ResourceUtils.createBitmapFromSheet("\u5206\u5272\u7ebf","commonRes");this.titleContainer.addChild(d);d.rotation=90;d.width=a.y-b.y;d.x=GameUtils.getWinWidth()/3*2;d.y=b.y+c.width/2;d.anchorX=b.anchorY=0.5;var g=ResourceUtils.createBitmapFromSheet("\u5206\u5272\u7ebf","commonRes");this.titleContainer.addChild(g);g.rotation=90;g.width=a.y-b.y;g.x=GameUtils.getWinWidth()/3*3;g.y=b.y+c.width/2;g.anchorX=b.anchorY=0.5;this.txtOne=new egret.TextField;this.titleContainer.addChild(this.txtOne);
this.txtOne.size=30;this.txtOne.text="\u6210\u5458\u5217\u8868";this.txtOne.anchorX=this.txtOne.anchorY=0.5;this.txtOne.x=c.x/2;this.txtOne.y=(b.y-a.y)/2+a.y;this.txtTwo=new egret.TextField;this.titleContainer.addChild(this.txtTwo);this.txtTwo.size=30;this.txtTwo.text="\u6210\u5458\u5217\u8868";this.txtTwo.x=(d.x-c.x)/2+c.x;this.txtTwo.y=this.txtOne.y;this.txtTwo.anchorX=this.txtTwo.anchorY=0.5;this.txtThree=new egret.TextField;this.titleContainer.addChild(this.txtThree);this.txtThree.size=30;this.txtThree.text=
"\u4e0a\u6b21\u5728\u7ebf\u65f6\u95f4";this.txtThree.x=(g.x-d.x)/2+d.x;this.txtThree.y=this.txtOne.y;this.txtThree.anchorX=this.txtThree.anchorY=0.5;a=ResourceUtils.createBitmapFromSheet("bg_mark","commonRes");this.infoContainer.addChild(a);a.anchorX=a.anchorY=0.5;a.y=840+a.height/2;a.x=a.width/2+10};b.close=function(){GameMainLayer.instance.setGuildLayer(!1);this.gldTbView.selectTabWithType("guild_donate")};b.reLoadView=function(){this.refleshMain()};b.changeTitle=function(a,b,c){this.txtOne.text=
a;this.txtTwo.text=b;this.txtThree.text=c;null!=this.titleContainer&&(this.titleContainer.visible=!0)};b.changeTitleBg=function(a){this.bmpTtileBg.texture=ResourceUtils.createBitmapFromSheet(a,"commonRes").texture};b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};b.createBottomBtn=function(){null==this.gldTbView&&(this.gldTbView=new GuildTbView,this.gldTbView.y=900,this.gldTbView.x=85,this.gldTbView.addOnClick(this.onTabSelect,this),this.infoContainer.addChild(this.gldTbView));
this.gldTbView.visible=!0;this.gldTbView.selectTabWithType("guild_main")};b.onTabSelect=function(a){this.hideAllView();this.currentType=a;switch(a){case "guild_main":this.isFrist||ProxyUtils.repMyGuildInfo();break;case "guild_donate":this.openDonateView(!0);break;case "guild_wulin":this.openWulinVeiw(!0);break;case "guild_review":ProxyUtils.getAplyList();break;case "guild_quit":null==this.alertPanel&&(this.alertPanel=new AlertPanel(2),this.alertPanel.setHandler(this.sureToAction,this),this.addChild(this.alertPanel)),
this.alertPanel.visible=!0,this.alertPanel.setData("\u63d0\u793a","\u786e\u8ba4\u9000\u51fa\u5e2e\u6d3e?")}this.isFrist=!1};b.sureToAction=function(a){"ok"==a&&ProxyUtils.quitFromGuild()};b.refleshMain=function(){this.reLoadTop();doAction(Const.Guild_ChangeTitle,"gldTitle_0");null==this.guildMainView&&(this.guildMainView=new GuildMainView,this.infoContainer.addChild(this.guildMainView));this.createBottomBtn();this.changeTitle("\u6210\u5458\u5217\u8868","\u8d21\u732e\u503c","\u4e0a\u6b21\u5728\u7ebf\u65f6\u95f4");
this.guildMainView.visible=!0;this.guildMainView.reLoad()};b.reloadMainData=function(){this.refleshMain()};b.reloadMainDataAgain=function(){this.guildReView.reLoad()};b.refleshAply=function(){this.reLoadTop();doAction(Const.Guild_ChangeTitle,"gldTitle_0");null==this.guildReView&&(this.guildReView=new GuildReView,this.infoContainer.addChild(this.guildReView));this.guildReView.visible=!0;this.changeTitle("\u5927\u4fa0\u540d\u79f0","\u795e\u5175\u6570","\u5ba1\u6838");this.guildReView.reLoad()};b.openWulinVeiw=
function(a){void 0===a&&(a=!1);doAction(Const.Guild_ChangeTitle,"gldTitle_0");null==this.guildWulinView&&(this.guildWulinView=new GuildWuLin,this.infoContainer.addChild(this.guildWulinView));this.guildWulinView.visible=a;this.guildWulinView.showmainView()};b.openDonateView=function(a){void 0===a&&(a=!1);doAction(Const.Guild_ChangeTitle,"gldTitle_0");null==this.guildDonateView&&(this.guildDonateView=new GuildDonateVeiw,this.infoContainer.addChild(this.guildDonateView));(this.guildDonateView.visible=
a)&&this.guildDonateView.reLoad()};b.reLoadTop=function(){null!=this.gldTbView&&this.gldTbView.refleshLabel();this.hideAllView();this.roLoadTopData()};b.roLoadTopData=function(){this.myGldInfo=GuildDataManager.getInstance().getMyGldInfo();null!=this.myGldInfo&&(this.gldName.text=this.myGldInfo.guildName,this.gldMbCount.text="\u4eba\u6570: "+this.myGldInfo.guildCurMbCount+"/"+this.myGldInfo.guildMaxMbCount,this.gldCbCount.text="\u7d2f\u8ba1\u8d21\u732e\u503c:"+GuildModel.formatNum1(this.myGldInfo.guildCb))};
b.hideAllView=function(){null!=this.guildReView&&(this.guildReView.visible=!1);null!=this.guildMainView&&(this.guildMainView.visible=!1);null!=this.guildDonateView&&this.openDonateView();null!=this.titleContainer&&(this.titleContainer.visible=!1);null!=this.guildWulinView&&(this.guildWulinView.visible=!1);null!=this.alertPanel&&(this.alertPanel.visible=!1);null!=this.alertPanels&&(this.alertPanels.visible=!1)};b.killMb=function(a){this.mbData=a;null==this.alertPanels&&(this.alertPanels=new AlertPanel(2),
this.alertPanels.setHandler(this.sureToActions,this),this.addChild(this.alertPanels));this.alertPanels.visible=!0;this.alertPanels.setData("\u63d0\u793a","\u786e\u8ba4\u8e22\u51fa\u8be5\u6210\u5458?")};b.sureToActions=function(a){"ok"==a&&(ProxyUtils.killMember(this.mbData.mdUID),this.alertPanels.visible=!1)};return d}(BoxContainer);MyGuildView.prototype.__class__="MyGuildView";
var GuildTbView=function(c){function d(){c.call(this);this.initButton();this.init();addAction("closeRedDot",this.closeDot,this);this.myGldInfo=GuildDataManager.getInstance().getMyGldInfo()}__extends(d,c);var b=d.prototype;b.initButton=function(){this._button1=new TabButton;this._button1.initButton("top_tab_2","top_tab_1",78);this.addChild(this._button1);this._button1.name="guild_main";this._button1.x=3;this._button1.addLabel("\u4e3b\u9875");this._button1.setWidthBmp(150);this._button2=new TabButton;
this._button2.initButton("top_tab_2","top_tab_1",78);this.addChild(this._button2);this._button2.x=this._button1.x+150+3;this._button2.name="guild_donate";this._button2.addLabel("\u6350\u732e");this._button2.setWidthBmp(150);this._button3=new TabButton;this._button3.initButton("top_tab_2","top_tab_1",78);this.addChild(this._button3);this._button3.x=this._button2.x+150+3;this._button3.name="guild_wulin";this._button3.addLabel("\u6b66\u6797\u5927\u4f1a");this._button3.setWidthBmp(150);this._button4=
new TabButton;this._button4.initButton("top_tab_2","top_tab_1",78);this.addChild(this._button4);this._button4.addLabel("\u5ba1\u6838");this._button4.name="guild_review";this._button4.x=this._button3.x+150+3;this._button4.setWidthBmp(150);this._button5=new TabButton;this._button5.initButton("top_tab_2","top_tab_1",78);this.addChild(this._button5);this._button5.name="guild_quit";this._button5.addLabel("\u9000\u51fa\u5e2e\u6d3e");this._button5.x=this._button3.x+150+3;this._button5.setWidthBmp(150);GameUtils.isShowGuildRedDot()&&
(this.bmpRedDot=ResourceUtils.createBitmapFromSheet("redDot"),this.bmpRedDot.x=215,this.bmpRedDot.y=-35,this.bmpRedDot.name="redDot",this.addChild(this.bmpRedDot));GuildModel.isMyCharMain()?(this._button4.visible=!0,this._button5.visible=!1):(this._button4.visible=!1,this._button5.visible=!0)};b.refleshLabel=function(){GuildModel.isMyCharMain()?(this._button4.visible=!0,this._button5.visible=!1):(this._button4.visible=!1,this._button5.visible=!0)};b.closeDot=function(a){this.bmpRedDot&&!a&&this.removeChild(this.bmpRedDot)};
return d}(TabView);GuildTbView.prototype.__class__="GuildTbView";
var FriendAwardLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("set_bg");this.boxContainer.addChild(a);a.x=34;a.y=205;var a=new SimpleButton,b=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");a.addChild(b);a.addOnClick(this.onCloseHandler,this);a.x=530;a.y=182;a.useZoomOut(!0);this.boxContainer.addChild(a);a=new egret.TextField;a.textColor=0;a.x=250;a.y=280;a.text="\u6c5f\u6e56\u5947\u9047";
a.bold=!0;this.boxContainer.addChild(a);a=new egret.TextField;a.size=26;a.lineSpacing=10;a.textColor=0;a.width=480;a.x=85;a.y=330;a.text="      \u5728\u5c11\u4fa0\u79bb\u7ebf\u671f\u95f4\uff0c\u56e0\u4e3a\u968f\u673a\u5947\u9047\u83b7\u5f97\u4e86\u5982\u4e0b\u5956\u52b1\uff08\u6301\u7eed\u6548\u679c\u65f6\u96501\u5c0f\u65f6\uff0c\u4ece\u9886\u53d6\u540e\u5f00\u59cb\u8ba1\u65f6\uff09:";this.boxContainer.addChild(a);this._awardLabel=new egret.TextField;this._awardLabel.size=26;this._awardLabel.textColor=
0;this._awardLabel.anchorY=0;this._awardLabel.x=90;this._awardLabel.y=470;this._awardLabel.lineSpacing=10;this.boxContainer.addChild(this._awardLabel);this.boxContainer.addChild(GameUtils.createButton("\u9886\u53d6\u5956\u52b1","hero_lvup_btn",this.onCloseHandler.bind(this),310,650,170,69,2,0,0))};b.refreshView=function(a){for(var b=0,c=0,d=0,g=0,l=RES.getRes("friendEvent"),k=0;k<a.length;k++){var m=l[a[k].id];1==m.type?c+=m.value:2==m.type?b+=m.value:3==m.type?d+=m.value:4==m.type&&(g+=m.value)}a=
"";0<c&&(this._gold=c,a+="\u5143\u5b9d:"+c+"\n",DataCenter.getInstance().reduceGc(c,!0));0<b&&(this._coin=NewFriendController.getInstance().getAwardCoin(),this._coin.times(b),a+="\u94dc\u94b1:"+this._coin.getNumer()+"\n");0<d&&(a+="\u70b9\u51fb\u4f24\u5bb3\u52a0\u6210:"+100*d+"%\n");0<g&&(a+="\u4fa0\u5ba2\u79d2\u4f24\u52a0\u6210:"+100*g+"%\n");this._awardLabel.text=a};b.onCloseHandler=function(){if(this._coin){var a={};a.coins=this._coin.pieces(5);a.type=1;doAction(Const.DROP_COIN,a)}if(this._gold){var b=
new NumberModel(this._gold),a={};a.coins=b.pieces(1);a.type=2;a.updated=!0;doAction(Const.DROP_COIN,a)}GameMainLayer.instance.hideFriendAward()};b.dispose=function(){c.prototype.dispose.call(this)};return d}(BoxContainer);FriendAwardLayer.prototype.__class__="FriendAwardLayer";
var FriendConfirmLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("paymen_recommend");this.boxContainer.addChild(a);a.x=24;a.y=115;var a=new SimpleButton,b=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");a.addChild(b);a.addOnClick(this.onCloseHandler,this);a.x=510;a.y=90;a.useZoomOut(!0);this.boxContainer.addChild(a);this.container4=new egret.DisplayObjectContainer;this.boxContainer.addChild(this.container4);
a=new egret.TextField;a.size=22;a.textColor=0;a.lineSpacing=10;a.width=440;a.x=150;a.y=190;a.text="\u5feb\u79c1\u4fe1\u597d\u53cb\u544a\u8bc9\u4ed6\u8fd9\u4ef6\u4e8b\u5427!";this.container4.addChild(a);this.awardLabel=new egret.TextField;this.awardLabel.size=22;this.awardLabel.textColor=0;this.awardLabel.lineSpacing=10;this.awardLabel.width=440;this.awardLabel.x=150;this.awardLabel.y=230;this.container4.addChild(this.awardLabel);a=new egret.TextField;a.size=22;a.textColor=0;a.lineSpacing=10;a.width=
440;a.x=150;a.y=270;a.text="(\u6240\u6709\u6301\u7eed\u7c7b\u6548\u679c\u65f6\u957f\u4e3a\u4e00\u5c0f\u65f6)";this.container4.addChild(a);a=egret.DynamicBitmap.create("share_weibo_bg");a.x=85;a.y=310;a.height=100;this.container4.addChild(a);this.inputLabel=new egret.TextField;this.inputLabel.x=95;this.inputLabel.y=320;this.inputLabel.size=24;this.inputLabel.width=410;this.inputLabel.height=100;this.inputLabel.textColor=12632256;this.inputLabel.text="";this.inputLabel.type=egret.TextFieldType.INPUT;
this.inputLabel.multiline=!0;this.container4.addChild(this.inputLabel);this.inputLabel.addEventListener(egret.Event.CHANGE,this.changeInputCallback,this);this.container4.addChild(GameUtils.createButton("\u79c1\u4fe1","hero_lvup_btn",this.shareHandler.bind(this),310,440,170,69,2,0,0))};b.changeInputCallback=function(a){0==this.inputLabel.text.indexOf(this._lastStr)&&(a=this.inputLabel.text.split(this._lastStr)[1],this.inputLabel.text=a,this.inputLabel.textColor=0)};b.onCloseHandler=function(){NewFriendController.getInstance().executeEvent(3);
GameMainLayer.instance.hideFriendConfirm()};b.refreshView=function(a){this._t=a;var b=NewFriendController.getInstance().getCurEvent(),b=RES.getRes("friendEvent")[b];1==a&&b.answer1?this.inputLabel.text=b.answer1:2==a&&b.answer2&&(this.inputLabel.text=b.answer2);var c="";if(1==b["effect"+a]||3==b["effect"+a])1==b.type?c="\u79c1\u4fe1\u6210\u529f\u540e\u5c06\u83b7\u5f97\u5143\u5b9d:"+b.value:2==b.type?(a=NewFriendController.getInstance().getAwardCoin(),a.times(b.value),c="\u79c1\u4fe1\u6210\u529f\u540e\u5c06\u83b7\u5f97\u94dc\u94b1:"+
a.getNumer()):3==b.type?c="\u79c1\u4fe1\u6210\u529f\u540e\u5c06\u70b9\u51fb\u4f24\u5bb3\u63d0\u5347:"+100*b.value+"%":4==b.type&&(c="\u79c1\u4fe1\u6210\u529f\u540e\u5c06\u4fa0\u5ba2\u79d2\u4f24\u63d0\u5347:"+100*b.value+"%");this.awardLabel.text=c;this._lastStr=this.inputLabel.text};b.shareHandler=function(){this._lastStr!=this.inputLabel.text?NewFriendController.getInstance().executeEvent(this._t,this.inputLabel.text):NewFriendController.getInstance().executeEvent(this._t)};b.dispose=function(){c.prototype.dispose.call(this)};
return d}(BoxContainer);FriendConfirmLayer.prototype.__class__="FriendConfirmLayer";
var FriendSupriseLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("die_bg");this.boxContainer.addChild(a);a.x=24;a.y=120;var a=new SimpleButton,b=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");a.addChild(b);a.addOnClick(this.onCloseHandler,this);a.x=520;a.y=100;a.useZoomOut(!0);this.boxContainer.addChild(a);this._headContainer=new egret.DisplayObjectContainer;this._headContainer.x=-2;this._headContainer.y=
150;this.boxContainer.addChild(this._headContainer);this._nameLabel=new egret.TextField;this._nameLabel.x=160;this._nameLabel.y=190;this._nameLabel.size=24;this._nameLabel.textColor=3478533;this.boxContainer.addChild(this._nameLabel);this._infoLabel=new egret.TextField;this._infoLabel.x=100;this._infoLabel.y=300;this._infoLabel.lineSpacing=10;this._infoLabel.width=420;this._infoLabel.textColor=0;this.boxContainer.addChild(this._infoLabel);this._button1=GameUtils.createButton("\u4e0e\u5b98\u65b9\u4e92\u52a8",
"hero_lvup_btn",this.yesHandler.bind(this),180,550,170,69,2,0,0);this._button2=GameUtils.createButton("\u4e0e\u5b98\u65b9\u4e92\u52a8","hero_lvup_btn",this.noHandler.bind(this),435,550,170,69,2,0,0);this.boxContainer.addChild(this._button1);this.boxContainer.addChild(this._button2)};b.yesHandler=function(){GameUtils.isWeibo()||PlatformFactory.getPlatform().name==PlatformTypes.WEIBORUNTIME?(GameMainLayer.instance.hideFriendSuprise(),GameMainLayer.instance.showFriendConfirm(1)):NewFriendController.getInstance().executeEvent(1)};
b.noHandler=function(){GameUtils.isWeibo()||PlatformFactory.getPlatform().name==PlatformTypes.WEIBORUNTIME?(GameMainLayer.instance.hideFriendSuprise(),GameMainLayer.instance.showFriendConfirm(2)):NewFriendController.getInstance().executeEvent(2)};b.refreshView=function(){this._data=NewFriendController.getInstance().getCurFriend();this.refreshUser();var a=NewFriendController.getInstance().getCurEvent()||1,a=RES.getRes("friendEvent")[a];this._infoLabel.text=a.name;this._button1.label.text=a.choice1;
this._button2.label.text=a.choice2};b.refreshUser=function(){this._headContainer.removeChildren();var a;this._data.pic?a=egret.DynamicBitmap.create(this._data.pic,!0,function(){a.x=98;a.y=47;a.anchorX=a.anchorY=0.5;a.scaleX=60/a.width;a.scaleY=60/a.height},this,Const.default_user):(a=ResourceUtils.createBitmapFromSheet(Const.default_user,"iconRes"),a.x=100,a.y=47,a.anchorX=a.anchorY=0.5);this._headContainer.addChild(a);this._nameLabel.text=this._data.name};b.onCloseHandler=function(){NewFriendController.getInstance().executeEvent(3);
GameMainLayer.instance.hideFriendSuprise()};b.dispose=function(){c.prototype.dispose.call(this)};return d}(BoxContainer);FriendSupriseLayer.prototype.__class__="FriendSupriseLayer";
var AchievementLayer=function(c){function d(){c.call(this);this.init();addAction(Const.ADD_DIAMOND,this.addDiamond,this);addAction(Const.CHANGE_DIAMOND,this.changeDiamond,this)}__extends(d,c);var b=d.prototype;b.addDiamond=function(a){var b=a.parent.localToGlobal(a.x,a.y),b=this.globalToLocal(b.x,b.y,b);this.addChild(a);a.x=b.x;a.y=b.y;var c=GameUtils.random(300,360),d=b.x+200*Math.cos(c),b=b.y+200*Math.sin(c);TweenLite.to(a,1.5,{bezier:{values:[{x:d,y:b},{x:this._gold.x,y:this._gold.y}],autoRotation:!0},
onComplete:function(){GameUtils.removeFromParent(a);DataCenter.getInstance().changeGc(a.num)}})};b.changeDiamond=function(){this._goldLabel.text=DataCenter.getInstance().getGcNum()};b.close=function(){GameMainLayer.instance.setAchieveLayerVisible(!1)};b.init=function(){var a=egret.DynamicBitmap.create("achieve_bg");a.touchEnabled=!0;a.y=GameUtils.getPosY(0);this.addChild(a);a=new SimpleButton;a.addOnClick(this.close,this);a.x=610;a.y=GameUtils.getPosY(75);a.anchorX=a.anchorY=0.5;a.useZoomOut(!0);
a.addChild(ResourceUtils.createBitmapFromSheet("close_btn"));this.addChild(a);this._infoContainer=new egret.DisplayObjectContainer;this.addChild(this._infoContainer);this._infoContainer.y=GameUtils.getPosY(0);a=ResourceUtils.createBitmapFromSheet("top_achieve","commonRes");a.x=325;a.y=65;a.anchorX=a.anchorY=0.5;this._infoContainer.addChild(a);a=new egret.TextField;a.text="\u8fbe\u6210\u76ee\u6807\u83b7\u53d6\u5956\u52b1\uff01";a.textColor=16777215;a.size=24;a.x=40;a.y=140;this._infoContainer.addChild(a);
this._gold=ResourceUtils.createBitmapFromSheet("gold_icon");this._gold.anchorX=this._gold.anchorY=0.5;this._gold.x=538;this._gold.y=155;this._infoContainer.addChild(this._gold);this._goldLabel=new egret.TextField;this._goldLabel.text=DataCenter.getInstance().getGcNum();this._goldLabel.anchorX=1;this._goldLabel.x=505;this._goldLabel.y=140;this._goldLabel.size=24;this._infoContainer.addChild(this._goldLabel);this._sort();this._achieveTable=new TableView;this._achieveTable.y=GameUtils.getPosY(190);this._achieveTable.x=
13;this.addChild(this._achieveTable);this._achieveTable.width=GameUtils.getWinWidth();this._achieveTable.height=750;this._achieveTable.setList(DataCenter.getInstance().achieveList,Direction.VERTICAL,this,GameUtils.getWinWidth(),110)};b.reload=function(){this._sort();this._achieveTable.reloadData(DataCenter.getInstance().achieveList);this._goldLabel.text=DataCenter.getInstance().getGcNum()};b._sort=function(){var a=DataCenter.getInstance().achieveList,a=a.sort(function(a,b){var c=a.canAward()?1:0;
return(b.canAward()?1:0)-c});DataCenter.getInstance().achieveList=a};b.createItemRenderer=function(){return new AchieveItemLayer};b.updateItemRenderer=function(a,b,c){a.refreshView(b,c)};b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};return d}(BoxContainer);AchievementLayer.prototype.__class__="AchievementLayer";
var LoadingRotation=function(c){function d(){c.call(this);null==this.bmpCircle&&(this.bmpCircle=ResourceUtils.createBitmapFromSheet("loadingCircle2"),this.bmpCircle.x=GameUtils.getWinWidth()/2,this.bmpCircle.y=GameUtils.getWinHeight()/2,this.bmpCircle.anchorX=this.bmpCircle.anchorY=0.5,this.addChild(this.bmpCircle))}__extends(d,c);var b=d.prototype;b.rotaionCircle=function(a){var b=this;a?(this.bmpCircle.rotation=0,egret.Tween.get(this.bmpCircle).to({rotation:360},1E3).call(function(){b.rotaionCircle(a)})):
egret.Tween.removeTweens(this.bmpCircle)};b.setTxtTip=function(a){null==this.txtTip&&(this.txtTip=new egret.TextField,this.txtTip.x=GameUtils.getWinWidth()/2,this.txtTip.y=this.bmpCircle?this.bmpCircle.y+80:GameUtils.getWinHeight()+80,this.txtTip.anchorX=this.txtTip.anchorY=0.5,this.addChild(this.txtTip));this.txtTip.text=a};return d}(BoxContainer);LoadingRotation.prototype.__class__="LoadingRotation";
var LoginAwardLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this._container=new egret.DisplayObjectContainer;this.boxContainer.addChild(this._container);var a=egret.DynamicBitmap.create("paymen_recommend");this._container.addChild(a);a.x=35;a.y=200;a=ResourceUtils.createBitmapFromSheet("weixin_bg2");a.x=80;a.y=280;this._container.addChild(a);a=new SimpleButton;a.anchorX=a.anchorY=0.5;var b=ResourceUtils.createBitmapFromSheet("close_btn");
a.addChild(b);a.addOnClick(this.close,this);a.useZoomOut(!0);a.x=570;a.y=230;this.boxContainer.addChild(a);a=ResourceUtils.createBitmapFromSheet("weixin_award_icon");a.x=90;a.y=290;this._container.addChild(a);this._awardLabel=new egret.TextField;this._container.addChild(this._awardLabel);this._awardLabel.x=170;this._awardLabel.y=315;this._awardLabel.size=20;this._awardLabel.textColor=16777215;this._awardLabel.text="\u5728\u6e38\u620f\u8bdd\u9898\u5708\u8fde\u7eed\u7b7e\u52307\u5929\u5373\u53ef\u9886\u53d6\u5151\u6362\u7801";
a=ResourceUtils.createBitmapByName("share_input_bg");a.x=125;a.y=400;a.scaleX=0.8;a.scaleY=0.7;this._container.addChild(a);this._inputLabel=new egret.TextField;this._inputLabel.type=egret.TextFieldType.INPUT;this._inputLabel.width=400;this._inputLabel.height=50;this._inputLabel.text="";this._inputLabel.x=140;this._inputLabel.y=405;this._inputLabel.size=26;this.boxContainer.addChild(this._inputLabel);this.boxContainer.addChild(GameUtils.createButton("\u9886\u53d6\u5956\u52b1","buy_btn",this.awardHandler.bind(this),
310,500,170,69,0,0,0))};b.awardHandler=function(){""!=this._inputLabel.text&&PlatformFactory.getPlatform().codeAward(this._inputLabel.text)};b.close=function(){GameMainLayer.instance.hideLoginAwardLayer()};b.dispose=function(){c.prototype.dispose.call(this)};return d}(BoxContainer);LoginAwardLayer.prototype.__class__="LoginAwardLayer";
var PayAwardLayer=function(c){function d(){c.call(this);this.init();addAction(Const.ADD_HOLY,this.addHoly,this);addAction(Const.CHANGE_HOLY_NUM,this.changeHolyNum,this)}__extends(d,c);var b=d.prototype;b.addHoly=function(a){var b=a.parent.localToGlobal(a.x,a.y),b=this.globalToLocal(b.x,b.y,b);this.addChild(a);a.x=b.x;a.y=b.y;var c=GameUtils.random(300,360),d=b.x+200*Math.cos(c),b=b.y+200*Math.sin(c);TweenLite.to(a,1.5,{bezier:{values:[{x:d,y:b},{x:this._gold.x,y:this._gold.y}],autoRotation:!0},onComplete:function(){GameUtils.removeFromParent(a);
DataCenter.getInstance().changeHolyNum(a.num);DataCenter.getInstance().addALog("payAward"+a.num)}})};b.changeHolyNum=function(){this._goldLabel.text=DataCenter.getInstance().getHolyNum().toString()};b.close=function(){GameMainLayer.instance.hidePayAwardLayer()};b.init=function(){var a=egret.DynamicBitmap.create("achieve_bg");a.touchEnabled=!0;a.y=GameUtils.getPosY(0);this.addChild(a);a=new SimpleButton;a.addOnClick(this.close,this);a.x=610;a.y=GameUtils.getPosY(75);a.anchorX=a.anchorY=0.5;a.useZoomOut(!0);
a.addChild(ResourceUtils.createBitmapFromSheet("close_btn"));this.addChild(a);this._infoContainer=new egret.DisplayObjectContainer;this.addChild(this._infoContainer);this._infoContainer.y=GameUtils.getPosY(0);a=ResourceUtils.createBitmapFromSheet("togtherReward","commonRes");a.x=325;a.y=65;a.anchorX=a.anchorY=0.5;this._infoContainer.addChild(a);a=new egret.TextField;a.text="\u9b42\u7389\u53ef\u4ee5\u5230\u5175\u5668\u8c31\u4e2d\u5151\u6362\u795e\u5175\u54df\uff01";a.textColor=16777215;a.size=24;a.x=
40;a.y=135;this._infoContainer.addChild(a);this._gold=ResourceUtils.createBitmapFromSheet("holy_icon");this._gold.anchorX=this._gold.anchorY=0.5;this._gold.x=535;this._gold.y=145;this._infoContainer.addChild(this._gold);this._goldLabel=new egret.TextField;this._goldLabel.text=DataCenter.getInstance().getGcNum();this._goldLabel.anchorX=1;this._goldLabel.x=505;this._goldLabel.y=135;this._goldLabel.size=24;this._infoContainer.addChild(this._goldLabel);this._achieveTable=new TableView;this._achieveTable.y=
GameUtils.getPosY(190);this._achieveTable.x=13;this.addChild(this._achieveTable);this._achieveTable.width=GameUtils.getWinWidth();this._achieveTable.height=750;this._achieveTable.setList(DataCenter.getInstance().payAwardList,Direction.VERTICAL,this,GameUtils.getWinWidth(),110);this.changeHolyNum()};b.createItemRenderer=function(){return new PayAwardItemLayer};b.reload=function(){this._achieveTable.reloadData(DataCenter.getInstance().payAwardList);this.changeHolyNum()};b.updateItemRenderer=function(a,
b,c){a.refreshView(b,c)};b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};return d}(BoxContainer);PayAwardLayer.prototype.__class__="PayAwardLayer";
var VuShareWeChatTipLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("share_tip_bg");this.boxContainer.addChild(a);this._label=new egret.TextField;this._label.size=40;this._label.bold=!0;this._label.textColor=65280;this._label.stroke=1;this._label.strokeColor=0;this.boxContainer.addChild(this._label);this._label.x=200;this._label.y=300};b.show=function(a){this._label.text=a};b.onMaskHandler=function(){this.parent.removeChild(this)};
b.dispose=function(){c.prototype.dispose.call(this)};return d}(BoxContainer);VuShareWeChatTipLayer.prototype.__class__="VuShareWeChatTipLayer";
var _1758ShareLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=new egret.Shape;a.graphics.beginFill(0,0.5);a.graphics.drawRect(0,0,640,GameUtils.getLayoutY(960));a.graphics.endFill();this.boxContainer.addChild(a);a=egret.DynamicBitmap.create("1758_share_bg");a.x=280;a.scaleX=a.scaleY=0.8;this.boxContainer.addChild(a);this.lab=new egret.TextField;this.lab.textAlign=egret.HorizontalAlign.CENTER;this.lab.anchorX=0.5;this.lab.x=320;
this.lab.y=650;this.lab.size=36;this.lab.lineSpacing=20;this.addChild(this.lab);a=new egret.TextField;a.textAlign=egret.HorizontalAlign.CENTER;a.anchorX=0.5;a.text="\u5206\u4eab\u540e\u53ef\u83b7\u5f9730\u5143\u5b9d";a.x=320;a.y=450;a.size=36;this.addChild(a)};b.setMsg=function(a){if(1==a)var b="<font size='30'>\u975e\u5fae\u4fe1\u7528\u6237\u8bf7\u5173\u6ce8<font color='0xffa016>1758\u5fae\u6e38\u620f</font>\u540e\u518d\u8fdb\u884c\u5206\u4eab</font>\n<font size='28'><font color='0x858585>                    \u5fae\u4fe1\u53f71</font> <font color='0x00b0f2>wx1758com</font>\n<font color='0x858585>                    \u5fae\u4fe1\u53f72</font> <font color='0x00b0f2>com1758    </font></font>";
else 2==a&&(b="\u975e\u5fae\u4fe1\u7528\u6237\u8bf7\u5173\u6ce8<font color='0xffa016>\u5fae\u6d3e\u8c01\u662f\u5367\u5e95\u6e38\u620f\u52a9\u624b</font>\u540e\u518d\u8fdb\u884c\u5206\u4eab",a=new egret.TextField,a.size=26,a.x=320,a.y=this.lab.y+80,a.textFlow=(new egret.HtmlTextParser).parser("<font color='0x858585'>\u5fae\u4fe1\u53f7</font><font color='0x00b0f2>wodi360</font>"),a.anchorX=a.anchorY=0.5,this.addChild(a));this.lab.textFlow=(new egret.HtmlTextParser).parser(b);this.lab.size=26};b.onMaskHandler=
function(){GameMainLayer.instance.hideVUShare()};b.dispose=function(){c.prototype.dispose.call(this)};return d}(BoxContainer);_1758ShareLayer.prototype.__class__="_1758ShareLayer";
var GameMainLayer=function(c){function d(){c.call(this);this._payAwardLayer=this._achieveLayer=null;d.instance=this;this.init();Time.setTimeout(this.test,this,1E3)}__extends(d,c);var b=d.prototype;b.test=function(){SoundManager.getInstance().playBackgroundMusic()};b.startGuide=function(){(new GuideManager).execute(DataCenter.getInstance().totalData.guideStep)};b.init=function(){this.gameLayer=new GameLayer;this.addChild(this.gameLayer);this.bottomLayer=new BottomLayer;this.addChild(this.bottomLayer);
this.bottomLayer.y=GameUtils.getLayoutY(930);this._boxContainer=new egret.DisplayObjectContainer;this.addChild(this._boxContainer);this._topBoxContainer=new egret.DisplayObjectContainer;this.addChild(this._topBoxContainer);this._tipsContainer=new egret.DisplayObjectContainer;this.addChild(this._tipsContainer);this.showJumpMsgPanel();egret.MainContext.instance.stage.addEventListener(egret.Event.DEACTIVATE,this.onBlur,this);egret.MainContext.instance.stage.addEventListener(egret.Event.ACTIVATE,this.onFocus,
this);addAction(Const.BOSS_KILLED,this.bossKill,this);this.asyncLoading();addAction("first_login",this.alertFirstLogin,this);doAction(Const.SHOW_MAIN_LAYER);addAction(Const.SHOW_TIPS,this.showTips,this);addAction("show_card_tips",this.showCardTips,this);addAction("loading_resize",this.resizeScreen,this);addAction(Const.Guild_ShowMyGld,this.setGuildLayer,this);addAction(Const.Guild_Joinlist,this.showGuildJoinView,this);"number"==typeof ProxyUtils.diamond&&DataCenter.getInstance().statistics.resetValue(StatisticsType.diamond,
ProxyUtils.diamond);ProxyUtils.backUser&&this.showAlert();this.showLoadingRotation()};b.resizeScreen=function(){this.bottomLayer.y=GameUtils.getLayoutY(930)};b.alertFirstLogin=function(){if(ActivityManager.getInstance().canFirstLoginAward()){var a=new FirstLoginAwardLayer;this._boxContainer.addChild(a)}else this.alertNotice()};b.removeFirstLogin=function(){this._boxContainer.removeChildren();this.alertNotice()};b.alertNotice=function(){ProxyUtils.popNotice&&3<DataCenter.getInstance().totalData.guideStep?
this.showNoticeLayer():this.alertGuide()};b.alertGuide=function(){this.startGuide()};b.showTips=function(a){null==this._tipsLayer&&(this._tipsLayer=new TipsContainer,this._tipsLayer.y=250,this._tipsContainer.addChild(this._tipsLayer));this._tipsLayer.showMessage(a)};b.showCardTips=function(a){null==this._cardTipsLayer&&(this._cardTipsLayer=new CardTipsContainer,this._cardTipsLayer.y=GameUtils.getLayoutY(800),this._tipsContainer.addChild(this._cardTipsLayer));this._cardTipsLayer.showMessage(a)};b.asyncLoading=
function(){GameUtils.preloadAnimation("next_level_json");GameUtils.preloadAnimation("hero_skill_1_json");GameUtils.preloadAnimation("hero_skill_2_json");GameUtils.preloadAnimation("hero_skill_3_json");GameUtils.preloadAnimation("hero_skill_4_json");GameUtils.preloadAnimation("hero_skill_5_json");GameUtils.preloadAnimation("click_json");GameUtils.preloadAnimation("hero_upgrade_json");GameUtils.preloadAnimation("Button_json")};b.bossKill=function(){if(RES.isGroupLoaded("group_next_level_json")){var a=
DataCenter.getInstance().totalData.currentLevel;if(5<a&&1==a%5){var b=new Movie("next_level_json","next_level");960<GameUtils.getWinHeight()&&(b.scaleY=GameUtils.getWinHeight()/960);var c=new egret.TextField,d=GameUtils.getMapConfig();c.text=d.mapName;c.anchorX=c.anchorY=0.5;c.textColor=2040361;c.size=35;b.addBoneDisplay("TitleContainer",c);c=new egret.TextField;c.text="\u5df2\u89e3\u9501!";c.textColor=0;c.size=20;c.anchorX=c.anchorY=0.5;b.addBoneDisplay("DescContainer",c);b.play("1");b.setCallback(function(b){b==
Movie.PLAY_COMPLETE&&doAction(Const.UNLOCK_LEVEL,a)},this);this.addChild(b);b.x=320;b.y=GameUtils.getPosY(480)}}};b._initGuideBtn=function(){this._redictBtn=new egret.Bitmap;this._redictBtn.x=325;this._redictBtn.y=405;this._redictBtn.anchorX=this._redictBtn.anchorY=0.5;this._redictBtn.width=80;this._redictBtn.height=80;this.addChild(this._redictBtn);this._guideBtn=new GuideButtonLayer;this._guideBtn.updateView(this._redictBtn);this.addChild(this._guideBtn)};b.showGuide=function(a,b){null==this._guideBtn&&
this._initGuideBtn();this._guideBtn.visible=!0;this._redictBtn.x=a;this._redictBtn.y=Guide.handPositions.hitBoss.y==b?b:GameUtils.getLayoutY(b);this._guideBtn.maskAndHand()};b.hideGuide=function(){this._guideBtn&&(this._guideBtn.visible=!1);this._redictBtn&&(this._redictBtn.visible=!1)};b.onBlur=function(){SoundManager.getInstance().pauseBackMusic()};b.onFocus=function(){SoundManager.getInstance().resumeBackMusic()};b.showSetLayer=function(){null==this._setLayer&&(this._setLayer=new GameSetLayer,
this._boxContainer.addChild(this._setLayer));this.showBoxAnim(this._setLayer)};b.showBoxAnim=function(a){a.visible=!0;a.boxContainer.y=-960;a.boxMask.alpha=0;egret.Tween.get(a.boxMask).to({alpha:1},500);egret.Tween.get(a.boxContainer).to({y:0},500,egret.Ease.backOut)};b.hideBoxAnim=function(a){egret.Tween.get(a.boxMask).to({alpha:0},500);egret.Tween.get(a.boxContainer).to({y:-960},500,egret.Ease.backIn).call(function(){a.visible=!1})};b.setAchieveLayerVisible=function(a){void 0===a&&(a=!0);null==
this._achieveLayer&&(this._achieveLayer=new AchievementLayer,this._boxContainer.addChild(this._achieveLayer));a?(this._achieveLayer.visible=!0,this._achieveLayer.reload()):this._achieveLayer.visible=!1;a&&doAction("test")};b.showRebornSkillDetailLayer=function(a){null==this._rebornSkillDetailLayer&&(this._rebornSkillDetailLayer=new RebornSkillDetailLayer,this._boxContainer.addChild(this._rebornSkillDetailLayer));this._rebornSkillDetailLayer.refreshView(a);this._rebornSkillDetailLayer.visible=!0};
b.hideRebornSkillDetailLayer=function(){this._rebornSkillDetailLayer.visible=!1};b.showRebornDetailLayer=function(){null==this._rebornDetailLayer&&(this._rebornDetailLayer=new RebornDetailLayer,this._boxContainer.addChild(this._rebornDetailLayer));this._rebornDetailLayer.visible=!0};b.hideRebornDetailLayer=function(){this._rebornDetailLayer.visible=!1};b.showHeroDetailLayer=function(a){void 0===a&&(a=null);null==this._heroDetailLayer&&(this._heroDetailLayer=new HeroDetailView,this._boxContainer.addChild(this._heroDetailLayer));
this._heroDetailLayer.refreshView(a);this._heroDetailLayer.visible=!0};b.hideHeroDetailLayer=function(){this._heroDetailLayer.visible=!1};b.showMainHeroDetailLayer=function(a){void 0===a&&(a=null);null==this._heroMainDetailLayer&&(this._heroMainDetailLayer=new MainHeroDetailView,this._boxContainer.addChild(this._heroMainDetailLayer));this._heroMainDetailLayer.refreshView(a);this._heroMainDetailLayer.visible=!0};b.hideMainHeroDetailLayer=function(){this._heroMainDetailLayer.visible=!1};b.hideSetLayer=
function(){this.hideBoxAnim(this._setLayer)};b.showDieLayer=function(a){null==this._dieLayer&&(this._dieLayer=new HeroDieLayer,this._boxContainer.addChild(this._dieLayer));this._dieLayer.refreshView(a);this._dieLayer.visible=!0};b.hideDieLayer=function(){this._dieLayer.visible=!1};b.showResetGameLayer=function(){null==this._resetLayer&&(this._resetLayer=new ResetGameConfirmLayer,this._boxContainer.addChild(this._resetLayer));this._resetLayer.refreshView();this._resetLayer.visible=!0};b.hideResetGameLayer=
function(){this._resetLayer.visible=!1};b.showPaymentRecommendLayer=function(){ProxyUtils.platformInfo==platformType_wanba&&-1==ProxyUtils.jifen?ProxyUtils.getTencentCoin(this,this.showPaymentRecommendLayer):(null==this._paymentRecommendLayer&&(this._paymentRecommendLayer=new PaymentRecommend,this._topBoxContainer.addChild(this._paymentRecommendLayer)),this._paymentRecommendLayer.refreshView(),this.showBoxAnim(this._paymentRecommendLayer))};b.hidePaymentRecommendLayer=function(){this.hideBoxAnim(this._paymentRecommendLayer)};
b.showStopServiceLayer=function(a){this._boxContainer.removeChildren();this._stopService=new StopServiceLayer;this._stopService.refreshView(a);this._boxContainer.addChild(this._stopService)};b.showHolyAnimation=function(a){null==this._holyAnimation&&(this._holyAnimation=new HolyAnimationLayer,this._boxContainer.addChild(this._holyAnimation));this._holyAnimation.refreshAnimation(a);this._holyAnimation.visible=!0};b.hideHolyAnimation=function(){this._holyAnimation.visible=!1};b.showTopListLayer=function(){null==
this._topListLayer?(this._topListLayer=new TopListLayer,this._boxContainer.addChild(this._topListLayer)):this._topListLayer.reload();this._topListLayer.visible=!0};b.hideTopListLayer=function(){this._topListLayer.visible=!1};b.showShareLayer=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);null==this._shareLayer&&(this._shareLayer=new ShareLayer,this._boxContainer.addChild(this._shareLayer));this._shareLayer.refreshView(a,b,c);this._shareLayer.visible=!0};b.hideShareLayer=function(){this._shareLayer.visible=
!1};b.showShareTipLayer=function(a){null==this._shareTipLayer&&(this._shareTipLayer=new ShareTipLayer,this._boxContainer.addChild(this._shareTipLayer));this._shareTipLayer.show(a);this._shareTipLayer.visible=!0};b.hideShareTipLayer=function(){this._shareTipLayer.visible=!1};b.showCMInfo=function(){null==this._cmInfo&&(this._cmInfo=new CMInfoLayer,this._topBoxContainer.addChild(this._cmInfo));this._cmInfo.visible=!0};b.hideCMInfo=function(){this._cmInfo.visible=!1};b.showAdLayer=function(a){null==
this._adLayer&&(this._adLayer=new AdLayer,this._boxContainer.addChild(this._adLayer));this._adLayer.visible=!0;this._adLayer.show(a)};b.hideAdLayer=function(){this._adLayer.visible=!1};b.showStatisticsLayer=function(){null==this._statisticsLayer&&(this._statisticsLayer=new StatisticsLayer,this.addChild(this._statisticsLayer));this._statisticsLayer.refreshView();this._statisticsLayer.visible=!0};b.hideStatisticsLayer=function(){this._statisticsLayer.visible=!1};b.showSkillCDLayer=function(a){null==
this._mainSkillCDLayer&&(this._mainSkillCDLayer=new MainSkillCDLayer,this._boxContainer.addChild(this._mainSkillCDLayer));this._mainSkillCDLayer.refreshView(a);this._mainSkillCDLayer.visible=!0};b.hideSkillCDLayer=function(){this._mainSkillCDLayer.visible=!1};b.showPayAwardLayer=function(){null==this._payAwardLayer&&(this._payAwardLayer=new PayAwardLayer,this._boxContainer.addChild(this._payAwardLayer));this._payAwardLayer.visible=!0;this._payAwardLayer.reload()};b.hidePayAwardLayer=function(){this._payAwardLayer.visible=
!1};b.showCodeAwardLayer=function(){PlatformFactory.getPlatform().name==PlatformTypes.WEIXIN?location.href=ProxyUtils.weixinURL:(null==this._codeLayer&&(this._codeLayer=new CodeAwardLayer,this._boxContainer.addChild(this._codeLayer)),this._codeLayer.visible=!0)};b.hideCodeAwardLayer=function(){this._codeLayer.visible=!1};b.showSupriseLayer=function(){null==this._supriseLayer&&(this._supriseLayer=new SupriseLayer,this._boxContainer.addChild(this._supriseLayer));this.showBoxAnim(this._supriseLayer);
this._supriseLayer.refreshView("")};b.hideSupriseLayer=function(){this.hideBoxAnim(this._supriseLayer)};b.showMaskLayer=function(){null==this._maskLayer&&(this._maskLayer=new MaskLayer,this._maskLayer.refreshView("\u8bf7\u5728\u826f\u597d\u7684\u7f51\u7edc\u73af\u5883\u4e0b\u6e38\u620f"),this._topBoxContainer.addChild(this._maskLayer))};b.removeMaskLayer=function(){this._maskLayer&&(GameUtils.removeFromParent(this._maskLayer),this._maskLayer=null)};b.showLockLayer=function(a){this._topBoxContainer.removeChildren();
this._maskLayer=new MaskLayer;this._maskLayer.refreshView(a);this._topBoxContainer.addChild(this._maskLayer)};b.showReloginLayer=function(){null==this._reloginLayer&&(this._reloginLayer=new ReLoginLayer,this._topBoxContainer.addChild(this._reloginLayer))};b.showQQGroupLayer=function(){null==this._qqgroupLayer&&(this._qqgroupLayer=new QQGroupLayer,this._topBoxContainer.addChild(this._qqgroupLayer));this._qqgroupLayer.visible=!0};b.hideQQGroupLayer=function(){this._qqgroupLayer.visible=!1};b.showNameLayer=
function(){null==this._nameLayer&&(this._nameLayer=new GameNameLayer,this._topBoxContainer.addChild(this._nameLayer));this._nameLayer.updateView();this._nameLayer.visible=!0};b.hideNameLayer=function(){this._nameLayer.visible=!1;doAction("first_login")};b.showNoticeLayer=function(){this._guideBtn&&this._guideBtn.visible||null!=this._noticeLayer||(this._noticeLayer=new GameNoticeLayer,this._boxContainer.addChild(this._noticeLayer))};b.hideNoticeLayer=function(){this._noticeLayer&&this._boxContainer.removeChild(this._noticeLayer);
this.alertGuide()};b.showBuffLayer=function(){null==this._buffLayer&&(this._buffLayer=new BuffLayer,this._boxContainer.addChild(this._buffLayer));this._buffLayer.visible=!0};b.hideBuffLayer=function(){this._buffLayer.visible=!1};b.hideAllBox=function(){for(var a=this._boxContainer.numChildren,b=0;b<a;b++)this._boxContainer.getChildAt(b).visible=!1;a=this._topBoxContainer.numChildren;for(b=0;b<a;b++)this._topBoxContainer.getChildAt(b).visible=!1;this.gameLayer.visible=!0;this.bottomLayer.visible=!0};
b.showDaySigninLayer=function(){null==this._daySigninLayer&&(this._daySigninLayer=new DaySigninLayer,this._boxContainer.addChild(this._daySigninLayer));this._daySigninLayer.show();this._daySigninLayer.visible=!0};b.hideDaySigninLayer=function(){this._daySigninLayer.visible=!1};b.showDaySigninAwardLayer=function(){null==this._daySigninAwardLayer&&(this._daySigninAwardLayer=new DaySigninAwardLayer,this._boxContainer.addChild(this._daySigninAwardLayer));this._daySigninAwardLayer.visible=!0};b.hideDaySigninAwardLayer=
function(){this._daySigninAwardLayer.visible=!1};b.showWeixinAwardLayer=function(){null==this._wxAwardLayer&&(this._wxAwardLayer=new WeixinAwardLayer,this._boxContainer.addChild(this._wxAwardLayer));this._wxAwardLayer.visible=!0;this._wxAwardLayer.refreshView()};b.hideWeixinAwardLayer=function(){this._wxAwardLayer.visible=!1;PlatformFactory.getPlatform().name==PlatformTypes.QQBROWSER&&this.alertNotice()};b.showAwardLayer=function(){null==this._getAwardLayer&&(this._getAwardLayer=new GetAwardLayer,
this._boxContainer.addChild(this._getAwardLayer));this._getAwardLayer.visible=!0};b.hideAwardLayer=function(){this._getAwardLayer.visible=!1};b.showLoginAwardLayer=function(){null==this._loginAwardLayer&&(this._loginAwardLayer=new LoginAwardLayer,this._boxContainer.addChild(this._loginAwardLayer));this._loginAwardLayer.visible=!0};b.hideLoginAwardLayer=function(){this._loginAwardLayer.visible=!1};b.showEgretShareLayer=function(){null==this._egretShareLayer&&(this._egretShareLayer=new EgretShareLayer,
this._boxContainer.addChild(this._egretShareLayer));this._egretShareLayer.visible=!0};b.hideEgretShareLayer=function(){this._egretShareLayer.visible=!1};b.showEquipLayer=function(){null==this._equipLayer&&(this._equipLayer=new EquipListLayer,this._boxContainer.addChild(this._equipLayer));this._equipLayer.visible=!0;this._equipLayer.refreshView()};b.hideEquipLayer=function(){this._equipLayer.visible=!1};b.showBuyEquip=function(a){null==this._equipConfirmLayer&&(this._equipConfirmLayer=new EquipBuyConfirmLayer,
this._boxContainer.addChild(this._equipConfirmLayer));this._equipConfirmLayer.visible=!0;this._equipConfirmLayer.refreshView(a)};b.hideBuyEquip=function(){this._equipConfirmLayer.visible=!1};b.showFriendLayer=function(){null==this._friendLayer&&(this._friendLayer=new FriendLayer,this._boxContainer.addChild(this._friendLayer));this._friendLayer.refreshView();this._friendLayer.visible=!0;this.bottomLayer.visible=!1;this.gameLayer.visible=!1};b.hideFriendLayer=function(){this._friendLayer.visible=!1;
this.bottomLayer.visible=!0;this.gameLayer.visible=!0};b.showFriendSuprise=function(){null==this._friend&&(this._friend=new FriendSupriseLayer,this._boxContainer.addChild(this._friend));this._friend.refreshView();this._friend.visible=!0};b.hideFriendSuprise=function(){this._friend.visible=!1};b.showFriendAward=function(a){null==this._friendAward&&(this._friendAward=new FriendAwardLayer,this._boxContainer.addChild(this._friendAward));this._friendAward.refreshView(a);this._friendAward.visible=!0};b.hideFriendAward=
function(){this._friendAward.visible=!1};b.showFriendDetail=function(a){null==this._friendDetail&&(this._friendDetail=new FriendDetailLayer,this._boxContainer.addChild(this._friendDetail));this._friendDetail.visible=!0;this._friendDetail.refreshView(a)};b.hideFriendDetail=function(){this._friendDetail.visible=!1};b.showFriendConfirm=function(a){null==this._friendConfirm&&(this._friendConfirm=new FriendConfirmLayer,this._boxContainer.addChild(this._friendConfirm));this._friendConfirm.refreshView(a);
this._friendConfirm.visible=!0};b.hideFriendConfirm=function(){this._friendConfirm&&(this._friendConfirm.visible=!1)};b.showLanternLayer=function(){null==this._lanternLayer&&(this._lanternLayer=new LanternActivityLayer,this._boxContainer.addChild(this._lanternLayer));this._lanternLayer.visible=!0};b.hideLanternLayer=function(){this._lanternLayer.visible=!1};b.showSeriesLayer=function(){null==this._seriesRechargeLayer&&(this._seriesRechargeLayer=new SeriesRechargeLayer,this._boxContainer.addChild(this._seriesRechargeLayer));
this._seriesRechargeLayer.visible=!0};b.hideSeriesLayer=function(){this._seriesRechargeLayer.visible=!1};b.showEvolveLayer=function(){null==this._evolveLayer&&(this._evolveLayer=new EvolveLayer,this._boxContainer.addChild(this._evolveLayer));this._evolveLayer.refresh();this._evolveLayer.visible=!0};b.hideEvolveLayer=function(){this._evolveLayer.visible=!1};b.showFateLayer=function(){null==this._fateLayer&&(this._fateLayer=new CardFateLayer,this._boxContainer.addChild(this._fateLayer));this._fateLayer.refresh();
this._fateLayer.visible=!0};b.hideFateLayer=function(){this._fateLayer.visible=!1};b.showCardAnimation=function(a){this._cardAnimation=new CardAnimationLayer;this._cardAnimation.refreshView(a);this.addChild(this._cardAnimation)};b.hideCardAnimation=function(){this._cardAnimation&&this.removeChild(this._cardAnimation);this._cardAnimation=null};b.showVUShare=function(){GameUtils.is1758()?0<VuTimesShareData.getInstance().getLeftTime()?this.showVuTip():(null==this._1758Share&&(this._1758Share=new _1758ShareLayer,
this._1758Share.setMsg(1),this._boxContainer.addChild(this._1758Share)),this._1758Share.visible=!0):GameUtils.isFanQie()?0<VuTimesShareData.getInstance().getLeftTime()?this.showVuTip():(null==this._1758Share&&(this._1758Share=new _1758ShareLayer,this._1758Share.setMsg(2),this._boxContainer.addChild(this._1758Share)),this._1758Share.visible=!0):(null==this._vuShare&&(this._vuShare=new VuPlatformShareLayer,this._boxContainer.addChild(this._vuShare)),this._vuShare.show(),this._vuShare.visible=!0)};b.hideVUShare=
function(){GameUtils.is1758()||GameUtils.isFanQie()?this._1758Share.visible=!1:this._vuShare.visible=!1};b.showVuTip=function(){this._vuTip=new VuPlatformTipLayer;this._boxContainer.addChild(this._vuTip);this._vuTip.show()};b.hideVuTip=function(){this._vuTip&&this._vuTip.parent&&this._boxContainer.removeChild(this._vuTip);if(GameUtils.is1758()||GameUtils.isFanQie())this._1758Share.visible=!1};b.showWeixinTip=function(a){var b=new VuShareWeChatTipLayer;b.show(a);this._boxContainer.addChild(b)};b.dispose=
function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};b.showCreateGuild=function(){null==this.guildCreate&&(this.guildCreate=new GuildCreate,this._boxContainer.addChild(this.guildCreate));this.guildCreate.reLoadView();this.showBoxAnim(this.guildCreate)};b.hideCreateGuild=function(){this.hideBoxAnim(this.guildCreate)};b.setGuildLayer=function(a){void 0===a&&(a=!0);null==this.myGuildView&&(this.myGuildView=new MyGuildView,this._boxContainer.addChild(this.myGuildView));a!=this.myGuildView.visible&&
(a&&this.myGuildView.reLoadView(),this.myGuildView.visible=a)};b.showGuildJoinView=function(a,b){void 0===a&&(a=!0);void 0===b&&(b=!1);null==this.joinView&&(this.joinView=new JoinGuildView,this._boxContainer.addChild(this.joinView));b?(this._boxContainer.removeChild(this.joinView),this.joinView=null):(this.joinView.visible=a)&&this.joinView.reload()};b.showChatPanel=function(a){void 0===a&&(a=!0);null==this.chatPanel&&(this.chatPanel=new ChatMainPanel,this._boxContainer.addChild(this.chatPanel));
this.chatPanel.visible=a;this.chatPanel.visible&&doAction(Const.Chat_refleshView,2)};b.showJumpMsgPanel=function(a){void 0===a&&(a=!0);null==this.jumpMsgPanel&&(this.jumpMsgPanel=new JumpScreenMsg,this._tipsContainer.addChild(this.jumpMsgPanel));this.jumpMsgPanel.visible=a};b.showAlert=function(){null==this.alertPanel&&(this.alertPanel=new AlertPanel(3),this.alertPanel.setHandler(this.SureToDonate,this),this._boxContainer.addChild(this.alertPanel));this.alertPanel.visible=!0;GameUtils.isAiWeiGame()?
this.alertPanel.setData("","\u4eb2\u7231\u7684\u73a9\u5bb6\uff0c\u7ecf\u8fc7\u7d27\u6025\u4fee\u590d\u6211\u4eec\u5df2\u5c06\u60a8\u7684\u6570\u636e\u6062\u590d\u5230\u4e86\u6700\u8fd1\u7684\u6b63\u5e38\u6570\u636e\uff0c\u4e3a\u4e86\u8868\u8fbe\u6211\u4eec\u5bf9\u60a8\u7684\u6b49\u610f\uff0c\u7279\u8865\u507f2000\u5143\u5b9d30\u9b42\u7389\uff0c\u5143\u5b9d\u5df2\u7ecf\u76f4\u63a5\u6dfb\u52a0\u5230\u60a8\u7684\u8d26\u53f7\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536\u3002\u540c\u65f6\u5728\u8fd9\u91cc\u6211\u4eec\u4e3a\u6b64\u6b21\u5bf9\u60a8\u9020\u6210\u7684\u4e0d\u4fbf\u81f4\u4ee5\u6700\u771f\u8bda\u7684\u6b49\u610f\uff0c\u8c22\u8c22\u7406\u89e3\u3002"):
this.alertPanel.setData("","\u4eb2\u7231\u7684\u73a9\u5bb6\uff0c\u7ecf\u8fc7\u7d27\u6025\u4fee\u590d\u6211\u4eec\u5df2\u5c06\u60a8\u7684\u6570\u636e\u6062\u590d\u5230\u4e86\u6700\u8fd1\u7684\u6b63\u5e38\u6570\u636e\uff0c\u4e3a\u4e86\u8868\u8fbe\u6211\u4eec\u5bf9\u60a8\u7684\u6b49\u610f\uff0c\u7279\u8865\u507f1000\u5143\u5b9d\uff0c\u5143\u5b9d\u5df2\u7ecf\u76f4\u63a5\u6dfb\u52a0\u5230\u60a8\u7684\u8d26\u53f7\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536\u3002\u540c\u65f6\u5728\u8fd9\u91cc\u6211\u4eec\u4e3a\u6b64\u6b21\u5bf9\u60a8\u9020\u6210\u7684\u4e0d\u4fbf\u81f4\u4ee5\u6700\u771f\u8bda\u7684\u6b49\u610f\uff0c\u8c22\u8c22\u7406\u89e3\u3002")};
b.SureToDonate=function(a){"ok"==a&&(this.alertPanel.visible=!1)};b.showLoadingRotation=function(a,b){void 0===a&&(a=!1);void 0===b&&(b="\u8bf7\u6c42\u4e2d...");null==this.loadRotationUI&&(this.loadRotationUI=new LoadingRotation,this.addChild(this.loadRotationUI));(this.loadRotationUI.visible=a)?(this.loadRotationUI.rotaionCircle(!0),this.loadRotationUI.setTxtTip(b)):this.loadRotationUI.rotaionCircle(!1)};b.showLoopBuy=function(){var a=new LoopBuyLayer;a.refreshView();this._topBoxContainer.addChild(a)};
b.showLoopBuyConfirm=function(a){var b=new LoopBuyConfirmLayer;b.refreshView(a);this._topBoxContainer.addChild(b)};b.showAlertBox=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);a=AlertBox.create(a,b,c);this._topBoxContainer.addChild(a)};return d}(BaseContainer);GameMainLayer.prototype.__class__="GameMainLayer";
var GuideManager=function(){function c(){}c.prototype.execute=function(d){if(!c.inited){c.inited=!0;PlatformFactory.getPlatform().name!=PlatformTypes.WEIXIN&&5==d&&(d=6);var b={1:Guide1,2:Guide2,3:Guide3,4:Guide4,5:Guide5,6:Guide6};b[d]&&(new b[d]).execute()}};c.dispose=function(){c.inited=!1;c.curStep.destroy()};c.inited=!1;return c}();GuideManager.prototype.__class__="GuideManager";
var BaseGuide=function(){function c(){}var d=c.prototype;d.destroy=function(){removeEventsByTarget(this)};d.dispose=function(){ProxyUtils.UserStat("guideStep"+DataCenter.getInstance().totalData.guideStep)};return c}();BaseGuide.prototype.__class__="BaseGuide";
var Guide1=function(c){function d(){c.apply(this,arguments)}__extends(d,c);var b=d.prototype;b.execute=function(){GuideManager.curStep=this;doAction(Guide.HIDE_BOTTOM);GameMainLayer.instance.showGuide(Guide.handPositions.hitBoss.x,Guide.handPositions.hitBoss.y);addAction(Guide.CLICK_HOME,this.dispose,this);ProxyUtils.UserStat("guideStep"+DataCenter.getInstance().totalData.guideStep)};b.dispose=function(){removeEventsByTarget(this);GameMainLayer.instance.hideGuide();(new Guide2).execute();DataCenter.getInstance().totalData.guideStep=
2;DataCenter.getInstance().saveData();c.prototype.dispose.call(this)};return d}(BaseGuide);Guide1.prototype.__class__="Guide1";
var Guide2=function(c){function d(){c.apply(this,arguments)}__extends(d,c);var b=d.prototype;b.execute=function(){GuideManager.curStep=this;doAction(Guide.HIDE_BOTTOM);DataCenter.getInstance().hasEnoughSc(1)?(GameMainLayer.instance.hideAllBox(),doAction(Guide.SHOW_BOTTOM1),addAction("mainButtonClick",this.commandContinue,this),GameMainLayer.instance.showGuide(Guide.handPositions.clickMain.x,Guide.handPositions.clickMain.y)):addAction(Const.CHANGE_COIN,this.changeHandler,this)};b.changeHandler=function(){removeEventsByTarget(this);
this.execute()};b.commandContinue=function(){doAction("changeMaskHeight");removeEventsByTarget(this);addAction(Guide.UP_HERO,this.dispose,this);GameMainLayer.instance.showGuide(Guide.handPositions.upSkill.x,Guide.handPositions.upSkill.y)};b.dispose=function(){removeEventsByTarget(this);GameMainLayer.instance.hideGuide();(new Guide3).execute();DataCenter.getInstance().totalData.guideStep=3;DataCenter.getInstance().saveData();c.prototype.dispose.call(this)};return d}(BaseGuide);
Guide2.prototype.__class__="Guide2";
var Guide3=function(c){function d(){c.apply(this,arguments)}__extends(d,c);var b=d.prototype;b.execute=function(){GuideManager.curStep=this;DataCenter.getInstance().totalData.heroList[1001]?this.dispose():(doAction(Guide.SHOW_BOTTOM1),DataCenter.getInstance().hasEnoughSc(5)?applyFilters(Guide.IS_SKILL_LAYER_EXSIT)||"hero"!=applyFilters("get_current_tag")?(GameMainLayer.instance.hideAllBox(),addAction("heroButtonClick",this.commandContinue,this),GameMainLayer.instance.showGuide(Guide.handPositions.bottom2.x,Guide.handPositions.bottom2.y),
doAction("changeMaskHeight")):this.commandContinue():addAction(Const.CHANGE_COIN,this.changeHandler,this))};b.changeHandler=function(){removeEventsByTarget(this);this.execute()};b.commandContinue=function(){removeEventsByTarget(this);GameMainLayer.instance.hideAllBox();addAction(Guide.BUY_HERO,this.dispose,this);GameMainLayer.instance.showGuide(Guide.handPositions.buyHero.x,Guide.handPositions.buyHero.y);doAction("changeMaskHeight")};b.dispose=function(){removeEventsByTarget(this);GameMainLayer.instance.hideGuide();
doAction(Guide.SHOW_BOTTOM2);(new Guide4).execute();DataCenter.getInstance().totalData.guideStep=4;DataCenter.getInstance().saveData();c.prototype.dispose.call(this)};return d}(BaseGuide);Guide3.prototype.__class__="Guide3";
var Guide4=function(c){function d(){c.apply(this,arguments);this._step=1}__extends(d,c);var b=d.prototype;b.execute=function(){GuideManager.curStep=this;DataCenter.getInstance().totalData.mainSkillCD[22001]?this.dispose():50<=HeroController.getInstance().mainHero.lv?0==HeroController.getInstance().mainHero.skillList[0].lv?DataCenter.getInstance().hasEnoughSc("2.78K")?applyFilters(Guide.IS_SKILL_LAYER_EXSIT)||"main"!=applyFilters("get_current_tag")?(addAction("mainButtonClick",this.commandContinue,
this),GameMainLayer.instance.showGuide(Guide.handPositions.clickMain.x,Guide.handPositions.clickMain.y),doAction("changeMaskHeight")):this.commandContinue():addAction(Const.CHANGE_COIN,this.changeHandler,this):(this._step=2,this.commandContinue()):addAction(Const.CHANGE_COIN,this.changeHandler,this)};b.changeHandler=function(){removeEventsByTarget(this);this.execute()};b.commandContinue=function(){removeEventsByTarget(this);this._step+=1;2==this._step?(addAction(Guide.UNLOCK_MAIN_SKILL,this.commandContinue,
this),GameMainLayer.instance.showGuide(Guide.handPositions.buyMainSkill.x,Guide.handPositions.buyMainSkill.y)):3==this._step?(addAction(Guide.CLICK_DOWN_JIANTOU,this.commandContinue,this),GameMainLayer.instance.showGuide(Guide.handPositions.clickSanjiao.x,Guide.handPositions.clickSanjiao.y)):4==this._step&&(addAction(Guide.USE_SKILL,this.dispose,this),GameMainLayer.instance.showGuide(Guide.handPositions.useSkill.x,Guide.handPositions.useSkill.y));doAction("changeMaskHeight")};b.dispose=function(){removeEventsByTarget(this);
GameMainLayer.instance.hideGuide();PlatformFactory.getPlatform().name==PlatformTypes.WEIXIN?((new Guide5).execute(),DataCenter.getInstance().totalData.guideStep=5):((new Guide6).execute(),DataCenter.getInstance().totalData.guideStep=6);DataCenter.getInstance().saveData();c.prototype.dispose.call(this)};return d}(BaseGuide);Guide4.prototype.__class__="Guide4";
var Guide5=function(c){function d(){c.apply(this,arguments)}__extends(d,c);var b=d.prototype;b.execute=function(){GuideManager.curStep=this;var a=DataCenter.getInstance().totalData.mainSkillCD["22001"];6E5<(new Date).getTime()-a||!a?((new Guide6).execute(),DataCenter.getInstance().totalData.guideStep=6,DataCenter.getInstance().saveData()):!1==applyFilters(Guide.IS_SKILL_LAYER_EXSIT)?(addAction(Guide.CLICK_DOWN_JIANTOU,this.commandContinue,this),GameMainLayer.instance.showGuide(Guide.handPositions.clickSanjiao.x,
Guide.handPositions.clickSanjiao.y)):22001==applyFilters(Guide.IS_SKILL_CDING,22001)?Time.setTimeout(this.execute,this,1E3):(addAction(Const.CLICK_CD_SKILL,this.dispose,this),GameMainLayer.instance.showGuide(Guide.handPositions.useSkill.x,Guide.handPositions.useSkill.y))};b.commandContinue=function(){removeEventsByTarget(this);this.execute()};b.dispose=function(){removeEventsByTarget(this);GameMainLayer.instance.hideGuide();(new Guide6).execute();DataCenter.getInstance().totalData.guideStep=6;DataCenter.getInstance().saveData();
c.prototype.dispose.call(this)};return d}(BaseGuide);Guide5.prototype.__class__="Guide5";
var Guide6=function(c){function d(){c.apply(this,arguments)}__extends(d,c);var b=d.prototype;b.execute=function(){GuideManager.curStep=this;0<DataCenter.getInstance().totalData.rebornSkillList.length?this.dispose():81<=DataCenter.getInstance().totalData.currentLevel?applyFilters(Guide.IS_SKILL_LAYER_EXSIT)||"holy"!=applyFilters("get_current_tag")?(addAction("holyButtonClick",this.commandContinue,this),GameMainLayer.instance.showGuide(Guide.handPositions.bottom3.x,Guide.handPositions.bottom3.y),doAction("changeMaskHeight")):
this.commandContinue():addAction(Const.BOSS_KILLED,this.changeHandler,this)};b.commandContinue=function(){removeEventsByTarget(this);addAction(Guide.BUY_HOLY,this.dispose,this);0==DataCenter.getInstance().getHolyNum()&&(DataCenter.getInstance().changeHolyNum(1),DataCenter.getInstance().addALog("guide1"));GameMainLayer.instance.showGuide(Guide.handPositions.buyHero.x,Guide.handPositions.buyHero.y);doAction("changeMaskHeight")};b.changeHandler=function(){removeEventsByTarget(this);this.execute()};b.dispose=
function(){removeEventsByTarget(this);GameMainLayer.instance.hideGuide();DataCenter.getInstance().totalData.guideStep=7;DataCenter.getInstance().saveData();c.prototype.dispose.call(this)};return d}(BaseGuide);Guide6.prototype.__class__="Guide6";
var RenderTextureManager=function(){function c(){}c.getRenderTexture=function(){var d=c._pool.shift();d||(c.count++,d=new egret.RenderTexture);return d};c.getBitmap=function(d){var b=c.getRenderTexture();b.drawToTexture(d);d=new egret.Bitmap;d.texture=b;return d};c.destroyRenderTexture=function(d){d.drawToTexture&&c._pool.push(d)};c.destroyBitmap=function(d){d.texture.drawToTexture&&c._pool.push(d.texture)};c._pool=[];c.count=0;return c}();RenderTextureManager.prototype.__class__="RenderTextureManager";
var CoinTxt=function(c){function d(){c.call(this);this.anchorX=this.anchorY=0.5;var a=RES.getRes("coin_num_fnt_fnt");this._text=new egret.BitmapText;this.addChild(this._text);this._text.font=a;this._text.anchorX=this._text.anchorY=0.5;addAction("clearnReborn",this.dispose,this)}__extends(d,c);var b=d.prototype;b.start=function(){this.alpha=1;egret.Tween.get(this).to({y:250,alpha:0.5},800).call(this.dispose,this)};b.start1=function(a){this.alpha=1;egret.Tween.get(this).to({y:a,alpha:0.5},500).call(this.dispose,
this)};Object.defineProperty(b,"text",{get:function(){return this._text.text},set:function(a){this._text.text=a},enumerable:!0,configurable:!0});b.dispose=function(){this.parent&&(this.y=300,GameUtils.recycleCoinTxt(this),this.parent.removeChild(this))};return d}(egret.DisplayObjectContainer);CoinTxt.prototype.__class__="CoinTxt";
var LoadingUIForQQB=function(c){function d(a){void 0===a&&(a=!0);c.call(this);this._isLock=this.isPressToLogin=!1;this.isFirstLogin=!0;this._isStartLoading=!1;this._date=null;this.isFirstLogin=a;this.createView();addAction("Please_try_auto_login",this.tryAutoLogin,this)}__extends(d,c);var b=d.prototype;b.createView=function(){var a=this;this._bg=ResourceUtils.createBitmapByName("loadingBg");this.addChild(this._bg);1200<GameUtils.getWinHeight()&&(this._bg.scaleY=GameUtils.getWinHeight()/1200);var b=
ResourceUtils.createBitmapByName("logo1");b.x=40;b.y=60;this._egretLabel=new egret.TextField;this._egretLabel.text="Powered by Egret Engine";this._egretLabel.bold=!0;this.addChild(this._egretLabel);this._egretLabel.x=270;this._egretLabel.y=GameUtils.getWinHeight()-50;this._egretLabel.touchEnabled=!0;this._egretLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.test,this);this.textField=new egret.TextField;this.addChild(this.textField);this.textField.y=GameUtils.getWinHeight()/2+350;this.textField.width=
GameUtils.getWinWidth();this.textField.height=100;this.textField.textAlign="center";PlatformFactory.getPlatform().getLoginType(function(b){0==b.result&&b.loginType&&a.initLoginBtn(b.loginType);PlatformFactory.getPlatform()instanceof ETPlatform&&PlatformFactory.getPlatform().checkLogin()},this);addAction("egret_login_success",this.egretLoginSuccess,this);addAction("suport_type",this.suportType,this);this.isFirstLogin||addAction(Const.INFO_INITED,this.inited,this)};b.qqClick=function(){this._isLock||
this.isPressToLogin||(PlatformFactory.getPlatform().doLogin("qq"),this.isPressToLogin=!0,this.timeToReset())};b.wechatClick=function(){this._isLock||this.isPressToLogin||(PlatformFactory.getPlatform().doLogin("wx"),this.isPressToLogin=!0,this.timeToReset())};b.timeToReset=function(){var a=this,b=Time.setTimeout(function(){Time.clearTimeout(b);a.isPressToLogin=!1;a._isLock=!1},this,3E3)};b.suportType=function(a){this.isPressToLogin=!1;this.showLoginBtn(!0);this._isLock=this.isPressToLogin=!1};b.setProgress=
function(a,b){this.textField.text="\u6e38\u620f\u52a0\u8f7d\u4e2d..."+a+"/"+b};b.egretLoginSuccess=function(){this.showLoginBtn(!1);this._isStartLoading=!0;LoadingGroupControl.instance().loadGroup("preload")};b.countDown=function(){this.textField.text="\u5c11\u4fa0\u6b63\u5728\u7a7f\u8863\u670d"+["",".","..","..."][this._current%4];this._current+=1};b.inited=function(){var a=PlatformFactory.getPlatform().deserialize(),b=egret.localStorage.getItem(ProxyUtils.userId+"bearjoyTapGameData");b&&(b=JSON.parse(b),
b.uId==ProxyUtils.userId&&(a.saveTime&&(b.saveTime>a.saveTime?b.gc=a.gc:b=a),a=b));DataCenter.getInstance().initGameData(a);this.parent.removeChild(this);a=new GameMainLayer;egret.MainContext.instance.stage.addChild(a)};b.test=function(){if(this._date){var a=this._date.getTime();if(500>(new Date).getTime()-a){var a=navigator.userAgent.toLowerCase(),b=GameUtils.getQuery("chls");alert("ua:"+a+"chls:"+b)}}this._date=new Date};b._onRemoveFromStage=function(){c.prototype._onRemoveFromStage.call(this);
removeEventsByTarget(this);this._egretLabel.touchEnabled=!1;this._egretLabel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.test,this);Time.clearInterval(this._timeID);this._timeID=null};b.initLoginBtn=function(a){this._loginBtnArray=[];var b={qq:"loading_btn_qq",wx:"loading_btn_wechat"};if(a&&a.length)for(var c=0;c<a.length;c++){var d=a[c],g=new SimpleButton,l=ResourceUtils.createBitmapByName(b[d]);g.addChild(l);g.name=d;g.useZoomOut(!0);g.addOnClick(this.clickLoginBtn,this);g.anchorX=g.anchorY=
0.5;g.x=GameUtils.getWinWidth()/2+20;g.y=GameUtils.getWinHeight()-190+100*c;this.addChild(g);this._loginBtnArray.push(g);g.visible=!1}};b.clickLoginBtn=function(a){!(a=a.name)||this._isLock||this.isPressToLogin||(PlatformFactory.getPlatform().doLogin(a),this.isPressToLogin=!0,this.timeToReset())};b.showLoginBtn=function(a){if(!this._isStartLoading&&this._loginBtnArray)for(var b=0;b<this._loginBtnArray.length;b++)this._loginBtnArray[b].visible=a};b.tryAutoLogin=function(a,b){var c=this;void 0===a&&
(a=!1);void 0===b&&(b=null);PlatformFactory.getPlatform().getLoginType(function(a){if(0==a.result&&a.loginType&&1==a.loginType.length&&!c._isStartLoading){var b={};b.name=a.loginType[0];c.clickLoginBtn(b)}},this)};return d}(egret.Sprite);LoadingUIForQQB.prototype.__class__="LoadingUIForQQB";
var HurtTxt=function(c){function d(){c.call(this);this.anchorX=this.anchorY=0.5;var a=RES.getRes("blood_num_fnt_fnt");this._text=new egret.BitmapText;this._text.font=a;this.addChild(this._text);this.cacheAsBitmap=!0}__extends(d,c);var b=d.prototype;b.start=function(a){this.scaleX=a?this.scaleY=1.6:this.scaleY=1;this.alpha=1;egret.Tween.get(this).to({y:150,alpha:0.3},800).call(this.dispose,this)};Object.defineProperty(b,"text",{get:function(){return this._text.text},set:function(a){this._text.text=
a},enumerable:!0,configurable:!0});b.dispose=function(){this.parent&&(this.y=300,GameUtils.recycleTxt(this),this.parent.removeChild(this))};return d}(egret.DisplayObjectContainer);HurtTxt.prototype.__class__="HurtTxt";
var LoginOutLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this._bg=ResourceUtils.createBitmapByName("loadingBg");this.addChild(this._bg);this._btn=new SimpleButton;this.addChild(this._btn);this._btn.x=GameUtils.getWinWidth()/2+20;this._btn.y=GameUtils.getWinHeight()-120;this._btn.anchorX=this._btn.anchorY=0.5;var a=ResourceUtils.createBitmapByName("loading_btn");this._btn.addChild(a);this._btn.useZoomOut(!0);this._btn.addOnClick(this.confirmHandler,
this);addAction(Const.INFO_INITED,this.inited,this)};b.confirmHandler=function(){egret.localStorage.removeItem("bearjoyGLTapGameHashKey1");ProxyUtils.login()};b.inited=function(){var a=PlatformFactory.getPlatform().deserialize(),b=egret.localStorage.getItem(ProxyUtils.userId+"bearjoyTapGameData");b&&(b=JSON.parse(b),b.uId==ProxyUtils.userId&&(a.saveTime&&(b.saveTime>a.saveTime?b.gc=a.gc:b=a),a=b));DataCenter.getInstance().initGameData(a);this.parent.removeChild(this);a=new GameMainLayer;egret.MainContext.instance.stage.addChild(a)};
b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};return d}(BaseContainer);LoginOutLayer.prototype.__class__="LoginOutLayer";
var GameUtils=function(){function c(){}c.random=function(c,b){null==b&&(b=c,c=0);return c+Math.floor(Math.random()*(b-c+1))};c.getCallCost=function(c){var b=applyFilters(Const.GET_HOLY_EFFECT,getApplyString(20));if(b==getApplyString(20))return c;var a=new NumberModel;a.add(c);a.times(1-b);return a.getNumer()};c.getMaxCustomPass=function(){var c=applyFilters(Const.GET_HOLY_EFFECT,getApplyString(26));return c!=getApplyString(26)?Math.ceil(10*(1-c)):10};c.getMapConfig=function(c){void 0===c&&(c=null);
var b=RES.getRes("map_config");null==c&&(c=DataCenter.getInstance().totalData.currentLevel);c=Math.ceil(c%100/5);0==c&&(c=20);return b[c]};c.getMonsterID=function(d){void 0===d&&(d=!1);var b=DataCenter.getInstance().totalData.currentLevel,a;if(d){d=RES.getRes("map_config");var e=b%=100;if(0==b)return d[20].monster.split(",")[4];b=Math.ceil(b/5);a=d[b].monster.split(",");return a[e-d[b].startLv]}d=RES.getRes("monster_config");b%=100;0==b&&(b=100);a=d[b].smallMonster.split(",");return a[c.random(1,
a.length)-1]};c.getMapRes=function(c){void 0===c&&(c=null);if(GuildDataManager.getInstance().isGuildWulinStart)return 8;null==c&&(c=DataCenter.getInstance().totalData.currentLevel);var b;b=RES.getRes("map_config");var a=c%=100;if(0==c)return b[20].useMap.split(",")[4];c=Math.ceil(c/5);return b[c].useMap.split(",")[a-b[c].startLv]};c.isBoss=function(){return DataCenter.getInstance().totalData.currentPass>=c.getMaxCustomPass()};c.replenish=function(c){return 1==c.length?"0"+c:c};c.formatTime=function(c){var b=
Math.floor(Math.floor(c%3600)/60);c=Math.floor(Math.floor(c%3600)%60);c=""+Math.floor(c/10)+Math.floor(c%10);return this.replenish(""+Math.floor(b/10)+Math.floor(b%10))+":"+this.replenish(c)+""};c.formatTime1=function(c){var b=Math.floor(Math.floor(c%3600)/60).toString(),a=Math.floor(Math.floor(c%3600)%60).toString();return this.replenish(Math.floor(c/3600).toString())+":"+this.replenish(b)+":"+this.replenish(a)};c.formatTime3=function(c){var b=Math.floor(Math.floor(c%3600)/60).toString();return this.replenish(Math.floor(c/
3600).toString())+"\u5c0f\u65f6"+this.replenish(b)+"\u5206\u949f"};c.formatTime4=function(c){c/=1E3;var b=Math.floor(Math.floor(c%3600)/60).toString();return Math.floor(c/86400).toString()+"\u5929"+this.replenish(Math.floor(Math.floor(c%86400)/3600).toString())+"\u5c0f\u65f6"+this.replenish(b)+"\u5206\u949f"};c.formatTime2=function(c){return this.replenish(c.toString())};c.formatShortTime=function(c){return 3600<=c?this.formatTime1(c):60<=c?this.formatTime(c):this.formatTime2(c)};c.formatDay=function(c){c=
(new Date).getTime()-c;return Math.ceil(c/864E5)+"\u5929"};c.removeAllChildren=function(c){for(;c.numChildren;)c.removeChildAt(0)};c.getNewNumber=function(c){return c.toString()};c.removeFromParent=function(c){c&&c.parent&&c.parent.removeChild(c)};c.getWinWidth=function(){return egret.MainContext.instance.stage.stageWidth};c.getWinHeight=function(){return egret.MainContext.instance.stage.stageHeight};c.recycleCoinTxt=function(d){c.coinTxtPool.push(d)};c.getCoinTxt=function(d){var b;b=0==c.coinTxtPool.length?
new CoinTxt:c.coinTxtPool.pop();b.text=d;return b};c.recycleTxt=function(d){c.hurtTxtPool.push(d)};c.getHurtTxt=function(d){var b;b=0==c.hurtTxtPool.length?new HurtTxt:c.hurtTxtPool.pop();b.text=d;return b};c.isAWY=function(){return"awy"==this.getQuery("serverTag")};c.isAiWeiGame=function(){return"vutimes"==this.getQuery("channelTag")};c.is1758=function(){return"1758"==this.getQuery("channelTag")};c.isWeibo=function(){return"weibo"==this.getQuery("channelTag")};c.isQQBOfChannel=function(){var c=this.getQuery("channelTag");
return"qqb"==c||"QQBrowser"==c||"QQBrowserty"==c};c.hideWechatButton=function(){var c=!1;-1<navigator.userAgent.toLowerCase().indexOf("micromessenger")&&(c=!0);var b=this.getQuery("chls");return!c&&"VVEuhptbus~"==b};c.isQQBOfServer=function(){return"qqb"==this.getQuery("serverTag")};c.isFanQie=function(){return"fanqie"==this.getQuery("channelTag")};c.isLieBao=function(){return"liebao"==this.getQuery("channelTag")};c.isYXDT=function(){return!1};c.getQuery=function(c,b){void 0===b&&(b=!1);var a=location.href;
!0==b&&(a=a.replace("#","&"));if(-1<a.indexOf("?"))for(var a=a.split("?")[1].split("&"),e=0;e<a.length;e++){var f=a[e].split("=");if(f[0]==c)return f[1]}return null};c.createButton=function(c,b,a,e,f,h,g,l,k,m){void 0===m&&(m=16777215);var n=new egret.DisplayObjectContainer,p=new SimpleButton;p.width=h;p.height=g;p.x=e;p.y=f;p.useZoomOut(!0);p.addOnClick(a,this);p.anchorX=p.anchorY=0.5;p.addChild(n);n.cacheAsBitmap=!0;b=ResourceUtils.createBitmapFromSheet(b);b.anchorX=b.anchorY=0.5;n.addChild(b);
b.x=h/2;b.y=g/2;b=new egret.TextField;b.anchorX=b.anchorY=0.5;n.addChild(b);b.text=c;b.x=h/2+l;b.y=g/2+k;b.size=25;b.textColor=m;p.label=b;return p};c.getQueryAnchor=function(){var c=location.href;return-1<c.indexOf("#")?c.split("#")[1]:""};c.preloadHeroSkillMovieResource=function(d,b,a){void 0===a&&(a=null);var e="heroskill_"+d,f=[];this.parserAnimNeedLoadFiles("heroskill_"+d+"_json",f);c.preloadAnimations(f,e,b,a)};c.preloadHeroMovieResource=function(d,b,a){void 0===a&&(a=null);var e="hero_"+d,
f=[];this.parserAnimNeedLoadFiles("hero_"+d+"_json",f);c.preloadAnimations(f,e,b,a)};c.parserAnimNeedLoadFiles=function(c,b){b.push(c);var a=c.split("_");a.splice(a.length-1,0,"swf");a=a.join("_");b.push(a)};c.preloadAnimation=function(c,b,a,e){void 0===b&&(b=null);void 0===a&&(a=null);void 0===e&&(e=null);var f=[];this.parserAnimNeedLoadFiles(c,f);this.preloadAnimations(f,"group_"+c,b,a,e)};c.getPlatformType=function(){var c=this.getQuery("pf");return null==c?ProxyUtils.platformInfo:globalData.openid&&
""!=globalData.openid?platformType_wanba:c};c.empty=function(c){return""==c||void 0==c||null==c};c.notEmpty=function(c){return!this.empty(c)};c.distance=function(c,b,a,e){return Math.sqrt((c-a)*(c-a)+(b-e)*(b-e))};c.preloadAnimations=function(c,b,a,e,f){void 0===a&&(a=null);void 0===e&&(e=null);void 0===f&&(f=null);var h=this;if(RES.isGroupLoaded(b))a&&a.call(e,f);else{var g=function(c){c.groupName==b&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,g,h),a&&a.call(e,f))};RES.createGroup(b,
c,!0);RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,g,h);RES.loadGroup(b)}};c.cacheRender=function(c,b,a){c&&c.parent&&c.parent.removeChild(c);a&&RenderTextureManager.destroyBitmap(a);a=RenderTextureManager.getBitmap(c);b.addChild(a);return a};c.isInRechargeActivity=function(){if(ProxyUtils.currentTime<ProxyUtils.rechargeStartTime)return!1;var c=(new Date).getTime()-DataCenter.getInstance().gameStartTime;return ProxyUtils.rechargeEndTime-ProxyUtils.currentTime>c?!0:!1};c.isInActivity=function(){if(ProxyUtils.currentTime<=
ProxyUtils.startTime)return!1;var c=(new Date).getTime()-DataCenter.getInstance().gameStartTime;return ProxyUtils.endTime-ProxyUtils.currentTime>c?!0:!1};c.getCurrentTime=function(){var c=(new Date).getTime()-DataCenter.getInstance().gameStartTime;return ProxyUtils.currentTime+c};c.rebornAward=function(){return!1};c.setRebornAward=function(){};c.loginAward=function(){};c.getUserName=function(){return ProxyUtils.nickName&&""!=ProxyUtils.nickName?ProxyUtils.nickName:ProxyUtils.defaultNickName};c.lockGame=
function(){MainTickController.getInstance().isPause=!0;GameMainLayer.instance.showLockLayer("\u65f6\u95f4\u6821\u9a8c\u5931\u8d25,\u8bf7\u6821\u6b63\u8bbe\u5907\u65f6\u95f4")};c.getLayoutY=function(c){return egret.MainContext.instance.stage.stageHeight-960+c};c.getPosY=function(c){return(egret.MainContext.instance.stage.stageHeight-960)/2+c};c.unique=function(c){for(var b=[],a={},e=0,f;null!=(f=c[e]);e++)a[f]||(b.push(f),a[f]=!0);return b};c.loginout=function(){doAction(Const.GAME_LOGOUT);DataCenter.getInstance().countdown.dispose();
HeroController.getInstance().dispose();SkillController.getInstance().dispose();MainTickController.getInstance().dispose();NewFriendController.getInstance().dispose();GuideManager.dispose();Time.dispose();GameMainLayer.instance.parent.removeChild(GameMainLayer.instance);delete __moo_filter.get_holy_effect;delete __moo_filter.reborn_skill_refresh;if(c.isQQBOfChannel())if(c.hideWechatButton())EgretH5Sdk.logout(function(){var b=new LoadingUIForQQB(!1);egret.MainContext.instance.stage.addChild(b)},this);
else{var d=new LoadingUIForQQB(!1);egret.MainContext.instance.stage.addChild(d)}else d=new LoginOutLayer,egret.MainContext.instance.stage.addChild(d)};c.lockScreen=function(){egret.MainContext.instance.stage.touchEnabled=!1};c.unlockScreen=function(){egret.MainContext.instance.stage.touchEnabled=!0};c.formatTimeToStr=function(c){var b=Math.floor(c/86400);if(2<b)return"\u4e45\u672a\u4e0a\u7ebf";if(0<b)return b+"\u5929\u524d";b=Math.floor(c/3600);if(0<b)return b+"\u5c0f\u65f6\u524d";c=Math.floor(Math.floor(c%
3600)/60);return 30<c?c+"\u5206\u949f\u524d":5<c&&30>c?"\u521a\u521a":"\u5728\u7ebf"};c.parseFormat=function(c){for(var b=[],a=1;a<arguments.length;a++)b[a-1]=arguments[a];return c.replace(/\$\{?(([0-9]+)(\:([^\}]+))?)\}?/gi,function(a,c,d,g,l){return"x"==l?b[d].toString(16).toLowerCase():"X"==l?b[d].toString(16).toUpperCase():b[d]})};c.pauseMainGame=function(){doAction("pause_main_game");MainTickController.getInstance().guildPause=!0};c.resumeMainGame=function(){doAction("resume_main_game");MainTickController.getInstance().guildPause=
!1};c.drop=function(c){var b=0;10>c?b=c=1:10<c&&(c*=0.1,b=GuildModel.getARandom());if(0!=b){c=new NumberModel(c);var a={};a.coins=c.pieces(b);a.type=99;a.updated=!0;doAction(Const.DROP_COIN,a)}};c.getVersion=function(){var c=location.href;if(c&&(c=c.split("/")))for(var b=0,a=c.length;b<a;b++){var e=c[b],f=e.substring(1,e.length-1);if("v"==e.substring(0,1)&&!isNaN(f))return e}};c.isShowGuildRedDot=function(){var d=c.getGuildRechData();return d&&0>=d.payNum?!0:!1};c.getGuildRechData=function(){return ActivityManager.getInstance().getActivityByType(ActivityType.guildrecharge)};
c.getGuildRechCurStep=function(){var c=this.getGuildRechData(),b;if(c){var a=c.payNum,c=c.l,e;for(e in c)a>=c[e].discount&&(b=e);return parseInt(b)}return 0};c.getRealCurStep=function(){return this.getGuildRechData().get};c.getStepByStep=function(d){0>parseInt(d)?d=0:parseInt(d)>c.getMaxStep()&&(d=c.getMaxStep());d=d.toString();var b=c.getGuildRechData();return b?b.l[d]:null};c.getMaxStep=function(){var d=c.getGuildRechData(),d=Object.keys(d.l);return parseInt(d[d.length-1])};c.getNextStep=function(){var d=
c.getRealCurStep().toString(),b=c.getGuildRechData(),b=Object.keys(b.l),d=b.indexOf(d);return parseInt(b[d+1])};c.getNextDataStep=function(){var d=c.getRealCurStep();return c.getStepByStep(d+1)};c.getCurisCanRecv=function(){var d=c.getGuildRechCurStep();return c.getRealCurStep()<d};c.getRechStepCanRecv=function(){var d=c.getGuildRechCurStep(),b=c.getRealCurStep();if(!d)return 0;if(b<c.getMaxStep()){if(b<=d)return b+1}else return-1};c.isHttps=function(){return"1"==c.getQuery("sec")};c.hurtTxtPool=
[];c.coinTxtPool=[];return c}();GameUtils.prototype.__class__="GameUtils";var BuffModel=function(){function c(b){this.configId=b;this.config=RES.getRes("buffConfig")[b]}var d=c.prototype;d.getTargetHero=function(){return this.config.targetHero};d.getEffectType=function(){return this.config.effectType};d.getValue=function(){return this.config.value};c.createByConfigID=function(b){return BuffModelCache.getInstance().getCache(b)};return c}();BuffModel.prototype.__class__="BuffModel";
var BuffModelCache=function(){function c(){this._models=[]}var d=c.prototype;c.getInstance=function(){null==this._instance&&(this._instance=new c);return this._instance};d.getCache=function(b){if(this._models[b])return this._models[b];var a=new BuffModel(b);return this._models[b]=a};return c}();BuffModelCache.prototype.__class__="BuffModelCache";
var TouchController=function(){function c(b,a,c){void 0===c&&(c=0.1);this._scaleObj={};this._scaleFactor=c;this._selector=b;this._context=a}var d=c.prototype;d.dispose=function(){this._context=this._selector=null};d.message=function(b,a,c,d){var h=this;this._scaleObj.hasOwnProperty(a.hashCode)||(this._scaleObj[a.hashCode]={scaleX:a.scaleX,scaleY:a.scaleY});if(0==b){if(0<this._scaleFactor){var g=this._scaleObj[a.hashCode];egret.Tween.removeTweens(a);egret.Tween.get(a).to({scaleX:g.scaleX-this._scaleFactor,
scaleY:g.scaleY-this._scaleFactor},100);return}}else if(1==b&&(g=a,0<this._scaleFactor)){g=this._scaleObj[a.hashCode];egret.Tween.removeTweens(a);egret.Tween.get(a).to({scaleX:g.scaleX,scaleY:g.scaleY},100).call(function(a){delete h._scaleObj[a.hashCode]},this,[a]);return}this.doCallback(b,a,c,d)};d.doCallback=function(b,a,c,d){this._selector&&this._context&&this._selector.call(this._context,b,a,c,d)};return c}();TouchController.prototype.__class__="TouchController";
var AnimationClear=function(){function c(){}c.clear=function(d){d&&(egret.Tween.removeTweens(d),c.clearAnimation(d))};c.clearAnimation=function(d){d=d.hashCode;if(c._animationMap.hasOwnProperty(d)){for(var b=c._animationMap[d];0<b.length;)b.shift().dispose();delete c._animationMap[d]}};c.addAnimation=function(d){var b=d.getTarget().hashCode;c._animationMap.hasOwnProperty(b)||(c._animationMap[b]=[]);c._animationMap[b].push(d)};c.removeAnimation=function(d){var b=d.getTarget().hashCode;if(c._animationMap.hasOwnProperty(b)){var a=
c._animationMap[b],e=a.indexOf(d);-1<e&&a.splice(e,1);d.dispose();0==a.length&&delete c._animationMap[b]}};c._animationMap={};return c}();AnimationClear.prototype.__class__="AnimationClear";
var DropAnimation=function(c){function d(a,b){c.call(this,a);this._speedY=-450;this._a=750;this._speedX=b}__extends(d,c);var b=d.prototype;b.update=function(a){1<a&&(a=1);this._target.x=this.startX+this._speedX*a;this._target.y=this.startY+(this._speedY*a+this._a*a*a)};b.run=function(a){this.startX=a.x;this.startY=a.y;c.prototype._run.call(this,a)};return d}(GameAnimation);DropAnimation.prototype.__class__="DropAnimation";
var DropAnimation1=function(c){function d(a,b){c.call(this,a);this._speedY=-50;this._a=50;this._speedX=b}__extends(d,c);var b=d.prototype;b.update=function(a){1<a&&(a=1);this._target.x=this.startX+this._speedX*a;this._target.y=this.startY+(this._speedY*a+this._a*a*a)};b.run=function(a){this.startX=a.x;this.startY=a.y;c.prototype._run.call(this,a)};return d}(GameAnimation);DropAnimation1.prototype.__class__="DropAnimation1";
var DropAnimation2=function(c){function d(a,b){c.call(this,a);this._speedY=-400;this._a=412;this._speedX=b}__extends(d,c);var b=d.prototype;b.update=function(a){1<a&&(a=1);this._target.x=this.startX+this._speedX*a;this._target.y=this.startY+(this._speedY*a+this._a*a*a)};b.run=function(a){this.startX=a.x;this.startY=a.y;c.prototype._run.call(this,a)};return d}(GameAnimation);DropAnimation2.prototype.__class__="DropAnimation2";
var LevelUpButton=function(c){function d(a){c.call(this);this._status=0;this._showTime=2E3;this._lastTime=this._timeID=-1;this._tickTime=500;this._type="";this._isJiuWei=this._lockEffect=this._isUnlockSkill=!1;this.initButton(a)}__extends(d,c);var b=d.prototype;b.initButton=function(a){this._type=a;var b=[],b="hero"==a?"lvup100_btn hero_lvup10_disable lvup10_btn hero_lvup10_disable top_tab_1 hero_lvup_disable".split(" "):"lvup100_btn hero_lvup10_disable lvup10_btn hero_lvup10_disable hero_lvup_btn hero_lvup_disable".split(" ");
this.button100=new LevelUpButton1;this.button100.init(100,b[0],b[1]);this.button100.addOnClick(this.onClickHandler100,this);this.button100.useZoomOut(!0);this.addChild(this.button100);this.button100.x=-285;this.button10=new LevelUpButton1;this.button10.init(10,b[2],b[3]);this.button10.addOnClick(this.onClickHandler10,this);this.button10.useZoomOut(!0);this.addChild(this.button10);this.button10.x=-150;this.button100.y=this.button10.y=8;this.button1=new LevelUpButton2;this.button1.init(b[4],b[5]);this.button1.addOnClick(this.onClickHandler1,
this);this.button1.useZoomOut(!0);this.addChild(this.button1);this.button1.y=8;this.button1.width=165;this.button1.height=68;this.button10.width=115;this.button10.height=68;this.button100.width=115;this.button100.height=68;this.resetStatus(0)};b.refreshData=function(a,b,c,d){void 0===b&&(b=!1);void 0===c&&(c=0);void 0===d&&(d=!1);this._data=a;this._isSpecial=b;this._idx=c;this.refreshAllButton();d&&this.timeOut()};b.refreshAllButton=function(){this.refreshButton()};b.onClickHandler100=function(){this.doCallBack(100,
this._costList[2])};b.onClickHandler10=function(){this.doCallBack(10,this._costList[1]);this.button1.removewNewTip()};b.onClickHandler1=function(){!1==this._isUnlockSkill?!1==this._isJiuWei?this.doCallBack(1,this._costList[0]):1==DataCenter.getInstance().isPay.getValue()?this.doCallBack(1001,this._costList[0]):GameMainLayer.instance.showPaymentRecommendLayer():this.doCallBack(1E3,this._costList[0]);this.button1.removewNewTip()};b.setCallBack=function(a,b){this._context=a;this._selector=b};b.doCallBack=
function(a,b){if(!1==this._lockEffect)if(0==this._status){var c=(new Date).getTime();-1==this._lastTime?this._lastTime=c:c-this._lastTime<this._tickTime?(this.resetStatus(1),-1!=this._timeID&&Time.clearTimeout(this._timeID),this._timeID=Time.setTimeout(this.timeOut,this,this._showTime)):this._lastTime=c}else-1!=this._timeID&&Time.clearTimeout(this._timeID),this._timeID=Time.setTimeout(this.timeOut,this,this._showTime);this.hideButton();this._context&&this._selector&&this._selector.call(this._context,
a,b)};b.timeOut=function(){this.resetStatus(0)};b.refreshButton=function(){this._lockEffect=this._isUnlockSkill=this._isJiuWei=!1;this._costList=[];this.button1.hideYellow();if(this._isSpecial)this.dealWithMainHero();else if(this._data instanceof HeroModel){if(this._data.isDead()){this.button1.setEnabled(!1);return}var a=this._data.getCostNum();this._costList=a;var b=DataCenter.getInstance().hasEnoughSc(a[1]);this.button10.setEnabled(b&&this._data.canLevelUp(10));b=DataCenter.getInstance().hasEnoughSc(a[2]);
this.button100.setEnabled(b&&this._data.canLevelUp(100));this.button10.refreshView(a[1]);this.button100.refreshView(a[2]);var c="\u5347\u7ea7";0==this._data.lv?c=this._data.isHero()?"\u96c7\u4f63":"\u9886\u609f":1E3==this._data.lv&&(c="\u8fdb\u9636");if((b=this._data.nextSkill)&&b.getOpenLevel()<=this._data.getSkillOpenLv()){this.button1.showYellow();var a=new NumberModel,d=new NumberModel;if(this._data.isEvolution()){a.add(GameUtils.getCallCost(b.config.rebornCost));var g=this._data.config.callCost.split(",")}else a.add(GameUtils.getCallCost(b.config.cost)),
g=this._data.config.callCost.split(",");d.add(g[0]);a.times(d.getDataNum());a=a.getNumer();d=DataCenter.getInstance().hasEnoughSc(a);this.button1.setEnabled(d);this.button1.refreshView(a,""+b.config.name,"\u89e3\u9501\u6280\u80fd");this._costList[0]=a;this._isUnlockSkill=!0}else{1E3==this._data.lv&&(this.button1.showYellow(),d=new NumberModel,d.add(this._data.config.rebornRatio),b=new NumberModel,g=this._data.config.callCost.split(","),b.add(g[0]),d.times(b.getDataNum()),a[0]=d.getNumer());d=DataCenter.getInstance().hasEnoughSc(a[0]);
if(1007==this._data.configId&&0==this._data.lv){if(!1==d){c=1==DataCenter.getInstance().isPay.getValue()?"\u7acb\u5373\u9886\u53d6":"\u9996\u5145\u5373\u9001";this.button1.setEnabled(!0);this.button1.refreshView("","",c);this._isJiuWei=!0;return}if(1==DataCenter.getInstance().isPay.getValue()){c="\u7acb\u5373\u9886\u53d6";this.button1.setEnabled(!0);this.button1.refreshView("","",c);this._isJiuWei=!0;return}}this.button1.setEnabled(d);d&&0==this._data.lv?this.button1.createNewTip():this.button1.removewNewTip();
1E3==this._data.lv?this.button1.refreshView(a[0],"",c):0==this._data.lv&&this._data.config.costGold?(this.button1.setEnabled(!0),this.button1.refreshView(this._data.config.costGold,"+"+this._data.nextDPS+" \u79d2\u4f24",c,!0)):this.button1.refreshView(a[0],"+"+this._data.nextDPS+" \u79d2\u4f24",c)}}else this._data instanceof SkillModel&&this.dealWithSkill();this.hideButton()};b.dealWithSkill=function(){this._lockEffect=!0;this.timeOut();var a=this._data.config.level,b=HeroController.getInstance().mainHero.lv;
a>b?(b=this._data.getMainCost(),this.button1.setEnabled(!1),this.button1.refreshView(b,"","Lv."+a+"\u89e3\u9501")):(b=this._data.getMainCost(),a=DataCenter.getInstance().hasEnoughSc(b),this.button1.setEnabled(a),0==this._data.lv?(this.button1.refreshView(b,"","\u70b9\u4eae"),a?this.button1.createNewTip():this.button1.removewNewTip()):this.button1.refreshView(b,"+"+this._data.config.value*this._data.config.showTimes,"\u5347\u7ea7"),this._costList.push(b))};b.dealWithMainHero=function(){if(0==this._idx){var a=
HeroController.getInstance().mainHero,b=a.getCostNum();this._costList=b;var c=DataCenter.getInstance().hasEnoughSc(b[0]);this.button1.setEnabled(c);c=DataCenter.getInstance().hasEnoughSc(b[1]);this.button10.setEnabled(c);c=DataCenter.getInstance().hasEnoughSc(b[2]);this.button100.setEnabled(c);this.button10.refreshView(b[1]);this.button100.refreshView(b[2]);this.button1.refreshView(b[0],"+"+a.nextTapDamage+" \u70b9\u51fb\u4f24\u5bb3","\u5347\u7ea7")}else 7==this._idx&&(a=HeroController.getInstance().mainHero,
600<=a.lv?(this.button1.setEnabled(!0),this.button1.refreshView("","","\u91cd\u751f")):(this.button1.setEnabled(!1),this.button1.refreshView("","","Lv.600\u89e3\u9501")))};b.createNewTip=function(){this.button1.createNewTip()};b.removeNewTip=function(){this.button1.removewNewTip()};b.hideButton=function(){!1==this.button10._enabled&&(this.button10.visible=!1);!1==this.button100._enabled&&(this.button100.visible=!1)};b.resetStatus=function(a){this._status=a;1==this._status?(this.button10.visible=!0,
this.button100.visible=!0):(this.button10.visible=!1,this.button100.visible=!1)};b.dispose=function(){c.prototype.dispose.call(this);-1!=this._timeID&&Time.clearTimeout(this._timeID)};return d}(BaseContainer);LevelUpButton.prototype.__class__="LevelUpButton";
var LevelUpButton1=function(c){function d(){c.call(this);this.anchorX=this.anchorY=0.5}__extends(d,c);var b=d.prototype;b.init=function(a,b,c){b=ResourceUtils.createBitmapFromSheet(b,"commonRes");this.addChild(b);c=ResourceUtils.createBitmapFromSheet(c,"commonRes");c.visible=!1;this.addChild(c);this.coin=ResourceUtils.createBitmapFromSheet("coin_icon","commonRes");this.addChild(this.coin);this.coin.x=30;this.coin.y=10;this.coin.scaleX=this.coin.scaleY=0.5;this.txt=new egret.TextField;this.addChild(this.txt);
this.txt.text="+"+a;this.txt.width=60;this.txt.height=30;this.txt.size=20;this.txt.x=45;this.txt.y=30;this._costLabel=new egret.TextField;this.addChild(this._costLabel);this._costLabel.size=18;this._costLabel.width=80;this._costLabel.x=50;this._costLabel.y=10};b.refreshView=function(a){this._costLabel.text=a};b.hideMoney=function(){this.coin.visible=!1};b.changeIcon=function(){this.coin.texture=ResourceUtils.createBitmapFromSheet("spar","iconRes").texture};b.changeLevel=function(a){this.txt.text=
"+"+a};return d}(SimpleButton);LevelUpButton1.prototype.__class__="LevelUpButton1";
var LevelUpButton2=function(c){function d(){c.call(this);this._newHeroTip=null;this.anchorX=this.anchorY=0.5}__extends(d,c);var b=d.prototype;b.setEnabledState=function(){this._yellowContainer.visible?(this._yellowContainer.getChildAt(0).visible=this._enabled,this._yellowContainer.getChildAt(1).visible=!this._enabled):(this._normal.visible=this._enabled,this._dis&&(this._dis.visible=!this._enabled))};b.showYellow=function(){this._yellowContainer.visible=!0};b.hideYellow=function(){this._yellowContainer.visible=
!1};b.init=function(a,b,c){void 0===c&&(c="coin_icon");this._container=new egret.DisplayObjectContainer;this._normal=ResourceUtils.createBitmapFromSheet(a,"commonRes");this._container.addChild(this._normal);this._dis=ResourceUtils.createBitmapFromSheet(b,"commonRes");this._dis.visible=!1;this._container.addChild(this._dis);this._yellowContainer=new egret.DisplayObjectContainer;this._container.addChild(this._yellowContainer);a=ResourceUtils.createBitmapFromSheet("unlock_skill_btn");this._yellowContainer.addChild(a);
b=ResourceUtils.createBitmapFromSheet(b);this._yellowContainer.addChild(b);this._yellowContainer.visible=!1;this._coinIcon=ResourceUtils.createBitmapFromSheet(c);this._container.addChild(this._coinIcon);"coin_icon"==c?(this._coinIcon.x=42,this._coinIcon.y=-22,this._coinIcon.scaleX=this._coinIcon.scaleY=0.5):(this._coinIcon.x=42,this._coinIcon.y=-28,this._coinIcon.scaleX=this._coinIcon.scaleY=0.58);this._goldIcon=ResourceUtils.createBitmapFromSheet("gold_icon");this._container.addChild(this._goldIcon);
this._goldIcon.x=42;this._goldIcon.y=-20;this._goldIcon.scaleX=this._goldIcon.scaleY=0.54;this._goldIcon.visible=!1;this._staticLabel=new egret.TextField;this._container.addChild(this._staticLabel);this._staticLabel.text="\u5347\u7ea7";this._staticLabel.width=150;this._staticLabel.x=85;this._staticLabel.y=12;this._staticLabel.size=20;this._staticLabel.textColor=0;this._staticLabel.textAlign=egret.HorizontalAlign.CENTER;this._staticLabel.anchorX=0.5;this._costLabel=new egret.TextField;this._container.addChild(this._costLabel);
this._costLabel.x=70;this._costLabel.y=-20;this._costLabel.size=20;this._costLabel.width=100;this._costLabel.textColor=16777215;this._valueLabel=new egret.TextField;this._container.addChild(this._valueLabel);this._valueLabel.x=88;this._valueLabel.y=35;this._valueLabel.size=18;this._valueLabel.textAlign=egret.HorizontalAlign.CENTER;this._valueLabel.anchorX=0.5;this._valueLabel.textColor=0;"holy_icon"==c&&(this._coinIcon.y=-28,this._coinIcon.x=42,this._coinIcon.scaleX=this._coinIcon.scaleY=0.58,this._costLabel.x=
80);addFilter(Const.GET_NEW_HERO,this.getNewHero,this);this.addChild(this._container);this._container.cacheAsBitmap=!0};b.getNewHero=function(a){this._newHeroTip&&a++;return a};b.createNewTip=function(){this._newHeroTip||(this._newHeroTip=ResourceUtils.createBitmapFromSheet("new_hero_tip","commonRes"),this._newHeroTip.x=20,this._newHeroTip.y=20,this._newHeroTip.anchorX=this._newHeroTip.anchorY=0.5,this.addChild(this._newHeroTip),egret.Tween.get(this._newHeroTip,{loop:!0}).to({scaleX:1.2,scaleY:1.2},
500).to({scaleX:1,scaleY:1},500))};b.removewNewTip=function(){this._newHeroTip&&(egret.Tween.removeTweens(this._newHeroTip),this.removeChild(this._newHeroTip),this._newHeroTip=null)};b.refreshView=function(a,b,c,d){void 0===d&&(d=!1);this._costLabel.text=a;this._valueLabel.text=b;this._staticLabel.text=c;this._coinIcon.visible=""==a?!1:!d;""==b?this._staticLabel.y=22:(this._staticLabel.y=12,this._valueLabel.y=35);this._goldIcon.visible=d};b.changeGlodIcon=function(){this._coinIcon.texture=ResourceUtils.createBitmapFromSheet("spar",
"iconRes").texture};return d}(SimpleButton);LevelUpButton2.prototype.__class__="LevelUpButton2";
var BoxSkill=function(){function c(b){this.config=RES.getRes("skillConfig")[b]}var d=c.prototype;d.execute=function(){var b=DataCenter.getInstance().totalData.mainHero.skill;this._lv=1;0<b[this.config.configId]&&(this._lv=b[this.config.configId]);doAction(Const.LOCK_SKILL,this.config.configId);b=this.config.base+this.config.value*this._lv;this._timeID=Time.setTimeout(this.countDown,this,15E3);switch(this.config.configId){case 22002:doAction(Const.BEGIN_MAIN_SKILL_2,b);break;case 22003:doAction(Const.BEGIN_MAIN_SKILL_3);
HeroController.getInstance().mainHero.changeCritPro(b);break;case 22004:doAction(Const.CHANGE_SPEED,b+1);break;case 22005:doAction(Const.BEGIN_MAIN_SKILL_4),HeroController.getInstance().mainHero.extraHurt=b+1}addFilter(Const.IS_BOX_SKILL_USING,this.isBoxSkillUsing,this);addAction(Const.GAME_LOGOUT,this.dispose,this)};d.isBoxSkillUsing=function(b){if(b==this.config.configId)return!0};d.countDown=function(){doAction(Const.UNLOCK_SKILL,this.config.configId);var b=this.config.base+this.config.value*this._lv;
switch(this.config.configId){case 22002:doAction(Const.STOP_MAIN_SKILL_2);break;case 22003:doAction(Const.STOP_MAIN_SKILL_3);HeroController.getInstance().mainHero.changeCritPro(-b);break;case 22004:doAction(Const.CHANGE_SPEED,1/(b+1));break;case 22005:doAction(Const.STOP_MAIN_SKILL_4),HeroController.getInstance().mainHero.extraHurt=1}doAction(Const.BOX_SKILL_OVER,this.config.configId);this._timeID=null;this.dispose()};d.dispose=function(){removeEventsByTarget(this);this._timeID&&Time.clearTimeout(this._timeID)};
return c}();BoxSkill.prototype.__class__="BoxSkill";var WXUtils=function(){function c(){}c.showAward=function(c,b,a,e,f){void 0===b&&(b=!0);void 0===a&&(a=!1);void 0===e&&(e=null);void 0===f&&(f=null);c&&GameMainLayer.instance.showShareLayer(c,function(){"diamond"==c.type&&a&&ProxyUtils.getDiamond("share");e&&e.call(f)})};return c}();WXUtils.prototype.__class__="WXUtils";
var ActivityDrop=function(c){function d(){c.apply(this,arguments)}__extends(d,c);d.init=function(b){b.data&&(b.data.v&&(d.VERSION=b.data.v),b.data.name&&(d.dropName=b.data.name),b.data.des&&(d.msg=b.data.des))};d.VERSION=1;d.msg='    \u559c\u5e86\u5143\u5bb5\u4f73\u8282! <font color="0xff0000">2\u670820\u65e5</font>\u81f3<font color="0xff0000">2\u670830\u65e5</font>\u671f\u95f4\uff0c\u70b9\u51fb\u5c4f\u5e55\u5c06\u83b7\u5f97\u5143\u5bb5\uff0c\u81ea\u5df1\u52a8\u624b\u4e30\u8863\u8db3\u98df\uff01';
d.dropName="\u5143\u5bb5";return d}(BaseContainer);ActivityDrop.prototype.__class__="ActivityDrop";
var SoundEffects=function(){function c(){this._volume=0.5;this._cache={};this._sounds={};this._loadingCache=[];var b=new egret.Timer(6E4);b.addEventListener(egret.TimerEvent.TIMER,this.dealSoundTimer,this);b.start()}var d=c.prototype;d.setVolume=function(b){};d.play=function(b){var a=RES.getRes(b);a?(a.setVolume(this._volume),a?(a.play(),this._cache[b]&&(this._cache[b]=egret.getTimer()),this._sounds[b]=a):-1==this._loadingCache.indexOf(b)&&(this._loadingCache.push(b),RES.createGroup(b,[b],!0),1==
this._loadingCache.length&&RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.loadGroup(b))):console.log("\u97f3\u6548 "+b+" \u672a\u52a0\u8f7d")};d.stop=function(b){this._sounds.hasOwnProperty(b)&&this._sounds[b].pause()};d.onResourceLoadComplete=function(b){b=b.groupName;var a=this._loadingCache.indexOf(b);if(-1!=a){this._loadingCache.splice(a,1);0==this._loadingCache.length&&RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,
this);this._cache[b]=egret.getTimer();try{var c=RES.getRes(b);c.setVolume(this._volume);c.play();this._sounds[b]=c}catch(d){console.log("\u97f3\u6548\u9519\u8bef:"+b)}}};d.dealSoundTimer=function(b){b=egret.getTimer();for(var a in this._cache)b-this._cache[a]>=Snd.CLEAR_TIME&&(delete this._cache[a],delete this._sounds[a],RES.destroyRes(a))};return c}();SoundEffects.prototype.__class__="SoundEffects";
var Snd=function(){function c(){}c.init=function(){c.ef=new SoundEffects;c.bg=new SoundBg;c.effectOn=!0;c.bgOn=!0;c.CLEAR_TIME=18E4};c.playEffect=function(d){c.effectOn&&c.ef.play(d)};c.playBg=function(d){c.bgOn&&c.bg.play(d)};c.stopBg=function(){c.bg.stop()};c.setEffectOn=function(d){c.effectOn=d};c.setBgOn=function(d){c.bgOn=d;c.bgOn?c.playBg(""):c.stopBg()};return c}();Snd.prototype.__class__="Snd";
var SoundBg=function(){function c(){this._volume=0.5;this._currBg="";this._cache={};this._loadingCache=[]}var d=c.prototype;d.setVolume=function(b){};d.stop=function(){this._currSound&&this._currSound.pause();this._currSound=null;this._currBg=""};d.play=function(b){if(this._currBg!=b){this.stop();this._currBg=b;var a=RES.getRes(b);a?(this._currSound=a,this._currSound.play(!0),this._cache[b]&&(this._cache[b]=egret.getTimer())):-1==this._loadingCache.indexOf(b)&&(this._loadingCache.push(b),RES.createGroup(b,
[b],!0),1==this._loadingCache.length&&RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.loadGroup(b))}};d.onResourceLoadComplete=function(b){b=b.groupName;var a=this._loadingCache.indexOf(b);if(-1!=a&&(this._loadingCache.splice(a,1),0==this._loadingCache.length&&RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),this._cache[b]=egret.getTimer(),this._currBg==b))try{this._currSound=RES.getRes(b),this._currSound.setVolume(this._volume),
this._currSound.play(!0)}catch(c){console.log("\u80cc\u666f\u97f3\u4e50\u9519\u8bef:"+b)}};d.dealSoundTimer=function(b){b=egret.getTimer();for(var a in this._cache)a!=this._currBg&&b-this._cache[a]>=Snd.CLEAR_TIME&&(delete this._cache[a],RES.destroyRes(a))};return c}();SoundBg.prototype.__class__="SoundBg";
var ProxyEvent=function(c){function d(a,b,d,h){c.call(this,a,d,h);this._responseData=b.responseData;this._errorCode=b.errorCode;this._errorMessage=b.errorMessage;this._isRequestSucceed=b.isRequestSucceed;this._isResponseSucceed=b.isResponseSucceed}__extends(d,c);var b=d.prototype;Object.defineProperty(b,"responseData",{get:function(){return this._responseData},enumerable:!0,configurable:!0});Object.defineProperty(b,"errorCode",{get:function(){return this._errorCode},enumerable:!0,configurable:!0});
Object.defineProperty(b,"errorMessage",{get:function(){return this._errorMessage},enumerable:!0,configurable:!0});Object.defineProperty(b,"isResponseSucceed",{get:function(){return this._isResponseSucceed},enumerable:!0,configurable:!0});Object.defineProperty(b,"isRequestSucceed",{get:function(){return this._isRequestSucceed},enumerable:!0,configurable:!0});d.CANCEL="cancel";d.REQUEST_SUCCEED="requestSucceed";d.REQUEST_FAIL="fail";d.RESPONSE_SUCCEED="respnseSucceed";d.RESPONSE_ERROR="error";d.ERROR=
"global_error";d.TIME_OUT="timeout";return d}(egret.Event);ProxyEvent.prototype.__class__="ProxyEvent";var SingleProxy=function(c){function d(b){void 0===b&&(b={});c.call(this,b)}__extends(d,c);d.prototype.getParamString=function(){return JSON.stringify(this._params)};return d}(Proxy);SingleProxy.prototype.__class__="SingleProxy";
var HeroItemView=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this._bg=ResourceUtils.createBitmapFromSheet("hero_item_bg","commonRes");this.addChild(this._bg);this._bg1=ResourceUtils.createBitmapFromSheet("skill_item_bg","commonRes");this.addChild(this._bg1);this._touchArea=ResourceUtils.createBitmapByName("mask");this._touchArea.alpha=0;this._touchArea.width=430;this._touchArea.height=100;this._touchArea.touchEnabled=!0;this.addChild(this._touchArea);
this._touchArea.addEventListener(egret.TouchEvent.TOUCH_TAP,this.heroClick,this);this._evoMask=ResourceUtils.createBitmapFromSheet("gold_border");this.addChild(this._evoMask);this._evoMask.x=5;this._evoMask.y=0;this._iconContainer=new egret.DisplayObjectContainer;this._iconContainer.x=4;this._iconContainer.y=-3;this.addChild(this._iconContainer);this._skillIconContainer=new egret.DisplayObjectContainer;this.addChild(this._skillIconContainer);this._skillIconContainer.y=60;this._skillIconContainer.x=
110;this._staticContainer=new egret.DisplayObjectContainer;this.addChild(this._staticContainer);this._staticContainer.x=20;this._staticContainer.y=4;this._labelContainer=new egret.DisplayObjectContainer;this._staticContainer.addChild(this._labelContainer);this._dpsLabel=new egret.TextField;this._dpsLabel.x=260;this._dpsLabel.y=32;this._dpsLabel.size=20;this._dpsLabel.text="\u79d2\u4f24:";this._dpsLabel.textColor=16777215;this._labelContainer.addChild(this._dpsLabel);this._desLabel=new egret.TextField;
this._labelContainer.addChild(this._desLabel);this._desLabel.x=310;this._desLabel.y=32;this._desLabel.size=20;this._desLabel.textColor=16777215;this._staticlvLabel=new egret.TextField;this._staticlvLabel.x=87;this._staticlvLabel.y=32;this._staticlvLabel.size=20;this._staticlvLabel.text="Lv.";this._labelContainer.addChild(this._staticlvLabel);this._lvLabel=new egret.TextField;this._labelContainer.addChild(this._lvLabel);this._lvLabel.x=120;this._lvLabel.y=32;this._lvLabel.textColor=1828822;this._lvLabel.size=
20;this._nameLabel=new egret.TextField;this._staticContainer.addChild(this._nameLabel);this._nameLabel.x=87;this._nameLabel.y=5;this._nameLabel.size=20;this._freeLabelContainer=new egret.DisplayObjectContainer;this._staticContainer.addChild(this._freeLabelContainer);var a=new egret.TextField;this._freeLabelContainer.addChild(a);a.text="\u89e3\u5f00\u82b1\u65e0\u7f3a\u5c01\u5370,\u5373\u52a0";a.size=20;a.x=110;a.y=50;a=new egret.TextField;this._freeLabelContainer.addChild(a);a.text="14.14K";a.size=
20;a.textColor=65280;a.x=296;a.y=50;a=new egret.TextField;this._freeLabelContainer.addChild(a);a.text="\u79d2\u4f24";a.size=20;a.x=360;a.y=50;this._tipsContainer=new egret.DisplayObjectContainer;this._tipsContainer.x=210;this._tipsContainer.y=32;a=new egret.TextField;a.text="\u62db\u52df\u6761\u4ef6:";a.size=20;this._tipsContainer.addChild(a);a=ResourceUtils.createBitmapFromSheet("coin_icon");a.scaleX=a.scaleY=0.5;a.x=90;this._tipsContainer.addChild(a);this._tipsLabel=new egret.TextField;this._tipsContainer.addChild(this._tipsLabel);
this._tipsLabel.text="1.1aa";this._tipsLabel.size=20;this._tipsLabel.x=110;this._staticContainer.addChild(this._tipsContainer);this._staticContainer.cacheAsBitmap=!0;this._button=new LevelUpButton("hero");this._button.x=520;this._button.y=50;this._button.setCallBack(this,this.onClick);this.addChild(this._button);this._deathMask=ResourceUtils.createBitmapFromSheet("red_mask");this.addChild(this._deathMask);this._deathMask.visible=!1;addAction(Const.CHANGE_COIN,this.changeCoin,this);addAction(Const.REFRESH_SKILL_VIEW,
this.refresh,this);addAction(Const.REFRESH_HERO_ITEM,this.changeCoin,this);addAction(Const.EVOLVE_REFRESH,this.refresh,this)};b.changeCoin=function(){if(this._model&&!applyFilters(Guide.IS_SKILL_LAYER_EXSIT)&&"hero"==applyFilters("get_current_tag"))if(this.showOrNot()?(this._button.visible=!0,this._button.refreshData(this._model)):this._button.visible=!1,0==this._model.lv)if(this._dpsLabel.text="\u672a\u62db\u52df",this._dpsLabel.visible=!0,this._desLabel.visible=!1,this._tipsContainer.visible=!1,
1007==this._model.configId){var a=this._model.getCostNum(),a=DataCenter.getInstance().hasEnoughSc(a[0]);1==DataCenter.getInstance().isPay.getValue()||!1==a?(this._freeLabelContainer.visible=!0,this._labelContainer.visible=!1,this._skillIconContainer.visible=!1):(this._dpsLabel.text="\u672a\u62db\u52df",this._desLabel.visible=!1);this._button.visible=!0}else this._dpsLabel.text="\u672a\u62db\u52df",this._desLabel.visible=!1,1006<=this._model.configId&&!this.showOrNot()&&(this._tipsContainer.visible=
!0,this._dpsLabel.visible=!1,this._tipsLabel.text=this._model.getCostNumByLevel(1));else this._dpsLabel.text="\u79d2\u4f24:",this._desLabel.visible=!0};b.heroClick=function(){this._model.isDead()?GameMainLayer.instance.showDieLayer(this._model):GameMainLayer.instance.showHeroDetailLayer(this._model)};b.onClick=function(a,b){var c;if(1==a)c=this.levelUp1();else if(10==a)c=this.levelUp10();else if(100==a)c=this.levelUp100();else if(1E3==a)c=this.unLockSkill();else if(1001==a)c=this.getjiuwei();else throw Error("\u4f60\u6309\u7684\u5565");
c&&(1==a&&1==this._model.lv&&this._model.config.costGold||DataCenter.getInstance().reduceSc(b),this._button.refreshAllButton(),doAction(Const.UPDATE_HERO))};b.refresh=function(){this._model&&this.refreshView(this._model,this._idx,!1)};b.refreshView=function(a,b,c){void 0===c&&(c=!0);this._model=a;this._idx=b;this._model.isHero()?(this._bg1.visible=!1,this._bg.visible=!0):(this._bg1.visible=!0,this._bg.visible=!1);this._evoMask.visible=this._model.isEvolution();this._button.removeNewTip();this.refreshSkillIcon();
this._model.isDead()?this._deathMask.visible=!0:this._deathMask.visible=!1;this.showOrNot()?(this._button.visible=!0,this._button.refreshData(this._model,!1,0,c)):this._button.visible=!1;this.refreshLabel(!1)};b.showOrNot=function(){if(0<this._model.lv)return!0;if(this._idx==DataCenter.getInstance().totalData.showHeroNum-1&&5<=this._idx&&this._idx<Const.maxHero-1)return!1;if(this._idx==Const.maxHero-1){var a=this._model.getCostNumByLevel(1);return DataCenter.getInstance().hasEnoughSc(a)}return!0};
b.refreshSkillIcon=function(){this._skillIconContainer.removeChildren();for(var a=this._model.skillList,b=0;b<a.length;b++){var c=ResourceUtils.createBitmapFromSheet(a[b].getRes(),"iconRes");c.scaleX=c.scaleY=0.4;c.x=35*b;this._skillIconContainer.addChild(c)}if(7>a.length){var a=this._model.config.skill.split(",")[b],d=RES.getRes("skillConfig"),c=ResourceUtils.createBitmapFromSheet("icon_skill_"+d[a].iconID,"iconRes");c.scaleX=c.scaleY=0.4;c.x=35*b;this._skillIconContainer.addChild(c);c=ResourceUtils.createBitmapFromSheet("head_mask");
c.alpha=0.9;c.scaleX=c.scaleY=0.4;c.x=35*b;this._skillIconContainer.addChild(c);c=new egret.TextField;c.size=12;c.x=35*b;c.y=20;c.text=1E3<this._model.lv?"Lv."+(d[a].level+1E3):"Lv."+d[a].level;this._skillIconContainer.addChild(c)}this._skillIconContainer.cacheAsBitmap=!0};b.showAnimation=function(){var a=new Movie("hero_upgrade_json","hero_upgrade");a.play("2");a.x=48;a.y=48;this._iconContainer.addChild(a)};b.refreshLabel=function(a){void 0===a&&(a=!0);this._tipsContainer.visible=!1;this._dpsLabel.visible=
!0;this._lvLabel.text=this._model.lv.toString();this._desLabel.text=""+this._model.dps;0<this._model.heroId?(this._nameLabel.text=EvolveModel.getPrefixKey(this._model.heroId)+this._model.config.name,this._nameLabel.textColor=EvolveModel.getCurColor(this._model.heroId)):(this._nameLabel.text=this._model.config.name,this._nameLabel.textColor=16777215);this._iconContainer.removeChildren();var b=egret.DynamicBitmap.create(this._model.getRes(),!1,null,null,Const.default_hero_icon);b.x=15;b.y=14;this._iconContainer.addChild(b);
this._freeLabelContainer.visible=!1;this._skillIconContainer.visible=!0;this._labelContainer.visible=!0;0==this._model.lv?(b=ResourceUtils.createBitmapFromSheet("head_mask"),b.x=13,b.y=12,this._iconContainer.addChild(b),1007==this._model.configId?(b=this._model.getCostNum(),b=DataCenter.getInstance().hasEnoughSc(b[0]),1==DataCenter.getInstance().isPay.getValue()||!1==b?(this._freeLabelContainer.visible=!0,this._labelContainer.visible=!1,this._skillIconContainer.visible=!1):(this._dpsLabel.text="\u672a\u62db\u52df",
this._desLabel.visible=!1),this._button.visible=!0):(this._dpsLabel.text="\u672a\u62db\u52df",this._desLabel.visible=!1,1006<=this._model.configId&&!this.showOrNot()&&(this._tipsContainer.visible=!0,this._dpsLabel.visible=!1,this._tipsLabel.text=this._model.getCostNumByLevel(1)))):(this._dpsLabel.text="\u79d2\u4f24:",this._desLabel.visible=!0);a&&GameUtils.preloadAnimation("hero_upgrade_json",this.showAnimation,this)};b.getjiuwei=function(){this._model.lv+=1;doAction(Const.HERO_LIST_CHANGE,this._model,
this._idx);DataCenter.getInstance().addHero(this._model);this.refreshLabel();doAction(Const.CHANGE_USE_SKILL);return!1};b.realLevelUp1=function(){this._model.lv+=1;doAction(Const.HERO_LIST_CHANGE,this._model,this._idx);1==this._model.lv?(doAction(Guide.BUY_HERO),DataCenter.getInstance().addHero(this._model),1007==this._model.configId&&doAction(Const.CHANGE_USE_SKILL)):1001==this._model.lv?DataCenter.getInstance().evolutionHero(this._model):DataCenter.getInstance().levelUpHero(this._model,1);this.refreshLabel()};
b.levelUp1=function(){if(0==this._model.lv&&this._model.config.costGold){if(DataCenter.getInstance().hasEnoughGc(this._model.config.costGold)){DataCenter.getInstance().reduceGc(this._model.config.costGold,!1,2,this.buyHeroCallback,this);GameMainLayer.instance.showLoadingRotation(!0);var a=Time.setTimeout(function(){Time.clearTimeout(a);GameMainLayer.instance.showLoadingRotation(!1)},this,5E3)}else GameMainLayer.instance.showPaymentRecommendLayer();return!1}this.realLevelUp1();return!0};b.buyHeroCallback=
function(a){GameMainLayer.instance.showLoadingRotation(!1);0==a?(this.realLevelUp1(),DataCenter.getInstance().saveLocalData(),DataCenter.getInstance().saveData(),this._button.refreshAllButton(),doAction(Const.UPDATE_HERO)):113==a&&doAction(Const.SHOW_TIPS,"\u5143\u5b9d\u4e0d\u8db3")};b.unLockSkill=function(){DataCenter.getInstance().unlockSkill(this._model,this._model.nextSkill.configId);this.refreshLabel();return!0};b.levelUp10=function(){this._model.lv+=10;doAction(Const.HERO_LIST_CHANGE,this._model,
this._idx);DataCenter.getInstance().levelUpHero(this._model,10);this.refreshLabel();return!0};b.levelUp100=function(){this._model.lv+=100;doAction(Const.HERO_LIST_CHANGE,this._model,this._idx);DataCenter.getInstance().levelUpHero(this._model,100);this.refreshLabel();return!0};b.dispose=function(){c.prototype.dispose.call(this);this._touchArea.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.heroClick,this);removeEventsByTarget(this)};return d}(BaseContainer);HeroItemView.prototype.__class__="HeroItemView";
var PaymentItemView=function(c){function d(){c.call(this);this._countDownID=-1;this._icon=null;this.init()}__extends(d,c);var b=d.prototype;b.init=function(){var a=ResourceUtils.createBitmapFromSheet("hero_item_bg","commonRes");this.addChild(a);this._iconContainer=new egret.DisplayObjectContainer;this.addChild(this._iconContainer);this._container=new egret.DisplayObjectContainer;this._iconContainer.addChild(this._container);this._container.x=18;this._container.y=12;this._title=new egret.TextField;
this._iconContainer.addChild(this._title);this._title.x=107;this._title.size=20;this._title.y=10;this._title.textColor=15453202;this._description=new egret.TextField;this._iconContainer.addChild(this._description);this._description.x=107;this._description.y=40;this._description.size=18;this._countDownLabel=new egret.TextField;this._iconContainer.addChild(this._countDownLabel);this._countDownLabel.x=107;this._countDownLabel.y=70;this._countDownLabel.size=18;this._iconContainer.cacheAsBitmap=!0;this._button=
new PaymentButton;this._button.addOnClick(this.click,this);this._button.useZoomOut(!0);this.addChild(this._button);this._button.x=518;this._button.y=58;this._currencyIcon=ResourceUtils.createBitmapFromSheet("gold_icon");this._currencyIcon.anchorX=this._currencyIcon.anchorY=0.5;this._currencyIcon.scaleX=this._currencyIcon.scaleY=0.6;this._container.addChild(this._currencyIcon);this._currencyIcon.x=490;this._currencyIcon.y=15;this._iconContainer.addChild(this._currencyIcon);this._price=new egret.TextField;
this._price.text="0";this._price.size=20;this._container.addChild(this._price);this._price.anchorX=1;this._price.x=550;this._price.y=4;this._iconContainer.addChild(this._price)};b.click=function(){var a=this;PaymentFactory.getInstance().effect(this._model,function(){a._model.countdown();a.refreshView(a._model,a._idx);DataCenter.getInstance().saveData()})};b.addTouchSkill=function(){this.refreshView(this._model,this._idx);DataCenter.getInstance().saveData()};b.refreshView=function(a,b){this._model=
a;this._idx=b;GameUtils.removeFromParent(this._icon);GameUtils.removeAllChildren(this._container);this._icon=ResourceUtils.createBitmapFromSheet(this._model.icon,"iconRes");this._container.addChild(this._icon);this._title.text=this._model.title;this._description.textFlow=(new egret.HtmlTextParser).parser(this._model.getFormatDescription());this._description.textColor=this._model.descColor;this._button.refresh(this._model);"blood"==this._model.type?DataCenter.getInstance().loginAwardModel.isBoomFree()?
(this._price.visible=!1,this._currencyIcon.visible=!1):(this._price.text=this._model.getFormatValue(),this._price.visible=this._model.showView(1),this._currencyIcon.visible=this._model.showView(2)):"touch"==this._model.type?0<ActivityManager.getInstance().getFreeSkillNum()?(this._price.visible=!1,this._currencyIcon.visible=!1):(this._price.text=this._model.getFormatValue(),this._price.visible=this._model.showView(1),this._currencyIcon.visible=this._model.showView(2)):(this._price.text=this._model.getFormatValue(),
this._price.visible=this._model.showView(1),this._currencyIcon.visible=this._model.showView(2));"holy"==this._model.mode?(-1==this._countDownID&&(this.countDown(),this._countDownID=Time.setInterval(this.countDown,this,1E3)),this._countDownLabel.visible=!0,this._button.setEnabled(0<ActivityManager.getInstance().getHolyLfNum())):(this._countDownLabel.visible=!1,Time.clearInterval(this._countDownID),this._countDownID=-1);removeEventsByTarget(this);this._model.canRefreshCoin()&&addAction(Const.BOSS_KILLED,
this.refreshDescription,this);"touch"==this._model.countdownType&&addAction("add_touch_skill",this.addTouchSkill,this)};b.countDown=function(){this._countDownLabel.text="\u8d2d\u4e70\u5012\u8ba1\u65f6:"+GameUtils.formatTime1(ActivityManager.getInstance().getHolyLfTime())};b.refreshDescription=function(){this._description.textFlow=(new egret.HtmlTextParser).parser(this._model.getFormatDescription());this._price.text=this._model.getFormatValue()};return d}(BaseContainer);
PaymentItemView.prototype.__class__="PaymentItemView";var PaymentMode=function(){function c(){}c.getNormal=function(c){return this._normals[c]};c.getDisabled=function(c){return"hero_lvup_disable"};c.USE="use";c.BUY="buy";c.SHARE="share";c.HOLY="holy";c._normals={use:"hero_lvup_btn",buy:"hero_lvup_btn",share:"hero_lvup_btn",holy:"hero_lvup_btn"};return c}();PaymentMode.prototype.__class__="PaymentMode";
var PaymentButton=function(c){function d(){c.call(this);this._tip=this._oldMode=null;this.init();this.anchorX=this.anchorY=0.5;this.width=161;this.height=68}__extends(d,c);var b=d.prototype;b.init=function(){this._container=new egret.DisplayObjectContainer;this._label=new egret.TextField;this._label.text="\u4f7f\u7528\u6280\u80fd";this._label.size=20;this._label.anchorX=this._label.anchorY=0.5;this._container.addChild(this._label);this._label.x=86;this._label.y=30;this._label.textColor=2495759;this.addChild(this._container);
this._container.cacheAsBitmap=!0};b.refreshView=function(){this._model.mode!=this._oldMode&&(this._oldMode=this._model.mode,GameUtils.removeFromParent(this._normal),GameUtils.removeFromParent(this._disabled),this._normal=ResourceUtils.createBitmapFromSheet(PaymentMode.getNormal(this._model.mode)),this._container.addChildAt(this._normal,0),this._disabled=ResourceUtils.createBitmapFromSheet(PaymentMode.getDisabled(this._model.mode)),this._disabled.visible=!1,this._container.addChildAt(this._disabled,
0))};b.refreshTip=function(){this._tip&&egret.Tween.removeTweens(this._tip);GameUtils.removeFromParent(this._tip);this._tip=null;this._model.tip&&(this._tip=ResourceUtils.createBitmapFromSheet(this._model.tip),this._tip.anchorX=this.anchorY=0.5,this.addChild(this._tip),this._tip.scaleX=this._tip.scaleY=0.7,this._tip.x=20,this._tip.y=-5,egret.Tween.get(this._tip,{loop:!0}).to({scaleX:0.9,scaleY:0.9},500).to({scaleX:0.7,scaleY:0.7},500))};b.refreshTime=function(){0!=this._model.time?(this.timeRefresh(),
this._timeid=Time.setInterval(this.timeRefresh,this,1E3)):(Time.clearTimeout(this._timeid),this._label.text=this._model.getButtonText());this.setEnabled(0==this._model.time)};b.timeRefresh=function(){0==this._model.time?this.refreshTime():this._label.text=GameUtils.formatShortTime(this._model.time)};b.setEnabledState=function(){this._normal.visible=this._enabled;this._disabled.visible=!this._enabled};b.refresh=function(a){this._model=a;this.refreshView();this.refreshTip();this.refreshTime()};b._onRemoveFromStage=
function(){c.prototype._onRemoveFromStage.call(this);this._timeid&&Time.clearInterval(this._timeid)};return d}(SimpleButton);PaymentButton.prototype.__class__="PaymentButton";
var SkillIcon=function(c){function d(){c.call(this);this._timeID=this._cdTimeBeforeChange=this._cdTime=0;this._status=1;this._lock=!1}__extends(d,c);var b=d.prototype;b.refreshView=function(a){4==this._status&&0<a.lv&&(this._skillModel=a,this._status=1,this.refreshStatus())};b.resetIcon=function(){this._status=4;this._timeID&&Time.clearInterval(this._timeID);this.refreshStatus()};b.initView=function(a,b){this._skillModel=a;this._skillButton=new SimpleButton;var c=ResourceUtils.createBitmapFromSheet("skill_icon_"+
b,"iconRes");this._skillButton.addChild(c);this._skillButton.addOnClick(this.onSkillHandler,this);this.addChild(this._skillButton);this._skillButton.x=8;this._skillButton.y=3;this._skillMask1=ResourceUtils.createBitmapFromSheet("skill_cd_mask");this.addChild(this._skillMask1);this._skillMask1.x=2.8;this._skillMask1.y=-2;this._skillMask2=ResourceUtils.createBitmapFromSheet("skill_cd_mask1");this.addChild(this._skillMask2);this._skillMask2.x=2.8;this._skillMask2.y=-2;this._skillMask=ResourceUtils.createBitmapFromSheet("skill_mask",
"commonRes");this._skillMask.scaleX=1.2;this._skillMask.scaleY=1.2;this.addChild(this._skillMask);this._skillMask.x=2;this._skillMask.y=-2;this._lockIcon=ResourceUtils.createBitmapFromSheet("lock_icon");this.addChild(this._lockIcon);this._lockIcon.x=50;this._lockIcon.y=50;this._lockIcon.anchorX=this._lockIcon.anchorY=0.5;this._timeLabel=new egret.TextField;this._timeLabel.x=19;this._timeLabel.y=33;this._timeLabel.size=24;this.addChild(this._timeLabel);this.initStatus();applyFilters(Const.IS_BOX_SKILL_USING,
this._skillModel.configId)!=this._skillModel.configId&&(4!=this._status&&(this._lock=!0,this._skillMask2.visible=!0),addAction(Const.BOX_SKILL_OVER,this.initStatus,this));addAction("clearnReborn",this.rebornClearn,this);addAction(Const.REBORN_SKILL_REFRESH,this.rebornSkillListChange,this);addAction(Const.BUFF_CD,this.rebornSkillListChange,this);addAction(Const.LOCK_SKILL,this.lockSkill,this);addAction(Const.UNLOCK_SKILL,this.unlockSkill,this);addFilter(Const.IS_SKILL_USING,this.isUsing,this);addAction(Const.CLEAN_SKILL_CD,
this.cleanCD,this);addFilter(Guide.IS_SKILL_CDING,this.isSkillCDing,this)};b.rebornClearn=function(){this.resetIcon();this._timeLabel.visible=!1};b.isSkillCDing=function(a){if(this._skillModel.configId==a&&3==this._status)return 1};b.initStatus=function(){this._lock=!1;var a=DataCenter.getInstance().totalData.mainSkillCD[this._skillModel.configId];if(a){var b=(new Date).getTime(),a=Math.floor((b-a)/1E3);a>this._skillModel.getCDTime()?this._status=1:(this._cdTimeBeforeChange=Math.ceil(this._skillModel.getCDTime()),
this._cdTime=this._cdTimeBeforeChange-a,this._status=3,this.cdHandler(),this._timeID&&Time.clearInterval(this._timeID),this._timeID=Time.setInterval(this.cdHandler,this,1E3))}else this._status=0<this._skillModel.lv?1:4;this.refreshStatus()};b.cleanCD=function(a){a==this._skillModel.configId&&(delete DataCenter.getInstance().totalData.mainSkillCD[this._skillModel.configId],0<this._skillModel.lv?(this._status=1,Time.clearInterval(this._timeID)):this._status=4,this.refreshStatus())};b.isUsing=function(a){if(a==
this._skillModel.configId&&2==this._status)return!1};b.lockSkill=function(a){a==this._skillModel.configId&&(this._lock=!0,4!=this._status&&(this._skillMask2.visible=!0))};b.unlockSkill=function(a){a==this._skillModel.configId&&(this._lock=!1,4!=this._status&&(this._skillMask2.visible=3==this._status))};b.refreshStatus=function(){doAction(Const.REFRESH_SKILL_TIP);this._timeLabel.visible=1!=this._status;this._lockIcon.visible=4==this._status;this._skillMask.visible=4==this._status||3==this._status||
2==this._status;this._skillMask1.visible=2==this._status||1==this._status;this._skillMask2.visible=3==this._status};b.onSkillHandler=function(){this._lock||(1!=this._status?3==this._status&&doAction(Const.CLICK_CD_SKILL,this._skillModel.configId):(this._status=2,doAction(Guide.USE_SKILL),this.refreshStatus(),DataCenter.getInstance().useSkill(this._skillModel),this._cdTimeBeforeChange=this._cdTime=this._skillModel.getLastTime(),this.cdHandler(),this._timeID&&Time.clearInterval(this._timeID),this._timeID=
Time.setInterval(this.cdHandler,this,1E3),DataCenter.getInstance().refreshSkillCD(this._skillModel.configId,(new Date).getTime())))};b.rebornSkillListChange=function(){var a=-1;2==this._status?(a=this._skillModel.getLastTime(),a!=this._cdTimeBeforeChange&&(this._cdTime+=a-this._cdTimeBeforeChange,this._cdTimeBeforeChange=a)):3==this._status&&(a=Math.ceil(this._skillModel.getCDTime()),a!=this._cdTimeBeforeChange&&(this._cdTime-=this._cdTimeBeforeChange-a,0>=this._cdTime&&(this._status=1,this.refreshStatus(),
Time.clearInterval(this._timeID))))};b.cdHandler=function(){this._cdTime-=1;this._timeLabel.text=GameUtils.formatTime(this._cdTime);0>=this._cdTime&&(2==this._status?(this._status=3,this.refreshStatus(),this._cdTimeBeforeChange=this._cdTime=Math.ceil(this._skillModel.getCDTime()),DataCenter.getInstance().refreshSkillCD(this._skillModel.configId,(new Date).getTime()),this.cdHandler()):3==this._status&&(this._status=1,this.refreshStatus(),Time.clearInterval(this._timeID)))};b.dispose=function(){c.prototype.dispose.call(this);
removeEventsByTarget(this);this._timeID&&Time.clearInterval(this._timeID)};return d}(BaseContainer);SkillIcon.prototype.__class__="SkillIcon";var MainSkillStatus;(function(c){c[c.canuse=1]="canuse";c[c.using=2]="using";c[c.cding=3]="cding";c[c.locked=4]="locked"})(MainSkillStatus||(MainSkillStatus={}));
var SkillItemView=function(c){function d(){c.call(this);this._opened=!1;this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this._bg=ResourceUtils.createBitmapFromSheet("hero_item_bg","commonRes");this.addChild(this._bg);this._touchArea=ResourceUtils.createBitmapByName("mask");this._touchArea.alpha=0;this._touchArea.width=430;this._touchArea.height=100;this._touchArea.touchEnabled=!0;this.addChild(this._touchArea);this._touchArea.addEventListener(egret.TouchEvent.TOUCH_TAP,this.heroClick,
this);this._iconContainer=new egret.DisplayObjectContainer;this._iconContainer.x=10;this._iconContainer.y=-2;this.addChild(this._iconContainer);this._staticContainer=new egret.DisplayObjectContainer;this.addChild(this._staticContainer);this._staticContainer.x=20;this._staticContainer.y=4;this._lvLabel1=new egret.TextField;this._staticContainer.addChild(this._lvLabel1);this._lvLabel1.x=87;this._lvLabel1.y=35;this._lvLabel1.size=20;this._lvLabel1.text="Lv.";this._lvLabel1.textColor=16777215;this._lvLabel=
new egret.TextField;this._staticContainer.addChild(this._lvLabel);this._lvLabel.x=117;this._lvLabel.y=35;this._lvLabel.size=20;this._lvLabel.textColor=1763286;this._nameLabel=new egret.TextField;this._staticContainer.addChild(this._nameLabel);this._nameLabel.x=87;this._nameLabel.y=5;this._nameLabel.size=20;this._nameLabel.textColor=16777215;this._desLabel=new egret.TextField;this._staticContainer.addChild(this._desLabel);this._desLabel.x=87;this._desLabel.y=60;this._desLabel.size=20;this._desLabel.textColor=
16777215;this._normalAttackLabel=new egret.TextField;this._staticContainer.addChild(this._normalAttackLabel);this._normalAttackLabel.x=175;this._normalAttackLabel.y=60;this._normalAttackLabel.size=20;this._normalAttackLabel.textColor=14690592;this._staticContainer.cacheAsBitmap=!0;this._button=new LevelUpButton("skill");this._button.x=520;this._button.y=50;this._button.setCallBack(this,this.onClick);this.addChild(this._button);addAction(Const.CHANGE_COIN,this.changeCoin,this);addAction(Const.REFRESH_SKILL_VIEW,
this.refresh,this)};b.changeCoin=function(){this._button.refreshData(this._data,0==this._idx)};b.heroClick=function(){GameMainLayer.instance.showMainHeroDetailLayer(HeroController.getInstance().mainHero)};b.onClick=function(a,b){if(1==a)this.levelUp1();else if(10==a)this.levelUp10();else if(100==a)this.levelUp100();else throw Error("\u4f60\u6309\u7684\u5565");b&&DataCenter.getInstance().reduceSc(b);this._button.refreshAllButton()};b.levelUp1=function(){7!=this._idx&&(this._data.lv+=1);doAction(Const.MAIN_HERO_SKILL_CHANGE,
this._data,this._idx);0==this._idx?(doAction(Guide.UP_HERO),HeroController.getInstance().mainHero.lv+=1,DataCenter.getInstance().levelUpHero(HeroController.getInstance().mainHero,1)):7==this._idx?GameMainLayer.instance.showResetGameLayer():(doAction(Guide.UNLOCK_MAIN_SKILL),DataCenter.getInstance().mainSkillUp(this._data.configId,1));this.refreshLabel()};b.levelUp10=function(){this._data.lv+=10;doAction(Const.MAIN_HERO_SKILL_CHANGE,this._data,this._idx);0==this._idx?(HeroController.getInstance().mainHero.lv+=
10,DataCenter.getInstance().levelUpHero(HeroController.getInstance().mainHero,10)):DataCenter.getInstance().mainSkillUp(this._data.configId,10);this.refreshLabel()};b.levelUp100=function(){this._data.lv+=100;doAction(Const.MAIN_HERO_SKILL_CHANGE,this._data,this._idx);0==this._idx?(HeroController.getInstance().mainHero.lv+=100,DataCenter.getInstance().levelUpHero(HeroController.getInstance().mainHero,100)):DataCenter.getInstance().mainSkillUp(this._data.configId,100);this.refreshLabel()};b.refreshLabel=
function(a){void 0===a&&(a=!0);this._opened=!1;this._lvLabel.visible=!0;this._lvLabel1.visible=!0;if(0==this._idx){var b=HeroController.getInstance().mainHero;this._lvLabel.text=""+b.lv;this._nameLabel.text=EvolveModel.getPrefixKey(1)+this._data.name;this._nameLabel.textColor=EvolveModel.getCurColor(1);b=b.tapDamage;this._desLabel.text="\u70b9\u51fb\u4f24\u5bb3:";this._normalAttackLabel.text=""+b}else 7==this._idx?(this._nameLabel.text=this._data.name,this._desLabel.text=this._data.des,this._lvLabel.visible=
!1,this._lvLabel1.visible=!1,this._opened=600<=HeroController.getInstance().mainHero.lv):(this._nameLabel.text=this._data.config.name,0==this._data.lv?this._lvLabel.text="0":(this._lvLabel.text=""+this._data.lv,this._opened=!0),this._desLabel.text=this._data.getDes(),this._normalAttackLabel.text="");this._iconContainer.removeChildren();0==this._idx?b=egret.DynamicBitmap.create("icon_hero_skill_1",!1,null,null,Const.default_skill_icon):(b=2*this._idx,!1==this._opened&&(b+=1),b=egret.DynamicBitmap.create("icon_hero_skill_"+
b,!1,null,null,Const.default_skill_icon));b.x=7;b.y=14;this._iconContainer.addChild(b);a&&7!=this._idx&&GameUtils.preloadAnimation("hero_upgrade_json",this.showAnimation,this)};b.showAnimation=function(){var a=new Movie("hero_upgrade_json","hero_upgrade");a.play("2");a.x=48;a.y=48;this._iconContainer.addChild(a)};b.refreshView=function(a,b){this._data=a;this._idx=b;this.refreshLabel(!1);this._button.removeNewTip();this._button.refreshData(this._data,0==this._idx||7==this._idx,this._idx)};b.refresh=
function(){this.refreshView(this._data,this._idx)};b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this);this._touchArea.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.heroClick,this)};return d}(BaseContainer);SkillItemView.prototype.__class__="SkillItemView";
var SkillWuLinItem=function(c){function d(){c.call(this);this._showTime=2E3;this._lastTime=this._timeID=-1;this._tickTime=500;this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=ResourceUtils.createBitmapFromSheet("hero_item_bg","commonRes");this.addChild(a);a=ResourceUtils.createBitmapByName("mask");a.alpha=0;a.width=430;a.height=100;a.touchEnabled=!1;this.addChild(a);this.iconContainer=new egret.DisplayObjectContainer;this.iconContainer.x=10;this.iconContainer.y=-2;this.addChild(this.iconContainer);
this.staticContainer=new egret.DisplayObjectContainer;this.addChild(this.staticContainer);this.bmpIcon=new egret.Bitmap;this.bmpIcon.x=0;this.bmpIcon.y=10;this.staticContainer.addChild(this.bmpIcon);this.staticContainer.x=20;this.staticContainer.y=4;this.lblLvTip=new egret.TextField;this.staticContainer.addChild(this.lblLvTip);this.lblLvTip.x=87;this.lblLvTip.y=35;this.lblLvTip.size=20;this.lblLvTip.text="Lv.";this.lblLvTip.textColor=16777215;this.txtLv=new egret.TextField;this.staticContainer.addChild(this.txtLv);
this.txtLv.x=117;this.txtLv.y=35;this.txtLv.size=20;this.txtLv.textColor=1763286;this.txtName=new egret.TextField;this.staticContainer.addChild(this.txtName);this.txtName.x=87;this.txtName.y=5;this.txtName.size=20;this.txtName.textColor=16777215;this.txtSecDamge=new egret.TextField;this.staticContainer.addChild(this.txtSecDamge);this.txtSecDamge.size=20;this.txtSecDamge.x=240;this.txtSecDamge.y=50;this.txtSecDamge.visible=!1;this.txtDes=new egret.TextField;this.staticContainer.addChild(this.txtDes);
this.txtDes.x=87;this.txtDes.y=60;this.txtDes.size=20;this.txtDes.textColor=16777215;this.skillFloorCon=new egret.DisplayObjectContainer;this.addChild(this.skillFloorCon);this.skillFloorCon.y=60;this.skillFloorCon.x=110;this.arrBtnSkin=["lvup100_btn","hero_lvup10_disable","lvup10_btn","hero_lvup10_disable"];this.button100=new LevelUpButton1;this.button100.init(100,this.arrBtnSkin[0],this.arrBtnSkin[1]);this.button100.addOnClick(this.onClickHandler100,this);this.button100.useZoomOut(!0);this.addChild(this.button100);
this.button100.x=280;this.button10=new LevelUpButton1;this.button10.init(10,this.arrBtnSkin[2],this.arrBtnSkin[3]);this.button10.addOnClick(this.onClickHandler10,this);this.button10.useZoomOut(!0);this.addChild(this.button10);this.button10.x=380;this.button100.y=this.button10.y=60;this.button10.width=115;this.button10.height=68;this.button100.width=115;this.button100.height=68;this.resetStatus(0);this.btnLevelUP=new LevelBtn;this.btnLevelUP.x=520;this.btnLevelUP.y=70;this.btnLevelUP.addOnClick(this.onClick,
this);this.addChild(this.btnLevelUP)};b.onClickHandler10=function(){var a=GuildModel.checkUpCan10(this.data);null!=a&&(null!=a.canUplvl&&0<a.canUplvl&&(GuildWuLinDataManager.getInstance().reduceCrytal(a.cost),this.data.setCurrentLevel(this.data.skillCurLevel+a.canUplvl),this.refleshView(this.data,0),doAction(Const.HERO_UPGRADE,GuildWuLinDataManager.getInstance().mainHero),doAction("Guild_TapDps"),GameUtils.preloadAnimation("hero_upgrade_json",this.showAnimation,this)),this.hideButton())};b.onClickHandler100=
function(){var a=GuildModel.checkUpCan100(this.data);null!=a&&(null!=a.canUplvl&&0<a.canUplvl&&(GuildWuLinDataManager.getInstance().reduceCrytal(a.cost),this.data.setCurrentLevel(this.data.skillCurLevel+a.canUplvl),this.refleshView(this.data,0),doAction(Const.HERO_UPGRADE,GuildWuLinDataManager.getInstance().mainHero),doAction("Guild_TapDps"),GameUtils.preloadAnimation("hero_upgrade_json",this.showAnimation,this)),this.hideButton())};b.createSKillFloor=function(){this.skillFloorCon.removeChildren();
if(null!=this.data)for(var a=this.data.wuxueInfo,b=0;b<a.length;b++){if(this.data.skillCurLevel==a[b].floorActiveLevel&&!a[b].isActive){var c=ResourceUtils.createBitmapFromSheet(this.data.wuxueInfo[b].floorIcon,"iconRes");c.scaleX=c.scaleY=0.4;c.x=35*b;this.skillFloorCon.addChild(c);c=ResourceUtils.createBitmapFromSheet("head_mask");c.alpha=0.9;c.scaleX=c.scaleY=0.4;c.x=35*b;this.skillFloorCon.addChild(c);c=new egret.TextField;c.size=12;c.x=35*b;c.y=20;c.text="Lv."+this.data.wuxueInfo[b].floorActiveLevel;
this.skillFloorCon.addChild(c)}this.data.skillCurLevel>=a[b].floorActiveLevel&&a[b].isActive&&(c=ResourceUtils.createBitmapFromSheet(this.data.wuxueInfo[b].floorIcon,"iconRes"),c.scaleX=c.scaleY=0.4,c.x=35*b,this.skillFloorCon.addChild(c))}};b.onClick=function(){if(5!=this.data.skillState&&4!=this.data.skillState&&!(0==this.data.skillType&&this.data.isActive()||0>=GuildWuLinDataManager.getInstance().currentHaveCrytal)){var a=this.data.getskillLevelCost(),b=this.data.skillState;if(1==this.data.skillCostType){if(GuildWuLinDataManager.getInstance().currentHaveCrytal<
a){doAction(Const.SHOW_TIPS,"\u9b54\u6676\u4e0d\u8db3");return}}else if(0==this.data.skillCostType&&GuildWuLinDataManager.getInstance().getcurrentHaveGold()<a){doAction(Const.SHOW_TIPS,"\u5143\u5b9d");return}0==this.data.skillCostType?DataCenter.getInstance().reduceGc(a):GuildWuLinDataManager.getInstance().reduceCrytal(a);3==b?this.data.getSkillFloorNeedActive().isActive=!0:2!=b&&1!=b||this.data.setCurrentLevel(++this.data.skillCurLevel);this.refleshView(this.data,0);doAction(Const.HERO_UPGRADE,GuildWuLinDataManager.getInstance().mainHero);
doAction("Guild_TapDps");GameUtils.preloadAnimation("hero_upgrade_json",this.showAnimation,this);this.checkIsShowMoreBtn()}};b.showAnimation=function(){var a=new Movie("hero_upgrade_json","hero_upgrade");a.play("2");a.x=48;a.y=48;this.iconContainer.addChild(a)};b.refleshView=function(a,b){this.data=a;this.bmpIcon.texture=ResourceUtils.createBitmapFromSheet(a.skillIcon,"iconRes").texture;0==a.skillType?(this.txtDes.visible=!0,this.txtDes.text=a.skillDes,this.lblLvTip.visible=!1,this.txtLv.visible=
!1,this.txtDes.y=35,this.skillFloorCon.visible=!1):("\u695a\u7559\u9999"==a.skillName&&(this.bmpIcon.texture=ResourceUtils.createBitmapFromSheet("icon_hero_skill_1","iconRes").texture),this.skillFloorCon.visible=!0,this.txtDes.visible=!1,this.lblLvTip.visible=!0,this.txtLv.visible=!0);this.txtName.text=a.skillName;this.txtLv.text=a.skillCurLevel.toString();if(0==a.skillType){var c=a.getskillLevelCost(),d=new NumberModel;d.add(c);c=new NumberModel;c.add(GuildWuLinDataManager.getInstance().getNextLvDameg(a.skillID));
this.btnLevelUP.refleshVeiw(2,d.getNumer(),c.getNumer(),a.skillState);this.btnLevelUP.changeCostType(a.skillCostType)}else c=a.getskillLevelCost(),d=new NumberModel,d.add(c),c=new NumberModel,c.add(GuildWuLinDataManager.getInstance().getNextLvDameg(a.skillID)),this.btnLevelUP.refleshVeiw(1,d.getNumer(),c.getNumer(),a.skillState),this.btnLevelUP.changeCostType(a.skillCostType),this.txtSecDamge.visible=!0,this.txtSecDamge.text=GuildWuLinDataManager.getInstance().getSecDamg(this.data),this.createSKillFloor()};
b.refleshBtn=function(){if(this.data!=b){doAction(Const.REFRESH_SKILL_VIEW);if(0==this.data.skillType){var a=this.data.getskillLevelCost(),b=new NumberModel;b.add(a);a=new NumberModel;a.add(GuildWuLinDataManager.getInstance().getNextLvDameg(this.data.skillID));this.btnLevelUP.refleshVeiw(2,b.getNumer(),a.getNumer(),this.data.skillState)}else a=this.data.getskillLevelCost(),b=new NumberModel,b.add(a),a=new NumberModel,a.add(GuildWuLinDataManager.getInstance().getNextLvDameg(this.data.skillID)),this.btnLevelUP.refleshVeiw(1,
b.getNumer(),a.getNumer(),this.data.skillState);this.btnLevelUP.changeCostType(this.data.skillCostType)}};b.checkIsShowMoreBtn=function(){if(0==this.status){var a=(new Date).getTime();-1==this._lastTime?this._lastTime=a:a-this._lastTime<this._tickTime?(this.resetStatus(1),-1!=this._timeID&&Time.clearTimeout(this._timeID),this._timeID=Time.setTimeout(this.timeOut,this,this._showTime)):this._lastTime=a}else-1!=this._timeID&&Time.clearTimeout(this._timeID),this._timeID=Time.setTimeout(this.timeOut,this,
this._showTime)};b.resetStatus=function(a){this.status=a;1==this.status?(a=GuildModel.checkUpCan100(this.data),null!=a&&11<=a.canUplvl&&(this.button100.visible=!0,this.button100.changeIcon(),this.button100.changeLevel(a.canUplvl),this.button100.refreshView(GuildModel.formatNum0(a.cost))),a=GuildModel.checkUpCan10(this.data),null!=a&&1<a.canUplvl&&(this.button10.visible=!0,this.button10.refreshView(GuildModel.formatNum0(a.cost)),this.button10.changeLevel(a.canUplvl),this.button10.changeIcon())):(this.button100.visible=
!1,this.button10.visible=!1)};b.hideButton=function(){var a=GuildModel.checkUpCan10(this.data);null!=a&&1>=a.canUplvl&&(this.status=0,this.button10.visible=!1,this.button100.visible=!1)};b.timeOut=function(){this.resetStatus(0)};return d}(BaseContainer);SkillWuLinItem.prototype.__class__="SkillWuLinItem";
var LevelBtn=function(c){function d(){c.call(this);this.anchorX=this.anchorY=0.5;this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(a,b,c){void 0===a&&(a="unlock_skill_btn");void 0===b&&(b="hero_lvup_btn");void 0===c&&(c="hero_lvup_disable");this.btnActiveBg=ResourceUtils.createBitmapFromSheet(a);this.addChild(this.btnActiveBg);this.btnNorBg=ResourceUtils.createBitmapFromSheet(b);this.addChild(this.btnNorBg);this.btnDisBg=ResourceUtils.createBitmapFromSheet(c);this.addChild(this.btnDisBg);
this.icon=ResourceUtils.createBitmapFromSheet("gold_icon");this.addChild(this.icon);this.icon.x=42;this.icon.y=-20;this.icon.scaleX=this.icon.scaleY=0.54;this.txtCost=new egret.TextField;this.txtCost.x=70;this.txtCost.y=-20;this.txtCost.size=20;this.txtCost.width=100;this.txtCost.textColor=16777215;this.addChild(this.txtCost);this.txtName=new egret.TextField;this.txtName.width=150;this.txtName.x=85;this.txtName.y=30;this.txtName.size=20;this.txtName.textColor=0;this.txtName.textAlign=egret.HorizontalAlign.CENTER;
this.txtName.anchorX=this.txtName.anchorY=0.5;this.addChild(this.txtName);this.txtBuff=new egret.TextField;this.txtBuff.textColor=0;this.txtBuff.size=20;this.txtBuff.y=38;this.txtBuff.x=85;this.txtBuff.anchorX=this.txtBuff.anchorY=0.5;this.addChild(this.txtBuff)};b.changeCostType=function(a){1==a?this.icon.texture=ResourceUtils.createBitmapFromSheet("spar","iconRes").texture:0==a&&(this.icon.texture=ResourceUtils.createBitmapFromSheet("gold_icon").texture)};b.refleshVeiw=function(a,b,c,d,g){void 0===
d&&(d=0);void 0===g&&(g="");this.hideAllBg();1==a?0==d?(this.btnDisBg.visible=!0,this.txtName.text="\u9886\u609f",this.txtName.y=15,this.txtBuff.visible=!0,this.txtBuff.text="+"+c+g+"\u4f24\u5bb3"):1==d?(this.btnNorBg.visible=!0,this.txtName.text="\u9886\u609f",this.txtName.y=15,this.txtBuff.visible=!0,this.txtBuff.text="+"+c+g+"\u4f24\u5bb3"):3==d?(this.btnActiveBg.visible=!0,this.txtName.text="\u89e3\u9501",this.txtName.y=15,this.txtBuff.visible=!0,this.txtBuff.text="\u4f24\u5bb3x"+c):4==d?(this.btnDisBg.visible=
!0,this.txtName.text="\u89e3\u9501",this.txtName.y=15,this.txtBuff.visible=!0,this.txtBuff.text="\u4f24\u5bb3x"+c):2==d?(this.btnNorBg.visible=!0,this.txtName.y=15,this.txtName.text="\u5347\u7ea7",this.txtBuff.visible=!0,this.txtBuff.text="+"+c+g+"\u4f24\u5bb3"):5==d&&(this.btnDisBg.visible=!0,this.txtName.text="\u5347\u7ea7",this.txtBuff.text="+"+c+g+"\u4f24\u5bb3",this.txtBuff.visible=!0,this.txtName.y=15):2==a&&(0==d?(this.txtName.text="\u6fc0\u6d3b",this.btnDisBg.visible=!0):1==d?(this.txtName.text=
"\u6fc0\u6d3b",this.btnActiveBg.visible=!0):(this.txtName.text="\u5df2\u6fc0\u6d3b",this.btnDisBg.visible=!0),this.txtName.y=30,this.txtName.size=26);this.txtCost.text=b};b.hideAllBg=function(){this.btnActiveBg.visible=!1;this.btnDisBg.visible=!1;this.btnNorBg.visible=!1;this.txtBuff.visible=!1};return d}(SimpleButton);LevelBtn.prototype.__class__="LevelBtn";
var AchieveModel=function(c){function d(a){c.call(this,a)}__extends(d,c);var b=d.prototype;b.getSubConf=function(){var a=Math.min(this._config.levels.length-1,this.index);return this._config.levels[a]};b.isMax=function(){return this.index>=this._config.levels.length};b._getName=function(){var a=this.getSubConf();return a.name.replace("{0}",a.progress)};b.addProgress=function(){if(ProxyUtils.achieveList){var a=this._config.id;ProxyUtils.achieveList[a]||(ProxyUtils.achieveList[a]=0);ProxyUtils.achieveList[a]+=
1}};Object.defineProperty(b,"index",{get:function(){return ProxyUtils.achieveList?ProxyUtils.achieveList[this._config.id]||0:parseInt(DataCenter.getInstance().achieve.getValue(this.type))},enumerable:!0,configurable:!0});b._current=function(){return DataCenter.getInstance().statistics.getValue(this.type)};b.canAward=function(){var a=new NumberModel;a.add(this.current);return a.compare(this.total)&&!this.isMax()};b._getTotal=function(){return this.getSubConf().progress};b._getAward=function(){return this.getSubConf().award};
Object.defineProperty(b,"type",{get:function(){return this._config.type},enumerable:!0,configurable:!0});return d}(ProgressModel);AchieveModel.prototype.__class__="AchieveModel";
var BuffLayer=function(c){function d(){c.call(this);this._dataList=[];this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("buff_bg");a.touchEnabled=!0;this.boxContainer.addChild(a);a.x=23;a.y=23;a=ResourceUtils.createBitmapFromSheet("title_buff");this.boxContainer.addChild(a);a.x=220;a.y=30;a=new egret.TextField;this.boxContainer.addChild(a);a.text="\u4fa0\u4fa3\u5c5e\u6027\u6c38\u4e45\u6709\u6548!";a.size=24;a.anchorX=0.5;a.textColor=3808268;a.x=
312;a.y=102;a=new SimpleButton;a.anchorX=a.anchorY=0.5;var b=ResourceUtils.createBitmapFromSheet("close_btn");a.addChild(b);a.addOnClick(this.onCloseHandler,this);a.useZoomOut(!0);a.x=560;a.y=72;this.addChild(a);this.initDataList();this._tableView=new TableView;this._tableView.lockMove=!0;this._tableView.x=52;this._tableView.y=168;this.boxContainer.addChild(this._tableView);this._tableView.width=GameUtils.getWinWidth();this._tableView.height=684;this._tableView.setList(this._dataList,Direction.VERTICAL,
this,GameUtils.getWinWidth(),115);addAction(Const.BUY_BUFF_DONE,this.buyBuffDone,this)};b.initDataList=function(){this._dataList=[];var a=RES.getRes("buffConfig"),b;for(b in a)this._dataList.push(a[b])};b.buyBuffDone=function(){this._tableView.setList(this._dataList,Direction.VERTICAL,this,GameUtils.getWinWidth(),115)};b.createItemRenderer=function(){return new BuffItemLayer};b.updateItemRenderer=function(a,b,c){a.refreshView(b,c)};b.onCloseHandler=function(){GameMainLayer.instance.hideBuffLayer()};
b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};return d}(BoxContainer);BuffLayer.prototype.__class__="BuffLayer";
var BuffItemLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=ResourceUtils.createBitmapFromSheet("buff_item_bg");this.addChild(a);this._container=new egret.DisplayObjectContainer;this.addChild(this._container);this.iconContainer=new egret.DisplayObjectContainer;this._container.addChild(this.iconContainer);this.desLabel=new egret.TextField;this._container.addChild(this.desLabel);this.desLabel.width=300;this.desLabel.x=110;this.desLabel.y=
63;this.desLabel.size=24;this.desLabel.textColor=3808268;this.nameLabel=new egret.TextField;this._container.addChild(this.nameLabel);this.nameLabel.width=300;this.nameLabel.x=110;this.nameLabel.y=30;this.nameLabel.size=24;this.nameLabel.textColor=3808268;this.nameLabel.text="\u6c34\u6bcd\u6708\u59ec";this._button=new BuffButton;this._button.x=410;this._button.y=70;this.addChild(this._button);this._button.useZoomOut(!0);this._button.addOnClick(this.clickHandler,this);this._goldContainer=new egret.DisplayObjectContainer;
this._container.addChild(this._goldContainer);a=ResourceUtils.createBitmapFromSheet("gold_icon");this._goldContainer.addChild(a);a.scaleX=a.scaleY=0.78;a.x=360;a.y=17;this._needLabel=new egret.TextField;this._goldContainer.addChild(this._needLabel);this._needLabel.x=405;this._needLabel.y=21;this._needLabel.textColor=3808268;this._needLabel.size=22;this._container.cacheAsBitmap=!0};b.clickHandler=function(){if(-1==DataCenter.getInstance().totalData.buffList.indexOf(this.configId)){var a=this.config.cost;
DataCenter.getInstance().hasEnoughGc(a)?(egret.MainContext.instance.stage.touchEnabled=!1,ProxyUtils.buyBuff(a,this.config.configId,this.buyCallBack,this,this.errorCallBack)):GameMainLayer.instance.showPaymentRecommendLayer()}};b.buyCallBack=function(){egret.MainContext.instance.stage.touchEnabled=!0;var a=this.config.cost;DataCenter.getInstance().reduceGc(a,!0);DataCenter.getInstance().buyBuff(this.configId);doAction(Const.BUY_BUFF_DONE);DataCenter.getInstance().saveLocalData();DataCenter.getInstance().saveData()};
b.errorCallBack=function(){egret.MainContext.instance.stage.touchEnabled=!0};b.refreshView=function(a,b){this.config=a;this.configId=this.config.configId;this.iconContainer.removeChildren();var c=ResourceUtils.createBitmapFromSheet("icon_buff_"+this.configId,"iconRes");this.iconContainer.addChild(c);c.scaleX=c.scaleY=0.8;c.x=28;c.y=22;this.desLabel.text=this.config.des;this.nameLabel.text=this.config.name;this._needLabel.text=this.config.cost;-1<DataCenter.getInstance().totalData.buffList.indexOf(this.configId)?
(this._button.setLabel("\u5df2\u6fc0\u6d3b"),this._button.setEnabled(!1),this._goldContainer.visible=!1):(this._button.setLabel("\u7acb\u5373\u6fc0\u6d3b"),this._button.setEnabled(!0),this._goldContainer.visible=!0)};return d}(BaseContainer);BuffItemLayer.prototype.__class__="BuffItemLayer";
var BuffButton=function(c){function d(){c.call(this);this.anchorX=this.anchorY=0.5;this.init()}__extends(d,c);var b=d.prototype;b.init=function(){this._container=new egret.DisplayObjectContainer;this._normal=ResourceUtils.createBitmapFromSheet("hero_lvup_btn");this._container.addChild(this._normal);this._normal.scaleX=this._normal.scaleY=1;this._label=new egret.TextField;this._label.text="\u6fc0\u6d3b\u5c5e\u6027";this._label.size=30;this._label.anchorX=this._label.anchorY=0.5;this._container.addChild(this._label);
this._label.x=88;this._label.y=30;this._label.textColor=0;this.addChild(this._container);this._container.cacheAsBitmap=!0};b.setLabel=function(a){this._label.text=a};return d}(SimpleButton);BuffButton.prototype.__class__="BuffButton";
var CMInfoLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("paymen_recommend");a.x=20;a.y=200;this.boxContainer.addChild(a);a=new egret.TextField;a.text="\u5ba2\u670dQQ:";this.boxContainer.addChild(a);a.x=140;a.y=350;a=new egret.TextField;a.text="2853808283";this.boxContainer.addChild(a);a.textColor=16711680;a.x=300;a.y=350;a=new egret.TextField;a.text="QQ\u7fa4:";this.boxContainer.addChild(a);a.x=140;
a.y=400;a=new egret.TextField;a.text="454025690";this.boxContainer.addChild(a);a.textColor=16711680;a.x=300;a.y=400;a=new egret.TextField;a.text="\u5fae\u4fe1\u53f7:";this.boxContainer.addChild(a);a.x=140;a.y=450;a=new egret.TextField;a.text="liebaoyeyou";this.boxContainer.addChild(a);a.textColor=16711680;a.x=300;a.y=450;var a=new SimpleButton,b=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");a.addChild(b);a.addOnClick(this.onCloseHandler,this);a.x=510;a.y=170;a.useZoomOut(!0);this.boxContainer.addChild(a)};
b.onCloseHandler=function(){GameMainLayer.instance.hideCMInfo()};return d}(BoxContainer);CMInfoLayer.prototype.__class__="CMInfoLayer";
var FriendTabView=function(c){function d(){c.call(this);this.initButton();this.init()}__extends(d,c);d.prototype.initButton=function(){this._button1=new TabButton;this._button1.initButton("top_tab_2","top_tab_1");this._button1.addLabel("\u5171\u6218\u6c5f\u6e56");this.addChild(this._button1);this._button1.name="type2Button";this._button1.x=200;this._button2=new TabButton;this._button2.initButton("top_tab_2","top_tab_1");this._button2.addLabel("\u4f20\u529f");this.addChild(this._button2);this._button2.x=
440;this._button2.name="type1Button"};return d}(TabView);FriendTabView.prototype.__class__="FriendTabView";
var CoinContainer=function(c){function d(a,b){void 0===b&&(b=1);c.call(this);this._context=this._selector=this._itemsTouch=null;this.updated=this._isOpen=!1;this.init(a,b)}__extends(d,c);var b=d.prototype;Object.defineProperty(b,"num",{get:function(){return this._num},enumerable:!0,configurable:!0});Object.defineProperty(b,"type",{get:function(){return this._type},enumerable:!0,configurable:!0});b.showAnimation=function(){var a=GameUtils.random(-200,-90),b=new DropAnimation(500,2*a);b.run(this);b.setComplete(function(){(new DropAnimation1(100,
a/2)).run(this)},this)};b.showAnimation1=function(){var a=GameUtils.random(-90,90);(new DropAnimation2(500,2*a)).run(this)};b.init=function(a,b){var c=this;this._num=a;this._type=b;this._itemsTouch=new ItemsTouchManager;this._itemsTouch.addItems(this);this._itemsTouch.setController(new TouchController(this.onClickHandler,this));if(2==this._type)this._coin=ResourceUtils.createBitmapFromSheet("gold_icon","commonRes");else if(3==this._type)this._coin=ResourceUtils.createBitmapFromSheet("holy_icon");
else if(8==this._type)this._coin=ResourceUtils.createBitmapFromSheet("suprise");else if(11==this._type){this._coin=new egret.Bitmap;var d=ResourceUtils.getImgUrl(ActivityDrop.VERSION+"_qixi_image");RES.getResByUrl(d,function(a){c._coin.texture=a},this)}else this._coin=99==this._type?ResourceUtils.createBitmapFromSheet("spar","iconRes"):ResourceUtils.createBitmapFromSheet("coin_icon","commonRes");this._coin.anchorX=this._coin.anchorY=0.5;this._coin.scaleX=this._coin.scaleY=0.7;this.addChild(this._coin);
Time.setTimeout(this.autoCollect,this,2E3)};b.cleanUp=function(){this._isOpen=!0};b.autoCollect=function(){!1==this._isOpen&&this.open(0)};b.open=function(a){this._isOpen=!0;Time.setTimeout(function(){AnimationClear.clear(this);doAction(Const.FLY_COIN,this)},this,a)};b.onClickHandler=function(a,b){this._isOpen||3==a&&this._selector&&this._selector.call(this._context,this,0)};b.setCallback=function(a,b){void 0===b&&(b=null);this._selector=a;this._context=b};b.dispose=function(){c.prototype.dispose.call(this);
this._itemsTouch.dispose()};return d}(BaseContainer);CoinContainer.prototype.__class__="CoinContainer";
var GameSetLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("set_bg");this.boxContainer.addChild(a);a.x=34;a.y=105;var b=new SimpleButton,a=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");b.addChild(a);b.addOnClick(this.onClickHandler,this);b.x=530;b.y=82;b.useZoomOut(!0);this.boxContainer.addChild(b);this._container=new egret.DisplayObjectContainer;this.boxContainer.addChild(this._container);
this._container.y=-20;this._musicBtn=new MusicButton;this._musicBtn.initButton("music_on","music_off");this._container.addChild(this._musicBtn);this._musicBtn.addOnClick(this.onMusicClickHandler,this);this._musicBtn.useZoomOut(!0);this._musicBtn.x=196;this._musicBtn.y=290;a=SoundManager.getInstance().getMusicStatus();this._musicBtn.setButtonStatus(a);b=new SimpleButton;b.x=443;b.y=290;b.anchorX=b.anchorY=0.5;a=ResourceUtils.createBitmapFromSheet("StatisticsIcon","iconRes");b.addChild(a);b.useZoomOut(!0);
b.addOnClick(this.statisticsHandler,this);this._container.addChild(b);PlatformFactory.getPlatform();PlatformFactory.getPlatform().name==PlatformTypes.WEIXIN?(a=new SimpleButton,a.x=443,a.y=500,a.anchorX=a.anchorY=0.5,b=ResourceUtils.createBitmapFromSheet("icon_save","iconRes"),a.addChild(b),a.useZoomOut(!0),a.addOnClick(this.share5,this),this._container.addChild(a),b=new SimpleButton,b.x=196,b.y=500,b.anchorX=b.anchorY=0.5,a=ResourceUtils.createBitmapFromSheet("qq_group_icon","iconRes"),b.addChild(a),
b.useZoomOut(!0),b.addOnClick(this.QQGroup,this),this._container.addChild(b)):PlatformFactory.getPlatform().name==PlatformTypes.QQBROWSER?(a=new BBSIconButton,a.useZoomOut(!0),a.addOnClick(this.showBBS,this),a.x=196,a.y=510,this._container.addChild(a),a=new SwitchIconButton,a.useZoomOut(!0),a.addOnClick(this.switchUser,this),a.x=443,a.y=500,this._container.addChild(a)):GameUtils.isYXDT()||(GameUtils.is1758()?(b=new SimpleButton,b.x=196,b.y=500,b.anchorX=b.anchorY=0.5,a=ResourceUtils.createBitmapFromSheet("qq_group_icon1",
"iconRes"),b.addChild(a),b.useZoomOut(!0),b.addOnClick(this.QQGroup,this),this._container.addChild(b)):GameUtils.isLieBao()&&(b=new SimpleButton,b.x=196,b.y=500,b.anchorX=b.anchorY=0.5,a=ResourceUtils.createBitmapFromSheet("qq_group_icon1","iconRes"),b.addChild(a),b.useZoomOut(!0),b.addOnClick(this.showCMInfo,this),this._container.addChild(b)));this._container.cacheAsBitmap=!0};b.switchUser=function(){GameUtils.loginout()};b.attentionHandler=function(){location.href="http://mp.weixin.qq.com/s?__biz=MjM5NzYxMDYwNw==&mid=209086260&idx=1&sn=74538021203f3da10b730056b5aed1c8#rd"};
b.showBBS=function(){};b.QQGroup=function(){parent.window.location.href="http://jq.qq.com/?_wv=1027&k=X0OVZM"};b.share5=function(){GameMainLayer.instance.showShareTipLayer("share_5")};b.saveHandler=function(){};b.showCMInfo=function(){GameMainLayer.instance.showCMInfo()};b.statisticsHandler=function(){GameMainLayer.instance.showStatisticsLayer()};b.onMusicClickHandler=function(){SoundManager.getInstance().switchMusic();var a=SoundManager.getInstance().getMusicStatus();this._musicBtn.setButtonStatus(a)};
b.onEffectClickHandler=function(){SoundManager.getInstance().switchEffect();var a=SoundManager.getInstance().getEffectStatus();this._effectBtn.setButtonStatus(a)};b.onClickHandler=function(){GameMainLayer.instance.hideSetLayer()};return d}(BoxContainer);GameSetLayer.prototype.__class__="GameSetLayer";
var MusicButton=function(c){function d(){c.call(this);this.anchorX=this.anchorY=0.5}__extends(d,c);var b=d.prototype;b.initButton=function(a,b){this.open=ResourceUtils.createBitmapFromSheet(a,"iconRes");this.open.x=78.5;this.open.y=76;this.open.anchorX=this.open.anchorY=0.5;this.addChild(this.open);this.close=ResourceUtils.createBitmapFromSheet(b,"iconRes");this.addChild(this.close);this.close.x=78.5;this.close.y=76;this.close.anchorX=this.close.anchorY=0.5;this.close.visible=!1};b.setButtonStatus=
function(a){this.close.visible=1==a;this.open.visible=1!=a};return d}(SimpleButton);MusicButton.prototype.__class__="MusicButton";var MusicStatus;(function(c){c[c.closed=1]="closed";c[c.open=2]="open"})(MusicStatus||(MusicStatus={}));var EnCodeJson;(function(c){c.encodeJson=function(c,b){return sjcl.json.encrypt(c,JSON.stringify(b))};c.decodeJson=function(c,b){var a=sjcl.json.decrypt(c,b);return JSON.parse(a)}})(EnCodeJson||(EnCodeJson={}));
var GuildHeroModel=function(){function c(b){this.configId=0;this.config=null;this._lv=1;this._skillList=[];this.tapCoin=0;this._speed=1E3;this.init(b)}var d=c.prototype;d.init=function(b){this.configId=b;this.config=RES.getRes("heroConfig")[b];this.skillinfo=GuildWuLinDataManager.getInstance().findSkillDataByName(this.config.name);this._lv=0};d.getDes=function(){return this.skillinfo.skillDes};d.getRes=function(){return"icon_hero_skill_1"};Object.defineProperty(d,"lv",{get:function(){return this._lv=
this.skillinfo.skillCurLevel},set:function(b){null!=this.skillinfo&&(this.skillinfo.skillCurLevel=b)},enumerable:!0,configurable:!0});Object.defineProperty(d,"dps",{get:function(){return this._dps},enumerable:!0,configurable:!0});Object.defineProperty(d,"speed",{get:function(){return this._speed},enumerable:!0,configurable:!0});Object.defineProperty(d,"nextDPS",{get:function(){return this._nextDPS},enumerable:!0,configurable:!0});Object.defineProperty(d,"tapDamage",{get:function(){return this._dps},
enumerable:!0,configurable:!0});Object.defineProperty(d,"skillList",{get:function(){return this._skillList},enumerable:!0,configurable:!0});Object.defineProperty(d,"nextSkill",{get:function(){return this._nextSkill},enumerable:!0,configurable:!0});d.isMainHero=function(){return 1==this.config.isMain};d.refreshHeroSkillList=function(){};d.isHero=function(){return null!=this.config.animationID};d.refreshDPS=function(){GuildWuLinDataManager.getInstance().computerAllDamge();this._dps=GuildWuLinDataManager.getInstance().getFormatNum(GuildWuLinDataManager.getInstance().dps)};
c.createByConfigId=function(b){return GuildHeroModelCache.getInstance().getCache(b)};return c}();GuildHeroModel.prototype.__class__="GuildHeroModel";
var GuildHeroModelCache=function(){function c(){this._models=[]}var d=c.prototype;c.getInstance=function(){null==this._instance&&(this._instance=new c);return this._instance};d.getCache=function(b){if(this._models[b])return this._models[b].refreshHeroSkillList(),this._models[b];var a=new GuildHeroModel(b);a.refreshHeroSkillList();return this._models[b]=a};d.destroy=function(b){delete this._models[b]};return c}();GuildHeroModelCache.prototype.__class__="GuildHeroModelCache";var PaymentViewType;
(function(c){c[c.PRICE=1]="PRICE";c[c.ICON=2]="ICON"})(PaymentViewType||(PaymentViewType={}));
var PaymentModel=function(){function c(b){this._data=b}var d=c.prototype;Object.defineProperty(d,"id",{get:function(){return this._data.id},enumerable:!0,configurable:!0});Object.defineProperty(d,"ext",{get:function(){return this._data.ext||""},enumerable:!0,configurable:!0});Object.defineProperty(d,"mode",{get:function(){return this._data.mode},enumerable:!0,configurable:!0});Object.defineProperty(d,"title",{get:function(){return 1==this._data.orderId?this._data.title+"(\u4eca\u65e5\u8fd8\u53ef\u8d2d\u4e70"+
ActivityManager.getInstance().getHolyLfNum()+"\u6b21)":this._data.title},enumerable:!0,configurable:!0});Object.defineProperty(d,"description",{get:function(){return this._data.description},enumerable:!0,configurable:!0});Object.defineProperty(d,"type",{get:function(){return this._data.type},enumerable:!0,configurable:!0});Object.defineProperty(d,"countdownType",{get:function(){return this._data.countdownType},enumerable:!0,configurable:!0});d.isCoinType=function(){return-1<["coin","bigcoin","bbcoin"].indexOf(this.type)};
d.canRefreshCoin=function(){return this.isCoinType()};Object.defineProperty(d,"canShow",{get:function(){return"bigcoin"==this.type||"bbcoin"==this.type?1==DataCenter.getInstance().isUseCoinSkill.getValue():"callhero"==this.type?0==DataCenter.getInstance().totalData.currentLife&&!HeroController.getInstance().heroIsCall(Const.RECALL_HERO_ID):"share"==this.type?PlatformFactory.getPlatform().name==PlatformTypes.WANBA&&ProxyUtils.isShareOpen:"holy"==this.type?ActivityManager.getInstance().isActivityOpen(ActivityType.buyyu):
!0},enumerable:!0,configurable:!0});Object.defineProperty(d,"need",{get:function(){return this._data.need},enumerable:!0,configurable:!0});Object.defineProperty(d,"currency",{get:function(){return this._data.currency},enumerable:!0,configurable:!0});Object.defineProperty(d,"icon",{get:function(){return this._data.icon},enumerable:!0,configurable:!0});Object.defineProperty(d,"tip",{get:function(){return this._data.tip},enumerable:!0,configurable:!0});Object.defineProperty(d,"goodType",{get:function(){return this._data.good},
enumerable:!0,configurable:!0});Object.defineProperty(d,"descColor",{get:function(){return this.mode==PaymentMode.USE?14664856:16777215},enumerable:!0,configurable:!0});Object.defineProperty(d,"productId",{get:function(){return this._data.productId},enumerable:!0,configurable:!0});Object.defineProperty(d,"time",{get:function(){return DataCenter.getInstance().countdown.getTime("payment_"+this.countdownType)},enumerable:!0,configurable:!0});d.countdown=function(){this._data.countdown&&DataCenter.getInstance().countdown.setTime("payment_"+
this.countdownType,this._data.countdown)};d.showView=function(b){var a=0,a="buy"==this.type?1:"callhero"==this.type?0:"share"==this.type?0:3;return 0!=(a&b)};d.getFormatDescription=function(){var b=this.description||"",a=this.coinNumber;return null!=a?b.replace("{0}",a.getNumer()):b};Object.defineProperty(d,"coinNumber",{get:function(){if(this.isCoinType()){var b=new NumberModel;b.add(DataCenter.getInstance().getBossHP());b.times(10);"bigcoin"==this.type?b.times(30):"bbcoin"==this.type&&b.times(1E6);
return b}return null},enumerable:!0,configurable:!0});d.getButtonText=function(){var b=this.mode;if(b==PaymentMode.USE)return"callhero"==this.type?0==DataCenter.getInstance().isPay.getValue()?"\u9996\u5145\u5373\u9001":"\u7acb\u5373\u9886\u53d6":"blood"==this.type?DataCenter.getInstance().loginAwardModel.isBoomFree()?"\u514d\u8d39":"\u4f7f\u7528\u9053\u5177":"touch"==this.type&&(b=ActivityManager.getInstance().getFreeSkillNum(),0<b)?"\u514d\u8d39"+b+"\u6b21":"\u4f7f\u7528\u9053\u5177";if(b==PaymentMode.SHARE)return"\u5206\u4eab";
if(b==PaymentMode.BUY)return"\u8d2d\u4e70\u5143\u5b9d";if(b==PaymentMode.HOLY)return"\u8d2d\u4e70"};d.getFormatValue=function(){var b=this.need;return"cny"==this.currency?"\uffe5"+b:"jifen"==this.currency?0<ProxyUtils.vipLevel?0.8*b+"\u661f\u661f":b+"\u661f\u661f":0==b?"\u514d\u8d39":b.toString()};return c}();PaymentModel.prototype.__class__="PaymentModel";
var CoinElf=function(c){function d(a){c.call(this);this._itemsTouch=this._curElf=null;this._timeid=0;this._clicked=!1;this._coin=a;this._itemsTouch=new ItemsTouchManager;this._itemsTouch.setController(new TouchController(this.click,this));addAction("clearnReborn",this.moveBack,this)}__extends(d,c);var b=d.prototype;b.showElf=function(){var a=this;this._curElf=new Movie("elf_json","elf");this._spr=new egret.DisplayObjectContainer;var b=new egret.Sprite;b.anchorX=this._spr.anchorY=0.5;b.graphics.beginFill(16711680);
b.graphics.drawRect(0,0,70,70);b.graphics.endFill();b.width=70;b.alpha=0;b.height=70;b.y=-35;b.x=0;this._spr.addChild(b);this._spr.addChild(this._curElf);this._curElf.play("1");this.addChild(this._spr);this._spr.y=-50;this._spr.x=GameUtils.random(0,600);this._itemsTouch.addItems(b);var c=180+GameUtils.random(0,60);TweenLite.to(this._spr,1,{x:110+GameUtils.random(0,400),y:c,onComplete:function(){a._timeid=Time.setTimeout(a.click,a,4E3);egret.Tween.get(a._spr,{loop:!0}).to({y:c+15},1E3).to({y:c},1E3)}})};
b.click=function(){var a=this;if(!this._clicked){this._itemsTouch.clearItems();egret.Tween.removeTweens(this._spr);this._clicked=!0;this._itemsTouch.removeItems(this._curElf);this._curElf.play("2");DataCenter.getInstance().statistics.addValue(StatisticsType.gift);var b=ResourceUtils.createBitmapFromSheet("box_normal");this.addChild(b);b.x=this._spr.x;b.y=this._spr.y;b.anchorX=b.anchorY=0.5;b.scaleX=b.scaleY=0.8;egret.Tween.get(b).to({y:GameUtils.getLayoutY(516)},3E3).call(function(){egret.Tween.removeTweens(b);
GameUtils.removeFromParent(b);var c=ResourceUtils.createBitmapFromSheet("box_open");c.x=b.x;c.y=b.y;c.anchorX=c.anchorY=0.5;c.scaleX=c.scaleY=0.8;a.addChild(c);DataCenter.getInstance().statistics.addValue(StatisticsType.openbox);var d=a.localToGlobal(b.x,b.y),g=new NumberModel;g.add(a._coin);g={coins:g.pieces(2),saved:!0,type:"1"};doAction(Const.DROP_COIN,g,d.x,d.y);egret.Tween.get(c).wait(1E3).to({alpha:0},200).call(function(){GameUtils.removeFromParent(c)})});egret.Tween.get(b,{loop:!0}).to({rotation:10},
250).to({rotation:0},250).to({rotation:-10},250).to({rotation:0},250);this.moveBack()}};b.moveBack=function(){var a=this;Time.clearTimeout(this._timeid);this._itemsTouch.clearItems();this._itemsTouch.dispose();this._spr&&this._curElf&&TweenLite.to(this._spr,1,{x:GameUtils.random(0,600),y:-50,onComplete:function(){GameUtils.removeFromParent(a._spr);GameUtils.removeFromParent(a._curElf);TweenLite.killTweensOf(a._spr)}})};b.begin=function(a){Time.setTimeout(this.showElf,this,a)};return d}(BaseContainer);
CoinElf.prototype.__class__="CoinElf";var WXAwardBox=function(c){function d(){c.call(this);addAction(Const.AWARD_BOX_TIP,this.awardTip,this)}__extends(d,c);d.prototype.awardTip=function(){this.onMenuShareAppMessage(ProxyUtils.awdTo);GameMainLayer.instance.showShareTipLayer("awardbox")};return d}(WXShareBase);WXAwardBox.prototype.__class__="WXAwardBox";
var WXShareKillBox=function(c){function d(){c.call(this);addAction(Const.BOSS_KILLED,this.killed,this)}__extends(d,c);d.prototype.killed=function(b,a){var c=this;"0"!=this.getShare().getValue("boxenemy")&&a&&(this.shareFriend({t:"boxenemy"},function(){c.getShare().removeValue("boxenemy")},this.removeMask),GameMainLayer.instance.showShareTipLayer("share_3"))};return d}(WXShareBase);WXShareKillBox.prototype.__class__="WXShareKillBox";
var WXShareNextLevel=function(c){function d(){c.call(this);addAction(Const.UNLOCK_LEVEL,this.unlockLevel,this)}__extends(d,c);d.prototype.unlockLevel=function(b){var a=this;"0"!=this.getShare().getValue("nextlevel")&&(this.shareFriend({t:"nextlevel"},function(){a.getShare().removeValue("nextlevel");var b=new SingleProxy({mod:"User","do":"shareNextLevel"});b.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(a){WXUtils.showAward(a.responseData.award)},a);b.load()},this.removeMask),GameMainLayer.instance.showShareTipLayer("share_1"))};
return d}(WXShareBase);WXShareNextLevel.prototype.__class__="WXShareNextLevel";var WXShareUnlockSkill=function(c){function d(){c.call(this);addAction(Const.CLICK_CD_SKILL,this.clickCdSkill,this)}__extends(d,c);d.prototype.clickCdSkill=function(b){var a=this;"0"!=this.getShare().getValue("cdskill")&&(this.shareFriend({t:"cdskill",skId:b},function(){a.getShare().removeValue("cdskill")},this.removeMask),GameMainLayer.instance.showShareTipLayer("share_2"))};return d}(WXShareBase);
WXShareUnlockSkill.prototype.__class__="WXShareUnlockSkill";
var WxShareAll=function(c){function d(){c.call(this);this._isQuery=!1;this._data=null;addAction(Const.CLOSE_SHARE_TIP,this.closeShareTip,this)}__extends(d,c);var b=d.prototype;b.shareRequest=function(){this._isQuery||this.share()};b.closeShareTip=function(){this.onMenuShareTimeline(this._data);this.onMenuShareAppMessage(this._data)};b.confAPI=function(a){var b=this;wx.ready(function(){wx.showMenuItems({menuList:"menuItem:share:appMessage menuItem:share:timeline menuItem:profile menuItem:favorite menuItem:share:qq menuItem:share:weiboApp".split(" ")});b.onMenuShareTimeline(a);
b.onMenuShareAppMessage(a);b.onMenuShareQQ(a);b.onMenuShareWeibo(a)})};b.share=function(){var a=this;this.loadShareInfo({t:"shareall"},function(b){a._data=b;a.confAPI(b)},this,!0)};b.getQueryData=function(){var a=decodeURIComponent(GameUtils.getQuery("title",!0)),b=decodeURIComponent(GameUtils.getQuery("desc",!0)),c=decodeURIComponent(GameUtils.getQuery("link",!0)),d=decodeURIComponent(GameUtils.getQuery("imgUrl",!0)),g=decodeURIComponent(GameUtils.getQuery("tltitle",!0)),l=decodeURIComponent(GameUtils.getQuery("timestamp",
!0)),k=decodeURIComponent(GameUtils.getQuery("nonceStr",!0)),m=decodeURIComponent(GameUtils.getQuery("signature",!0));if(null!=a&&null!=b&&null!=c&&null!=d&&null!=l&&null!=k&&null!=m){var n={};n.timestamp=parseInt(l);n.nonceStr=k;n.signature=m;n.tltitle=g;n.title=a;n.desc=b;n.link=c;n.imgUrl=d;return n}return null};b.shareQuery=function(){var a=this.getQueryData();if(null!=a){this._data=a;this._isQuery=!0;var b=new BodyConfig;b.appId="wxa540e5963dae549a";b.nonceStr=a.nonceStr;b.signature=a.signature;
b.timestamp=a.timestamp;b.jsApiList="onMenuShareTimeline onMenuShareAppMessage onMenuShareQQ onMenuShareWeibo showMenuItems chooseWXPay".split(" ");wx.config(b);this.confAPI(a)}};return d}(WXShareBase);WxShareAll.prototype.__class__="WxShareAll";
var Mask=function(c){function d(a){c.call(this);this.texture=a;this.tempHeight=0;this.width=this.height=100;this.touchEnabled=!0;this.touchChildren=!1;this.alpha=0}__extends(d,c);var b=d.prototype;b.show=function(a,b,c,d){var g=this.width,l=this.height;a=parseInt(a.toString());b=parseInt(b.toString());c=parseInt(c.toString());d=parseInt(d.toString());a+c>g&&(a=g-c);b+d>l&&(b=l-d);0>a&&(a=0);0>b&&(b=0);this.bitmap1||(this.bitmap1=new egret.Bitmap(this.texture),this.addChild(this.bitmap1),this.bitmap2=
new egret.Bitmap(this.texture),this.addChild(this.bitmap2),this.bitmap3=new egret.Bitmap(this.texture),this.addChild(this.bitmap3),this.bitmap4=new egret.Bitmap(this.texture),this.addChild(this.bitmap4),this.bitmap5=new egret.Bitmap(this.texture),this.addChild(this.bitmap5),this.bitmap6=new egret.Bitmap(this.texture),this.addChild(this.bitmap6),this.bitmap7=new egret.Bitmap(this.texture),this.addChild(this.bitmap7),this.bitmap8=new egret.Bitmap(this.texture),this.addChild(this.bitmap8));this.bitmap1.width=
a;this.bitmap1.height=b-this.tempHeight;this.bitmap1.y=this.tempHeight;this.bitmap2.x=a;this.bitmap2.width=c;this.bitmap2.height=b-this.tempHeight;this.bitmap2.y=this.tempHeight;this.bitmap3.x=a+c;this.bitmap3.width=g-a-c;this.bitmap3.height=b-this.tempHeight;this.bitmap3.y=this.tempHeight;this.bitmap4.y=b;this.bitmap4.width=a;this.bitmap4.height=d;this.bitmap5.x=a+c;this.bitmap5.y=b;this.bitmap5.width=g-a-c;this.bitmap5.height=d;this.bitmap6.y=b+d;this.bitmap6.width=a;this.bitmap6.height=l-b-d;this.bitmap7.x=
a;this.bitmap7.y=b+d;this.bitmap7.width=c;this.bitmap7.height=l-b-d;this.bitmap8.x=a+c;this.bitmap8.y=b+d;this.bitmap8.width=g-a-c;this.bitmap8.height=l-b-d};b.changeTexture=function(a){this.texture=a;this.bitmap1&&(this.bitmap1.texture=a,this.bitmap2.texture=a,this.bitmap3.texture=a,this.bitmap4.texture=a,this.bitmap5.texture=a,this.bitmap6.texture=a,this.bitmap7.texture=a,this.bitmap8.texture=a)};return d}(egret.DisplayObjectContainer);Mask.prototype.__class__="Mask";
var SoundManager=function(){function c(){this._effect=new SoundEffects;this._back=new SoundBg;var b=egret.localStorage.getItem(ProxyUtils.userId+"bearjmoerMusic")||"2",a=egret.localStorage.getItem(ProxyUtils.userId+"bjmoerSound")||"2";this._musicStop=parseInt(b);this._soundStop=parseInt(a)}var d=c.prototype;c.getInstance=function(){return null==this._instance?this._instance=new c:this._instance};d.getMusicStatus=function(){return this._musicStop};d.getEffectStatus=function(){return this._soundStop};
d.isMusicOpen=function(){return 1!=this._musicStop};d.isSoundOpen=function(){return 1!=this._soundStop};d.playBackgroundMusic=function(){this.isMusicOpen()&&this._back.play("bgSound")};d.stopBackgroundMusic=function(){this._back.stop()};d.resumeBackMusic=function(){this.isMusicOpen()&&this._back.play("bgSound")};d.pauseBackMusic=function(){this.isMusicOpen()&&this._back.stop()};d.playEffect=function(b){};d.stopEffect=function(b){this.isSoundOpen()&&this._effect.stop(b)};d.switchMusic=function(){this._musicStop+=
1;2<this._musicStop&&(this._musicStop=1);1==this._musicStop?this.stopBackgroundMusic():this._back.play("bgSound");this.setUserInfo()};d.switchEffect=function(){this._soundStop+=1;2<this._soundStop&&(this._soundStop=1);this.setUserInfo()};d.setUserInfo=function(){egret.localStorage.setItem(ProxyUtils.userId+"bearjmoerMusic",this._musicStop.toString());egret.localStorage.setItem(ProxyUtils.userId+"bjmoerSound",this._soundStop.toString())};return c}();SoundManager.prototype.__class__="SoundManager";
var ShakeAnimation=function(c){function d(a,b,d,h){void 0===h&&(h=-1);c.call(this,a);this._count=this._strengthY=this._strengthX=0;this._count=h;this._strengthX=b;this._strengthY=d}__extends(d,c);var b=d.prototype;b.update=function(a){var b=d._original_position[this._target.hashCode],c=GameUtils.random(-this._strengthX,this._strengthX),h=GameUtils.random(-this._strengthY,this._strengthY);1==a?(this._target.x=b.pt.x,this._target.y=b.pt.y,a=b.ref.indexOf(this),-1<a&&b.ref.splice(a,1),0==b.ref.length&&
delete d._original_position[this._target.hashCode]):(this._target.x=b.pt.x+c,this._target.y=b.pt.y+h)};b.run=function(a){var b=d._original_position;b.hasOwnProperty(a.hashCode)||(b[a.hashCode]={},b[a.hashCode].ref=[],b[a.hashCode].pt=new egret.Point(a.x,a.y));b[a.hashCode].ref.push(this);c.prototype._run.call(this,a)};d._original_position={};return d}(GameAnimation);ShakeAnimation.prototype.__class__="ShakeAnimation";
var CollectionBase=function(){function c(b,a,c){void 0===a&&(a=1);void 0===c&&(c=Direction.HORIZONTAL);this._numPerLine=1;this._direction=Direction.HORIZONTAL;this._paddingY=this._paddingX=this._itemHeight=this._itemWidth=0;this._tableView=b;this._numPerLine=a;this._direction=c}var d=c.prototype;Object.defineProperty(d,"paddingX",{get:function(){return this._paddingX},set:function(b){this._paddingX=b},enumerable:!0,configurable:!0});Object.defineProperty(d,"paddingY",{get:function(){return this._paddingY},
set:function(b){this._paddingY=b},enumerable:!0,configurable:!0});Object.defineProperty(d,"numPerLine",{get:function(){return this._numPerLine},set:function(b){this._numPerLine=b},enumerable:!0,configurable:!0});Object.defineProperty(d,"direction",{get:function(){return this._direction},set:function(b){this._direction=b},enumerable:!0,configurable:!0});Object.defineProperty(d,"itemWidth",{get:function(){return this._itemWidth},set:function(b){this._itemWidth=b},enumerable:!0,configurable:!0});Object.defineProperty(d,
"itemHeight",{get:function(){return this._itemHeight},set:function(b){this._itemHeight=b},enumerable:!0,configurable:!0});d.bind=function(b){this._datasoruce=b;var a=this._itemWidth,c=this._itemHeight;this._direction==Direction.HORIZONTAL?c=this._itemHeight*this._numPerLine+(this._numPerLine-1)*this._paddingY:a=this._itemWidth*this._numPerLine+(this._numPerLine-1)*this._paddingX;this._tableView.setList(this.formatDatasource(b),this.direction,this,a,c)};d.createItemRenderer=function(){for(var b=new BaseContainer,
a=0,c=0,d=0;d<this._numPerLine;d++){var h=this.createSubItemRenderer();b.addChild(h);this._direction==Direction.HORIZONTAL?(c+=0.5*h.height,h.y=c,c+=0.5*h.height+this._paddingY,h.x=0.5*h.width):this._direction==Direction.VERTICAL&&(a+=0.5*h.width,h.x=a,a+=0.5*h.width+this._paddingX,h.y=0.5*h.height)}return b};d.formatDatasource=function(b){for(var a=[],c=Math.ceil(b.length/this._numPerLine),d=0;d<c;d++)a.push(b.slice(d*this._numPerLine,(d+1)*this._numPerLine));return a};d.updateItemRenderer=function(b,
a,c){for(var d=0;d<b.numChildren;d++){var h=b.getChildAt(d);d<a.length?(h.visible=!0,h.__info__=a[d],h.setItemIndex&&h.setItemIndex(d+c*this.numPerLine),h.updateView(a[d])):h.visible=!1}};d.setCreateCallback=function(b,a){void 0===a&&(a=null);this._createSubItemContext=a;this._createSubItemSelector=b};d.createSubItemRenderer=function(){return this._createSubItemSelector?this._createSubItemSelector.call(this._createSubItemContext):null};return c}();CollectionBase.prototype.__class__="CollectionBase";
var ProxyCache=function(){function c(){this._cacheData={}}var d=c.prototype;Object.defineProperty(c,"instance",{get:function(){this._instance||(this._instance=new c);return this._instance},enumerable:!0,configurable:!0});d.setCache=function(b){var a=b.params;if(a.hasOwnProperty("cache")&&!0===a.cache){var a=b.responseData,c=b.getParamByName("mod");b=b.getParamByName("do");this._cacheData.hasOwnProperty(c)||(this._cacheData[c]={});this._cacheData[c][b]=a;doAction("Cache."+c+"."+b,a);doAction("cache_proxy_data",
c+"."+b)}};d.getCache=function(b,a){void 0===b&&(b=null);void 0===a&&(a=null);if(null==b)return this._cacheData;if(this.isCache(b,a)){var c=this.formatParmas(b,a);return this._cacheData[c[0]][c[1]]}return null};d.formatParmas=function(b,a){void 0===a&&(a=null);if(null==a){var c=b.split(".");b=c[0];a=c[1]}return[b,a]};d.isCache=function(b,a){void 0===a&&(a=null);var c=this.formatParmas(b,a);return this._cacheData.hasOwnProperty(c[0])&&this._cacheData[c[0]].hasOwnProperty(c[1])};c.setCache=function(b){c.instance.setCache(b)};
c.getCache=function(b){void 0===b&&(b=null);return c.instance.getCache(b)};c.isCache=function(b,a){void 0===a&&(a=null);return c.instance.isCache(b,a)};c._instance=null;return c}();ProxyCache.prototype.__class__="ProxyCache";
var ProxyUpdate=function(){function c(){}var d=c.prototype;Object.defineProperty(c,"instance",{get:function(){null==this._instance&&(this._instance=new c);return this._instance},enumerable:!0,configurable:!0});c.update=function(b,a){c.instance.update(b,a)};d.isArray=function(b){return b instanceof Array};d.isObject=function(b){return-1<b.toString().indexOf("object")};d.isNumeric=function(b){return parseFloat(b).toString()==b.toString()};d.isNormal=function(b){var a=-1<b.indexOf("@"),c=-1<b.indexOf(".");
b=-1<b.indexOf("_");return!a&&!c&&!b};d.isAddToArray=function(b){return"@a"==b};d.isRemoveToArray=function(b){b=b.split("_");return 3>=b.length&&"@d"==b[0]};d.isFilter=function(b){return"@f"==b.split("_")[0]};d._updateObject=function(b,a,c){b=b.split(".");"@a"==b[0]||"@s"==b[0]?this.isArray(c)?c[parseInt(b[1])]=a:c[b[1]]=a:"@d"==b[0]&&delete c[b[1]]};d._getFilterObject=function(b,a){if(a){var c=b.split("_");if(2==c.length&&"@f"==c[0]&&this.isArray(a))return c=parseInt(c[1]),a[c];if(3==c.length&&"@f"==
c[0]&&this.isArray(a))for(var d=c[1],h=c[2],g=0;g<a.length;g++){var l=a[g];if(3==c.length&&this.isObject(l)){var k=l[d];if(k&&("@"==h[0]&&(h=h.replace("@","")),h==k))return l}}}return null};d._addObjectToArray=function(b,a){if(this.isArray(a))for(var c=0;c<a.length;c++)b.push(a[c]);else b.push(a)};d._removeObjectFromArray=function(b,a,c){a=a.split("_");if(3>=a.length&&"@d"==a[0]&&this.isArray(b))for(var d=b.length-1;0<=d;d--){var h=b[d];if(3==a.length){if(h.hasOwnProperty(a[1])){var g=a[2];"@"==g[0]&&
(g=g.replace("@",""));g==h[a[1]]&&b.splice(d,1)}}else 2==a.length&&h.hasOwnProperty(a[1])?c==h[a[1]]&&b.splice(d,1):1==a.length&&c==h&&b.splice(d,1)}};d.update=function(b,a){var c=b.responseData.c,d;for(d in c){var h=c[d];console.log(d);var g=d.split("."),l=g[0],g=g[1];a.hasOwnProperty(l)&&a[l].hasOwnProperty(g)&&(this._update(a[l][g],h),doAction("Change."+l+".pdo",h),doAction("cache_change",l+"."+g,h))}};d._update=function(b,a){if(b&&a&&this.isObject(a))for(var c in a){var d=a[c];if(this.isNormal(c)&&
this.isObject(d))b.hasOwnProperty(c)&&this._update(b[c],d);else if(this.isNormal(c)&&this.isNumeric(d))b[c]+=d;else if(this.isNormal(c))b[c]=d;else if(this.isAddToArray(c))this._addObjectToArray(b,d);else if(this.isRemoveToArray(c))this._removeObjectFromArray(b,c,d);else if(this.isFilter(c)){var h=this._getFilterObject(c,b);h&&this._update(h,d)}else this._updateObject(c,d,b)}};return c}();ProxyUpdate.prototype.__class__="ProxyUpdate";
var cacheFunc=function(){function c(){}c.getDeleteName=function(c){return c.split("_")[1]};c.getDeleteValue=function(c,b){var a=c.split("_");return 3==a.length?a[2].replace("@",""):b};c.fields={add:"@a",delete:"@d"};return c}();cacheFunc.prototype.__class__="cacheFunc";
var HeroListLayer=function(c){function d(){c.call(this);this._dataList=[];this._hasSpecialHero=!1;this.init()}__extends(d,c);var b=d.prototype;b.init=function(){this._upContainer=new egret.DisplayObjectContainer;this.addChild(this._upContainer);this._upContainer.y=-134;this._dpsLabel=new egret.TextField;this._dpsLabel.size=24;this._dpsLabel.x=180;this._dpsLabel.y=3;this._dpsLabel.anchorX=0;this._upContainer.addChild(this._dpsLabel);var a=new egret.TextField;a.size=24;a.x=40;a.y=3;this._upContainer.addChild(a);
a.text="\u79d2\u4f24";this._upContainer.cacheAsBitmap=!0;this._dataList=[];this.coinChange();this._heroTableView=new TableView;this._heroTableView.x=11;this._heroTableView.y=-88;this.addChild(this._heroTableView);this._heroTableView.width=GameUtils.getWinWidth();this._heroTableView.height=300;this._heroTableView.setList(this._dataList,Direction.VERTICAL,this,GameUtils.getWinWidth(),102);addAction(Const.HERO_LIST_CHANGE,this.dataChange,this);addAction(Const.CHANGE_COIN,this.coinChange,this);addAction(Const.REFRESH_UNOPEN_LIST,
this.refreshUnCallHero,this);addAction(Const.RESET_GAME,this.resetList,this);addAction(Const.REFRESH_SKILL_VIEW,this.refreshDPS,this);addAction(Const.REFRESH_BOSS,this.refreshDPS,this,4);addAction(Const.REFRESH_HEROLIST,this.resetList,this);addAction(Const.CHANGE_PAY,this.resetList,this);this.refreshDPS()};b.resetList=function(){this._dataList=[];this.coinChange();this._heroTableView&&this._heroTableView.setList(this._dataList,Direction.VERTICAL,this,GameUtils.getWinWidth(),102)};b.refreshDPS=function(){applyFilters(Const.ISBOSS,
!1)?this._dpsLabel.text=HeroController.getInstance().currentBossDPS:this._dpsLabel.text=HeroController.getInstance().currentDPS};b.coinChange=function(){for(var a=DataCenter.getInstance().totalData.heroList,b=RES.getRes("heroConfig"),c=0;c<Const.maxHero;c++){var d=1001+c,d=b[d].callCost.split(","),d=GameUtils.getCallCost(d[0]);if(!1==DataCenter.getInstance().hasEnoughSc(d))break}c+=1;c>Const.maxHero&&(c=Const.maxHero);b=1;b<c&&(b=c);a[1E3+DataCenter.getInstance().totalData.showHeroNum]&&(DataCenter.getInstance().totalData.showHeroNum+=
1);DataCenter.getInstance().totalData.showHeroNum>Const.maxHero&&(DataCenter.getInstance().totalData.showHeroNum=Const.maxHero);b<DataCenter.getInstance().totalData.showHeroNum?b=DataCenter.getInstance().totalData.showHeroNum:DataCenter.getInstance().totalData.showHeroNum=b;if(this._hasSpecialHero){if(b==this._dataList.length-1)return}else if(b==this._dataList.length)return;this._dataList=[];for(c=1;c<=b;c++){var d=1E3+c,g=HeroModel.createByConfigId(d);g.refreshDataWithSkill();this._dataList.push(g);
a[d]&&(g.lv=a[d].lv)}7>this._dataList.length?(g=HeroModel.createByConfigId(1007),g.refreshDataWithSkill(),this._dataList.push(g),this._hasSpecialHero=!0):this._hasSpecialHero=!1;this._heroTableView&&this._heroTableView.reloadData(this._dataList)};b.refreshUnCallHero=function(){for(var a=0;a<this._dataList.length;a++)this._dataList[a].refreshDataWithSkill();this._heroTableView&&this._heroTableView.reloadData(this._dataList)};b.dataChange=function(a,b){this._dataList[b]=a;this._heroTableView.changeDataListOnly(this._dataList)};
b.createItemRenderer=function(){return new HeroItemView};b.updateItemRenderer=function(a,b,c){a.refreshView(b,c)};b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};return d}(BaseContainer);HeroListLayer.prototype.__class__="HeroListLayer";
var PaymentListLayer=function(c){function d(){c.call(this);this.init();addAction(Const.CHANGE_USE_SKILL,this.refreshPaymentList,this);addAction(Const.CHANGE_PAY,this.refreshPaymentList,this);addAction(Const.BUY_DONE,this.buyDone,this);addAction(Const.BUYING,this.buying,this)}__extends(d,c);var b=d.prototype;b.buying=function(){this._container.visible=!0};b.buyDone=function(){this._container.visible=!1};b.init=function(){this._upContainer=new egret.DisplayObjectContainer;this.addChild(this._upContainer);
this._upContainer.y=-133;var a=ResourceUtils.createBitmapFromSheet("gold_icon","commonRes");a.scaleX=a.scaleY=0.85;a.x=400;a.y=-2;this._upContainer.addChild(a);this._goldLabel=new egret.TextField;this._goldLabel.size=24;this._goldLabel.x=445;this._goldLabel.y=0;this._goldLabel.text="0";this._goldLabel.anchorX=0;this._goldLabel.textColor=16777215;this._upContainer.addChild(this._goldLabel);ProxyUtils.platformInfo==platformType_wanba&&(this._jifenLabel=new egret.TextField,this._jifenLabel.size=24,this._jifenLabel.x=
30,this._jifenLabel.y=5,this._jifenLabel.textColor=16639912,this.changeJifen(),this._jifenLabel.anchorX=0,this._upContainer.addChild(this._jifenLabel));this._upContainer.cacheAsBitmap=!0;this.initTableView();this.changeGc();addAction(Const.CHANGE_DIAMOND,this.changeGc,this);addAction(Const.CHANGE_JIFEN,this.changeJifen,this);addAction(Const.REFRESH_PAYMENT_LIST,this.refreshPaymentList,this);this._container=new egret.DisplayObjectContainer;this.addChild(this._container);a=ResourceUtils.createBitmapByName("mask");
a.touchEnabled=!0;a.y=-100;a.visible=!0;this._container.addChild(a);a=new egret.TextField;a.x=200;a.y=40;a.text="\u6b63\u5728\u8d2d\u4e70\u4e2d\u2026\u2026";this._container.addChild(a);this._container.visible=!1};b.changeJifen=function(){this._jifenLabel.text="\u661f\u661f:"+ProxyUtils.jifen};b.changeGc=function(){this._goldLabel.text=DataCenter.getInstance().getGcNum()};b.initTableView=function(){this._paymentTableView=new TableView;this._paymentTableView.x=11;this._paymentTableView.y=-88;this.addChild(this._paymentTableView);
this._paymentTableView.width=GameUtils.getWinWidth();this._paymentTableView.height=300;this._paymentTableView.setList(DataCenter.getInstance().getShowPaymentList(),Direction.VERTICAL,this,GameUtils.getWinWidth(),102)};b.refreshPaymentList=function(){this._paymentTableView.reloadData(DataCenter.getInstance().getShowPaymentList())};b.createItemRenderer=function(){return new PaymentItemView};b.updateItemRenderer=function(a,b,c){a.refreshView(b,c)};b.dispose=function(){c.prototype.dispose.call(this);
removeEventsByTarget(this)};return d}(BaseContainer);PaymentListLayer.prototype.__class__="PaymentListLayer";
var RebornListLayer=function(c){function d(){c.call(this);this._dataList=[];this.init()}__extends(d,c);var b=d.prototype;b.init=function(){this._upContainer=new egret.DisplayObjectContainer;this.addChild(this._upContainer);this._upContainer.y=-134;this._allDamageLabel=new egret.TextField;this._allDamageLabel.size=24;this._allDamageLabel.x=180;this._allDamageLabel.y=0;this._allDamageLabel.textColor=16777215;this._upContainer.addChild(this._allDamageLabel);var a=new egret.TextField;a.size=24;a.x=40;
a.y=0;this._upContainer.addChild(a);a.text="\u6240\u6709\u4f24\u5bb3";a.textColor=16777215;a=ResourceUtils.createBitmapFromSheet("holy_icon","commonRes");a.scaleX=a.scaleY=0.85;a.x=405;a.y=-12;this._upContainer.addChild(a);this._holyLabel=new egret.TextField;this._holyLabel.size=24;this._holyLabel.x=460;this._holyLabel.y=0;this._holyLabel.textColor=16777215;this._upContainer.addChild(this._holyLabel);this._upContainer.cacheAsBitmap=!0;this.refreshHolyNum();addAction(Const.CHANGE_HOLY_NUM,this.refreshHolyNum,
this);addAction(Const.CHANGE_REBORN_SKILL,this.refreshTableView,this);this.initTableView();this.refreshAllDamage();addAction(Const.REBORN_SKILL_REFRESH,this.refreshAllDamage,this)};b.refreshAllDamage=function(){var a=100*SkillController.getInstance().holyAdd;this._allDamageLabel.text=10<a.toString().length?"+"+a.toFixed(2)+"%":"+"+a+"%"};b.initDataList=function(){this._dataList=[];this._dataList.push({name:"\u795e\u5175",des:"\u8d2d\u4e70\u795e\u5175\u53ef\u83b7\u5f97\u5c5e\u6027\u52a0\u6210"});for(var a=
DataCenter.getInstance().totalData.rebornSkillList,b=0;b<a.length;b++){var c=RebornSkillModel.createByConfigId(a[b].id);c.lv=a[b].lv;this._dataList.push(c)}for(b=0;b<Const.maxRebornSkill;b++)null==this.exsitSkill(10001+b)&&(c=RebornSkillModel.createByConfigId(10001+b),c.lv=0,this._dataList.push(c))};b.exsitSkill=function(a){for(var b=DataCenter.getInstance().totalData.rebornSkillList,c=0;c<b.length;c++)if(b[c].id==a)return b[c];return null};b.initTableView=function(){this.initDataList();this._rebornTableView=
new TableView;this._rebornTableView.x=11;this._rebornTableView.y=-88;this.addChild(this._rebornTableView);this._rebornTableView.width=GameUtils.getWinWidth();this._rebornTableView.height=300;this._rebornTableView.setList(this._dataList,Direction.VERTICAL,this,GameUtils.getWinWidth(),102)};b.refreshTableView=function(){this.initDataList();this._rebornTableView&&this._rebornTableView.reloadData(this._dataList)};b.refreshHolyNum=function(){this._holyLabel.text=DataCenter.getInstance().totalData.holyNum.toString()};
b.createItemRenderer=function(){return new RebornItemView};b.updateItemRenderer=function(a,b,c){a.refreshView(b,c)};b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};return d}(BaseContainer);RebornListLayer.prototype.__class__="RebornListLayer";
var SkillDetailItemView=function(c){function d(){c.call(this);this._isMain=!1;this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this._iconContainer=new egret.DisplayObjectContainer;this.addChild(this._iconContainer);this._nameLabel=new egret.TextField;this.addChild(this._nameLabel);this._nameLabel.size=20;this._nameLabel.x=85;this._nameLabel.y=0;this._nameLabel.textColor=3478533;this._desLabel=new egret.TextField;this.addChild(this._desLabel);this._desLabel.size=20;this._desLabel.textColor=
3478533;this._desLabel.x=85;this._desLabel.y=25;this._timeLabel=new egret.TextField;this._timeLabel.size=20;this._timeLabel.x=85;this._timeLabel.y=50;this._timeLabel.textColor=3478533;this.addChild(this._timeLabel);this.notOpenShow()};b.notOpenShow=function(){this._lockBg=ResourceUtils.createBitmapFromSheet("head_mask","commonRes");this._lockBg.width=this._lockBg.height=70;this._lockBg.alpha=0.7;this.addChild(this._lockBg);this._unlockLabel=new egret.TextField;this._unlockLabel.text="\u89e3\u9501";
this._unlockLabel.size=20;this.addChild(this._unlockLabel);this._unlockLabel.x=18;this._unlockLabel.y=15;this._lvTitleLabel=new egret.TextField;this._lvTitleLabel.text="Lv.";this._lvTitleLabel.size=20;this.addChild(this._lvTitleLabel);this._lvTitleLabel.x=5;this._lvTitleLabel.y=35;this._lvLabel=new egret.TextField;this._lvLabel.size=20;this._lvLabel.textColor=5292278;this.addChild(this._lvLabel);this._lvLabel.x=33;this._lvLabel.y=35};b.refreshView=function(a,b,c,d,g,l,k){this._skillId=a;this._config=
RES.getRes("skillConfig")[a];this._isOpen=b;this._lv=c;this._isMain=d;this._hero=l;this._iconContainer.removeChildren();a=this._isMain?egret.DynamicBitmap.create(k,!1,null,null,Const.default_skill_icon):ResourceUtils.createBitmapFromSheet(k,"iconRes");this._iconContainer.addChild(a);this.updateSkillInfo();this.cacheAsBitmap=!0};b.updateSkillInfo=function(){this._nameLabel.text=this._config.name||"\u6211\u662f\u6280\u80fd\u540d\u5b57";this._isOpen?(this._lockBg.visible=!1,this._unlockLabel.visible=
!1,this._lvTitleLabel.visible=!1,this._lvLabel.visible=!1):(this._hero.isEvolution()?this._lvLabel.text=this._config.level+1E3:this._lvLabel.text=this._config.level,this._lockBg.visible=!0,this._unlockLabel.visible=!0,this._lvTitleLabel.visible=!0,this._lvLabel.visible=!0,this._lvTitleLabel.x=5+(70-(this._lvTitleLabel.width+this._lvLabel.width+10))/2,this._lvLabel.x=this._lvTitleLabel.x+this._lvTitleLabel.width+3);if(this._isMain){var a;a=0<this._lv?this._config.base+this._lv*this._config.value:this._config.base+
1*this._config.value;a*=this._config.showTimes;10<a.toString().length&&(a=a.toFixed(2));this._desLabel.text=this._config.des.replace("{0}",a);this._timeLabel.visible=!0;this._timeLabel.text="\u6301\u7eed\u65f6\u95f4\uff1a"+this._config.last.toString()+"\u79d2 | \u51b7\u5374\u65f6\u95f4\uff1a"+this._config.cd.toString()+"\u79d2"}else this._desLabel.text=this._config.des,this._timeLabel.visible=!1};b.dispose=function(){c.prototype.dispose.call(this)};return d}(BaseContainer);
SkillDetailItemView.prototype.__class__="SkillDetailItemView";
var SkillLayer=function(c){function d(){c.call(this);this._addTimes=1;this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("skilllayer_maska");this.addChild(a);a.y=-150;a.scaleY=1.2;a=ResourceUtils.createBitmapFromSheet("skilllayer_mask2");this.addChild(a);a.y=-60;a.x=-10;this._labelContainer=new egret.DisplayObjectContainer;this.addChild(this._labelContainer);this._labelContainer.y=-10;a=ResourceUtils.createBitmapFromSheet("skill_title_1");a.x=55;
a.y=-20;this._labelContainer.addChild(a);this._currentDPS=new egret.BitmapText;a=RES.getRes("battle_num_fnt_fnt");this._currentDPS.font=a;this._labelContainer.addChild(this._currentDPS);this._currentDPS.text="1";this._currentDPS.x=50;this._currentDPS.y=15;a=ResourceUtils.createBitmapFromSheet("skill_title_3");this._labelContainer.addChild(a);a.x=300;a.y=25;this._heroDPS=new egret.BitmapText;a=RES.getRes("battle_num_fnt_fnt");this._heroDPS.font=a;this._labelContainer.addChild(this._heroDPS);this._heroDPS.anchorX=
0;this._heroDPS.x=425;this._heroDPS.y=25;a=ResourceUtils.createBitmapFromSheet("skill_title_2");this._labelContainer.addChild(a);a.x=300;a.y=-20;this._tapDamage=new egret.BitmapText;a=RES.getRes("battle_num_fnt_fnt");this._tapDamage.font=a;this._labelContainer.addChild(this._tapDamage);this._tapDamage.anchorX=0;this._tapDamage.x=425;this._tapDamage.y=-18;a=ResourceUtils.createBitmapFromSheet("skill_line_1","commonRes");a.x=30;a.y=56;this._labelContainer.addChild(a);a=ResourceUtils.createBitmapFromSheet("skill_line_2",
"commonRes");a.x=272;a.y=55;this._labelContainer.addChild(a);a=ResourceUtils.createBitmapFromSheet("skill_line_3","commonRes");a.x=272;a.y=15;this._labelContainer.addChild(a);this._tipLabel=new egret.TextField;this._labelContainer.addChild(this._tipLabel);this._tipLabel.size=22;this._tipLabel.x=320;this._tipLabel.y=77;this._tipLabel.anchorX=0.5;this._tipLabel.text="\u70b9\u51fb\u6280\u80fd\u56fe\u6807\u4f7f\u7528\u5143\u5b9d\u6e05\u9664CD";this._tipLabel.visible=!1;this._labelContainer.cacheAsBitmap=
!0;this._skillListContainer=new egret.DisplayObjectContainer;this._skillListContainer.y=100;this.addChild(this._skillListContainer);this.refreshView();addAction(Const.REFRESH_SKILL_VIEW,this.refreshView,this);addAction(Const.ENTER_FIGHT,this.refreshView,this,2);addAction(Const.UNLOCK_MAIN_SKILL,this.refreshMainSkill,this);addAction(Const.REFRESH_CURRENT_DPS,this.refreshCurrentDPS,this);addFilter(Const.SKILL_LAYER_EXSIT,this.layerVisible,this);addAction(Const.RESET_GAME,this.resetGame,this);addAction(Const.CHANGE_SPEED,
this.changeSpeed,this);addAction(Const.REFRESH_SKILL_TIP,this.checkTipStatus,this);addAction("guild_curSecDamg",this.refleshSecDamg,this);this.initSkillIcon()};b.checkTipStatus=function(){this._tipLabel.visible=!1;for(var a=[22001,22002,22003,22004,22005,22006],b=0;b<a.length;b++)if(1==applyFilters(Guide.IS_SKILL_CDING,a[b])){this._tipLabel.visible=!0;break}};b.changeSpeed=function(a){this._addTimes=a;this.refreshView()};b.layerVisible=function(){return this.visible};b.refreshCurrentDPS=function(a){var b=
this._heroDPS.text,c=new NumberModel;c.add(b);c.compare(a)?this._currentDPS.text=b:this._currentDPS.text=a};b.refreshView=function(){if(GuildDataManager.getInstance().isGuildWulinStart)this.changeData();else if(applyFilters(Const.ISBOSS,!1))if(this._tapDamage.text=HeroController.getInstance().mainHero.bossDps,1<this._addTimes){var a=new NumberModel;a.add(HeroController.getInstance().currentBossDPS);a.times(this._addTimes);this._heroDPS.text=a.getNumer()}else this._heroDPS.text=HeroController.getInstance().currentBossDPS;
else this._tapDamage.text=HeroController.getInstance().mainHero.tapDamage,1<this._addTimes?(a=new NumberModel,a.add(HeroController.getInstance().currentDPS),a.times(this._addTimes),this._heroDPS.text=a.getNumer()):this._heroDPS.text=HeroController.getInstance().currentDPS};b.initSkillIcon=function(){this._skillListContainer.removeChildren();for(var a=HeroController.getInstance().mainHero.skillList,b=0;b<a.length;b++){var c=new SkillIcon;c.initView(a[b],b+1);this._skillListContainer.addChild(c);c.x=
20+100*b}};b.refreshMainSkill=function(){for(var a=HeroController.getInstance().mainHero.skillList,b=0;b<a.length;b++)this._skillListContainer.getChildAt(b).refreshView(a[b])};b.resetGame=function(){for(var a=HeroController.getInstance().mainHero.skillList,b=0;b<a.length;b++)this._skillListContainer.getChildAt(b).resetIcon()};b.hideorShow=function(a){this._skillListContainer.visible=a};b.changeData=function(){GuildDataManager.getInstance().isGuildWulinStart&&(this._tapDamage.text=GuildWuLinDataManager.getInstance().getClickDamnge(),
this._heroDPS.text=GuildWuLinDataManager.getInstance().getTotalDamge())};b.refleshSecDamg=function(a){GuildDataManager.getInstance().isGuildWulinStart&&(this._currentDPS.text=a)};b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};return d}(BaseContainer);SkillLayer.prototype.__class__="SkillLayer";
var SkillListGuildLayer=function(c){function d(){c.call(this);this.dataList=[];this.listItem=[];addAction("Guild_TapDps",this.refreshTapGame,this);addAction("Guild_listskill",this.refreshListDataOnly,this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this.upContainer=new egret.DisplayObjectContainer;this.addChild(this.upContainer);this.upContainer.y=-134;this.tapDamgeLbl=new egret.TextField;this.tapDamgeLbl.size=24;this.tapDamgeLbl.x=180;this.tapDamgeLbl.y=1.2;this.tapDamgeLbl.anchorX=
0;this.tapDamgeLbl.textColor=16777215;this.upContainer.addChild(this.tapDamgeLbl);var a=new egret.TextField;a.size=24;a.x=40;a.y=1.2;this.upContainer.addChild(a);a.text="\u603b\u79d2\u4f24";a.textColor=16777215;this.upContainer.cacheAsBitmap=!0;this.skillTabView=new TableView;this.skillTabView.x=11;this.skillTabView.y=-88;this.addChild(this.skillTabView);this.skillTabView.width=GameUtils.getWinWidth();this.skillTabView.height=300;this.dataList=GuildWuLinDataManager.getInstance().getListDataFill();
this.skillTabView.setList(this.dataList,Direction.VERTICAL,this,GameUtils.getWinWidth(),102)};b.refreshTapGame=function(){this.tapDamgeLbl.text=GuildWuLinDataManager.getInstance().getTotalDamge()};b.refreshListData=function(){this.listItem=[];this.dataList=GuildWuLinDataManager.getInstance().getListDataFill();this.skillTabView.setList(this.dataList,Direction.VERTICAL,this,GameUtils.getWinWidth(),102)};b.refreshListDataOnly=function(){this.refreshAllBtn()};b.refreshAllBtn=function(){for(var a=0;a<
this.listItem.length;a++)this.listItem[a].refleshBtn()};b.createItemRenderer=function(){var a=new SkillWuLinItem;this.listItem.push(a);return a};b.updateItemRenderer=function(a,b,c){a.refleshView(b,c)};b.dispose=function(){c.prototype.dispose.call(this);this.listItem=[];removeEventsByTarget(this)};return d}(BaseContainer);SkillListGuildLayer.prototype.__class__="SkillListGuildLayer";
var SkillListLayer=function(c){function d(){c.call(this);this._dataList=[];this.init()}__extends(d,c);var b=d.prototype;b.init=function(){this._upContainer=new egret.DisplayObjectContainer;this.addChild(this._upContainer);this._upContainer.y=-134;this._tapDamageLabel=new egret.TextField;this._tapDamageLabel.size=24;this._tapDamageLabel.x=180;this._tapDamageLabel.y=1.2;this._tapDamageLabel.anchorX=0;this._tapDamageLabel.textColor=16777215;this._upContainer.addChild(this._tapDamageLabel);var a=new egret.TextField;
a.size=24;a.x=40;a.y=1.2;this._upContainer.addChild(a);a.text="\u70b9\u51fb\u4f24\u5bb3";a.textColor=16777215;this._upContainer.cacheAsBitmap=!0;this._dataList=[];var a=HeroController.getInstance().mainHero,b={};b.lv=a.lv;b.name=GameUtils.getUserName();b.des="\u70b9\u51fb\u4f24\u5bb3:{0}";this._mainObj=b;this._dataList.push(b);a=a.skillList;for(b=0;b<a.length;b++)this._dataList.push(a[b]);this._dataList.push({name:"\u91cd\u751f",des:"\u5f00\u542f\u65b0\u751f,\u5404\u79cd\u5c5e\u6027\u52a0\u6210"});
this._skillTableView=new TableView;this._skillTableView.x=11;this._skillTableView.y=-88;this.addChild(this._skillTableView);this._skillTableView.width=GameUtils.getWinWidth();this._skillTableView.height=300;this._skillTableView.setList(this._dataList,Direction.VERTICAL,this,GameUtils.getWinWidth(),102);addAction(Const.MAIN_HERO_SKILL_CHANGE,this.dataChange,this);addAction(Const.REFRESH_UNOPEN_LIST,this.refreshView,this);addAction(Const.RESET_GAME,this.refreshView,this);addAction(Const.REFRESH_SKILL_VIEW,
this.refreshTapDamage,this);addAction(Const.REFRESH_BOSS,this.refreshTapDamage,this,3);addAction(Const.CHANGE_NAME,this.changeName,this);this.refreshTapDamage()};b.changeName=function(a){this._mainObj.name=a;this.refreshView()};b.refreshTapDamage=function(){applyFilters(Const.ISBOSS,!1)?this._tapDamageLabel.text=HeroController.getInstance().mainHero.bossDps:this._tapDamageLabel.text=HeroController.getInstance().mainHero.tapDamage};b.refreshView=function(){this._skillTableView&&this._skillTableView.reloadData(this._dataList)};
b.dataChange=function(a,b){this._dataList[b]=a;this._skillTableView.changeDataListOnly(this._dataList)};b.createItemRenderer=function(){return new SkillItemView};b.updateItemRenderer=function(a,b,c){a.refreshView(b,c)};b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};return d}(BaseContainer);SkillListLayer.prototype.__class__="SkillListLayer";
var CallCardLayer=function(c){function d(){c.call(this);this._isEvolveShow=this._isShow=!1;this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this._upContainer=new egret.DisplayObjectContainer;this.addChild(this._upContainer);this._upContainer.y=-133;var a=ResourceUtils.createBitmapFromSheet("gold_icon","commonRes");a.scaleX=a.scaleY=0.85;a.x=400;a.y=-2;this._upContainer.addChild(a);this._goldLabel=new egret.TextField;this._goldLabel.size=24;this._goldLabel.x=445;this._goldLabel.y=
0;this._goldLabel.text="0";this._goldLabel.anchorX=0;this._goldLabel.textColor=16777215;this._upContainer.addChild(this._goldLabel);this._item1=new CallItemLayer;this._item1.y=-90;this._item1.setIndex(0);this.addChild(this._item1);this._item2=new CallItemLayer;this._item2.y=10;this._item2.setIndex(1);this.addChild(this._item2);a=ResourceUtils.createBitmapFromSheet("fateBtn_bg","cardRes");a.anchorX=a.anchorY=0.5;a.x=320;a.y=160;this.addChild(a);this._btn=new FateButton;this._btn.y=160;this._btn.x=
160;this._btn.addOnClick(this.showFateLayer,this);this.addChild(this._btn);this._btn2=new EvolveButton;this._btn2.y=160;this._btn2.x=480;this._btn2.addOnClick(this.showEvolveLayer,this);this.addChild(this._btn2);this._item1.x=this._item2.x=10;addAction(Const.FATE_REFRESH,this.fateRefresh,this);addAction(Const.CHANGE_HOLY_NUM,this.fateRefresh,this);this.fateRefresh();this.changeGc();addAction(Const.CHANGE_DIAMOND,this.changeGc,this)};b.createMv=function(){RES.isGroupLoaded("group_Button_json")&&(this._mv=
new Movie("Button_json","Button"),this._mv.x=160,this._mv.y=160,this.addChild(this._mv),this._mv.play("1"),this._mv.visible=this._isShow)};b.createEvolveMv=function(){RES.isGroupLoaded("group_Button_json")&&(this._evolveMv=new Movie("Button_json","Button"),this._evolveMv.x=479,this._evolveMv.y=160,this.addChild(this._evolveMv),this._evolveMv.play("1"),this._evolveMv.visible=this._isEvolveShow)};b.showTip=function(a){this._isShow=a;this._mv?this._mv.visible=this._isShow:this.createMv()};b.showEvolveTip=
function(a){this._isEvolveShow=a;this._evolveMv?this._evolveMv.visible=this._isEvolveShow:this.createEvolveMv()};b.changeGc=function(){this._goldLabel.text=DataCenter.getInstance().getGcNum()};b.fateRefresh=function(){this.showTip(FateController.getInstance().canLevelUp());this.showEvolveTip(EvolveModel.hasAlready())};b.showFateLayer=function(){GameMainLayer.instance.showFateLayer()};b.showEvolveLayer=function(){GameMainLayer.instance.showEvolveLayer()};b.dispose=function(){c.prototype.dispose.call(this)};
return d}(BaseContainer);CallCardLayer.prototype.__class__="CallCardLayer";
var CallItemLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=ResourceUtils.createBitmapFromSheet("hero_item_bg","commonRes");this.addChild(a);this._container=new egret.DisplayObjectContainer;this.addChild(this._container)};b.setIndex=function(a){this._idx=a;this._button=new BuffButton;this._button.x=520;this._button.y=60;this._button.useZoomOut(!0);this._button.addOnClick(this.itemClick,this);a=new egret.TextField;a.x=520;a.y=
5;a.size=22;var b,c;0==this._idx?(b=ResourceUtils.createBitmapFromSheet("card_1","cardRes"),c=ResourceUtils.createBitmapFromSheet("txt_get_card_1","cardRes"),c.x=150,c.y=30,b.x=25,b.y=20,this._button.setLabel("\u62bd\u4e00\u6b21"),a.text=this.getAfterRebate(100).toString()):1==this._idx&&(b=ResourceUtils.createBitmapFromSheet("card_10","cardRes"),c=ResourceUtils.createBitmapFromSheet("txt_get_card_10","cardRes"),c.x=120,b.x=-10,b.y=10,this._button.setLabel("\u5341\u8fde\u62bd"),a.text=this.getAfterRebate(750).toString());
this._container.addChild(b);this._container.addChild(c);this._container.addChild(this._button);b=ResourceUtils.createBitmapFromSheet("gold_icon");this._container.addChild(b);b.scaleX=b.scaleY=0.78;b.x=470;b.y=5;this._container.addChild(a)};b.itemClick=function(){var a=0;0==this._idx?(a=this.getAfterRebate(100),DataCenter.getInstance().hasEnoughGc(a)?ProxyUtils.buyCard(1):GameMainLayer.instance.showPaymentRecommendLayer()):1==this._idx&&(a=this.getAfterRebate(750),DataCenter.getInstance().hasEnoughGc(a)?
ProxyUtils.buyCard(10):GameMainLayer.instance.showPaymentRecommendLayer())};b.getAfterRebate=function(a){if(ActivityManager.getInstance().isActivityOpen(ActivityType.cardHalf)){var b=ActivityManager.getInstance().getActivityByType(ActivityType.cardHalf);b&&b.rebate&&Number(b.rebate)&&(a*=Number(b.rebate))}return a};return d}(BaseContainer);CallItemLayer.prototype.__class__="CallItemLayer";
var EvolutionMonitor=function(){function c(){this._data=null}var d=c.prototype;c.getInstance=function(){null==c._instance&&(c._instance=new c);return c._instance};d.initData=function(b){this._data=b};d.setDPS=function(b){this._dps=b};d.checkSkill=function(){for(var b=HeroController.getInstance().getHeroList(),b=b.filter(function(a){return a.isHero()&&!a.isDead()&&!0}),a=0;a<b.length;a++)applyFilters("is_evo_skill_exist",1)};return c}();EvolutionMonitor.prototype.__class__="EvolutionMonitor";
var FateEvolutionLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("buff_bg");a.touchEnabled=!0;this.boxContainer.addChild(a);a.x=23;a.y=GameUtils.getPosY(23)};b.refreshView=function(){};b.onEvolutionClick=function(){var a=new SingleProxy({mod:"",mask:!0});a.addEventListener(ProxyEvent.RESPONSE_SUCCEED,this.onProxyHandler,this);a.load()};b.onProxyHandler=function(){doAction(Const.SHOW_TIPS,"\u8fdb\u5316\u6210\u529f");
this.refreshView()};b.dispose=function(){c.prototype.dispose.call(this)};return d}(BoxContainer);FateEvolutionLayer.prototype.__class__="FateEvolutionLayer";var ChatAreaView=function(c){function d(){c.call(this)}__extends(d,c);return d}(TableView);ChatAreaView.prototype.__class__="ChatAreaView";
var ChatItem=function(c){function d(){c.call(this);this.x=6;this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=ResourceUtils.createBitmapFromSheet("chatRectBg");this.addChild(a);var b=ResourceUtils.createBitmapFromSheet("\u5206\u5272\u7ebf");b.y=70;b.width=a.width;this.addChild(b);this.bmpHeadBg=ResourceUtils.createBitmapFromSheet("chatHead");this.bmpHeadBg.x=10;this.bmpHeadBg.y=8;this.addChild(this.bmpHeadBg);this.bmpHead=new egret.Bitmap;this.bmpHead.x=this.bmpHeadBg.x;
this.bmpHead.y=this.bmpHeadBg.y;this.addChild(this.bmpHead);this.txtPlayerName=new egret.TextField;this.txtPlayerName.x=65;this.txtPlayerName.y=20;this.txtPlayerName.size=24;this.addChild(this.txtPlayerName);this.txtGuildName=new egret.TextField;this.txtGuildName.x=100;this.txtGuildName.y=20;this.txtGuildName.size=24;this.setChatGuildName("<font color='0x808080'>\u6765\u81ea\u516c\u4f1a:</font>\u65e0\u95e8\u65e0\u6d3e");this.addChild(this.txtGuildName);this.txtChatContent=new egret.TextField;this.txtChatContent.size=
24;this.txtChatContent.lineSpacing=5;this.txtChatContent.width=a.width-16;this.txtChatContent.height=53;this.txtChatContent.y=83;this.txtChatContent.x=20;this.addChild(this.txtChatContent)};b.setData=function(a){if(a){this.setState(a.chatType);if(a.playerIcon)if(a.playiconTexure)this.bmpHead.texture=a.playiconTexure.texture,this.bmpHead.scaleX=this.bmpHeadBg.width/a.playiconTexure.width,this.bmpHead.scaleY=this.bmpHeadBg.height/a.playiconTexure.height;else var b=egret.DynamicBitmap.create(a.playerIcon,
!0,function(){b&&b.texture&&(this.bmpHead.texture=b.texture,this.bmpHead.scaleX=this.bmpHeadBg.width/b.width,this.bmpHead.scaleY=this.bmpHeadBg.height/b.height,a.playiconTexure=b)},this,Const.default_user);a.chatContent&&this.setChatContent(this.getColorContent(a));if(a.playerName)if(2==a.chatType)this.txtPlayerName.x=65,this.setPlayerName(GuildModel.SubStringOfNum(a.playerName,6));else{this.txtPlayerName.x=this.bmpHead.x;var c=GuildModel.SubStringOfNum(a.playerName,6);this.setPlayerName("<font color='0x808080'>\u73a9\u5bb6\u59d3\u540d:</font>"+
c)}a.guildName&&this.txtGuildName.visible?this.setChatGuildName("<font color='0x808080'>\u6765\u81ea\u516c\u4f1a:</font>"+a.guildName):this.setChatGuildName("<font color='0x808080'>\u6765\u81ea\u516c\u4f1a:</font>\u65e0\u95e8\u65e0\u6d3e");this.txtGuildName.visible&&(this.txtGuildName.x=this.txtPlayerName.x+this.txtPlayerName.width+20)}};b.setChatContent=function(a){if(this.txtChatContent){var b=new egret.HtmlTextParser;this.txtChatContent.textFlow=b.parser(a)}};b.setChatGuildName=function(a){if(this.txtGuildName){var b=
new egret.HtmlTextParser;this.txtGuildName.textFlow=b.parser(a)}};b.setPlayerName=function(a){if(this.txtPlayerName){var b=new egret.HtmlTextParser;this.txtPlayerName.textFlow=b.parser(a)}};b.setState=function(a){0==a?(this.bmpHeadBg.visible=!1,this.bmpHead.visible=!1,this.txtGuildName.visible=!1):1==a?(this.bmpHeadBg.visible=!1,this.bmpHead.visible=!1,this.txtGuildName.visible=!1):2==a&&(this.txtGuildName.visible=!0,this.bmpHeadBg.visible=!0,this.bmpHead.visible=!0)};b.getColorContent=function(a){var b=
a.chatContent;return 2==a.chatType?"<font color='0xffff00'>"+b+"</font>":"<font color='0xffffff'>"+b+"</font>"};b.setBgWith=function(){};b.hideAll=function(){};return d}(BaseContainer);ChatItem.prototype.__class__="ChatItem";
var GuildMbItem=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this.splitLine=ResourceUtils.createBitmapFromSheet("\u5206\u5272\u7ebf","commonRes");this.addChild(this.splitLine);this.splitLine.x=3;this.splitLine.y=60;this.txtName=new egret.TextField;this.addChild(this.txtName);this.txtName.x=30;this.txtName.y=30;this.txtName.size=26;this.txtName.text="\u65e0\u540d";this.txtName.anchorY=0.5;this.txtCbValue=new egret.TextField;this.addChild(this.txtCbValue);
this.txtCbValue.size=26;this.txtCbValue.y=30;this.txtCbValue.x=300;this.txtCbValue.text="859";this.txtCbValue.anchorX=this.txtCbValue.anchorY=0.5;this.onLineTime=new egret.TextField;this.addChild(this.onLineTime);this.onLineTime.x=500;this.onLineTime.y=30;this.onLineTime.size=26;this.onLineTime.text="2\u5929\u524d";this.onLineTime.anchorX=this.onLineTime.anchorY=0.5;this.btnRemove=new SimpleButton;var a=ResourceUtils.createBitmapFromSheet("xIcon","commonRes");this.btnRemove.addChild(a);this.btnRemove.anchorX=
this.btnRemove.anchorY=0.5;this.btnRemove.x=this.onLineTime.x+this.onLineTime.width+10;this.btnRemove.y=30;this.btnRemove.addOnClick(this.killMember,this);this.addChild(this.btnRemove)};b.refreshView=function(a,b){this.data=a;this.txtName.text=GuildModel.ChangeTxtToDot(a.mbName);this.txtCbValue.text=a.mbCb.toString();this.onLineTime.text=GameUtils.formatTimeToStr(a.mbOnTime);null!=this.btnRemove&&(this.btnRemove.visible=!1);null!=this.txtIsSelf&&(this.txtIsSelf.visible=!1);null!=this.bmpMark1&&(this.bmpMark1.visible=
!1);0==a.mbRoleMark?(this.btnRemove.visible=!1,null==this.bmpMark1?(this.bmpMark1=ResourceUtils.createBitmapFromSheet("charMain","commonRes"),this.addChild(this.bmpMark1),this.bmpMark1.anchorX=this.bmpMark1.anchorY=0.5,this.bmpMark1.x=this.txtName.x+this.txtName.width+this.bmpMark1.width/2+2,this.bmpMark1.y=30):this.bmpMark1.visible=!0,null==this.txtIsSelf?(this.txtIsSelf=new egret.TextField,this.addChild(this.txtIsSelf),this.txtIsSelf.textColor=3407616,this.txtIsSelf.text="[\u81ea\u5df1]",this.txtIsSelf.x=
this.bmpMark1.x+this.bmpMark1.width/2+this.txtIsSelf.width/2+2,this.txtIsSelf.size=26,this.txtIsSelf.y=30,this.txtIsSelf.anchorX=this.txtIsSelf.anchorY=0.5):(this.txtIsSelf.text="[\u81ea\u5df1]",this.txtIsSelf.visible=!0)):2==a.mbRoleMark?(this.btnRemove.visible=!1,null==this.txtIsSelf?(this.txtIsSelf=new egret.TextField,this.addChild(this.txtIsSelf),this.txtIsSelf.textColor=3407616,this.txtIsSelf.text="[\u81ea\u5df1]",this.txtIsSelf.x=this.txtName.x+this.txtName.width+2,this.txtIsSelf.size=26,this.txtIsSelf.y=
30,this.txtIsSelf.anchorY=0.5):(this.txtIsSelf.visible=!0,this.txtIsSelf.text="[\u81ea\u5df1]")):1==a.mbRoleMark?(this.btnRemove.visible=!1,null==this.bmpMark1?(this.bmpMark1=ResourceUtils.createBitmapFromSheet("charMain","commonRes"),this.addChild(this.bmpMark1),this.bmpMark1.anchorX=this.bmpMark1.anchorY=0.5,this.bmpMark1.x=this.txtName.x+this.txtName.width+this.bmpMark1.width/2+2,this.bmpMark1.y=30):this.bmpMark1.visible=!0):GuildModel.isMyCharMain()?this.btnRemove.visible=!0:this.btnRemove.visible=
!1};b.killMember=function(){3==this.data.mbRoleMark&&doAction("killMb",this.data)};return d}(BaseContainer);GuildMbItem.prototype.__class__="GuildMbItem";
var GuildRank=function(c){function d(){c.call(this);this.myGldInfo=GuildDataManager.getInstance().getMyGldInfo();this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this.txtMyGldRank=new egret.TextField;this.addChild(this.txtMyGldRank);this.txtMyGldRank.x=20;this.txtMyGldRank.y=245;this.txtMyGldDamg=new egret.TextField;this.addChild(this.txtMyGldDamg);this.txtMyGldDamg.x=20;this.txtMyGldDamg.y=290;var a=ResourceUtils.createBitmapFromSheet("\u5206\u5272\u7ebf","commonRes");this.addChild(a);
a.y=330;a.width=GameUtils.getWinWidth()-30;a.x=GameUtils.getWinWidth()/2;a.anchorX=a.anchorY=0.5;var b=ResourceUtils.createBitmapFromSheet("\u5206\u5272\u7ebf","commonRes");this.addChild(b);b.y=a.y+70;b.width=a.width;b.x=GameUtils.getWinWidth()/2;b.anchorX=b.anchorY=0.5;var c=ResourceUtils.createBitmapFromSheet("\u5206\u5272\u7ebf","commonRes");this.addChild(c);c.rotation=90;c.width=a.y-b.y;c.x=GameUtils.getWinWidth()/3;c.y=b.y+c.width/2;c.anchorX=b.anchorY=0.5;var d=ResourceUtils.createBitmapFromSheet("\u5206\u5272\u7ebf",
"commonRes");this.addChild(d);d.rotation=90;d.width=a.y-b.y;d.x=GameUtils.getWinWidth()/3*2;d.y=b.y+c.width/2;d.anchorX=b.anchorY=0.5;var g=ResourceUtils.createBitmapFromSheet("\u5206\u5272\u7ebf","commonRes");this.addChild(g);g.rotation=90;g.width=a.y-b.y;g.x=GameUtils.getWinWidth()/3*3;g.y=b.y+c.width/2;g.anchorX=b.anchorY=0.5;this.txtOne=new egret.TextField;this.addChild(this.txtOne);this.txtOne.size=30;this.txtOne.text="\u6210\u5458\u5217\u8868";this.txtOne.anchorX=this.txtOne.anchorY=0.5;this.txtOne.x=
c.x/2;this.txtOne.y=(b.y-a.y)/2+a.y;this.txtTwo=new egret.TextField;this.addChild(this.txtTwo);this.txtTwo.size=30;this.txtTwo.text="\u6210\u5458\u5217\u8868";this.txtTwo.x=(d.x-c.x)/2+c.x;this.txtTwo.y=this.txtOne.y;this.txtTwo.anchorX=this.txtTwo.anchorY=0.5;this.txtThree=new egret.TextField;this.addChild(this.txtThree);this.txtThree.size=30;this.txtThree.text="\u4e0a\u6b21\u5728\u7ebf\u65f6\u95f4";this.txtThree.x=(g.x-d.x)/2+d.x;this.txtThree.y=this.txtOne.y;this.txtThree.anchorX=this.txtThree.anchorY=
0.5};b.reLoad=function(a){this.num=a;1==a?(this.txtMyGldRank.text="\u672c\u5e2e\u6392\u540d: "+this.myGldInfo.myGldRank,this.txtMyGldDamg.text="\u672c\u5e2e\u4f24\u5bb3\u603b\u989d: "+GuildModel.formatNum(this.myGldInfo.myGldDamg)):(this.txtMyGldRank.text="\u6211\u7684\u6392\u540d: "+this.myGldInfo.myPersonRank,this.txtMyGldDamg.text="\u6211\u7684\u4f24\u5bb3: "+GuildModel.formatNum(this.myGldInfo.myPersonDamg));this.createTb(a)};b.createTb=function(a){this.myGldInfo=GuildDataManager.getInstance().getMyGldInfo();
null==this.guildMbTable&&(this.guildMbTable=new TableView,this.guildMbTable.y=400,this.guildMbTable.x=13,this.addChild(this.guildMbTable),this.guildMbTable.width=GameUtils.getWinWidth(),this.guildMbTable.height=440);1==a?(this.changeTitle("\u6392\u540d","\u5e2e\u6d3e\u540d\u79f0","\u9020\u6210\u4f24\u5bb3\u603b\u989d"),this.guildMbTable.setList(GuildDataManager.getInstance().gldRankList,Direction.VERTICAL,this,GameUtils.getWinWidth(),60)):2==a&&(this.changeTitle("\u6392\u540d","\u6210\u5458\u540d\u79f0",
"\u9020\u6210\u4f24\u5bb3"),this.guildMbTable.setList(GuildDataManager.getInstance().gldOWnRankList,Direction.VERTICAL,this,GameUtils.getWinWidth(),60))};b.changeTitle=function(a,b,c){this.txtOne.text=a;this.txtTwo.text=b;this.txtThree.text=c};b.createItemRenderer=function(){return new GuildRankItem};b.updateItemRenderer=function(a,b,c){1==this.num?a.refreshView(b.myGldRank,b.guildName,b.myGldDamg):2==this.num&&a.refreshView(b.mbrankNum,b.mbName,b.mbDamg)};return d}(BaseContainer);
GuildRank.prototype.__class__="GuildRank";
var GuildRankItem=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this.splitLine=ResourceUtils.createBitmapFromSheet("\u5206\u5272\u7ebf","commonRes");this.addChild(this.splitLine);this.splitLine.x=3;this.splitLine.y=60;this.txtRankNum=new egret.TextField;this.addChild(this.txtRankNum);this.txtRankNum.x=80;this.txtRankNum.y=30;this.txtRankNum.size=26;this.txtRankNum.text="\u65e0\u540d";this.txtRankNum.anchorX=this.txtRankNum.anchorY=0.5;
this.txtName=new egret.TextField;this.addChild(this.txtName);this.txtName.size=26;this.txtName.y=30;this.txtName.x=300;this.txtName.text="859";this.txtName.anchorX=this.txtName.anchorY=0.5;this.txtDamg=new egret.TextField;this.addChild(this.txtDamg);this.txtDamg.x=500;this.txtDamg.y=30;this.txtDamg.size=26;this.txtDamg.text="2\u5929\u524d";this.txtDamg.anchorX=this.txtDamg.anchorY=0.5};b.refreshView=function(a,b,c){this.txtRankNum.text=a.toString();this.txtName.text=GuildModel.ChangeTxtToDot(b);this.txtDamg.text=
GuildModel.formatNum(c)};return d}(BaseContainer);GuildRankItem.prototype.__class__="GuildRankItem";
var GuildReward=function(c){function d(){c.call(this);addAction(Const.Guild_refleshReward,this.reLoad,this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("set_bg");this.boxContainer.addChild(a);a.x=34;a.y=160;a.height=440;var a=new SimpleButton,b=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");a.addChild(b);a.addOnClick(this.onClickHandler,this);a.x=520;a.y=130;a.useZoomOut(!0);this.boxContainer.addChild(a);a=new egret.TextField;
this.addChild(a);a.text="\u5e2e\u6d3e\u5728\u4e0a\u6b21\u6b66\u6797\u5927\u4f1a\u6392\u540d\u7b2c:";this.boxContainer.addChild(a);a.x=100;a.y=260;this.txtRankNum=new egret.TextField;this.boxContainer.addChild(this.txtRankNum);this.txtRankNum.x=a.x+a.width+5;this.txtRankNum.y=a.y;b=new egret.TextField;this.boxContainer.addChild(b);b.text="\u5e2e\u6d3e\u6210\u5458\u83b7\u5f97:";b.x=a.x;b.y=310;this.txtMbGetCount=new egret.TextField;this.boxContainer.addChild(this.txtMbGetCount);this.txtMbGetCount.x=
b.x+b.width+5;this.txtMbGetCount.y=b.y;b=new egret.TextField;this.boxContainer.addChild(b);b.text="\u5e2e\u4e3b\u989d\u5916\u83b7\u5f97:";b.x=a.x;b.y=360;this.txtCMexGetCount=new egret.TextField;this.boxContainer.addChild(this.txtCMexGetCount);this.txtCMexGetCount.x=b.x+b.width+5;this.txtCMexGetCount.y=b.y};b.reLoad=function(){var a=GuildDataManager.getInstance().getMyGldInfo();a.isCanRecAwd?(this.btnRec=new SimpleButton,this.sprBtn=ResourceUtils.createBitmapFromSheet("reborn_lvup_btn","commonRes")):
(this.btnRec=new SimpleButton,this.sprBtn=ResourceUtils.createBitmapFromSheet("reborn_lvup_disable_btn","commonRes"));this.btnRec.addChild(this.sprBtn);this.boxContainer.addChild(this.btnRec);this.btnRec.x=230;this.btnRec.y=470;this.btnRec.setFontText("\u9886\u53d6\u5956\u52b1",26);this.btnRec.addOnClick(this.recvAward,this);this.txtRankNum.text=a.myGldRank.toString();this.txtMbGetCount.text=a.awdNum+"\u795e\u5175\u788e\u7247";this.txtCMexGetCount.text=a.exAwdNum+"\u795e\u5175\u788e\u7247"};b.onClickHandler=
function(){this.visible=!1};b.recvAward=function(){GuildDataManager.getInstance().getMyGldInfo().isCanRecAwd&&ProxyUtils.recAward()};return d}(BoxContainer);GuildReward.prototype.__class__="GuildReward";
var EquipTabView=function(c){function d(){c.call(this);this.initButton();this.init()}__extends(d,c);d.prototype.initButton=function(){this._button1=new TabButton;this._button1.initButton("top_tab_2","top_tab_1");this._button1.addLabel("\u6218\u9b42");this.addChild(this._button1);this._button1.name="type1Button";this._button1.x=38;this._button2=new TabButton;this._button2.initButton("top_tab_2","top_tab_1");this._button2.addLabel("\u7075\u5ba0");this.addChild(this._button2);this._button2.x=240;this._button2.name=
"type2Button";this._button3=new TabButton;this._button3.initButton("top_tab_2","top_tab_1");this._button3.addLabel("\u6c14\u52bf");this.addChild(this._button3);this._button3.x=441;this._button3.name="type3Button"};return d}(TabView);EquipTabView.prototype.__class__="EquipTabView";
var AlertBox=function(c){function d(){c.call(this)}__extends(d,c);var b=d.prototype;b.initView=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);this.callbackFun=b;this.callbackClass=c;this._container=new egret.DisplayObjectContainer;this.boxContainer.addChild(this._container);b=egret.DynamicBitmap.create("paymen_recommend");this._container.addChild(b);b.x=35;b.y=200;b=new SimpleButton;b.anchorX=b.anchorY=0.5;c=ResourceUtils.createBitmapFromSheet("close_btn");b.addChild(c);b.addOnClick(this.close,
this);b.useZoomOut(!0);b.x=570;b.y=230;this.boxContainer.addChild(b);b=new egret.TextField;b.width=400;b.height=50;b.textAlign=egret.HorizontalAlign.CENTER;b.textColor=0;b.text=a;b.x=120;b.y=350;b.size=26;this._container.addChild(b);this.boxContainer.addChild(GameUtils.createButton("\u786e\u5b9a","buy_btn",this.close.bind(this),310,500,170,69,0,0,0))};b.close=function(){this.parent.removeChild(this);this.callbackClass&&this.callbackFun&&this.callbackFun.call(this.callbackClass)};d.create=function(a,
b,c){void 0===b&&(b=null);void 0===c&&(c=null);var h=new d;h.initView(a,b,c);return h};return d}(BoxContainer);AlertBox.prototype.__class__="AlertBox";
var FriendLayer=function(c){function d(){c.call(this);this._dataList=[];this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("achieve_bg");this.boxContainer.addChild(a);a=new egret.DisplayObjectContainer;this.boxContainer.addChild(a);var b=ResourceUtils.createBitmapFromSheet("friend_title");b.x=200;b.y=40;a.addChild(b);b=egret.DynamicBitmap.create("friend_bg");b.x=20;b.y=130;a.addChild(b);var b=new SimpleButton,c=ResourceUtils.createBitmapFromSheet("close_btn",
"commonRes");b.addChild(c);b.addOnClick(this.onCloseHandler,this);b.x=550;b.y=20;b.useZoomOut(!0);a.addChild(b);b=new egret.TextField;b.x=100;b.y=143;b.size=24;b.text="\u4e0e\u597d\u53cb\u5171\u6218\u6c5f\u6e56\u53ef\u4ee5\u63d0\u5347\u81ea\u5df1\u7684\u70b9\u51fb\u4f24\u5bb3";a.addChild(b);b=new egret.TextField;b.x=30;b.y=178;b.size=24;b.text="\u7ed9\u597d\u53cb\u4f20\u529f\u5c06\u83b7\u5f97\u94dc\u5e01\u5956\u52b1,\u88ab\u4f20\u529f\u5230\u4e00\u5b9a\u6570\u91cf\u6709\u60ca\u559c\u54e6!";a.addChild(b);
b=new egret.TextField;b.x=150;b.y=213;b.size=24;b.text="(PS:\u9886\u53d6Buff\u540e\u8fdb\u5ea6\u4f1a\u6e05\u7a7a\u5662~)";a.addChild(b);this.initBottom();this.initTableView();this.initTabView();this.refreshData();b=ResourceUtils.createBitmapFromSheet("item_split");b.x=5;b.y=340;a.addChild(b);b=ResourceUtils.createBitmapFromSheet("item_split");b.x=5;b.y=850;a.addChild(b);a.cacheAsBitmap=!0;addAction(Const.FRIEND_INFO_CHANGE,this.refreshData,this);addAction(Const.GET_FRIEND_BUFF_DONE,this.getBuffDone,
this)};b.refreshView=function(){this.initBuffButton();this.refreshData()};b.refreshData=function(){this._buffProgress.percentage=FriendController.getInstance().getProgress();this._buffBtn.setEnabled(0<FriendController.getInstance().getProgress());var a=FriendController.getInstance().myInfo;this._myInfoLabel.text="\u6211\u4eca\u65e5\u5df2\u88ab"+(a.birthchild.maxNum-a.birthchild.lfNum)+"\u4eba\u9080\u6218\u6c5f\u6e56,\u8fd8\u53ef\u88ab\u9080"+a.birthchild.lfNum+"\u6b21"};b.onBuffClick=function(){GameMainLayer.instance.showFriendDetail({t:3})};
b.getBuffDone=function(){Time.clearInterval(this._timeID);this.tick();this._timeID=Time.setInterval(this.tick,this,1E3)};b.tick=function(){FriendController.getInstance().isInEffect()?this._timeLabel.text=GameUtils.formatTime(FriendController.getInstance().getBuffLeftTime()):(Time.clearInterval(this._timeID),this._timeLabel.text="\u9886BUFF",this._buffBtn.setEnabled(0<FriendController.getInstance().getProgress()))};b.initBuffButton=function(){null==this._buffBtn&&(this._buffBtn=new FriendItemButton,
this._buffBtn.x=520,this._buffBtn.y=900,this._buffBtn.initButton("btn_buff_1","btn_buff_2"),this._buffBtn.useZoomOut(!0),this._buffBtn.addOnClick(this.onBuffClick,this),this._tab1Container.addChild(this._buffBtn),this._timeLabel=new egret.TextField,this._timeLabel.size=24,this._timeLabel.textColor=0,this._timeLabel.anchorX=this._timeLabel.anchorY=0.5,this._timeLabel.x=526,this._timeLabel.y=900,this._tab1Container.addChild(this._timeLabel));FriendController.getInstance().isInEffect()?(this.tick(),
this._timeID=Time.setInterval(this.tick,this,1E3)):(this._timeLabel.text="\u9886BUFF",this._buffBtn.setEnabled(0<FriendController.getInstance().getProgress()))};b.initBottom=function(){this._tab1Container=new egret.DisplayObjectContainer;this.boxContainer.addChild(this._tab1Container);this._tab2Container=new egret.DisplayObjectContainer;this.boxContainer.addChild(this._tab2Container);var a=new egret.TextField;a.text="\u6211\u7684\u4f20\u529f\u8fdb\u5ea6:";a.size=24;a.x=30;a.y=880;this._tab1Container.addChild(a);
this._buffProgress=new HPProgress("pay_award_progress","pay_award_progress_bg",!0);this._buffProgress.x=200;this._buffProgress.y=880;this._buffProgress.setOffset(4,4);this._tab1Container.addChild(this._buffProgress);this.initBuffButton();this._myInfoLabel=new egret.TextField;this._myInfoLabel.x=50;this._myInfoLabel.y=880;this._myInfoLabel.size=26;this._tab2Container.addChild(this._myInfoLabel);this._detaiBtn=new SimpleButton;this._detaiBtn.anchorX=this._detaiBtn.anchorY=0.5;this._detaiBtn.x=550;this._detaiBtn.y=
895;a=ResourceUtils.createBitmapFromSheet("top_refresh");this._detaiBtn.addChild(a);a=new egret.TextField;a.text="\u8bf4\u660e";a.textColor=16777215;a.size=26;a.bold=!0;a.anchorX=a.anchorY=0.5;a.x=65;a.y=25;this._detaiBtn.addChild(a);this._detaiBtn.useZoomOut(!0);this._detaiBtn.addOnClick(this.detailHandler,this);this._tab2Container.addChild(this._detaiBtn)};b.detailHandler=function(){GameMainLayer.instance.showFriendDetail({t:1})};b.initTableView=function(){this._dataList=FriendController.getInstance().friendList;
null==this._tableView&&(this._tableView=new TableView,this._tableView.y=360,this._tableView.x=3,this.boxContainer.addChild(this._tableView),this._tableView.width=GameUtils.getWinWidth(),this._tableView.height=480)};b.createItemRenderer=function(){return new FriendItemLayer};b.updateItemRenderer=function(a,b,c){a.refreshView(b,c)};b.initTabView=function(){this._tabView=new FriendTabView;this._tabView.y=300;this._tabView.addOnClick(this.onTabSelect,this);this.boxContainer.addChild(this._tabView);this._tabView.selectTabWithType("type2")};
b.onTabSelect=function(a){d.curType=a;this._tab1Container.visible="type1"==a;this._tab2Container.visible="type2"==a;"type1"==a?(this._dataList.sort(function(a,b){return b.medicineNum-a.medicineNum}),this._tableView.setList(this._dataList,Direction.VERTICAL,this,GameUtils.getWinWidth(),102)):"type2"==a&&(this._dataList.sort(function(a,b){return b.level-a.level}),this._tableView.setList(this._dataList,Direction.VERTICAL,this,GameUtils.getWinWidth(),102))};b.onCloseHandler=function(){Time.clearInterval(this._timeID);
GameMainLayer.instance.hideFriendLayer()};b.dispose=function(){c.prototype.dispose.call(this);Time.clearInterval(this._timeID);removeEventsByTarget(this)};return d}(BoxContainer);FriendLayer.prototype.__class__="FriendLayer";
var FriendItemLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=ResourceUtils.createBitmapFromSheet("friend_item_bg");a.x=5;this.addChild(a);this._cacheNode=new egret.DisplayObjectContainer;this.addChild(this._cacheNode);this._rankLabel=new egret.TextField;this._rankLabel.size=34;this._rankLabel.x=20;this._rankLabel.y=30;this._cacheNode.addChild(this._rankLabel);a=ResourceUtils.createBitmapFromSheet("friend_head");a.x=100;a.y=
47;a.anchorX=a.anchorY=0.5;this._cacheNode.addChild(a);this._headContainer=new egret.DisplayObjectContainer;this._cacheNode.addChild(this._headContainer);this._nameLabel=new egret.TextField;this._nameLabel.x=150;this._nameLabel.y=15;this._nameLabel.size=26;this._cacheNode.addChild(this._nameLabel);this._button=new FriendItemButton;this._button.x=530;this._button.y=50;this._button.initButton("btn_buff_1","btn_buff_2");this._button.useZoomOut(!0);this._button.addOnClick(this.onClickHandler,this);this._cacheNode.addChild(this._button);
this._progress=new HPProgress("pay_award_progress","pay_award_progress_bg",!0);this._progress.setOffset(4,4);this._progress.x=160;this._progress.y=60;this._cacheNode.addChild(this._progress);this._infoLayer=new egret.TextField;this._infoLayer.x=150;this._infoLayer.y=60;this._infoLayer.size=20;this._cacheNode.addChild(this._infoLayer);this._lvLabel=new egret.TextField;this._lvLabel.x=300;this._lvLabel.y=15;this._lvLabel.size=26;this._cacheNode.addChild(this._lvLabel);this._cacheNode.cacheAsBitmap=
!0;addAction(Const.FRIEND_ITEM_REFRESH,this.refreshItem,this)};b.refreshItem=function(){this._type="";this.refreshView(this._data,this._idx)};b.onClickHandler=function(){"type1"==this._type?ProxyUtils.helpFriend(this._data.uId,this.helpDone,this):"type2"==this._type&&GameMainLayer.instance.showFriendDetail({t:4,data:this._data})};b.helpDone=function(a){0==a.s?(GameMainLayer.instance.showFriendDetail({t:2,data:this._data}),this._data.medicineSend=1,this._data.medicineNum+=1,this._type="",this.refreshView(this._data,
this._idx)):doAction(Const.SHOW_TIPS,"\u4f20\u529f\u5931\u8d25")};b.refreshHead=function(){this._headContainer.removeChildren();var a;""!=this._data.pic?a=egret.DynamicBitmap.create(this._data.pic,!0,function(){a.x=100;a.y=47;a.anchorX=a.anchorY=0.5;a.scaleX=80/a.width;a.scaleY=80/a.height},this,Const.default_user):(a=ResourceUtils.createBitmapFromSheet(Const.default_user,"iconRes"),a.x=100,a.y=47,a.anchorX=a.anchorY=0.5);this._headContainer.addChild(a)};b.tick=function(){this._button.addLabel(GameUtils.formatTime(FriendController.getInstance().getClickBuffLfTime()))};
b.refreshView=function(a,b){a&&(this._data=a,this._idx=b,this._rankLabel.text=this._idx+1,Time.clearInterval(this._timeID),this.refreshHead(),this._button.visible=!0,this._button.setEnabled(!0),"type1"==FriendLayer.curType?(this._infoLayer.visible=!1,this._lvLabel.visible=!1,this._progress.visible=!0,this._progress.percentage=5*this._data.medicineNum,this._button.addLabel("\u4f20\u529f"),1==this._data.medicineSend&&(this._button.visible=!1)):(this._infoLayer.visible=!0,this._lvLabel.visible=!0,this._progress.visible=
!1,this._infoLayer.text="\u4eca\u65e5\u5df2\u88ab"+this._data.hasDateNum+"\u4eba\u9080\u6218\u6c5f\u6e56,\u8fd8\u53ef\u88ab\u9080"+(this._data.dateMaxNum-this._data.hasDateNum)+"\u6b21",this._lvLabel.text="\u95ef\u5173\u6570:"+this._data.level,FriendController.getInstance().dated(this._data.uId)?(FriendController.getInstance().isDating(this._data.uId)?this._timeID=Time.setInterval(this.tick,this,1E3):this._button.addLabel("\u5df2\u6218"),this._button.setEnabled(!1)):(this._button.addLabel("\u5171\u6218"),
this._button.setEnabled(this._data.hasDateNum<this._data.dateMaxNum&&0>=FriendController.getInstance().getClickBuffLfTime()))),this._type=FriendLayer.curType,this._nameLabel.text=this._data.name?5<this._data.name.length?this._data.name.slice(0,5)+"...":this._data.name:"")};b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};return d}(BaseContainer);FriendItemLayer.prototype.__class__="FriendItemLayer";
var FriendItemButton=function(c){function d(){c.call(this);this.anchorX=this.anchorY=0.5}__extends(d,c);var b=d.prototype;b.initButton=function(a,b){this._frame1=ResourceUtils.createBitmapFromSheet(a,"commonRes");this._frame1.anchorX=this._frame1.anchorY=0.5;this._frame1.x=78;this._frame1.y=30;this.addChild(this._frame1);this._frame2=ResourceUtils.createBitmapFromSheet(b,"commonRes");this._frame2.anchorX=this._frame2.anchorY=0.5;this.addChild(this._frame2);this._frame2.x=78;this._frame2.y=30;this._frame2.visible=
!1};b.addLabel=function(a,b){void 0===b&&(b=0);null==this._label&&(this._label=new egret.TextField,this._label.textColor=b,this._label.size=26,this._label.bold=!0,this._label.anchorX=this._label.anchorY=0.5,this._label.x=78,this._label.y=30,this.addChild(this._label));this._label.text=a};return d}(SimpleButton);FriendItemButton.prototype.__class__="FriendItemButton";
var TopItemLayer=function(c){function d(a){void 0===a&&(a="top");c.call(this);this._icon=null;this.initView(a)}__extends(d,c);var b=d.prototype;b.initView=function(a){this._bg="self"==a?ResourceUtils.createBitmapFromSheet("top_light_item","commonRes"):ResourceUtils.createBitmapFromSheet("hero_item_bg","commonRes");this.addChild(this._bg);this._iconContainer=new egret.DisplayObjectContainer;this.addChild(this._iconContainer);this._lifeBorder=ResourceUtils.createBitmapFromSheet("life_border");this._lifeBorder.anchorX=
this._lifeBorder.anchorY=0.5;this._lifeBorder.x=54;this._lifeBorder.y=50;this._iconContainer.addChild(this._lifeBorder);this._container=new egret.DisplayObjectContainer;this._iconContainer.addChild(this._container);this._container.x=18;this._container.y=12;this._nameLabel=new egret.TextField;this._nameLabel.x=110;this._nameLabel.y=12;this._nameLabel.size=22;this._nameLabel.text="\u7528\u6237\u540d\u79f0";this._iconContainer.addChild(this._nameLabel);this._nameLabel.textColor=16777215;this._timeTitleLabel=
new egret.TextField;this._timeTitleLabel.x=110;this._timeTitleLabel.y=51;this._timeTitleLabel.size=22;this._timeTitleLabel.text="\u5b8c\u6210\u5173\u5361:";this._iconContainer.addChild(this._timeTitleLabel);this._timeTitleLabel.textColor=16777215;this._timelLabel=new egret.TextField;this._timelLabel.x=220;this._timelLabel.y=51;this._timelLabel.size=22;this._timelLabel.text="90";this._iconContainer.addChild(this._timelLabel);this._timelLabel.textColor=16777215;this._rankbg=ResourceUtils.createBitmapFromSheet("top_rank_bg",
"commonRes");this._rankbg.x=550;this._rankbg.y=49;this._rankbg.anchorX=this._rankbg.anchorY=0.5;this._iconContainer.addChild(this._rankbg);this._rankContainer=new egret.DisplayObjectContainer;a=ResourceUtils.createBitmapFromSheet("top_rank_1","commonRes");this._rankContainer.x=550;this._rankContainer.y=47;this._rankContainer.anchorX=this._rankContainer.anchorY=0.5;this._rankContainer.addChild(a);this._iconContainer.addChild(this._rankContainer);this._iconContainer.cacheAsBitmap=!0;this._selfContainer=
new egret.DisplayObjectContainer;this._selfContainer.x=490;this._selfContainer.y=0;this._selfTopTitleLabel=new egret.TextField;this._selfTopTitleLabel.x=0;this._selfTopTitleLabel.y=12;this._selfTopTitleLabel.size=24;this._selfTopTitleLabel.text="\u5f53\u524d\u6392\u540d\uff1a";this._selfTopTitleLabel.textColor=16777215;this._selfContainer.addChild(this._selfTopTitleLabel);this._selfTopLabel=new egret.TextField;this._selfTopLabel.x=43;this._selfTopLabel.y=43;this._selfTopLabel.anchorX=0.5;this._selfTopLabel.size=
32;this._selfTopLabel.text="108";this._selfContainer.addChild(this._selfTopLabel);this._iconContainer.addChild(this._selfContainer)};b.refreshView=function(a,b,c){this._model=a;this._idx=b;this._topType=c;-1==this._idx?(this._rankContainer.visible=!1,this._selfContainer.visible=!0,this._rankbg.visible=!1,"lv"==this._topType?this._timelLabel.text=DataCenter.getInstance().totalData.currentLevel.toString():"sc"==this._topType?(a=new NumberModel(DataCenter.getInstance().statistics.getValue(StatisticsType.coin)),
this._timelLabel.text=a.getNumer()):"dps"==this._topType?(a=new NumberModel(HeroController.getInstance().currentDPS),this._timelLabel.text=a.getNumer()):"money"==this._topType?this._timelLabel.text=ProxyUtils.playerRech.toString():"days"==this._topType?this._timelLabel.text=this._model.num:"life"==this._topType&&(this._timelLabel.text=DataCenter.getInstance().totalData.currentLife.toString()),this._selfTopLabel.text=this._model.top):(this._rankbg.visible=!0,this._rankContainer.visible=!0,this._selfContainer.visible=
!1,"money"!=this._topType?(a=new NumberModel(this._model.level),this._timelLabel.text=a.getNumer()):this._timelLabel.text="",a=ResourceUtils.createBitmapFromSheet("top_rank_"+this._model.top,"commonRes"),this._rankContainer.removeChildren(),this._rankContainer.addChild(a));"lv"==this._topType?this._timeTitleLabel.text="\u5b8c\u6210\u5173\u5361:":"sc"==this._topType?this._timeTitleLabel.text="\u6536\u96c6\u94dc\u94b1:":"dps"==this._topType?this._timeTitleLabel.text="\u4fa0\u5ba2\u79d2\u4f24:":"money"==
this._topType?this._timeTitleLabel.text=-1==b?"\u7d2f\u8ba1\u5145\u503c":"":"days"==this._topType?this._timeTitleLabel.text="\u7d2f\u8ba1\u767b\u9646":"life"==this._topType&&(this._timeTitleLabel.text="\u91cd\u751f\u6b21\u6570");this._lifeBorder.visible=0<this._model.life?!0:!1;var d;this._model.pic?d=egret.DynamicBitmap.create(this._model.pic,!0,function(){d.x=35;d.y=35;d.anchorX=d.anchorY=0.5;d.scaleX=50>=d.width?1:50/d.width;d.scaleY=50>=d.height?1:50/d.height},this,Const.default_user):(d=ResourceUtils.createBitmapFromSheet(Const.default_user,
"iconRes"),d.x=35,d.y=35,d.anchorX=d.anchorY=0.5);this._container.removeChildren();this._container.addChild(d);this._nameLabel.text=this._model.name};return d}(BaseContainer);TopItemLayer.prototype.__class__="TopItemLayer";
var AchieveEntryButton=function(c){function d(){c.call(this);this.anchorX=this.anchorY=0.5;this.init();this.useZoomOut(!0);addAction(Const.CHANGE_STATISTICS,this.changeStatistics,this)}__extends(d,c);var b=d.prototype;b.init=function(){this._container=new egret.DisplayObjectContainer;this.addChild(this._container);var a=ResourceUtils.createBitmapFromSheet("cup");this._container.addChild(a);this._newFlag=ResourceUtils.createBitmapFromSheet("new_achieve");this._newFlag.x=60;this._newFlag.y=5;this._newFlag.visible=
!1;this._container.addChild(this._newFlag);this.addOnClick(this.click,this);this.changeStatistics()};b.changeStatistics=function(){this._container.cacheAsBitmap=!1;this._newFlag.visible=DataCenter.getInstance().hasNewAchieve();this._container.cacheAsBitmap=!0};b.click=function(){GameMainLayer.instance.setAchieveLayerVisible()};return d}(SimpleButton);AchieveEntryButton.prototype.__class__="AchieveEntryButton";
var BattleStatusButton=function(c){function d(){c.call(this);this._status=1}__extends(d,c);var b=d.prototype;b.initView=function(){this.leaveBtn=new SimpleButton;this.leaveBtn.anchorX=this.leaveBtn.anchorY=0.5;this.addChild(this.leaveBtn);var a=ResourceUtils.createBitmapFromSheet("leave_battle","commonRes");this.leaveBtn.addChild(a);a=new egret.TextField;a.text="\u79bb\u5f00";a.x=34;a.y=10;a.textColor=0;this.leaveBtn.addChild(a);this.leaveBtn.addOnClick(this.onLeaveHandler,this);this.leaveBtn.useZoomOut(!0);
this.fightBtn=new SimpleButton;this.fightBtn.anchorX=this.fightBtn.anchorY=0.5;this.addChild(this.fightBtn);a=ResourceUtils.createBitmapFromSheet("fight_boss","commonRes");this.fightBtn.addChild(a);a=new egret.TextField;a.text="\u5934\u76ee";a.textColor=0;a.x=34;a.y=10;this.fightBtn.addChild(a);this.fightBtn.addOnClick(this.onFightHandler,this);this.fightBtn.useZoomOut(!0);this.activityBtn=new SimpleButton;this.activityBtn.anchorX=this.activityBtn.anchorY=0.5;this.addChild(this.activityBtn);a=ResourceUtils.createBitmapFromSheet("fight_boss",
"commonRes");this.activityBtn.addChild(a);a=new egret.TextField;a.text="\u79bb\u5f00\u6d3b\u52a8";a.textColor=0;a.size=22;a.x=20;a.y=15;this.activityBtn.addChild(a);this.activityBtn.addOnClick(this.onActivityHandler,this);this.activityBtn.useZoomOut(!0);this.guildWulinBtn=new SimpleButton;this.guildWulinBtn.anchorX=this.guildWulinBtn.anchorY=0.5;a=ResourceUtils.createBitmapFromSheet("leave_battle","commonRes");this.guildWulinBtn.addChild(a);this.addChild(this.guildWulinBtn);a=new egret.TextField;
a.text="\u9000\u51fa";a.x=35;a.y=10;this.guildWulinBtn.x=460;a.textColor=0;this.guildWulinBtn.addChild(a);this.guildWulinBtn.addOnClick(this.onBackMainView,this);this.guildWulinBtn.useZoomOut(!0)};b.setStatus=function(a){this._status=a;GuildDataManager.getInstance().isGuildWulinStart?(this.fightBtn.visible=!1,this.leaveBtn.visible=!1,this.activityBtn.visible=!1,this.guildWulinBtn.visible=!0):(this.fightBtn.visible=1==a,this.leaveBtn.visible=2==a,this.activityBtn.visible=4==a,this.guildWulinBtn.visible=
!1)};b.getStatus=function(){return this._status};b.onLeaveHandler=function(){doAction(Const.LEAVE_BATTLE)};b.onFightHandler=function(){doAction(Const.FIGHT_BOSS)};b.onActivityHandler=function(){GuildDataManager.getInstance().isBossKillSuc=!1;doAction(Const.ACTIVITY_BOSS_KILLED)};b.onBackMainView=function(){GuildDataManager.getInstance().enterWulin(!1)};return d}(BaseContainer);BattleStatusButton.prototype.__class__="BattleStatusButton";var BattleStatus;
(function(c){c[c.fight=1]="fight";c[c.leave=2]="leave";c[c.normal=3]="normal";c[c.activity=4]="activity";c[c.guildActivity=5]="guildActivity";c[c.guildWuLin=6]="guildWuLin"})(BattleStatus||(BattleStatus={}));
var last_battle_status=1,Boss=function(c){function d(){c.call(this);this._isBox=this._isBoss=!1;this._testIdx=31;this._idx=0;this._locked=this._isShow=!1;this.init()}__extends(d,c);var b=d.prototype;b.init=function(){this._movieContainer=new egret.DisplayObjectContainer;this.addChild(this._movieContainer);this._hpBar=new HPProgress("progress_spr","progress_back");this.addChild(this._hpBar);this._hpBar.setOffset(10,2);this._hpBar.x=156;this._hpBar.y=207;this._nameLabel=new egret.TextField;this._nameLabel.size=
18;this.addChild(this._nameLabel);this._nameLabel.x=187;this._nameLabel.y=210;this._nameLabel.text="\u540d\u5b57";this._hpLabel=new egret.TextField;this.addChild(this._hpLabel);this._hpLabel.anchorX=1;this._hpLabel.size=18;this._hpLabel.x=432;this._hpLabel.y=210;this._hpLabel.text="1000 HP";this._skillContainer=new egret.DisplayObjectContainer;this.addChild(this._skillContainer);addFilter(Const.ISBOSS,this.isFightingBoss,this);addAction(Const.CHANGE_CLICK_COIN,this.initClickCoin,this);addAction(Const.GET_PAYMENT_EFFECT,
this.getPaymentSkill,this);addFilter(Const.GET_BOSS,this.getBoss,this);addAction("playInjured",this.playInjured,this);addFilter("get_boss_container",this.getBossContainer,this)};b.getBoss=function(){return this};b.getBossContainer=function(){return this._skillContainer};b.getPaymentSkill=function(){var a=this.maxHP.times(0.5,"unset"),b={};b.dmg=a;b.crit=!0;return b};b.isFightingBoss=function(){return this._isBoss};b.refreshBoss=function(a,b){void 0===a&&(a=!0);void 0===b&&(b=!1);this._action&&(this._action.dispose(),
this._action=null);this._movieContainer.removeChildren();if(this._activity=b){this.showDieAnimation(!0);this._isBox=this._isBoss=!1;var c=GameUtils.getMonsterID(!0),d=DataCenter.getInstance().getActivityHP(a,!1)}else{GameUtils.isBoss()&&a?this._isBoss=!0:this._isBoss=!1;this._isBox=!1;if(!1==this._isBoss){var d=GameUtils.random(1,100),g=5,l=applyFilters(Const.GET_HOLY_EFFECT,getApplyString(21));l!=getApplyString(21)&&(g+=l);d<=g&&(this._isBox=!0)}c=GameUtils.getMonsterID(this._isBoss);this._isBox&&
(c=41);d=DataCenter.getInstance().getBossHP(a,this._isBoss)}GuildDataManager.getInstance().isGuildWulinStart&&(c=38);doAction(Const.ENTER_FIGHT);this._nameLabel.text=bossNameConfig[c-1];g=ResourceUtils.createBitmapFromSheet("boss_default");g.x=550;g.y=520;g.anchorX=0.5;g.anchorY=1;g.alpha=0.7;g.scaleX=g.scaleY=1;g.scaleX=-1;this._movieContainer.addChild(g);var k=this;GameUtils.preloadAnimation("monster_"+c+"_json",function(a){1E3*DataCenter.getInstance().totalData.currentLevel+DataCenter.getInstance().totalData.currentPass>
a||(k._movieContainer.removeChildren(),this._action=new Movie("monster_"+c+"_json","monster_"+c),this._action.play("stand"),this._action.autoRemove=!1,this._action.setCallback(this.onMoveCallback,this),k._movieContainer.addChild(this._action),this._action.y=635,this._action.x=320)},this,1E3*DataCenter.getInstance().totalData.currentLevel+DataCenter.getInstance().totalData.currentPass);this.curHP=new NumberModel;this.curHP.add(d);this.maxHP=new NumberModel;this.maxHP.add(d);this.randomCoin();l=applyFilters(Const.GET_HOLY_EFFECT,
getApplyString(24));l!=getApplyString(24)&&(this.curHP.times(1-l),this.maxHP.times(1-l));this._hpLabel.text=this.curHP.getNumer()+" HP";this._hpBar.percentage=100;this._passed=a;this._isBoss&&DataCenter.getInstance().checkKillHero()};b.showDieAnimation=function(a){var b=this;void 0===a&&(a=!1);var c=(new Date).getTime();GameUtils.preloadAnimation("boss_death_json",function(){if(500>(new Date).getTime()-c&&(b._action||a)){null==b._deathAction&&(b._deathAction=new Movie("boss_death_json","boss_death"),
b._deathAction.autoRemove=!1,b.addChild(b._deathAction));b._deathAction.play("1");var d=b._movieContainer.localToGlobal(520,385),d=b.globalToLocal(d.x,d.y,d);b._deathAction.x=d.x;b._deathAction.y=d.y}})};b.onMoveCallback=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];a[0]==Movie.PLAY_COMPLETE&&this._action.play("stand")};b.attackedWithoutAction=function(a){if(!this._locked){a=applyFilters(Const.FORMAT_BOSS_ATTACK_HP,a);DataCenter.getInstance().recordAttackDPS(a);a=this.curHP.reduce(a);
var b=this.curHP.getNumer();GuildDataManager.getInstance().isGuildWulinStart?this._hpLabel.text="":this._hpLabel.text=b+"HP";!1==a||"0"==b?GuildDataManager.getInstance().isGuildWulinStart||(this.dropCoin(),this._hpBar.percentage=0,this.dieEffect()):GuildDataManager.getInstance().isGuildWulinStart||(this._hpBar.percentage=this.curHP.percent(this.maxHP.getData()))}};b.randomCoin=function(){var a=GameUtils.random(45,65),b=SkillController.getInstance().boxDropCoinTimes,b=b*FateController.getInstance().getEffectByType(7),
c=1;if(this._isBoss){var d=applyFilters(Const.GET_HOLY_EFFECT,getApplyString(23));d!=getApplyString(23)&&(c+=Number(d))}c*=DataCenter.getInstance().getDropCoinAdd();d=applyFilters(Const.GET_HOLY_EFFECT,getApplyString(22));d!=getApplyString(22)&&Math.random()<=d/100&&(c*=10);GameUtils.isInActivity()&&(d=DataCenter.getInstance().lanternModel.getEffectType(),0<d&&(c*=d));a=this._isBox?this.maxHP.times(20*b*c/a,"unset"):this.maxHP.times(c/a,"unset");"0"==a&&(a="1");"1"==a?this._dropNum=1:"2"==a?(this._dropNum=
2,a="1"):(this._dropNum=!1==this._isBoss&&!1==this._isBox?GameUtils.random(1,2):GameUtils.random(3,4),b=new NumberModel,b.add(a),a=b.times(1/this._dropNum),"0"==a&&(a="1"));this._dropCoin=a;this.initClickCoin()};b.initClickCoin=function(){this._clickCoin="0";this._clickNum=1;if(0<HeroController.getInstance().mainHero.tapCoin){var a=new NumberModel;a.add(this._dropCoin);a.times(this._dropNum*HeroController.getInstance().mainHero.tapCoin/this._clickNum);this._clickCoin=a.getNumer()}};b.dropCoin=function(){var a=
{};a.one=this._dropCoin;a.num=this._dropNum;doAction(Const.DROP_COIN,a);PlatformFactory.getPlatform().name==PlatformTypes.WEIXIN&&ProxyUtils.awdTo&&!this._isShow&&0==ProxyUtils.awdTo.show&&(this._isShow=!0,doAction(Const.DROP_COIN,{one:"1",num:1,type:8}))};b.dropClickCoin=function(){var a={};a.one=this._clickCoin;a.num=this._clickNum;doAction(Const.DROP_COIN,a)};b.attacked=function(a){if(this._locked)return"";a=applyFilters(Const.FORMAT_BOSS_ATTACK_HP,a);DataCenter.getInstance().recordAttackDPS(a);
var b=this.curHP.reduce(a),c=this.curHP.getNumer();GuildDataManager.getInstance().isGuildWulinStart?this._hpLabel.text="":this._hpLabel.text=c+"HP";"0"!=this._clickCoin&&this.dropClickCoin();!1==b||"0"==c?GuildDataManager.getInstance().isGuildWulinStart||(this.dropCoin(),this._hpBar.percentage=0,this.dieEffect()):GuildDataManager.getInstance().isGuildWulinStart||(this._hpBar.percentage=this.curHP.percent(this.maxHP.getData()));this._action&&this._action.play("injured");return a};b.playInjured=function(){this._action&&
this._action.play("injured")};b.dieEffect=function(){var a=this;this._locked=!0;this._isBoss?DataCenter.getInstance().statistics.addValue(StatisticsType.boss):DataCenter.getInstance().statistics.addValue(StatisticsType.enemy);doAction(Const.KILL_ONE_BOSS);this._action?(this.showDieAnimation(),this._action.play("injured"),this._action.gotoAndStop(1),this._passed?egret.Tween.get(this._action).to({alpha:0},300).call(function(){DataCenter.getInstance().bossLevelUp(a._isBoss,a._isBox);a._locked=!1},this):
this._activity?(egret.Tween.get(this._action).to({alpha:0},300).call(function(){a._locked=!1},this),GuildDataManager.getInstance().isBossKillSuc=!0,GuildDataManager.getInstance().isGuildBoss||DataCenter.getInstance().loginAwardModel.bossKilled(),doAction(Const.ACTIVITY_BOSS_KILLED)):(egret.Tween.get(this._action).to({alpha:0},300).call(function(){a._locked=!1},this),doAction(Const.LEAVE_BATTLE))):(this._passed?DataCenter.getInstance().bossLevelUp(this._isBoss,this._isBox):this._activity?(doAction(Const.ACTIVITY_BOSS_KILLED),
DataCenter.getInstance().loginAwardModel.bossKilled()):doAction(Const.LEAVE_BATTLE),this._locked=!1)};b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};return d}(BaseContainer);Boss.prototype.__class__="Boss";
var bossNameConfig="\u767d\u7389\u4eac \u67f4\u7389\u5173 \u5927\u5200\u7537 \u5927\u5e08 \u6bb5\u7389 \u5f13\u7bad\u624b \u516c\u5b50\u7fbd \u602a\u4eba \u90ed\u5d69\u9633 \u97e9\u68e0 \u548c\u5c1a \u80e1\u94c1\u82b1 \u6559\u5f92 \u8346\u65e0\u547d \u8fde\u57ce\u74a7 \u67f3\u82e5\u677e \u5f8b\u9999\u5ddd \u731b\u7537 \u5973\u4fa0 \u5f3a\u76d7 \u79cb\u51e4\u68a7 \u6740\u624b \u4e0a\u5b98\u91d1\u8679 \u4f8d\u5973 \u4f8d\u536b \u53cc\u5251\u5973 \u53f8\u7a7a\u6458\u661f \u738b\u601c\u82b1 \u8427\u5c11\u82f1 \u8c22\u5c0f\u7389 \u8c22\u6653\u5cf0 \u718a\u732b\u513f \u71d5\u5357\u98de \u6768\u5ce5 \u9080\u6708 \u53f6\u7fd4 \u5085\u7ea2\u96ea \u77f3\u89c2\u97f3 \u5929\u673a\u8001\u4eba \u65e0\u82b1 \u5b9d\u9f0e".split(" "),BossLevelView=
function(c){function d(){c.call(this);this._lastLevel=1;this.posX=[-80,-10,60];this.posY=[0,5,0];this.init()}__extends(d,c);var b=d.prototype;b.hideLevel=function(){this._lvLabel.visible=!1;this._monsterIcon.visible=!1};b.showLevel=function(){this._lvLabel.visible=!0;this._monsterIcon.visible=!0};b.init=function(){this._passContainer=new egret.DisplayObjectContainer;this._passContainer.x=250;this._passContainer.y=40;this.addChild(this._passContainer);this._bossIconContainer=new egret.DisplayObjectContainer;
this.addChild(this._bossIconContainer);var a=DataCenter.getInstance().totalData;this._monsterIcon=ResourceUtils.createBitmapFromSheet("monster_icon","commonRes");this.addChild(this._monsterIcon);this._monsterIcon.x=-300;this._monsterIcon.y=10;this._lvLabel=new egret.BitmapText;var b=RES.getRes("battle_num_fnt_fnt");this._lvLabel.font=b;this.addChild(this._lvLabel);this._lvLabel.x=-230;this._lvLabel.y=29;this._lvLabel.text=a.currentPass+"/"+GameUtils.getMaxCustomPass();this._lastLevel=a.currentLevel;
this.initPassContainer();this._passContainer.cacheAsBitmap=!0;addAction(Const.REBORN_SKILL_REFRESH,this.refreshView,this)};b.initPassContainer=function(){var a=DataCenter.getInstance().totalData,b;1==a.currentLevel?(b=new LevelIcon(1),b.setLabelAlpha(),b.x=this.posX[1],b.y=this.posY[1],this._passContainer.addChild(b),b=new LevelIcon(2),b.x=this.posX[2],b.y=this.posY[2],this._passContainer.addChild(b),b.scaleX=b.scaleY=0.8):a.currentLevel==Const.maxLevel?(b=new LevelIcon(Const.maxLevel-1),b.x=this.posX[0],
b.y=this.posY[0],this._passContainer.addChild(b),b.scaleX=b.scaleY=0.8,b=new LevelIcon(Const.maxLevel),b.x=this.posX[1],b.y=this.posY[1],this._passContainer.addChild(b),b.setLabelAlpha()):(b=new LevelIcon(a.currentLevel-1),b.x=this.posX[0],b.y=this.posY[0],this._passContainer.addChild(b),b.scaleX=b.scaleY=0.8,b.setLabelAlpha(),b=new LevelIcon(a.currentLevel),b.x=this.posX[1],b.y=this.posY[1],this._passContainer.addChild(b),a=new LevelIcon(a.currentLevel+1),a.x=this.posX[2],a.y=this.posY[3],this._passContainer.addChild(a),
a.scaleX=a.scaleY=0.8,a.setLabelAlpha())};b.refreshView=function(){var a=DataCenter.getInstance().totalData;a.currentPass>=GameUtils.getMaxCustomPass()?this._lvLabel.text=a.currentPass+"/"+a.currentPass:this._lvLabel.text=a.currentPass+"/"+GameUtils.getMaxCustomPass();a.currentLevel>this._lastLevel?(this._bossIconContainer.removeChildren(),this._lastLevel=a.currentLevel,this.playAnimation(),DataCenter.getInstance().statistics.addValue(StatisticsType.level)):1==a.currentLevel&&(this._lastLevel=a.currentLevel,
this._passContainer.removeChildren(),this.initPassContainer());doAction(Const.Guild_ShowEnterDoor)};b.playAnimation=function(){var a=this;this._passContainer.cacheAsBitmap=!1;var b=DataCenter.getInstance().totalData;if(2==b.currentLevel){var c=this._passContainer.getChildAt(0),d=this._passContainer.getChildAt(1);egret.Tween.get(c).to({x:this.posX[0],y:this.posY[0],scaleX:0.8,scaleY:0.8},100).call(function(){c.setLabelAlpha();a._passContainer.cacheAsBitmap=!0});egret.Tween.get(d).to({x:this.posX[1],
y:this.posY[1],scaleX:1,scaleY:1},100).call(function(){d.setLabelAlpha()});var g=new LevelIcon(3);g.x=130;this._passContainer.addChild(g);g.scaleX=g.scaleY=0.6;egret.Tween.get(g).to({x:this.posX[2],y:this.posY[2],scaleX:0.8,scaleY:0.8},100).call(function(){g.setLabelAlpha()})}else if(b.currentLevel==Const.maxLevel){var c=this._passContainer.getChildAt(0),d=this._passContainer.getChildAt(1),l=this._passContainer.getChildAt(2);egret.Tween.get(c).to({x:-150,scaleX:0.6,scaleY:0.6},100).call(function(){GameUtils.removeFromParent(c)},
this);egret.Tween.get(d).to({x:this.posX[0],y:this.posY[0],scaleX:0.8,scaleY:0.8},100).call(function(){d.setLabelAlpha();a._passContainer.cacheAsBitmap=!0});egret.Tween.get(l).to({x:this.posX[1],y:this.posY[1],scaleX:1,scaleY:1},100).call(function(){l.setLabelAlpha()})}else c=this._passContainer.getChildAt(0),d=this._passContainer.getChildAt(1),l=this._passContainer.getChildAt(2),egret.Tween.get(c).to({x:-150,scaleX:0.6,scaleY:0.6},100).call(function(){GameUtils.removeFromParent(c)},this),egret.Tween.get(d).to({x:this.posX[0],
y:this.posY[0],scaleX:0.8,scaleY:0.8},100).call(function(){d.setLabelAlpha()}),egret.Tween.get(l).to({x:this.posX[1],y:this.posY[1],scaleX:1,scaleY:1},100).call(function(){l.setLabelAlpha()}),g=new LevelIcon(b.currentLevel+1),g.x=130,this._passContainer.addChild(g),g.scaleX=g.scaleY=0.6,egret.Tween.get(g).to({x:this.posX[2],y:this.posY[2],scaleX:0.8,scaleY:0.8},100).call(function(){g.setLabelAlpha();a._passContainer.cacheAsBitmap=!0})};b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};
return d}(BaseContainer);BossLevelView.prototype.__class__="BossLevelView";
var LevelIcon=function(c){function d(a){c.call(this);this._level=a;this.anchorX=this.anchorY=0.5;this.init(a)}__extends(d,c);var b=d.prototype;b.init=function(a){var b=GameUtils.getMapRes(a);this._icon=ResourceUtils.createBitmapFromSheet("icon_home_"+b,"iconRes");this.addChild(this._icon);this._label=new egret.TextField;this.addChild(this._label);this._label.size=24;this._label.anchorX=0.5;this._label.text=a.toString();this._label.strokeColor=0;this._label.stroke=2;this._label.x=27;this._label.y=
15};b.setLabelAlpha=function(){this._label.alpha=1==this._label.alpha?0.8:1};return d}(BaseContainer);LevelIcon.prototype.__class__="LevelIcon";
var CoinView=function(c){function d(){c.call(this);this._coinList=[];this._typeSkill={3:22002,4:22003,5:22004,6:22005};this._isTargetEffect=!1;this.init()}__extends(d,c);var b=d.prototype;b.init=function(){var a=this;this._coin=ResourceUtils.createBitmapFromSheet("coin_icon","commonRes");this.addChild(this._coin);this._coin.anchorX=this._coin.anchorY=0.5;this._coin.y=84;this._coin.x=20;this._coinLabel=new egret.BitmapText;var b=RES.getRes("battle_num_fnt_fnt");this._coinLabel.font=b;this.addChild(this._coinLabel);
this._coinLabel.x=50;this._coinLabel.y=66;this._coinLabel.text=DataCenter.getInstance().getScNum();this._coinContainer=new egret.DisplayObjectContainer;this.addChild(this._coinContainer);this._goldcoin=ResourceUtils.createBitmapFromSheet("gold_icon","commonRes");this.addChild(this._goldcoin);this._goldcoin.anchorX=this._coin.anchorY=0.5;this._goldcoin.x=270;this._goldcoin.y=160;this._goldcoin.scaleX=this._goldcoin.scaleY=0.8;this._goldcoin.anchorX=this._goldcoin.anchorY=0.5;this._goldcoinLabel=new egret.BitmapText;
b=RES.getRes("battle_num_fnt_fnt");this._goldcoinLabel.font=b;this.addChild(this._goldcoinLabel);this._goldcoinLabel.x=290;this._goldcoinLabel.y=150;this._goldcoinLabel.scaleX=this._goldcoinLabel.scaleY=0.7;this._goldcoinLabel.text=DataCenter.getInstance().getGcNum();this._goldcoin.visible=!1;this._goldcoinLabel.visible=!1;this._holycoin=ResourceUtils.createBitmapFromSheet("holy_icon","commonRes");this.addChild(this._holycoin);this._holycoin.anchorX=this._holycoin.anchorY=0.5;this._holycoin.y=160;
this._holycoin.x=270;this._holycoin.scaleX=this._holycoin.scaleY=0.8;this._holycoinLabel=new egret.BitmapText;b=RES.getRes("battle_num_fnt_fnt");this._holycoinLabel.font=b;this.addChild(this._holycoinLabel);this._holycoinLabel.x=290;this._holycoinLabel.y=150;this._holycoinLabel.text=DataCenter.getInstance().getHolyNum().toString();this._holycoin.visible=!1;this._holycoinLabel.visible=!1;this._lanternIcon=new egret.Bitmap;b=ResourceUtils.getImgUrl(ActivityDrop.VERSION+"_qixi_image");RES.getResByUrl(b,
function(b){a._lanternIcon.texture=b},this);this.addChild(this._lanternIcon);this._lanternIcon.y=175;this._lanternIcon.x=290;this._lanternIcon.scaleX=this._lanternIcon.scaleY=0.9;this._lanternIcon.anchorX=this._lanternIcon.anchorY=0.5;this._lanternLabel=new egret.BitmapText;b=RES.getRes("battle_num_fnt_fnt");this._lanternLabel.font=b;this.addChild(this._lanternLabel);this._lanternLabel.x=328;this._lanternLabel.y=160;this._lanternLabel.text=DataCenter.getInstance().lanternModel.itemNum.toString();
this._lanternIcon.visible=!1;this._lanternLabel.visible=!1;b=ResourceUtils.createBitmapFromSheet("suprise_2");b.anchorX=b.anchorY=0.5;b.x=b.y=40;this._supriseBtn=new SimpleButton;this._supriseBtn.x=-40;this._supriseBtn.y=-20;this._supriseBtn.width=80;this._supriseBtn.height=80;this._supriseBtn.useZoomOut(!0);this._supriseBtn.anchorX=this._supriseBtn.anchorY=0.5;this._supriseBtn.addOnClick(this.clickSuprise,this);this._supriseBtn.addChild(b);this._supriseBtn.visible=!1;this.addChild(this._supriseBtn);
addAction(Const.FLY_COIN,this.flyTo,this);addAction(Const.DROP_COIN,this.dropCoinEffect,this);addAction(Const.GET_ALL_COIN,this.addCoinEffect,this);addAction(Const.CHANGE_COIN,this.changeCoin,this);addAction(Const.CHANGE_DIAMOND,this.changeGoldCoin,this);addAction(Const.ADD_COIN,this.addCoin,this);addAction(Const.OPEN_BOX,this.openBox,this);addAction(Const.RESET_GAME,this.resetGame,this);addAction(Const.HIDE_GOLDCOIN,this.hideGoldCoin,this);addAction(Const.HIDE_HOLYCOIN,this.hideHolyCoin,this);addAction(Const.HIDE_LANTERNCOIN,
this.hideLanternCoin,this);addAction(Const.SHOW_LANTERNCOIN,this.addLanternNum,this);addAction(Const.SHOW_HOLYCOIN,this.addHolyNum,this);addAction(Const.CHANGE_HOLY_NUM,this.changeHolyNum,this);addAction(Const.CHANGE_LANTERN_NUM,this.changeLanternNum,this);addAction(Const.AWARD_EFFECT,this.awardEffect,this);addAction("changeCoinBg",this.changeCoinBg,this);this.setSuprise()};b.setSuprise=function(){PlatformFactory.getPlatform().name==PlatformTypes.WEIXIN&&(this._supriseBtn.visible=ProxyUtils.awdTo&&
1==ProxyUtils.awdTo.show)};b.clickSuprise=function(){GameMainLayer.instance.showSupriseLayer()};b.changeHolyNum=function(){this._holycoinLabel.text=DataCenter.getInstance().getHolyNum().toString()};b.changeLanternNum=function(){this._lanternLabel.text=DataCenter.getInstance().lanternModel.itemNum.toString()};b.addHolyNum=function(){this._holycoin.visible=!0;this._holycoinLabel.visible=!0;doAction(Const.DROP_COIN,{type:3,num:1})};b.addLanternNum=function(){this._lanternIcon.visible=!0;this._lanternLabel.visible=
!0;doAction(Const.DROP_COIN,{type:11,num:1})};b.openBox=function(a,b){var c=this.randBoxType();1==c.type||2==c.type?(doAction(Const.DROP_COIN,c,a,b),doAction(Const.SHOWBOXDESC,c)):8==c.type?doAction(Const.DROP_COIN,c,a,b):7==c.type?(c=this.getShareAward(),GameMainLayer.instance.showShareLayer(c)):((new BoxSkill(c.id)).execute(),doAction(Const.SHOWBOXDESC,c))};b.randBoxType=function(){var a=null;PlatformFactory.getPlatform();a=GameUtils.random(1,6);2<a&&!1==applyFilters(Const.IS_SKILL_USING,this._typeSkill[a])&&
(a=1);var b={};1==a?(b.num=GameUtils.random(5,8),a=this.getFallGold(),b.total=a.getNumer(),a.times(1/b.num),a=a.getNumer(),b.one="0"==a?"1":a,b.type=1):2==a?(b.num=1,b.one="1",b.type=2):7==a?(b.num=1,b.type=7):8==a?(b.num=1,b.type=8):(b.id=this._typeSkill[a],b.type=a);return b};b.getShareAward=function(){if(2==GameUtils.random(1,2)){var a=new Date,a=a.getFullYear().toString()+a.getMonth().toString()+a.getDate();a!=DataCenter.getInstance().totalData.shareFalls.date&&(DataCenter.getInstance().totalData.shareFalls.date=
a,DataCenter.getInstance().totalData.shareFalls.num=0);if(3>DataCenter.getInstance().totalData.shareFalls.num)return a={title:"\u798f\u5229\u6765\u55bd~\u89c2\u770b\u4e00\u4e0b\u5e7f\u544a\u5c31\n\u53ef\u4ee5\u9886\u53d6\u8d85\u591a\u514d\u8d39\u798f\u5229\u54df\uff01",type:"diamond",award:10,ad:!0},DataCenter.getInstance().totalData.shareFalls.num+=1,a}var a={title:"\u798f\u5229\u6765\u55bd~\u89c2\u770b\u4e00\u4e0b\u5e7f\u544a\u5c31\n\u53ef\u4ee5\u9886\u53d6\u8d85\u591a\u514d\u8d39\u798f\u5229\u54df\uff01",
type:"gold"},b=this.getFallGold();a.award=b.times(4);a.ad=!0;return a};b.getFallGold=function(){var a=HeroController.getInstance().mainHero.dps,b=DataCenter.getInstance().getBossHP(),c=new NumberModel;c.add(b);c.compare(a)&&(c.add(a),a=30<DataCenter.getInstance().totalData.currentLevel?0.35:0.05+0.01*DataCenter.getInstance().totalData.currentLevel,c.times(a));return c};b.hideGoldCoin=function(){this._goldcoin.visible=!1;this._goldcoinLabel.visible=!1};b.hideHolyCoin=function(){this._holycoin.visible=
!1;this._holycoinLabel.visible=!1};b.hideLanternCoin=function(){this._lanternIcon.visible=!1;this._lanternLabel.visible=!1};b.addCoin=function(a){if(a.parent){var b=a.parent.localToGlobal(a.x,a.y),b=this.globalToLocal(b.x,b.y,b);a.x=b.x;a.y=b.y;this.addChild(a);this.flyTo2(a)}};b.changeCoinBg=function(){GuildDataManager.getInstance().isGuildWulinStart?this._coin.texture=ResourceUtils.createBitmapFromSheet("spar","iconRes").texture:this._coin.texture=ResourceUtils.createBitmapFromSheet("coin_icon",
"commonRes").texture};b.changeCoin=function(){GuildDataManager.getInstance().isGuildWulinStart?this._coinLabel.text=GuildWuLinDataManager.getInstance().getCurrentHaveCrytal():this._coinLabel.text=DataCenter.getInstance().getScNum()};b.changeGoldCoin=function(){this._goldcoinLabel.text=DataCenter.getInstance().getGcNum()};b.addCoinTxt=function(){};b.flyTo2=function(a){var b=GameUtils.random(250,360),c=a.x+400*Math.sin(b),b=a.y+400*Math.sin(b);TweenLite.to(a,1.5,{bezier:{values:[{x:c,y:b},{x:this._coin.x,
y:this._coin.y}],autoRotation:!0},onComplete:function(b){GameUtils.removeFromParent(a);b==DataCenter.getInstance().totalData.currentLife&&DataCenter.getInstance().changeSc(a.num)},onCompleteParams:[DataCenter.getInstance().totalData.currentLife]})};b.flyTo=function(a){var b=GameUtils.getCoinTxt(a.num);b.x=a.x;b.y=a.y-50;b.start();this.addChild(b);var c=null,c=2==a.type?this._goldcoin:3==a.type?this._holycoin:8==a.type?this._supriseBtn:11==a.type?this._lanternIcon:this._coin;c.__sx||c.__sy||(c.__sx=
c.scaleX,c.__sy=c.scaleY);var b=c.x>c.x?1:-1,d=this;TweenLite.to(a,1,{bezier:[{x:a.x+GameUtils.random(150,200)*b,y:a.y-GameUtils.random(150,200)},{x:c.x,y:c.y}],onComplete:function(b){var e=this;this._isTargetEffect||(this._isTargetEffect=!0,egret.Tween.get(c).to({scaleX:c.__sx+0.2,scaleY:c.__sy+0.2},100).to({scaleX:c.__sx,scaleY:c.__sy},100).call(function(){e._isTargetEffect=!1}));GameUtils.removeFromParent(a);b==DataCenter.getInstance().totalData.currentLife&&(2==a.type?a.updated?(Time.setTimeout(function(){doAction(Const.HIDE_GOLDCOIN)},
this,1E3),DataCenter.getInstance().changeGc(a.num)):ProxyUtils.getDiamond("fall",a.num):3==a.type?(DataCenter.getInstance().changeHolyNum(1),DataCenter.getInstance().addALog("drop1"),Time.setTimeout(function(){doAction(Const.HIDE_HOLYCOIN)},this,1E3)):8==a.type?(d._supriseBtn.visible=!0,ProxyUtils.awdTo&&(ProxyUtils.awdTo.show=1)):11==a.type?(DataCenter.getInstance().changeLanternNum(1),Time.setTimeout(function(){doAction(Const.HIDE_LANTERNCOIN)},this,1E3)):99==a.type?(b=new NumberModel,b.add(a.num),
GuildWuLinDataManager.getInstance().addCrytal(b.getDataNum())):(DataCenter.getInstance().changeSc(a.num),!0==a.saved&&DataCenter.getInstance().saved.reduce(a.num)))},onCompleteParams:[DataCenter.getInstance().totalData.currentLife]})};b.awardEffect=function(a){var b=0,b="gold"==a.type?1:2,c=a.award,d=new NumberModel;d.add(c);a={coins:d.pieces(5),type:b,updated:a.updated};doAction(Const.DROP_COIN,a,320,520)};b.addCoinEffect=function(){for(var a=0;this._coinList.length;)this.openAwardBox(this._coinList.shift(),
20*a++)};b.resetGame=function(){for(;this._coinList.length;){var a=this._coinList.shift();a.cleanUp();a.parent&&a.parent.removeChild(a)}};b.dropCoinEffect2=function(a,b,c){2==a.type&&(this._goldcoin.visible=!0,this._goldcoinLabel.visible=!0);var d,g;b?(d=this.globalToLocal(b,c),b=Math.max(0,d.x-30),d=Math.min(GameUtils.getWinWidth(),d.x+30),c-=80,g=1):(c=GameUtils.getLayoutY(147),b=20,d=150,g=2);var l=null;if(a.coins)l=a.coins;else for(var l=[],k=0;k<a.num;k++)l.push(a.one);for(k=0;k<l.length;k++){var m=
new CoinContainer(l[k],a.type);m.updated=a.updated||!1;this.addChild(m);m.y=c;m.saved=a.saved||!1;1==g?(m.x=GameUtils.random(b,d),m.showAnimation1()):(m.x=350,m.showAnimation());m.setCallback(this.openAwardBox,this);this._coinList.push(m)}};b.dropCoinEffect=function(a,b,c){var d=this;if(8==a.type&&ProxyUtils.awdTo){ProxyUtils.getlt(ProxyUtils.awdTo.type,function(g){null!=g&&(ProxyUtils.awdTo.code=g,d.dropCoinEffect2(a,b,c))});var g=GameUtils.random(3,6),l={};l.id=this._typeSkill[g];l.type=g;this.dropCoinEffect2(l,
b,c)}else this.dropCoinEffect2(a,b,c)};b.openAwardBox=function(a,b){void 0===b&&(b=0);var c=this._coinList.indexOf(a);-1<c&&this._coinList.splice(c,1);a.open(b)};b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};return d}(BaseContainer);CoinView.prototype.__class__="CoinView";
var test1=function(){doAction(Const.DROP_COIN,{num:1,one:"1",type:"1"})},test3=function(){doAction(Const.OPEN_BOX,{num:1,one:"1",type:"2"})},test2=function(){DataCenter.getInstance().totalData.currentLevel+=1;doAction(Const.REFRESH_BOSS)},ElfView=function(c){function d(){c.call(this);this._delay=0;this._itemsTouch=this._curElf=null;this._timeid=0;this._clicked=!1;this._itemsTouch=new ItemsTouchManager;this._itemsTouch.setController(new TouchController(this.click,this));this.begin();addAction("test20",
this.showElf,this);addAction("pause_main_game",this.pause,this);addAction("resume_main_game",this.resume,this);addAction("clearnReborn",this.moveBack,this)}__extends(d,c);var b=d.prototype;b.showElf=function(){var a=this;this._clicked=!1;if(!(this._itemsTouch&&0<this._itemsTouch.getItemsCount())){this._curElf=new Movie("elf_json","elf");this._spr=new egret.DisplayObjectContainer;var b=new egret.Sprite;b.anchorX=this._spr.anchorY=0.5;b.graphics.beginFill(16711680);b.graphics.drawRect(0,0,70,70);b.graphics.endFill();
b.width=70;b.alpha=0;b.height=70;b.y=-40;b.x=-10;this._spr.addChild(b);this._spr.addChild(this._curElf);this._curElf.play("1");this.addChild(this._spr);this._spr.y=-50;this._spr.x=GameUtils.random(0,600);this._delay=GameUtils.random(1,10);this._itemsTouch.addItems(b);TweenLite.to(this._spr,1,{x:320+200*Math.sin(this._delay),y:200+50*Math.cos(this._delay),onComplete:function(){a.addEventListener(egret.Event.ENTER_FRAME,a.moveElf,a);a._timeid=Time.setTimeout(a.moveBack,a,8E3)}})}};b.click=function(a){var b=
this;if(!this._clicked){this._itemsTouch.clearItems();this._clicked=!0;this._itemsTouch.removeItems(this._curElf);this._curElf.play("2");DataCenter.getInstance().statistics.addValue(StatisticsType.gift);var c=ResourceUtils.createBitmapFromSheet("box_normal");this.addChild(c);c.x=this._spr.x;c.y=this._spr.y;c.anchorX=c.anchorY=0.5;c.scaleX=c.scaleY=0.8;egret.Tween.get(c).to({y:GameUtils.getLayoutY(516)},1500).call(function(){egret.Tween.removeTweens(c);GameUtils.removeFromParent(c);var a=ResourceUtils.createBitmapFromSheet("box_open");
a.x=c.x;a.y=c.y;a.anchorX=a.anchorY=0.5;a.scaleX=a.scaleY=0.8;b.addChild(a);DataCenter.getInstance().statistics.addValue(StatisticsType.openbox);var d=b.localToGlobal(c.x,c.y);doAction(Const.OPEN_BOX,d.x,d.y);egret.Tween.get(a).wait(1E3).to({alpha:0},200).call(function(){GameUtils.removeFromParent(a)})});egret.Tween.get(c,{loop:!0}).to({rotation:10},250).to({rotation:0},250).to({rotation:-10},250).to({rotation:0},250);this.moveBack()}};b.moveBack=function(){var a=this;Time.clearTimeout(this._timeid);
this._itemsTouch.clearItems();this.removeEventListener(egret.Event.ENTER_FRAME,this.moveElf,this);this._spr&&this._curElf&&TweenLite.to(this._spr,1,{x:GameUtils.random(0,600),y:-50,onComplete:function(){GameUtils.removeFromParent(a._spr);GameUtils.removeFromParent(a._curElf);a.begin();TweenLite.killTweensOf(a._spr)}})};b.begin=function(){DataCenter.getInstance().loginAwardModel.isElfAward()?this._timeid1=Time.setTimeout(this.showElf,this,6E4):this._timeid1=Time.setTimeout(this.showElf,this,12E4)};
b.pause=function(){Time.clearTimeout(this._timeid1);Time.clearTimeout(this._timeid)};b.resume=function(){this.begin()};b.moveElf=function(){this._delay+=0.02;this._spr.y=200+50*Math.cos(this._delay);this._spr.x=320+200*Math.sin(this._delay)};b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this);Time.clearTimeout(this._timeid);Time.clearTimeout(this._timeid1);this._itemsTouch.clearItems();this.removeEventListener(egret.Event.ENTER_FRAME,this.moveElf,this)};return d}(BaseContainer);
ElfView.prototype.__class__="ElfView";
var GuildRechReward=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("set_bg");this.boxContainer.addChild(a);a.x=34;a.y=160;a.height=440;var a=new SimpleButton,b=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");a.addChild(b);a.addOnClick(this.onClickHandler,this);a.x=520;a.y=130;a.useZoomOut(!0);this.boxContainer.addChild(a);this.txtTitle=new egret.TextField;this.addChild(this.txtTitle);this.boxContainer.addChild(this.txtTitle);
this.txtTitle.x=240;this.txtTitle.y=240;this.txtTitle.textColor=16711680;this.txtTitle.size=30;this.txtRankNum=new egret.TextField;this.boxContainer.addChild(this.txtRankNum);this.txtRankNum.x=130;this.txtRankNum.y=300;this.txtMbGetCount=new egret.TextField;this.boxContainer.addChild(this.txtMbGetCount);this.txtMbGetCount.x=130;this.txtMbGetCount.y=350;this.txtCMexGetCount=new egret.TextField;this.boxContainer.addChild(this.txtCMexGetCount);this.txtCMexGetCount.x=130;this.txtCMexGetCount.y=400;this.btnRec=
new SimpleButton;this.sprBtn=ResourceUtils.createBitmapFromSheet("reborn_lvup_btn","commonRes");this.btnRec.addChild(this.sprBtn);this.boxContainer.addChild(this.btnRec);this.btnRec.x=230;this.btnRec.y=470;this.btnRec.setFontText("\u786e\u8ba4",26);this.btnRec.addOnClick(this.onClickHandler,this)};b.reload=function(a){this.txtTitle.text=GameUtils.parseFormat("\u5e2e\u6d3e\u5927\u793c\u5305");this.txtRankNum.text=GameUtils.parseFormat("1.\u5145\u503c\u8005\u83b7\u5f97$0\u4e2a\u6cd5\u5b9d\u788e\u7247",
a.meChip);this.txtMbGetCount.text=GameUtils.parseFormat("2.\u5e2e\u6d3e\u6210\u5458\u83b7\u5f97$0\u4e2a\u6cd5\u5b9d\u788e\u7247",a.otherChip);this.txtCMexGetCount.text=GameUtils.parseFormat("3.\u5e2e\u6d3e\u8d21\u732e+$0\u8d21\u732e",a.contribute)};b.onClickHandler=function(){GameUtils.removeFromParent(this)};return d}(BoxContainer);GuildRechReward.prototype.__class__="GuildRechReward";
var OfflineView=function(c){function d(a,b){c.call(this);DataCenter.getInstance().saved.add(b.getNumer());this._numModel=b;this._numModel.times(0.1);var d=a/3600;this._time=a;this._box=1>d?ResourceUtils.createBitmapFromSheet("offline_box_1","iconRes"):2>d?ResourceUtils.createBitmapFromSheet("offline_box_2","iconRes"):ResourceUtils.createBitmapFromSheet("offline_box_3","iconRes");this._box.anchorX=this._box.anchorY=0.5;this._light=ResourceUtils.createBitmapFromSheet("offline_light");this._light.anchorX=
this._light.anchorY=0.5;egret.Tween.get(this._light,{loop:!0}).to({rotation:360},1E3);this.addChild(this._box);this.addChild(this._light);this._itemsTouch=new ItemsTouchManager;this._itemsTouch.setController(new TouchController(this.click,this));this._itemsTouch.addItems(this._box);addAction("clearnReborn",this.clearnSave,this)}__extends(d,c);var b=d.prototype;b.clearnSave=function(){this._num=1;DataCenter.getInstance().saved.reduce(this._numModel.getNumer());GameUtils.removeFromParent(this)};b.create=
function(a,b){var c=this;Time.setTimeout(function(){var b=ResourceUtils.createBitmapFromSheet("coin_icon","commonRes");b.anchorX=0.5;b.anchorY=0.5;c.addChild(b);b.num=a;doAction(Const.ADD_COIN,b);c._num--;0==c._num&&egret.Tween.get(c).to({alpha:0},500).call(function(){c._numModel.times(10);DataCenter.getInstance().saved.reduce(c._numModel.getNumer());GameUtils.removeFromParent(c)})},this,b)};b.click=function(){this._itemsTouch.dispose();this._itemsTouch=null;this._num=10;for(var a=0;a<this._num;a++)this.create(this._numModel.getNumer(),
GameUtils.random(0,1E3));14400<=this._time&&doAction(Const.SHOW_TIPS,"\u6700\u591a\u9886\u53d64\u5c0f\u65f6\u79bb\u7ebf\u5956\u52b1");a=GameUtils.getCoinTxt(this._numModel.times(10,"get"));a.x=this._box.x+40;a.y=this._box.y;a.anchorX=a.anchorY=0;a.start1(a.y-80);this.addChild(a)};b.dispose=function(){c.prototype.dispose.call(this);this._itemsTouch&&this._itemsTouch.dispose();this._itemsTouch=null};return d}(BaseContainer);OfflineView.prototype.__class__="OfflineView";
var SetButton=function(c){function d(){c.call(this);this.init()}__extends(d,c);var b=d.prototype;b.init=function(){var a=ResourceUtils.createBitmapFromSheet("set_icon","commonRes");this.addChild(a);this.addOnClick(this.onClickHandler,this);this.useZoomOut(!0)};b.onClickHandler=function(){GameMainLayer.instance.showSetLayer()};return d}(SimpleButton);SetButton.prototype.__class__="SetButton";
var WeixinButton=function(c){function d(){c.call(this);this.init();this.anchorX=this.anchorY=0.5}__extends(d,c);var b=d.prototype;b.init=function(){var a=ResourceUtils.createBitmapFromSheet("weixin","commonRes");this.addChild(a);this.addOnClick(this.onClickHandler,this);this.useZoomOut(!0)};b.onClickHandler=function(){GameMainLayer.instance.showCodeAwardLayer()};return d}(SimpleButton);WeixinButton.prototype.__class__="WeixinButton";
var LoadingUI=function(c){function d(){c.call(this);this.createView()}__extends(d,c);var b=d.prototype;b.createView=function(){addAction("hideAllLoginButtton",this.hideAll,this);this._egretLabel=new egret.TextField;this._egretLabel.text="Powered by Egret Engine";this._egretLabel.bold=!0;this.addChild(this._egretLabel);this._egretLabel.x=270;this._egretLabel.y=GameUtils.getWinHeight()-50;this.textField=new egret.TextField;this.addChild(this.textField);this.textField.y=GameUtils.getWinHeight()/2;this.textField.x=
200;this.textField.width=GameUtils.getWinWidth();this.textField.height=100;this.textField.textAlign="left";PlatformFactory.getPlatform();this.startTick();LoadingGroupControl.instance().loadGroup("preload")};b.startTick=function(){this._current=0;this._timeID=Time.setInterval(this.countDown,this,200);this.countDown()};b.countDown=function(){this.textField.text="\u5c11\u4fa0\u6b63\u5728\u7a7f\u8863\u670d"+["",".","..","..."][this._current%4];this._current+=1};b.confirmHandler=function(){this._btn.visible=
!1;LoadingGroupControl.instance().loadGroup("preload")};b.hideAll=function(){this._btn.visible=!1};b.setProgress=function(a,b){};b._onRemoveFromStage=function(){c.prototype._onRemoveFromStage.call(this);removeEventsByTarget(this);Time.clearInterval(this._timeID);this._timeID=null};return d}(egret.Sprite);LoadingUI.prototype.__class__="LoadingUI";
var CountdownModel=function(){function c(b){this._notify=null;this._data=b;this._timeID=Time.setInterval(this.countdown,this,1E3)}var d=c.prototype;d.getTime=function(b){return this._data[b]?this._data[b]:0};Object.defineProperty(d,"notifyName",{get:function(){return this._notify},set:function(b){this._notify=b},enumerable:!0,configurable:!0});d.over=function(b){for(var a in this._data)this._data[a]=Math.max(0,this._data[a]-b),0==b&&delete this._data[a]};d.setTime=function(b,a){this._data[b]=a;this._notify&&
doAction(this._notify,b,a)};d.countdown=function(){for(var b in this._data){var a=Math.max(0,this._data[b]-1);this._data[b]=a;0==a&&delete this._data[b]}};d.getData=function(){return this._data};d.dispose=function(){Time.clearInterval(this._timeID);this._data=null};return c}();CountdownModel.prototype.__class__="CountdownModel";
var ObjectModel=function(){function c(b){this._notify=null;this._obj=b}var d=c.prototype;d.setValue=function(b){this._obj=b;null!=this._notify&&doAction(this._notify,this)};d.getValue=function(){return this._obj};Object.defineProperty(d,"notify",{get:function(){return this._notify},set:function(b){this._notify=b},enumerable:!0,configurable:!0});return c}();ObjectModel.prototype.__class__="ObjectModel";
(function(c){var d=function(b){function a(){b.call(this);this._json={};this._subValue={}}__extends(a,b);var d=a.prototype;d.analyzeData=function(a,c){b.prototype.analyzeData.call(this,a,c);this.fileDic[a.name]=EnCodeJson.decodeJson("xmglqxzconfig",c);var d=this.fileDic[a.name],e;for(e in d)this.addSubkey(e,a.name),this._json[e]=a.name};d.getRes=function(a){if(this.fileDic[a])return this.fileDic[a];if(!this._subValue[a]&&this._json[a]){var b=this.fileDic[this._json[a]][a],d=new c.ResourceItem("","",
""),e=egret.Injector.getInstance(c.AnalyzerBase,b.t);d.name=a;d.url=b.u||"";e.analyzeData(d,JSON.stringify(b.d));this._subValue[a]=e.getRes(a)}return this._subValue[a]};return a}(c.JsonAnalyzer);c.JsonSheetAnalyzer=d;d.prototype.__class__="RES.JsonSheetAnalyzer"})(RES||(RES={}));
var ActivityModel=function(){function c(b){this.clickNum=this.itemNum=0;this.data={};this.effectTime=3600;this.data=b.data||{};this.itemNum=b.num||0;this.clickNum=b.click||0}var d=c.prototype;d.getLastTimeByType=function(b){if(this.data[b]){var a=GameUtils.getCurrentTime(),a=Math.floor((a-this.data[b])/1E3);if(!(a>this.effectTime)&&0<=a)return this.effectTime-a;delete this.data[b]}return 0};d.getEffectType=function(){return 0<this.getLastTimeByType("1")?2:0<this.getLastTimeByType("2")?3:0<this.getLastTimeByType("3")?
5:0};d.addEffectByType=function(b){this.data[b]=GameUtils.getCurrentTime()};d.getData=function(){var b={};b.data=this.data;b.num=this.itemNum;b.click=this.clickNum;return b};return c}();ActivityModel.prototype.__class__="ActivityModel";var ActivityProType;(function(c){c[c.dropCoin1=1]="dropCoin1";c[c.dropCoin2=2]="dropCoin2";c[c.dropCoin3=3]="dropCoin3"})(ActivityProType||(ActivityProType={}));var ChatModel=function(){return function(){}}();ChatModel.prototype.__class__="ChatModel";
var DataModel=function(){function c(b){this._holyNum="";this.currentLife=0;this.currentPass=this.currentLevel=1;this.heroList={};this.mainHero={};this.mainSkillCD={};this.showHeroNum=1;this.rebornSkillList=[];this.buffList=[];this.equipList=[];this.heroEquip={};this.guideStep=0;this.shareFalls={};this.gameTime=0;this.hyList=[];this.init(b)}var d=c.prototype;Object.defineProperty(d,"holyNum",{get:function(){return Number(EncodeDecode.base64decode(this._holyNum))||0},set:function(b){this._holyNum=EncodeDecode.base64encode(b+
"");DataCenter.getInstance().addHolySetLog(b)},enumerable:!0,configurable:!0});d.getKey=function(){return this._holyNum};d.init=function(b){this.scNum=new NumberModel;this.scNum.add(decodeURIComponent(b.sc)||0);this.scNum.add(decodeURIComponent(b.saved||0));b.saved=0;this.gcNum=new NumberModel;this.gcNum.add(ProxyUtils.gcNum||0);this.currentLife=b.curLife||0;this.currentLevel=b.curLv||1;this.currentPass=b.curPass||1;this.heroList=b.hl||{};this.mainHero=b.mh||{lv:1,skill:{22001:0,22002:0,22003:0,22004:0,
22005:0,22006:0}};this.mainSkillCD=b.skillCD1||{};this.showHeroNum=b.showNum||1;this.rebornSkillList=b.rebornSkill||[];b.yu?this._holyNum=b.yu:this.holyNum=b.holy||0;0>this.holyNum&&(this.holyNum=0);this.guideStep=b.guideStep||1;this.shareFalls=b.shareFalls||{};this.buffList=b.buffList||[];this.hyList=b.hyList||[];if(b.equipList){this.equipList=b.equipList;for(var a=0;a<this.equipList.length;a++)this.equipList[a]+="";this.equipList=GameUtils.unique(this.equipList)}else this.equipList=[];this.initEquipList();
this.heroEquip=b.heroEquip||{};this.gameTime=b.gameTime||(new Date).getTime();this.heroEquip=this.formatData(this.heroEquip);this.mainSkillCD=this.formatData(this.mainSkillCD);this.heroList=this.formatData1(this.heroList)};d.formatData=function(b){return b&&Array.isArray(b)?{}:b};d.formatData1=function(b){if(b&&Array.isArray(b)){for(var a={},c=1001;1030>=c;c++)b[c]&&(a[c]=b[c]);return a}return b};d.initEquipList=function(){for(var b=0,a=0;a<this.rebornSkillList.length;a++)b+=this.rebornSkillList[a].lv;
var a=RES.getRes("equipConfig"),c;for(c in a)2==a[c].needType?this.currentLife>=a[c].needValue&&-1==this.equipList.indexOf(c)&&this.equipList.push(c):1==a[c].needType?this.currentLevel>=a[c].needValue&&-1==this.equipList.indexOf(c)&&this.equipList.push(c):3==a[c].needType&&b>=a[c].needValue&&-1==this.equipList.indexOf(c)&&this.equipList.push(c)};d.resetData=function(){this.scNum=new NumberModel;this.scNum.add(0);this.currentLife+=1;this.currentPass=this.currentLevel=1;this.heroList={};this.mainHero=
{lv:1,skill:{22001:0,22002:0,22003:0,22004:0,22005:0,22006:0}};this.mainSkillCD={};this.showHeroNum=1;this.guideStep=7;this.shareFalls={}};return c}();DataModel.prototype.__class__="DataModel";
var EquipListener=function(){function c(){}var d=c.prototype;d.init=function(){addAction(Const.BOSS_KILLED,this.bossKilled,this);addAction(Const.RESET_GAME,this.resetGame,this);addAction(Const.REBORN_SKILL_REFRESH,this.rebornList,this);addAction(Const.GAME_LOGOUT,this.dispose,this)};d.bossKilled=function(){var b=DataCenter.getInstance().totalData.currentLevel,a=RES.getRes("equipConfig"),c;for(c in a)if(1==a[c].needType&&a[c].needValue==b){DataCenter.getInstance().buyEquip(c);break}};d.resetGame=function(){var b=
DataCenter.getInstance().totalData.currentLife,a=RES.getRes("equipConfig"),c;for(c in a)if(2==a[c].needType&&a[c].needValue==b){DataCenter.getInstance().buyEquip(c);break}};d.rebornList=function(){for(var b=0,a=DataCenter.getInstance().totalData.rebornSkillList,c=0;c<a.length;c++)b+=a[c].lv;var a=RES.getRes("equipConfig"),d;for(d in a)if(3==a[d].needType&&a[d].needValue==b){DataCenter.getInstance().buyEquip(d);break}};d.dispose=function(){removeEventsByTarget(this)};return c}();
EquipListener.prototype.__class__="EquipListener";var GangHeroModel=function(){function c(){}var d=c.prototype;d.refreshDPS=function(){};d.isMain=function(){};return c}();GangHeroModel.prototype.__class__="GangHeroModel";
var LoginAwardModel=function(){function c(b){this.day=1;this.awarded=this.killed="";this.killed=b.killed||"";this.awarded=b.awarded||""}var d=c.prototype;d.bossKilled=function(){if(!this.todayKilled()){var b=this.getTime();this.killed=b+".1";1==this.day||2==this.day?this.isNextDay()||(b=this.getTime(),this.awarded=b+".1",1==this.day?ProxyUtils.getDiamond("loginDay",15):ProxyUtils.getDiamond("loginDay",30)):3==this.day?doAction(Const.REFRESH_PAYMENT_LIST):5==this.day&&doAction(Const.CHANGE_REBORN_SKILL);
DataCenter.getInstance().saveLocalData();DataCenter.getInstance().saveData();GameMainLayer.instance.showDaySigninAwardLayer();doAction(Const.hide_login_btn)}};d.getTime=function(){var b=DataCenter.getInstance().gameStartDate,a=b.getFullYear(),c=b.getMonth()+1,b=b.getDate();return a+"."+c+"."+b};d.isNextDay=function(){var b=DataCenter.getInstance().gameStartDate,a=(new Date).getTime()-DataCenter.getInstance().gameStartTime,a=new Date(b.getTime()+a);return b.getDate()!=a.getDate()};d.todayAwarded=function(){var b=
this.getTime();return this.awarded==b+".1"};d.todayKilled=function(){var b=this.getTime();return this.killed==b+".1"};d.isBoomFree=function(){return 3==this.day&&this.todayKilled()&&!1==this.todayAwarded()?!0:!1};d.isElfAward=function(){return 4==this.day&&this.todayKilled()&&!this.isNextDay()?!0:!1};d.isHolyFree=function(){return 5==this.day&&this.todayKilled()&&!1==this.todayAwarded()?!0:!1};d.setAwarded=function(){this.awarded=this.getTime()+".1";DataCenter.getInstance().saveLocalData();DataCenter.getInstance().saveData()};
d.getData=function(){var b={};b.killed=this.killed;b.awarded=this.awarded;return b};return c}();LoginAwardModel.prototype.__class__="LoginAwardModel";var BuyPayment=function(c){function d(){c.apply(this,arguments)}__extends(d,c);d.prototype.effect=function(b,a,c){void 0===c&&(c=null);PlatformFactory.getPlatform().payment(b,a,c)};return d}(BasePayment);BuyPayment.prototype.__class__="BuyPayment";PaymentFactory.getInstance().inject("buy",BuyPayment);
var CallHeroPayment=function(c){function d(){c.apply(this,arguments)}__extends(d,c);d.prototype.releaseSkill=function(){if(0==DataCenter.getInstance().isPay.getValue())GameMainLayer.instance.showPaymentRecommendLayer();else{var b=HeroModel.createByConfigId(Const.RECALL_HERO_ID);b.lv=1;DataCenter.getInstance().addHero(b);doAction(Const.CHANGE_USE_SKILL);doAction(Const.REFRESH_HEROLIST)}};return d}(SkillPayment);CallHeroPayment.prototype.__class__="CallHeroPayment";
PaymentFactory.getInstance().inject("callhero",CallHeroPayment);var CoinPayment=function(c){function d(){c.apply(this,arguments)}__extends(d,c);d.prototype.releaseSkill=function(){var b=this._model.coinNumber;DataCenter.getInstance().saved.add(b.getNumer());for(var b=b.pieces(5),a=0;a<b.length;a++){var c=new CoinElf(b[a]);applyFilters(Const.MAIN_LAYER).addChild(c);c.begin(GameUtils.random(100,1E3))}DataCenter.getInstance().isUseCoinSkill.setValue(1)};return d}(SkillPayment);
CoinPayment.prototype.__class__="CoinPayment";PaymentFactory.getInstance().inject("coin",CoinPayment);PaymentFactory.getInstance().inject("bigcoin",CoinPayment);PaymentFactory.getInstance().inject("bbcoin",CoinPayment);
var HolyPayment=function(c){function d(){c.apply(this,arguments)}__extends(d,c);d.prototype.effect=function(b,a,c){function d(){var b=JSON.parse(g.data);0==b.s&&(ActivityManager.getInstance().refreshHolyLfNum(b.lfNum),DataCenter.getInstance().reduceGc(400,!0),a.call(c),doAction(Const.SHOW_HOLYCOIN),egret.callLater(function(){doAction(Const.SHOW_HOLYCOIN)},this))}void 0===c&&(c=null);if(DataCenter.getInstance().hasEnoughGc(400)){b="h="+ProxyUtils.hashKey+"&data="+JSON.stringify({mod:"Activity","do":"buyYu"});
var h=new egret.URLRequest;h.method=egret.URLRequestMethod.POST;h.data=new egret.URLVariables(b);h.url=ProxyUtils.requestUrl;var g=new egret.URLLoader;g.addEventListener(egret.Event.COMPLETE,d,this);g.load(h)}else GameMainLayer.instance.showPaymentRecommendLayer()};return d}(BasePayment);HolyPayment.prototype.__class__="HolyPayment";PaymentFactory.getInstance().inject("holy",HolyPayment);var PaymentProgressLayer=function(c){function d(){c.call(this)}__extends(d,c);return d}(BoxContainer);
PaymentProgressLayer.prototype.__class__="PaymentProgressLayer";var PaymentProgressItemView=function(c){function d(){c.call(this)}__extends(d,c);return d}(egret.DisplayObjectContainer);PaymentProgressItemView.prototype.__class__="PaymentProgressItemView";var PaymentProgressModel=function(){return function(){}}();PaymentProgressModel.prototype.__class__="PaymentProgressModel";
var PaymentRecommend=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=DataCenter.getInstance().getPaymentModel("good"),b=DataCenter.getInstance().getPaymentModel("hot"),c=egret.DynamicBitmap.create("paymen_recommend");this.boxContainer.addChild(c);c.x=24;c.y=115;var c=new SimpleButton,d=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");c.addChild(d);c.addOnClick(this.onClickHandler,this);c.x=510;c.y=90;c.useZoomOut(!0);this.boxContainer.addChild(c);
this._goldCoin=ResourceUtils.createBitmapFromSheet("gold_icon","commonRes");this._goldCoin.x=210;this._goldCoin.y=175;this.boxContainer.addChild(this._goldCoin);this._notEnoughLabel=new egret.TextField;this._notEnoughLabel.text="\u60a8\u7684\u5143\u5b9d\u4e0d\u8db3";this._notEnoughLabel.x=260;this._notEnoughLabel.y=175;this._notEnoughLabel.size=28;this._notEnoughLabel.textColor=3416343;this.boxContainer.addChild(this._notEnoughLabel);this._hotContainer=new SimpleButton;this._hotContainer.x=312;this._hotContainer.y=
280;this._hotContainer.anchorX=this._hotContainer.anchorY=0.5;c=new egret.DisplayObjectContainer;c.cacheAsBitmap=!0;d=ResourceUtils.createBitmapFromSheet("buff_item_bg","commonRes");c.addChild(d);this._hotContainer.addChild(c);this._hotMoneyLabel=new egret.TextField;this._hotMoneyLabel.text="180";this._hotMoneyLabel.x=420;this._hotMoneyLabel.y=23;this._hotMoneyLabel.size=20;this._hotMoneyLabel.textColor=3416343;this._hotMoneyLabel.textAlign=egret.HorizontalAlign.CENTER;c.addChild(this._hotMoneyLabel);
this._hotTitleLabel=new egret.TextField;this._hotTitleLabel.text="\u597d\u70ed\u989d";this._hotTitleLabel.x=120;this._hotTitleLabel.y=23;this._hotTitleLabel.size=28;this._hotTitleLabel.textColor=3416343;c.addChild(this._hotTitleLabel);this._hotDescLabel=new egret.TextField;this._hotDescLabel.text="\u70ed\u95e8\u7684\u5145\u503c\u989d";this._hotDescLabel.x=120;this._hotDescLabel.y=52;this._hotDescLabel.size=18;this._hotDescLabel.textColor=3416343;this._hotDescLabel.lineSpacing=2;c.addChild(this._hotDescLabel);
this._hotIcon=ResourceUtils.createBitmapFromSheet(b.icon,"iconRes");this._hotIcon.x=25;this._hotIcon.y=20;c.addChild(this._hotIcon);this.boxContainer.addChild(this._hotContainer);this._goodContainer=new SimpleButton;this._goodContainer.x=312;this._goodContainer.y=400;this._goodContainer.anchorX=this._goodContainer.anchorY=0.5;c=new egret.DisplayObjectContainer;c.cacheAsBitmap=!0;d=ResourceUtils.createBitmapFromSheet("buff_item_bg","commonRes");c.addChild(d);this._goodContainer.addChild(c);this._goodMoneyLabel=
new egret.TextField;this._goodMoneyLabel.text="180";this._goodMoneyLabel.x=420;this._goodMoneyLabel.y=23;this._goodMoneyLabel.size=20;this._goodMoneyLabel.textColor=3416343;this._goodMoneyLabel.textAlign=egret.HorizontalAlign.CENTER;c.addChild(this._goodMoneyLabel);this._goodTitleLabel=new egret.TextField;this._goodTitleLabel.text="\u8d85\u503c\u7684";this._goodTitleLabel.x=120;this._goodTitleLabel.y=23;this._goodTitleLabel.size=28;this._goodTitleLabel.textColor=3416343;c.addChild(this._goodTitleLabel);
this._goodDescLabel=new egret.TextField;this._goodDescLabel.text="\u5f88\u503c\u5f97\u5145\u503c\u989d";this._goodDescLabel.x=120;this._goodDescLabel.y=52;this._goodDescLabel.size=18;this._goodDescLabel.lineSpacing=2;this._goodDescLabel.textColor=3416343;c.addChild(this._goodDescLabel);this._goodIcon=ResourceUtils.createBitmapFromSheet(a.icon,"iconRes");this._goodIcon.x=25;this._goodIcon.y=20;c.addChild(this._goodIcon);this.boxContainer.addChild(this._goodContainer);this.createNewTip(this._goodContainer,
a,30,30);this.createNewTip(this._hotContainer,b,30,30);this.boxContainer.addChild(GameUtils.createButton("\u5145\u503c","buy_btn",this.payHot.bind(this),470,295,171,60,0,0,3808268));this.boxContainer.addChild(GameUtils.createButton("\u5145\u503c","buy_btn",this.payGood.bind(this),470,415,171,60,0,0,3808268))};b.payGood=function(){this.payment(DataCenter.getInstance().getPaymentModel("good"));GameMainLayer.instance.hidePaymentRecommendLayer()};b.payHot=function(){this.payment(DataCenter.getInstance().getPaymentModel("hot"));
GameMainLayer.instance.hidePaymentRecommendLayer()};b.payment=function(a){PaymentFactory.getInstance().effect(a)};b.createNewTip=function(a,b,c,d){b=ResourceUtils.createBitmapFromSheet(b.tip);b.anchorX=b.anchorY=0.5;a.addChild(b);b.scaleX=b.scaleY=0.7;b.x=c;b.y=d;egret.Tween.get(b,{loop:!0}).to({scaleX:0.9,scaleY:0.9},500).to({scaleX:0.7,scaleY:0.7},500)};b.refreshView=function(){var a=DataCenter.getInstance().getPaymentModel("good");this._goodMoneyLabel.text=a.getFormatValue();this._goodTitleLabel.text=
a.title;this._goodDescLabel.textFlow=(new egret.HtmlTextParser).parser(this.formatDescription(a.getFormatDescription()));a=DataCenter.getInstance().getPaymentModel("hot");this._hotMoneyLabel.text=a.getFormatValue();this._hotTitleLabel.text=a.title;this._hotDescLabel.textFlow=(new egret.HtmlTextParser).parser(this.formatDescription(a.getFormatDescription()))};b.formatDescription=function(a){a=a.replace("0xffffff","0x000000");return a=a.replace("0xfffc00","0xff0000")};b.payClickHandler=function(){console.log("\u6211\u8981\u5145\u503c\u54a7")};
b.onClickHandler=function(){GameMainLayer.instance.hidePaymentRecommendLayer()};return d}(BoxContainer);PaymentRecommend.prototype.__class__="PaymentRecommend";
var SharePayment=function(c){function d(){c.apply(this,arguments)}__extends(d,c);d.prototype.effect=function(b,a,c){void 0===c&&(c=null);WanBaApi.shareTo(function(a){0==a?0<ProxyUtils.leftShareNum?ProxyUtils.getWBShareReward(function(a){if(0==a){doAction(Const.SHOW_TIPS,"\u5206\u4eab\u6210\u529f\uff0c\u83b7\u5f97100\u5143\u5b9d\uff01");ProxyUtils.leftShareNum-=1;a=new NumberModel(100);var b={};b.coins=a.pieces(4);b.type=2;b.updated=!0;doAction(Const.DROP_COIN,b)}else doAction(Const.SHOW_TIPS,"\u5206\u4eab\u6210\u529f!")},
this):doAction(Const.SHOW_TIPS,"\u5206\u4eab\u6210\u529f!"):doAction(Const.SHOW_TIPS,"\u5206\u4eab\u5931\u8d25")},this)};return d}(BasePayment);SharePayment.prototype.__class__="SharePayment";PaymentFactory.getInstance().inject("share",SharePayment);var UsePayment=function(c){function d(){c.apply(this,arguments)}__extends(d,c);d.prototype.releaseSkill=function(){doAction(Const.USE_PAYMENT_SKILL,this._model.type)};return d}(SkillPayment);UsePayment.prototype.__class__="UsePayment";
PaymentFactory.getInstance().inject("blood",UsePayment);PaymentFactory.getInstance().inject("touch",UsePayment);PaymentFactory.getInstance().inject("shield",UsePayment);
var ETPlatform=function(c){function d(){c.apply(this,arguments);this._isTryAutoLoginOnce=!1;this.tickTime=0;this._showSwitchButton=!1}__extends(d,c);var b=d.prototype;b.init=function(){GameUtils.isQQBOfChannel()||this.checkLogin();addAction(Const.ACHIEVE,this.achieve,this);addAction(Const.CLICK_CD_SKILL,this.clickCdSkill,this);addAction(Const.SHOW_MAIN_LAYER,this.showMainLayer,this)};b.clickCdSkill=function(a){GameMainLayer.instance.showSkillCDLayer(a)};b.checkLogin=function(){EgretH5Sdk.checkLogin(this.logincb,
this)};b.showMainLayer=function(){DataCenter.getInstance().isPay.setValue(ProxyUtils.hasPay);""==ProxyUtils.nickName?GameMainLayer.instance.showNameLayer():doAction("first_login")};b.logincb=function(a){a.token?(GameUtils.isAWY()?(ProxyUtils.requestUrl="http://awy.glqxz.egret-labs.org/api.php",ProxyUtils.loginUrl="http://awy.glqxz.egret-labs.org/login.php"):GameUtils.isQQBOfServer()?(ProxyUtils.requestUrl="http://glqxzqqb.gz.1251278653.clb.myqcloud.com/api.php",ProxyUtils.loginUrl="http://glqxzqqb.gz.1251278653.clb.myqcloud.com/login.php"):
(ProxyUtils.requestUrl="http://glqxz.egret-labs.org/api.php",ProxyUtils.loginUrl="http://glqxz.egret-labs.org/login.php"),GameUtils.isHttps()&&(ProxyUtils.requestUrl=ProxyUtils.requestUrl.replace("http://","https://"),ProxyUtils.loginUrl=ProxyUtils.loginUrl.replace("http://","https://")),ProxyUtils.platformInfo=platformType_egret,ProxyUtils.egretLogin(a.token),doAction("egret_login_success"),addAction(Const.REFRESH_GC,this.stopTick,this)):GameUtils.isQQBOfChannel()?(doAction("suport_type",["wx","qq"]),
this._isTryAutoLoginOnce||(this._isTryAutoLoginOnce=!0,doAction("Please_try_auto_login",!0,a))):EgretH5Sdk.login(this.logincb,this)};b.doLogin=function(a){EgretH5Sdk.login(this.loginDone,this,a)};b.loginDone=function(a){a.token?this.logincb(a):doAction("suport_type",["wx","qq"])};b.achieve=function(a){ProxyUtils.getGold(a.id)};b.isFriendOpen=function(){return GameUtils.isWeibo()};b.deserialize=function(){var a=ProxyUtils.serverData||{};a.isPay=ProxyUtils.hasPay;return a};b.codeAward=function(a){ProxyUtils.getCodeAward(a)};
b.getSaveData=function(a){return JSON.stringify(a.serialize())};b._getPlatformName=function(){return PlatformTypes.EGRET};b.serialize=function(a){ProxyUtils.saveData(a.serialize())};b.getPlatformConfig=function(){return"payment_etConfig"};b.stopTick=function(){this.autoTimer&&(this.autoTimer.stop(),this.autoTimer.removeEventListener(egret.TimerEvent.TIMER,this.autoTick,this),this.autoTimer=null);this.tickTime=0};b.autoTick=function(){this.tickTime+=1;40>=this.tickTime?ProxyUtils.refreshGc():this.stopTick()};
b.payCallback=function(a){var b=this;GameUtils.isQQBOfServer()?0==a.result?(this.tickTime=0,this.autoTick()):-1>a.result&&GameMainLayer.instance.showAlertBox("\u60a8\u7684\u8d26\u53f7\u767b\u9646\u72b6\u6001\u5931\u6548,\u8bf7\u91cd\u65b0\u767b\u5f55",function(){EgretH5Sdk.logout(function(a){0==a.result?GameUtils.loginout():doAction(Const.SHOW_TIPS,"\u767b\u51fa\u5931\u8d25")},b)},this):(this.tickTime=0,this.autoTick())};b.payment=function(a,b,c){this.stopTick();b=(new Date).getTime()-DataCenter.getInstance().gameStartTime;
ProxyUtils.openRechargeTime=Math.floor((ProxyUtils.currentServerTime+b)/1E3);this.autoTimer=new egret.Timer(5E3,0);this.autoTimer.addEventListener(egret.TimerEvent.TIMER,this.autoTick,this);this.autoTimer.start();ProxyUtils.egretPay(a.id,this.payCallback,this,a.ext)};b.doShareQQB=function(a,b,c){EgretH5Sdk.share(ProxyUtils.egretAppId,ProxyUtils.platUserId,a,function(a){b&&b.call(c,a)},this)};b.getLoginType=function(a,b){var c=this;EgretH5Sdk.getLoginType(function(d){if(0==d.result&&d.loginType){d=
c.copyDataHandler(d);if(GameUtils.hideWechatButton()){var g=d.loginType.indexOf("wx");-1!=g&&d.loginType.splice(g,1)}g=d.loginType.indexOf("guest");-1!=g&&d.loginType.splice(g,1);c._showSwitchButton=1<d.loginType.length}a&&b&&a.call(b,d)},this)};b.copyDataHandler=function(a){var b;if(a instanceof Array)b=[];else if(a instanceof Object)b={};else return a;for(var c=Object.keys(a),d=0,g=c.length;d<g;d++){var l=c[d];b[l]=this.copyDataHandler(a[l])}return b};b.showSwitchButton=function(){return this._showSwitchButton};
return d}(BasePlatform);ETPlatform.prototype.__class__="ETPlatform";PlatformFactory.getInstance().inject("et",platformType_egret,ETPlatform);
var WBPlatform=function(c){function d(){c.apply(this,arguments)}__extends(d,c);var b=d.prototype;b.init=function(){ProxyUtils.login();addAction(Const.ACHIEVE,this.achieve,this);addAction(Const.CLICK_CD_SKILL,this.clickCdSkill,this);addAction(Const.SHOW_MAIN_LAYER,this.showMainLayer,this)};b.showMainLayer=function(){doAction("first_login")};b.clickCdSkill=function(a){GameMainLayer.instance.showSkillCDLayer(a)};b.achieve=function(a){ProxyUtils.getGold(a.id)};b.codeAward=function(a){ProxyUtils.getCodeAward(a)};
b.isFriendOpen=function(){return!0};b.deserialize=function(){var a=ProxyUtils.serverData||{};a.isPay=ProxyUtils.hasPay;return a};b._getPlatformName=function(){return PlatformTypes.WANBA};b.serialize=function(a){ProxyUtils.saveData(a.serialize())};b.getSaveData=function(a){return JSON.stringify(a.serialize())};b.getPlatformConfig=function(){return"payment_wbConfig"};b.payment=function(a,b,c){void 0===c&&(c=null);b=a.need;ProxyUtils.isVIP&&(b*=0.8);ProxyUtils.jifen>=b?(ProxyUtils.paymentModel=null,
ProxyUtils.buyGold(parseInt(a.productId)+1E3,a.ext)):(ProxyUtils.UserStat("openPay",a.need/10),ProxyUtils.paymentModel=a,egret.MainContext.instance.stage.touchEnabled=!1,egret.setTimeout(function(){egret.MainContext.instance.stage.touchEnabled=!0},this,1E3),WanBaApi.wanbarRecharge(ProxyUtils.isVIP,ProxyUtils.openkey,ProxyUtils.openid,ProxyUtils.appid,ProxyUtils.platform,ProxyUtils.jifen,b))};b.doShare=function(){};return d}(BasePlatform);WBPlatform.prototype.__class__="WBPlatform";
PlatformFactory.getInstance().inject("wb",platformType_wanba,platformType_bearjoy,WBPlatform);
var WXPlatform=function(c){function d(){c.call(this);this._time=1;this._shared=[];this._curtime=this._shareModel=null;this._share=[];this._award=this._shareAll=null;this._shareAll=new WxShareAll}__extends(d,c);var b=d.prototype;b.init=function(){var a=GameUtils.getQuery("h",!0);egret.localStorage.setItem("hashKey",a);ProxyUtils.hashKey=a;Proxy.addGlobalParams("pf",GameUtils.getQuery("pf",!0));egret.localStorage.setItem("request_url","http://h5.gl.heitao.com/api.php");ProxyUtils.requestUrl="http://h5.gl.heitao.com/api.php";
this._shareAll.shareQuery();this.getInfo();addAction(Const.ACHIEVE,this.achieve,this);addAction(Const.SHOW_MAIN_LAYER,this.showMainLayer,this);addAction(Const.SHOW_AD_DONE,this.showAdDone,this)};b.getPlatformConfig=function(){return"payment_wxConfig"};b._getPlatformName=function(){return PlatformTypes.WEIXIN};b.shareIsOpen=function(){return 1==ProxyCache.getCache("User.getInfo").i.os};b.showAdDone=function(a){WXUtils.showAward(a,!0,!0)};b.deserialize=function(){var a=ProxyCache.getCache("User.getInfo"),
b=JSON.parse(a.i.dt||"{}");b.wx_share||(b.wx_share={cdskill:10,boxenemy:1,nextlevel:3});this._curtime=b.wx_time||(new Date).getTime();this._shareModel=new StatisticsModel(b.wx_share);b.isPay=a.i.hasPay;return b};b.codeAward=function(a){a=new SingleProxy({mod:"Code","do":"exchange",p:{code:a}});a.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(a){if(0==a.responseData.s){a=new NumberModel(a.responseData.gc);var b={};b.coins=a.pieces(4);b.type=2;b.updated=!0;GameMainLayer.instance.hideWeixinAwardLayer();
doAction(Const.DROP_COIN,b)}},this);a.load();a.addEventListener(ProxyEvent.RESPONSE_ERROR,function(a){a=a.responseData;3018==a.s?doAction(Const.SHOW_TIPS,"\u60a8\u5df2\u7ecf\u9886\u53d6\u8fc7\u4e86\u5151\u6362\u7801\u5956\u52b1"):3019==a.s?doAction(Const.SHOW_TIPS,"\u8be5\u5151\u6362\u7801\u5df2\u7ecf\u4f7f\u7528\u8fc7\u4e86"):3043==a.s&&doAction(Const.SHOW_TIPS,"\u60a8\u7684\u5151\u6362\u7801\u683c\u5f0f\u4e0d\u6b63\u786e")},this)};b.achieve=function(a){(new SingleProxy({mod:"Achieve","do":"finish",
p:{aId:a.id}})).load()};b.getInfo=function(){var a=this,b=new SingleProxy({mod:"User","do":"getInfo",cache:!0});b.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(b){b=b.responseData;a._award=b.i;ProxyUtils.awdTo=a._award.awdTo;ProxyUtils.winxinUrl=a._award.wxurl;ProxyUtils.boxUrl=a._award.boxurl;ProxyUtils.diamond=a._award.diamond;var c=a._award.gc;ProxyUtils.sfTime=a._award.sf;ProxyUtils.gcNum=c;ProxyUtils.nickName=a._award.nNa;ProxyUtils.userId=a._award.id;a._award.activitys&&(ProxyUtils.currentTime=
1E3*a._award.activitys.curTime,ProxyUtils.endTime=1E3*a._award.activitys.endTime,ProxyUtils.rechargeRMB=a._award.activitys.todayPay);ProxyUtils.showWeixinBtn=1==a._award.wx?!0:!1;ProxyUtils.downLoadURL=b.i.appDownUrl;ProxyUtils.weixinURL=b.i.wxBtnUrl;ProxyUtils.loginDay=b.i.loginDays;ProxyUtils.leftTime=b.i.loginLeftTime;ProxyUtils.currentServerTime=1E3*b.i.curTime;doAction(Const.INFO_INITED)},this);b.addEventListener(ProxyEvent.RESPONSE_ERROR,function(a){a=a.responseData;1==a.s&&(ProxyUtils.stopService=
1,ProxyUtils.lockMSG=a.msg||"",doAction(Const.INFO_INITED))},this);b.load()};b.showMainLayer=function(){this._award&&this._award.award?(this._award.award.updated=!0,WXUtils.showAward(this._award.award,!1,!1,function(){doAction(Const.START_GUIDE)})):doAction(Const.START_GUIDE);this._award.skId&&doAction(Const.CLEAN_SKILL_CD,this._award.skId);this.shareIsOpen()&&(this._shared.push(new WXAwardBox),this._shared.push(new WXShareKillBox),this._shared.push(new WXShareNextLevel),this._shared.push(new WXShareUnlockSkill))};
b.isNextDay=function(a,b){var c=new Date(b);return(new Date(a)).getDate()!=c.getDate()};b.getShare=function(){return this._shareModel};b.serializeDataCenter=function(a){a=a.serialize();a.wx_share=this._shareModel.getData();a.wx_time=this._curtime;return a};b.getSaveData=function(a){return JSON.stringify(this.serializeDataCenter(a))};b.serialize=function(a){var b=this,c=(new Date).getTime();this.isNextDay(this._curtime,c)&&this._shareModel.reset({cdskill:10,boxenemy:1,nextlevel:3});this._curtime=c;
a=JSON.stringify(this.serializeDataCenter(a));a=new SingleProxy({mod:"User","do":"saveInfo",p:{data:{saveData:a,time:this._time}}});a.addEventListener(ProxyEvent.REQUEST_FAIL,function(){ProxyUtils._errorTime+=1;3<ProxyUtils._errorTime&&GameMainLayer.instance.showMaskLayer()},this);a.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(a){a=a.responseData;a.skId&&doAction(Const.CLEAN_SKILL_CD,a.skId);a.award&&(a.award.updated=!0);WXUtils.showAward(a.award,!1);b._time++},this);a.load()};b.payment=
function(a,b,c){var d=this;void 0===c&&(c=null);b&&b.call(c);a=new SingleProxy({mod:"User","do":"getPayInfo",p:{data:{id:a.id}}});a.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(a){wx.ready(function(){var b=a.responseData;wx.chooseWXPay({timestamp:b.timestamp,nonceStr:b.nonceStr,package:b["package"],signType:b.signType,paySign:b.paySign,success:function(){var a=new SingleProxy({mod:"User","do":"payResult",p:{data:{orderId:b.orderId}}});a.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(a){a=
a.responseData.diamond;var b={type:"diamond",award:a,updated:!0};DataCenter.getInstance().statistics.addValue(StatisticsType.diamond,a);DataCenter.getInstance().isPay.setValue(1);doAction(Const.AWARD_EFFECT,b)},d);a.load()}})})},this);a.load()};return d}(BasePlatform);WXPlatform.prototype.__class__="WXPlatform";PlatformFactory.getInstance().inject("wx",WXPlatform);
var Dictionary=function(){function c(b){this._keys=[];this._values=[];for(var a=0;a<b.length;a++)this[b[a].key]=b[a].value,this._keys.push(b[a].key),this._values.push(b[a].value)}var d=c.prototype;d.add=function(b,a){this[b]=a;this._keys.push(b);this._values.push(a)};d.remove=function(b){var a=this._keys.indexOf(b,0);this._keys.splice(a,1);this._values.splice(a,1);delete this[b]};d.keys=function(){return this._keys};d.values=function(){return this._values};d.containsKey=function(b){return"undefined"===
typeof this[b]?!1:!0};d.toLookup=function(){return this};return c}();Dictionary.prototype.__class__="Dictionary";
var GuideButtonLayer=function(c){function d(){c.call(this);this._left=!1}__extends(d,c);var b=d.prototype;b.dispose=function(){c.prototype.dispose.call(this);this._context=this._selector=this._button=null;this._timerId&&Time.clearInterval(this._timerId);this._action&&(this._action.dispose(),this._action=null);removeEventsByTarget(this)};b.updateView=function(a,b,c,d){void 0===b&&(b=null);void 0===c&&(c=null);void 0===d&&(d=null);this._mask=null;this._button=a;this._data=b;this._selector=c;this._context=
d};b.onClickedButton=function(a){console.log("hehe")};b._onAddToStage=function(){c.prototype._onAddToStage.call(this);addAction("changeMaskHeight",this.changeMask,this)};b.changeMask=function(){null==this._mask&&(this._mask=new Mask(ResourceUtils.getTextureFromSheet("guide_mask","commonRes")),this._mask.width=GameUtils.getWinWidth(),this._mask.height=GameUtils.getWinHeight(),this.addChild(this._mask));var a=this._button.localToGlobal(0,0),a=this.globalToLocal(a.x,a.y);this._mask.tempHeight=550;this._mask.show(a.x,
a.y,this._button.width,this._button.height)};b.maskAndHand=function(){this.createMask();this.createGuideHand()};b.createMask=function(){null==this._mask&&(this._mask=new Mask(ResourceUtils.getTextureFromSheet("guide_mask","commonRes")),this._mask.width=GameUtils.getWinWidth(),this._mask.height=GameUtils.getWinHeight(),this.addChild(this._mask));var a=this._button.localToGlobal(0,0),a=this.globalToLocal(a.x,a.y);this._mask.show(a.x,a.y,this._button.width,this._button.height)};b.createGuideHand=function(){var a=
this._button.localToGlobal(0,0),a=this.globalToLocal(a.x,a.y);null==this._action&&(this._action=new Movie("quicklyclick_json","quicklyclick"),this._action.autoRemove=!1,this.addChild(this._action),this._action.play("1"));var b,c;b=this._button.scaleX;c=this._button.scaleY;this._left?(this._action.x=a.x+this._button.width*b*0.5-24,this._action.y=a.y+this._button.height*c*0.5+29):(this._action.x=a.x+this._button.width*b*0.5+25.5,this._action.y=a.y+this._button.height*c*0.5+28.5+5)};return d}(BaseContainer);
GuideButtonLayer.prototype.__class__="GuideButtonLayer";
var BezierAnimation=function(c){function d(a,b,d){void 0===b&&(b=!0);void 0===d&&(d=null);c.call(this,a,d);this._points=[];this._canRotate=b}__extends(d,c);var b=d.prototype;b.appendPoint=function(a){4>this._points.length&&this._points.push(a);return this};b.appendXY=function(a,b){4>this._points.length&&this._points.push(new egret.Point(a,b));return this};b.update=function(a){if(4==this._points.length){var b=Math.pow(1-a,3)*this._points[0].x+3*this._points[1].x*a*(1-a)*(1-a)+3*this._points[2].x*a*
a*(1-a)+this._points[3].x*Math.pow(a,3),f=Math.pow(1-a,3)*this._points[0].y+3*this._points[1].y*a*(1-a)*(1-a)+3*this._points[2].y*a*a*(1-a)+this._points[3].y*Math.pow(a,3);this._target.x=b;this._target.y=f;this._canRotate&&(this._target.rotation=d.getDegress(a,this._points[0],this._points[1],this._points[2],this._points[3]))}c.prototype.update.call(this,a)};b.onComplete=function(){c.prototype.onComplete.call(this)};b.run=function(a){c.prototype._run.call(this,a)};d.getDegress=function(a,b,c,d,g){b=
new egret.Point((1-a)*b.x+a*c.x,(1-a)*b.y+a*c.y);c=new egret.Point((1-a)*c.x+a*d.x,(1-a)*c.y+a*d.y);d=new egret.Point((1-a)*d.x+a*g.x,(1-a)*d.y+a*g.y);g=new egret.Point((1-a)*b.x+a*c.x,(1-a)*b.y+a*c.y);a=new egret.Point((1-a)*c.x+a*d.x,(1-a)*c.y+a*d.y);return 180*Math.atan2(-(g.y-a.y),a.x-g.x)/Math.PI};return d}(GameAnimation);BezierAnimation.prototype.__class__="BezierAnimation";
var ScoreAnimation=function(c){function d(a,b,d){c.call(this,a);this._format=null;this._beginScore=b;this._endScore=d;this._mns=new NumberModel}__extends(d,c);var b=d.prototype;b.update=function(a){c.prototype.update.call(this,a)};b.run=function(a){c.prototype._run.call(this,a)};return d}(GameAnimation);ScoreAnimation.prototype.__class__="ScoreAnimation";
var MovieEvent=function(c){function d(a,b,d,h){void 0===b&&(b=null);void 0===d&&(d=!1);void 0===h&&(h=!1);c.call(this,a,d,h);this._events=null;null!=b&&(this._events=b.split("-"))}__extends(d,c);var b=d.prototype;Object.defineProperty(b,"frameEventType",{get:function(){return null!=this._events&&2<=this._events.length?this._events[0]:null},enumerable:!0,configurable:!0});Object.defineProperty(b,"frameEventLabel",{get:function(){return this._events&&2<=this._events.length?this._events[1]:this._events&&
1==this._events.length?this._events[0]:null},enumerable:!0,configurable:!0});d.PLAY_COMPLETE="playComplete";d.FRAME_EVENT="frameEvent";d.ALL="all";return d}(egret.Event);MovieEvent.prototype.__class__="MovieEvent";
var DisplayTouchHandler=function(){function c(){}var d=c.prototype;d.dispose=function(){this._display.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginHandler,this);this._display.removeEventListener(egret.Event.REMOVED,this.dispose,this)};d.init=function(b,a,c){this._display=b;this._selector=a;this._target=c;this._display.touchEnabled=!0;this._display.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginHandler,this);this._display.addEventListener(egret.Event.REMOVED,this.dispose,
this)};d.onTouchBeginHandler=function(b){this._display&&this._display.visible&&(this._display.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginHandler,this),this._display.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEndHandler,this))};d.onTouchEndHandler=function(b){this._display.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginHandler,this);this._display.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEndHandler,this);this._display&&this._display.visible&&
this._selector&&this._target&&this._selector.call(this._target)};c.create=function(b,a,d){void 0===a&&(a=null);void 0===d&&(d=null);var f=new c;f.init(b,a,d);return f};return c}();DisplayTouchHandler.prototype.__class__="DisplayTouchHandler";var __moo_funciton_context=this,moo;
(function(c){c.isArray=function(c){return Array.isArray?Array.isArray(c):"[object Array]"==c.toString()};c.isString=function(c){return"string"==typeof c};c.fileSizeFormat=function(c){var b=[1073741824,1048576,1024,1],a=["GB","MB","KB","B"],e,f,h;if(0===c)return"0 "+a[a.length-1];f=c;h=a.length>=b.length?a[b.length-1]:"";for(e=0;e<b.length;e++)if(c>=b[e]){f=(c/b[e]).toFixed(2);h=a.length>=e?" "+a[e]:"";break}return f+h};c.isEmpty=function(d){if(null==d||void 0===d)return!0;if(c.isArray(d)||c.isString(d))return 0===
d.length;var b=!1,a;for(a in d){b=!0;break}return b};c.isEmptyTemp=function(d){if(null==d||void 0===d)return!0;if(c.isArray(d)||c.isString(d))return 0===d.length;for(var b in d)if(d.hasOwnProperty(b))return!1;return!0};c.isUndefined=function(c){return void 0===c};c.isArguments=function(c){return!(!c||!c.hasOwnProperty("callee"))};c.isFunction=function(c){return"function"===typeof c};c.isObject=function(c){return c===Object(c)};c.identity=function(c){return c};c.getWinWidth=function(){return egret.MainContext.instance.stage.stageWidth};
c.getWinHeight=function(){return egret.MainContext.instance.stage.stageHeight}})(moo||(moo={}));function formatFunctionParam(c,d){return moo.isUndefined(c)?d:c}function _t(c){for(var d=1;d<arguments.length;d++);return null==c?"":c}function _r(c){return c}function callUserFunction(c,d,b){b=formatFunctionParam(b,__moo_funciton_context);return moo.isFunction(c)?c.apply(b,d):moo.isString(c)?b[c].apply(b,d):null}
var _toString=function(c,d){void 0===d&&(d=0);d||(d=0);for(var b="",a=0;a<d;a++)b+="\t";var b=b+"{\n",e;for(e in c){for(a=0;a<=d;a++)b+="\t";b="object"==typeof c[e]?b+(e+":\n"+_toString(c[e],d+1)):b+(e+":"+c[e]+"\n")}for(a=0;a<d;a++)b+="\t";return b+"}\n"},isEmpty=function(c){return null==c||void 0==c||""==c||0==c||-1==c?!0:"number"==typeof c?isNaN(c):!1},timeToHour=function(c){return c/36E5},timeToSecond=function(c){return c/6E4},deepCopy=function(c,d){for(var b in d){var a=d[b];c!==a&&(c[b]="object"===
typeof a?deepCopy(c[b]||{},a):a)}return c};Function.prototype.bind||(Function.prototype.bind=function(c){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var d=Array.prototype.slice.call(arguments,1),b=this,a=function(){},e=function(){return b.apply(this instanceof a&&c?this:c,d.concat(Array.prototype.slice.call(arguments)))};a.prototype=this.prototype;e.prototype=new a;return e});
var MultiProxy=function(c){function d(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];c.call(this,null);this._subProxys=[];b=[];if(1==a.length&&Array.isArray(a[0]))b=a[0];else if(0<a.length)for(var d=0;d<a.length;d++)b.push(a[d]);if(b)for(d=0;d<b.length;d++)this.addSubProxy(b[d]);this.addParam("m",1)}__extends(d,c);var b=d.prototype;b.getParamString=function(){var a=[];this._subProxys.forEach(function(b){a.push(b.params)},this);return JSON.stringify(a)};b.onResponse=function(a){var b=
this;a?(this._responseData=a,this._subProxys.forEach(function(a){var c=a.getParamByName("mod"),d=a.getParamByName("do");a.onResponse(b.responseData[c][d])},this),this._isResponseSucceed=this._isRequestSucceed=!0,doAction("multiproxy_response_succeed",this),this.dispatchEvent(new ProxyEvent(ProxyEvent.RESPONSE_SUCCEED,this)),this.dispatchEvent(new ProxyEvent(ProxyEvent.REQUEST_SUCCEED,this))):(this._isRequestSucceed=!0,this._isResponseSucceed=!1,this._errorCode=-1E3,doAction("multiproxy_response_error",
this),this.dispatchEvent(new ProxyEvent(ProxyEvent.RESPONSE_ERROR,this)),this.dispatchEvent(new ProxyEvent(ProxyEvent.REQUEST_SUCCEED,this)),this.dispatchEvent(new ProxyEvent(ProxyEvent.ERROR,this)))};Object.defineProperty(b,"subProxyList",{get:function(){return this._subProxys},enumerable:!0,configurable:!0});b.getParamByName=function(a){for(var b=0;b<this._subProxys.length;b++){var c=this._subProxys[b].getParamByName(a);if(null!=c)return c}return null};b.addSubProxy=function(a){if(a&&a.hasOwnProperty("mod"))this._subProxys.push(new SingleProxy(a));
else if(a instanceof SingleProxy)this._subProxys.push(a);else if(a instanceof d){var b=this;a._subProxys.forEach(function(a){b.addSubProxy(a)},this)}};return d}(Proxy);MultiProxy.prototype.__class__="MultiProxy";
var ProxyListener=function(){function c(){this.initListeners()}var d=c.prototype;d.initListeners=function(){addAction("proxy_response_succeed",this.responseChangeAction,this);addAction("proxy_response_succeed",this.responseCacheFilter,this)};d.responseChangeAction=function(b){b.responseData.hasOwnProperty("c")&&ProxyUpdate.update(b,ProxyCache.getCache())};d.responseCacheFilter=function(b){ProxyCache.setCache(b)};return c}();ProxyListener.prototype.__class__="ProxyListener";
var ProxyStatus=function(){function c(){}c.DEFAULT=1;c.REQUEST=2;c.WAIT=4;c.RESPONSE=8;return c}();ProxyStatus.prototype.__class__="ProxyStatus";var RequestStatus=function(){function c(){}c.SUCCEED=1;c.ERROR=2;return c}();RequestStatus.prototype.__class__="RequestStatus";
var md5=function(){function c(){this.hexcase=0;this.b64pad=""}var d=c.prototype;d.hex_md5=function(b){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(b)))};d.b64_md5=function(b){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(b)))};d.any_md5=function(b,a){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(b)),a)};d.hex_hmac_md5=function(b,a){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(b),this.str2rstr_utf8(a)))};d.b64_hmac_md5=function(b,a){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(b),
this.str2rstr_utf8(a)))};d.any_hmac_md5=function(b,a,c){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(b),this.str2rstr_utf8(a)),c)};d.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()};d.rstr_md5=function(b){return this.binl2rstr(this.binl_md5(this.rstr2binl(b),8*b.length))};d.rstr_hmac_md5=function(b,a){var c=this.rstr2binl(b);16<c.length&&(c=this.binl_md5(c,8*b.length));for(var d=Array(16),h=Array(16),g=0;16>g;g++)d[g]=c[g]^909522486,
h[g]=c[g]^1549556828;c=this.binl_md5(d.concat(this.rstr2binl(a)),512+8*a.length);return this.binl2rstr(this.binl_md5(h.concat(c),640))};d.rstr2hex=function(b){try{this.hexcase}catch(a){this.hexcase=0}for(var c=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",d="",h,g=0;g<b.length;g++)h=b.charCodeAt(g),d+=c.charAt(h>>>4&15)+c.charAt(h&15);return d};d.rstr2b64=function(b){try{this.b64pad}catch(a){this.b64pad=""}for(var c="",d=b.length,h=0;h<d;h+=3)for(var g=b.charCodeAt(h)<<16|(h+1<d?b.charCodeAt(h+
1)<<8:0)|(h+2<d?b.charCodeAt(h+2):0),l=0;4>l;l++)c=8*h+6*l>8*b.length?c+this.b64pad:c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g>>>6*(3-l)&63);return c};d.rstr2any=function(b,a){var c=a.length,d,h,g,l,k,m=Array(Math.ceil(b.length/2));for(d=0;d<m.length;d++)m[d]=b.charCodeAt(2*d)<<8|b.charCodeAt(2*d+1);var n=Math.ceil(8*b.length/(Math.log(a.length)/Math.log(2))),p=Array(n);for(h=0;h<n;h++){k=[];for(d=l=0;d<m.length;d++)if(l=(l<<16)+m[d],g=Math.floor(l/c),l-=g*c,0<k.length||
0<g)k[k.length]=g;p[h]=l;m=k}c="";for(d=p.length-1;0<=d;d--)c+=a.charAt(p[d]);return c};d.str2rstr_utf8=function(b){for(var a="",c=-1,d,h;++c<b.length;)d=b.charCodeAt(c),h=c+1<b.length?b.charCodeAt(c+1):0,55296<=d&&56319>=d&&56320<=h&&57343>=h&&(d=65536+((d&1023)<<10)+(h&1023),c++),127>=d?a+=String.fromCharCode(d):2047>=d?a+=String.fromCharCode(192|d>>>6&31,128|d&63):65535>=d?a+=String.fromCharCode(224|d>>>12&15,128|d>>>6&63,128|d&63):2097151>=d&&(a+=String.fromCharCode(240|d>>>18&7,128|d>>>12&63,
128|d>>>6&63,128|d&63));return a};d.str2rstr_utf16le=function(b){for(var a="",c=0;c<b.length;c++)a+=String.fromCharCode(b.charCodeAt(c)&255,b.charCodeAt(c)>>>8&255);return a};d.str2rstr_utf16be=function(b){for(var a="",c=0;c<b.length;c++)a+=String.fromCharCode(b.charCodeAt(c)>>>8&255,b.charCodeAt(c)&255);return a};d.rstr2binl=function(b){for(var a=Array(b.length>>2),c=0;c<a.length;c++)a[c]=0;for(c=0;c<8*b.length;c+=8)a[c>>5]|=(b.charCodeAt(c/8)&255)<<c%32;return a};d.binl2rstr=function(b){for(var a=
"",c=0;c<32*b.length;c+=8)a+=String.fromCharCode(b[c>>5]>>>c%32&255);return a};d.binl_md5=function(b,a){b[a>>5]|=128<<a%32;b[(a+64>>>9<<4)+14]=a;for(var c=1732584193,d=-271733879,h=-1732584194,g=271733878,l=0;l<b.length;l+=16)var k=c,m=d,n=h,p=g,c=this.md5_ff(c,d,h,g,b[l+0],7,-680876936),g=this.md5_ff(g,c,d,h,b[l+1],12,-389564586),h=this.md5_ff(h,g,c,d,b[l+2],17,606105819),d=this.md5_ff(d,h,g,c,b[l+3],22,-1044525330),c=this.md5_ff(c,d,h,g,b[l+4],7,-176418897),g=this.md5_ff(g,c,d,h,b[l+5],12,1200080426),
h=this.md5_ff(h,g,c,d,b[l+6],17,-1473231341),d=this.md5_ff(d,h,g,c,b[l+7],22,-45705983),c=this.md5_ff(c,d,h,g,b[l+8],7,1770035416),g=this.md5_ff(g,c,d,h,b[l+9],12,-1958414417),h=this.md5_ff(h,g,c,d,b[l+10],17,-42063),d=this.md5_ff(d,h,g,c,b[l+11],22,-1990404162),c=this.md5_ff(c,d,h,g,b[l+12],7,1804603682),g=this.md5_ff(g,c,d,h,b[l+13],12,-40341101),h=this.md5_ff(h,g,c,d,b[l+14],17,-1502002290),d=this.md5_ff(d,h,g,c,b[l+15],22,1236535329),c=this.md5_gg(c,d,h,g,b[l+1],5,-165796510),g=this.md5_gg(g,
c,d,h,b[l+6],9,-1069501632),h=this.md5_gg(h,g,c,d,b[l+11],14,643717713),d=this.md5_gg(d,h,g,c,b[l+0],20,-373897302),c=this.md5_gg(c,d,h,g,b[l+5],5,-701558691),g=this.md5_gg(g,c,d,h,b[l+10],9,38016083),h=this.md5_gg(h,g,c,d,b[l+15],14,-660478335),d=this.md5_gg(d,h,g,c,b[l+4],20,-405537848),c=this.md5_gg(c,d,h,g,b[l+9],5,568446438),g=this.md5_gg(g,c,d,h,b[l+14],9,-1019803690),h=this.md5_gg(h,g,c,d,b[l+3],14,-187363961),d=this.md5_gg(d,h,g,c,b[l+8],20,1163531501),c=this.md5_gg(c,d,h,g,b[l+13],5,-1444681467),
g=this.md5_gg(g,c,d,h,b[l+2],9,-51403784),h=this.md5_gg(h,g,c,d,b[l+7],14,1735328473),d=this.md5_gg(d,h,g,c,b[l+12],20,-1926607734),c=this.md5_hh(c,d,h,g,b[l+5],4,-378558),g=this.md5_hh(g,c,d,h,b[l+8],11,-2022574463),h=this.md5_hh(h,g,c,d,b[l+11],16,1839030562),d=this.md5_hh(d,h,g,c,b[l+14],23,-35309556),c=this.md5_hh(c,d,h,g,b[l+1],4,-1530992060),g=this.md5_hh(g,c,d,h,b[l+4],11,1272893353),h=this.md5_hh(h,g,c,d,b[l+7],16,-155497632),d=this.md5_hh(d,h,g,c,b[l+10],23,-1094730640),c=this.md5_hh(c,d,
h,g,b[l+13],4,681279174),g=this.md5_hh(g,c,d,h,b[l+0],11,-358537222),h=this.md5_hh(h,g,c,d,b[l+3],16,-722521979),d=this.md5_hh(d,h,g,c,b[l+6],23,76029189),c=this.md5_hh(c,d,h,g,b[l+9],4,-640364487),g=this.md5_hh(g,c,d,h,b[l+12],11,-421815835),h=this.md5_hh(h,g,c,d,b[l+15],16,530742520),d=this.md5_hh(d,h,g,c,b[l+2],23,-995338651),c=this.md5_ii(c,d,h,g,b[l+0],6,-198630844),g=this.md5_ii(g,c,d,h,b[l+7],10,1126891415),h=this.md5_ii(h,g,c,d,b[l+14],15,-1416354905),d=this.md5_ii(d,h,g,c,b[l+5],21,-57434055),
c=this.md5_ii(c,d,h,g,b[l+12],6,1700485571),g=this.md5_ii(g,c,d,h,b[l+3],10,-1894986606),h=this.md5_ii(h,g,c,d,b[l+10],15,-1051523),d=this.md5_ii(d,h,g,c,b[l+1],21,-2054922799),c=this.md5_ii(c,d,h,g,b[l+8],6,1873313359),g=this.md5_ii(g,c,d,h,b[l+15],10,-30611744),h=this.md5_ii(h,g,c,d,b[l+6],15,-1560198380),d=this.md5_ii(d,h,g,c,b[l+13],21,1309151649),c=this.md5_ii(c,d,h,g,b[l+4],6,-145523070),g=this.md5_ii(g,c,d,h,b[l+11],10,-1120210379),h=this.md5_ii(h,g,c,d,b[l+2],15,718787259),d=this.md5_ii(d,
h,g,c,b[l+9],21,-343485551),c=this.safe_add(c,k),d=this.safe_add(d,m),h=this.safe_add(h,n),g=this.safe_add(g,p);return[c,d,h,g]};d.md5_cmn=function(b,a,c,d,h,g){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(a,b),this.safe_add(d,g)),h),c)};d.md5_ff=function(b,a,c,d,h,g,l){return this.md5_cmn(a&c|~a&d,b,a,h,g,l)};d.md5_gg=function(b,a,c,d,h,g,l){return this.md5_cmn(a&d|c&~d,b,a,h,g,l)};d.md5_hh=function(b,a,c,d,h,g,l){return this.md5_cmn(a^c^d,b,a,h,g,l)};d.md5_ii=function(b,a,c,d,h,
g,l){return this.md5_cmn(c^(a|~d),b,a,h,g,l)};d.safe_add=function(b,a){var c=(b&65535)+(a&65535);return(b>>16)+(a>>16)+(c>>16)<<16|c&65535};d.bit_rol=function(b,a){return b<<a|b>>>32-a};return c}();md5.prototype.__class__="md5";
var BottomLayer=function(c){function d(){c.call(this);this.init()}__extends(d,c);var b=d.prototype;b.init=function(){this._bg=ResourceUtils.createBitmapByName("bottom_bg");this.addChild(this._bg);this._bg.y=30;this._bg.anchorY=1;this._layerContainer=new egret.DisplayObjectContainer;this.addChild(this._layerContainer);this._layerContainer.y=10;this._touchArea=new egret.Sprite;this._touchArea.width=80;this._touchArea.height=80;this._touchArea.x=530;this._touchArea.y=-402;this._touchArea.touchEnabled=
!0;this.addChild(this._touchArea);var a=ResourceUtils.createBitmapFromSheet("bottom_btn");a.anchorX=a.anchorY=0.5;a.x=40;a.y=40;this._touchArea.addChild(a);this._touchArea.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showSkillLayer,this);this._skillContainer=new egret.DisplayObjectContainer;this.addChild(this._skillContainer);this._bottom=new BottomView;this._bottom.addOnClick(this.onTabSelect,this);this.addChild(this._bottom);this._bottom.selectTabWithType("main");addAction(Guide.HIDE_BOTTOM,
this.hideBottom,this);addAction(Guide.SHOW_BOTTOM1,this.showBottom1,this);addAction(Guide.SHOW_BOTTOM2,this.showBottom2,this);addAction(Const.Guild_ShowWuLin,this.showGuildTab,this);addAction(Const.Guild_CloseWuLin,this.closeGuildTab,this);addFilter("get_current_tag",this.getCurrentTag,this);addFilter(Guide.IS_SKILL_LAYER_EXSIT,this.isSkillExsit,this)};b.isSkillExsit=function(){return this._mainSkillLayer&&this._mainSkillLayer.visible?!0:!1};b.getCurrentTag=function(){return this._currentTag};b.hideBottom=
function(){this.showSkillLayer();this._bottom.visible=!1};b.showBottom1=function(){this._bottom.visible=!0;this._bottom.hideTab()};b.showBottom2=function(){this._bottom.showTab()};b.showGuildTab=function(){this._bottom.showGuildTab();this._bottom.selectTabWithType("main");this.onTabSelect("main");null!=this._mainSkillLayer&&this._mainSkillLayer.hideorShow(!1)};b.closeGuildTab=function(){this._bottom.closeGuildTab();this._bottom.selectTabWithType("main");this.onTabSelect("main");null!=this._mainSkillLayer&&
this._mainSkillLayer.hideorShow(!0)};b.showSkillLayer=function(){this._layerContainer.visible=!1;null==this._mainSkillLayer&&(this._mainSkillLayer=new SkillLayer,this._mainSkillLayer.y=-250);this._mainSkillLayer.visible=!0;this._mainSkillLayer.hideorShow(!GuildDataManager.getInstance().isGuildWulinStart);this._bg.visible=!1;this._touchArea.visible=!1;this._bottom.unSelectAll();this._skillContainer.addChild(this._mainSkillLayer);DataCenter.getInstance().refreshCurrentDPS();doAction(Guide.CLICK_DOWN_JIANTOU)};
b.hideSkillLayer=function(){this._mainSkillLayer&&(this._mainSkillLayer.visible=!1);this._bg.visible=!0;this._touchArea.visible=!0;this._layerContainer.visible=!0};b.hideLayer=function(a){a&&(a.visible=!1)};b.showMallLayer=function(){null==this._paymentListLayer&&(this._paymentListLayer=new PaymentListLayer,this._layerContainer.addChild(this._paymentListLayer),this._paymentListLayer.y=-250);this._paymentListLayer.visible=!0;this.hideLayer(this._heroLayer);this.hideLayer(this._skillListLayer);this.hideLayer(this._mainSkillLayer);
this.hideLayer(this._rebornListLayer);this.hideLayer(this._callCardLayer)};b.showCardLayer=function(){null==this._callCardLayer&&(this._callCardLayer=new CallCardLayer,this._layerContainer.addChild(this._callCardLayer),this._callCardLayer.y=-250);this._callCardLayer.visible=!0;this.hideLayer(this._skillListLayer);this.hideLayer(this._paymentListLayer);this.hideLayer(this._mainSkillLayer);this.hideLayer(this._rebornListLayer);this.hideLayer(this._heroLayer)};b.onTabSelect=function(a){this._currentTag=
a;this.hideSkillLayer();null!=this.skillGuildLayer&&(this.skillGuildLayer.visible=!1);"main"==a?(null==this._skillListLayer&&(this._skillListLayer=new SkillListLayer,this._layerContainer.addChild(this._skillListLayer),this._skillListLayer.y=-250),GuildDataManager.getInstance().isGuildWulinStart?(this._skillListLayer.visible=!1,this.hideLayer(this._heroLayer),this.hideLayer(this._paymentListLayer),this.hideLayer(this._mainSkillLayer),this.hideLayer(this._rebornListLayer),this.hideLayer(this._callCardLayer),
null==this.skillGuildLayer&&(this.skillGuildLayer=new SkillListGuildLayer,this._layerContainer.addChild(this.skillGuildLayer),this.skillGuildLayer.y=-250),GuildWuLinDataManager.getInstance().currentClickTab=0,this.skillGuildLayer.visible=!0,this.skillGuildLayer.refreshListData(),this.skillGuildLayer.refreshTapGame()):(null!=this.skillGuildLayer&&(this.skillGuildLayer.visible=!1),this._skillListLayer.visible=!0,this.hideLayer(this._heroLayer),this.hideLayer(this._paymentListLayer),this.hideLayer(this._mainSkillLayer),
this.hideLayer(this._rebornListLayer),this.hideLayer(this._callCardLayer),doAction(Const.REFRESH_UNOPEN_LIST))):"hero"==a?GuildDataManager.getInstance().isGuildWulinStart?(this._skillListLayer.visible=!1,this.hideLayer(this._heroLayer),this.hideLayer(this._paymentListLayer),this.hideLayer(this._mainSkillLayer),this.hideLayer(this._rebornListLayer),this.hideLayer(this._callCardLayer),null==this.skillGuildLayer&&(this.skillGuildLayer=new SkillListGuildLayer,this._layerContainer.addChild(this.skillGuildLayer),
this.skillGuildLayer.y=-250),GuildWuLinDataManager.getInstance().currentClickTab=1,this.skillGuildLayer.visible=!0,this.skillGuildLayer.refreshListData(),this.skillGuildLayer.refreshTapGame()):(null!=this.skillGuildLayer&&(this.skillGuildLayer.visible=!1),null==this._heroLayer?(this._heroLayer=new HeroListLayer,this._layerContainer.addChild(this._heroLayer),this._heroLayer.y=-250):doAction(Const.REFRESH_HERO_ITEM),this._heroLayer.visible=!0,this.hideLayer(this._skillListLayer),this.hideLayer(this._paymentListLayer),
this.hideLayer(this._mainSkillLayer),this.hideLayer(this._rebornListLayer),this.hideLayer(this._callCardLayer)):"card"==a?FateController.getInstance().isInit&&this.showCardLayer():"holy"==a?(null==this._rebornListLayer&&(this._rebornListLayer=new RebornListLayer,this._layerContainer.addChild(this._rebornListLayer),this._rebornListLayer.y=-250),this._rebornListLayer.visible=!0,this.hideLayer(this._heroLayer),this.hideLayer(this._paymentListLayer),this.hideLayer(this._skillListLayer),this.hideLayer(this._mainSkillLayer),
this.hideLayer(this._callCardLayer)):ProxyUtils.platformInfo==platformType_wanba&&-1==ProxyUtils.jifen?ProxyUtils.getTencentCoin(this,this.showMallLayer):this.showMallLayer()};b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};return d}(BaseContainer);BottomLayer.prototype.__class__="BottomLayer";
var HeroDetailView=function(c){function d(){c.call(this);this._skillItemList=[];this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this._bg1=ResourceUtils.createBitmapByName("main_skill_bg");this.addChild(this._bg1);this._bg1.touchEnabled=!0;this._bg1.x=10;this._bg1.y=30;var a=new SimpleButton,b=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");a.addChild(b);a.addOnClick(this.onCloseHandler,this);a.x=510;a.y=10;a.useZoomOut(!0);this.addChild(a);this._iconContainer=new egret.DisplayObjectContainer;
this.addChild(this._iconContainer);this._iconContainer.x=60;this._iconContainer.y=80;this._staticContainer=new egret.DisplayObjectContainer;this.addChild(this._staticContainer);this._staticContainer.x=19;this._staticContainer.y=50;this._nameLabel=new egret.TextField;this._staticContainer.addChild(this._nameLabel);this._nameLabel.x=123;this._nameLabel.y=35;this._nameLabel.size=32;this._nameLabel.textColor=3478533;this._lvLabel=new egret.TextField;this._staticContainer.addChild(this._lvLabel);this._lvLabel.text=
"Lv.";this._lvLabel.x=126;this._lvLabel.y=70;this._lvLabel.size=28;this._lvLabel.textColor=6176538;this._lvValLabel=new egret.TextField;this._staticContainer.addChild(this._lvValLabel);this._lvValLabel.x=166;this._lvValLabel.y=70;this._lvValLabel.size=28;this._lvValLabel.textColor=11276050;this._dpsLabel=new egret.TextField;this._staticContainer.addChild(this._dpsLabel);this._dpsLabel.text="\u79d2\u4f24:";this._dpsLabel.x=280;this._dpsLabel.y=70;this._dpsLabel.size=28;this._dpsLabel.textColor=6176538;
this._dpsValLabel=new egret.TextField;this._staticContainer.addChild(this._dpsValLabel);this._dpsValLabel.x=350;this._dpsValLabel.y=70;this._dpsValLabel.size=28;this._dpsValLabel.textColor=11276050;this._desLabel=new egret.TextField;this._staticContainer.addChild(this._desLabel);this._desLabel.x=62;this._desLabel.y=140;this._desLabel.size=20;this._desLabel.width=460;this._desLabel.lineSpacing=5;this._desLabel.textColor=3478533;this._desLabel.text="  \u5e73\u9759\uff0c\u53ea\u662f\u6c5f\u6e56\u7684\u4e00\u79cd\u8868\u8c61\uff0c\u8d8a\u6765\u8d8a\u591a\u7684\u4eba\u5df2\u7ecf\u611f\u53d7\u5230\u4e86\u90a3\u80a1\u65e0\u5f62\u7684\u52bf\u529b\u3002\u66b4\u98ce\u96e8\u524d\u7684\u9759\u5bc2\u4e0d\u4f1a\u592a\u4e45\uff0c\u5927\u6218\u5df2\u7ecf\u4e0d\u53ef\u907f\u514d\u2026\u2026";
this._staticContainer.cacheAsBitmap=!0;this._splitSpr=ResourceUtils.createBitmapFromSheet("item_split","commonRes");this._splitSpr.x=70;this._splitSpr.y=240;this._splitSpr.scaleX=0.75;this.addChild(this._splitSpr);this._skillContainer=new egret.DisplayObjectContainer;this.addChild(this._skillContainer);this._skillContainer.x=65;this._skillContainer.y=265;this._skillContainer.width=515;for(a=0;7>a;a++)b=new SkillDetailItemView,b.y=90*a,b.x=30,this._skillContainer.addChild(b),this._skillItemList.push(b)};
b.refreshView=function(a){this._model=a;this.updateHeroInfo();this.updateSkills()};b.updateHeroInfo=function(){this._nameLabel.text=this._model.config.name;this._desLabel.text=this._model.getDes();this._dpsValLabel.text=this._model.dps;this._lvValLabel.text=this._model.lv.toString();this._iconContainer.removeChildren();var a=egret.DynamicBitmap.create(this._model.getRes(),!1,null,null,Const.default_hero_icon);this._iconContainer.addChild(a)};b.updateSkills=function(){var a=this._model.config.skill.split(","),
b;for(b in a){var c=parseInt(a[b]),d=!1,g;for(g in this._model.skillList)if(this._model.skillList[g].configId==c){d=!0;break}var l="icon_skill_"+RES.getRes("skillConfig")[c].iconID;this._skillItemList[b].refreshView(c,d,0,!1,b,this._model,l)}};b.onCloseHandler=function(){GameMainLayer.instance.hideHeroDetailLayer()};b.dispose=function(){c.prototype.dispose.call(this)};return d}(BoxContainer);HeroDetailView.prototype.__class__="HeroDetailView";
var MainHeroDetailView=function(c){function d(){c.call(this);this._skillItemList=[];this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this._bg1=ResourceUtils.createBitmapByName("main_skill_bg");this.addChild(this._bg1);this._bg1.touchEnabled=!0;this._bg1.x=10;this._bg1.y=30;var a=new SimpleButton,b=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");a.addChild(b);a.addOnClick(this.onCloseHandler,this);a.x=510;a.y=10;a.useZoomOut(!0);this.addChild(a);a=egret.DynamicBitmap.create("icon_hero_skill_1",
!1,null,null,Const.default_hero_icon);this._iconContainer=new egret.DisplayObjectContainer;this.addChild(this._iconContainer);this._iconContainer.addChild(a);this._iconContainer.x=55;this._iconContainer.y=80;this._staticContainer=new egret.DisplayObjectContainer;this.addChild(this._staticContainer);this._staticContainer.x=19;this._staticContainer.y=50;this._nameLabel=new egret.TextField;this._staticContainer.addChild(this._nameLabel);this._nameLabel.x=123;this._nameLabel.y=35;this._nameLabel.size=
32;this._nameLabel.textColor=3478533;this._lvLabel=new egret.TextField;this._staticContainer.addChild(this._lvLabel);this._lvLabel.text="Lv.";this._lvLabel.x=126;this._lvLabel.y=70;this._lvLabel.size=28;this._lvLabel.textColor=6176538;this._lvValLabel=new egret.TextField;this._staticContainer.addChild(this._lvValLabel);this._lvValLabel.x=166;this._lvValLabel.y=70;this._lvValLabel.size=28;this._lvValLabel.textColor=11276050;this._dpsLabel=new egret.TextField;this._staticContainer.addChild(this._dpsLabel);
this._dpsLabel.text="\u79d2\u4f24:";this._dpsLabel.x=280;this._dpsLabel.y=70;this._dpsLabel.size=28;this._dpsLabel.textColor=6176538;this._dpsValLabel=new egret.TextField;this._staticContainer.addChild(this._dpsValLabel);this._dpsValLabel.x=350;this._dpsValLabel.y=70;this._dpsValLabel.size=28;this._dpsValLabel.textColor=11276050;PlatformFactory.getPlatform().name==PlatformTypes.EGRET&&(a=new SimpleButton,b=ResourceUtils.createBitmapFromSheet("name_edit","commonRes"),a.addChild(b),a.x=400,a.y=-35,
a.useZoomOut(!0),a.addOnClick(function(){GameMainLayer.instance.showNameLayer()},this),this._staticContainer.addChild(a));this._desLabel=new egret.TextField;this._staticContainer.addChild(this._desLabel);this._desLabel.x=62;this._desLabel.y=140;this._desLabel.size=20;this._desLabel.width=460;this._desLabel.lineSpacing=5;this._desLabel.textColor=3478533;this._desLabel.text="  \u5e73\u9759\uff0c\u53ea\u662f\u6c5f\u6e56\u7684\u4e00\u79cd\u8868\u8c61\uff0c\u8d8a\u6765\u8d8a\u591a\u7684\u4eba\u5df2\u7ecf\u611f\u53d7\u5230\u4e86\u90a3\u80a1\u65e0\u5f62\u7684\u52bf\u529b\u3002\u66b4\u98ce\u96e8\u524d\u7684\u9759\u5bc2\u4e0d\u4f1a\u592a\u4e45\uff0c\u5927\u6218\u5df2\u7ecf\u4e0d\u53ef\u907f\u514d\u2026\u2026";
this._staticContainer.cacheAsBitmap=!0;this._splitSpr=ResourceUtils.createBitmapFromSheet("item_split","commonRes");this._splitSpr.x=70;this._splitSpr.y=263;this._splitSpr.scaleX=0.75;this.addChild(this._splitSpr);this._skillContainer=new egret.DisplayObjectContainer;this.addChild(this._skillContainer);this._skillContainer.x=65;this._skillContainer.y=285;this._skillContainer.width=515;for(a=0;6>a;a++)b=new SkillDetailItemView,this._skillContainer.addChild(b),b.x=30,b.y=105*a,this._skillContainer.addChild(b),
this._skillItemList.push(b);addAction(Const.CHANGE_NAME,this.nameChange,this)};b.refreshView=function(a){this._model=a;this.updateHeroInfo();this.updateSkills()};b.updateHeroInfo=function(){this._nameLabel.text=GameUtils.getUserName();this._dpsValLabel.text=this._model.dps;this._lvValLabel.text=this._model.lv.toString()};b.nameChange=function(){this._nameLabel.text=GameUtils.getUserName()};b.updateSkills=function(){for(var a in this._model.skillList)this._skillItemList[a].refreshView(this._model.skillList[a].configId,
0<this._model.skillList[a].lv?!0:!1,this._model.skillList[a].lv,!0,a,this._model,"icon_hero_skill_"+2*(parseInt(a)+1))};b.onCloseHandler=function(){GameMainLayer.instance.hideMainHeroDetailLayer()};b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};return d}(BoxContainer);MainHeroDetailView.prototype.__class__="MainHeroDetailView";
var RebornDetailLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("die_bg");this.addChild(a);a.x=24;a.y=120;var a=new SimpleButton,b=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");a.addChild(b);a.addOnClick(this.onClickHandler,this);a.x=520;a.y=100;a.useZoomOut(!0);this.addChild(a);a=new egret.DisplayObjectContainer;this.addChild(a);b=ResourceUtils.createBitmapFromSheet("holy_icon_0","iconRes");
b.x=60;b.y=160;a.addChild(b);b=new egret.TextField;b.text="\u6d88\u8017\u9b42\u7389\u968f\u673a\u6fc0\u6d3b\u4e00\u628a\u795e\u5175";b.size=24;a.addChild(b);b.x=150;b.y=190;b.textColor=3478533;b=new egret.TextField;b.text="\u9b42\u7389\u6765\u6e90\uff1a";b.size=26;a.addChild(b);b.x=95;b.y=280;b.textColor=0;b=new egret.TextField;b.text="1\u300180\u5173\u540e\u51fb\u6740\u5934\u76ee\u51e0\u7387\u83b7\u5f97\u9b42\u7389";b.size=24;a.addChild(b);b.x=95;b.y=320;b.textColor=0;b=new egret.TextField;b.text=
"2\u3001\u4e3b\u89d2\u91cd\u751f\u53ef\u83b7\u5f97\u9b42\u7389\uff08\u4e3b\u89d2\u3001\u4f63\u5175\u3001\u901a     \u5173\u6570\u8d8a\u9ad8\u5151\u6362\u9b42\u7389\u8d8a\u591a\uff09";b.size=24;b.width=450;b.lineSpacing=10;a.addChild(b);b.x=95;b.y=360;b.textColor=0;a.cacheAsBitmap=!0};b.onClickHandler=function(){GameMainLayer.instance.hideRebornDetailLayer()};b.dispose=function(){c.prototype.dispose.call(this)};return d}(BoxContainer);RebornDetailLayer.prototype.__class__="RebornDetailLayer";
var RebornSkillDetailLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("die_bg");this.addChild(a);a.x=24;a.y=120;var b=new SimpleButton,c=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");b.addChild(c);b.addOnClick(this.onClickHandler,this);b.x=520;b.y=100;b.useZoomOut(!0);this.addChild(b);this._mainContainer=new egret.DisplayObjectContainer;this._mainContainer.x=0;this._mainContainer.y=110;
this._mainContainer.width=a.width;this.addChild(this._mainContainer);this._skillCoin=new egret.DisplayObjectContainer;this._skillCoin.x=60;this._skillCoin.y=50;this._skillCoin.scaleX=this._skillCoin.scaleY=1;this._mainContainer.addChild(this._skillCoin);this._descLabel=new egret.TextField;this._descLabel.text="\u91cd\u751f\u4ee5\u540e\u795e\u5175\u4f9d\u7136\u4fdd\u7559,\u5347\u7ea7\u795e\u5175\u53ef\u4ee5\u83b7\u5f97\u66f4\u5f3a\u80fd\u529b";this._descLabel.size=20;this._descLabel.width=410;this._descLabel.height=
40;this._descLabel.textColor=3478533;this._mainContainer.addChild(this._descLabel);this._descLabel.x=100;this._descLabel.y=325;this._nameLabel=new egret.TextField;this._nameLabel.text="\u6211\u65f6\u6280\u80fd\u540d\u5b57";this._nameLabel.size=24;this._mainContainer.addChild(this._nameLabel);this._nameLabel.x=150;this._nameLabel.y=60;this._nameLabel.textColor=3478533;this._lvTitle=new egret.TextField;this._mainContainer.addChild(this._lvTitle);this._lvTitle.text="Lv.";this._lvTitle.size=20;this._lvTitle.x=
150;this._lvTitle.y=90;this._lvTitle.textColor=3478533;this._lvLabel=new egret.TextField;this._mainContainer.addChild(this._lvLabel);this._lvLabel.size=20;this._lvLabel.textColor=11606300;this._lvLabel.x=180;this._lvLabel.y=90;this._maxlvLabel=new egret.TextField;this._mainContainer.addChild(this._maxlvLabel);this._maxlvLabel.size=20;this._maxlvLabel.x=230;this._maxlvLabel.y=90;this._maxlvLabel.textColor=3478533;this._currentProperty=new egret.TextField;this._mainContainer.addChild(this._currentProperty);
this._currentProperty.size=20;this._currentProperty.x=100;this._currentProperty.y=150;this._currentProperty.text="\u5f53\u524d\u5c5e\u6027:";this._currentProperty.textColor=11606300;this._effectLabel1=new egret.TextField;this._effectLabel1.size=20;this._effectLabel1.x=100;this._effectLabel1.y=175;this._effectLabel1.textColor=3478533;this._mainContainer.addChild(this._effectLabel1);this._effectLabel2=new egret.TextField;this._effectLabel2.size=20;this._effectLabel2.x=100;this._effectLabel2.y=195;this._effectLabel2.textColor=
3478533;this._mainContainer.addChild(this._effectLabel2);a=ResourceUtils.createBitmapFromSheet("item_split2");a.anchorX=a.anchorY=0.5;a.x=290;a.y=225;a.scaleX=0.65;a.scaleY=0.85;this._mainContainer.addChild(a);this._nextlvLabel=new egret.TextField;this._mainContainer.addChild(this._nextlvLabel);this._nextlvLabel.size=20;this._nextlvLabel.x=100;this._nextlvLabel.y=235;this._nextlvLabel.textColor=11606300;this._nextEffectLabel1=new egret.TextField;this._nextEffectLabel1.size=20;this._nextEffectLabel1.x=
100;this._nextEffectLabel1.y=260;this._nextEffectLabel1.textColor=3478533;this._mainContainer.addChild(this._nextEffectLabel1);this._nextEffectLabel2=new egret.TextField;this._nextEffectLabel2.size=20;this._nextEffectLabel2.x=100;this._nextEffectLabel2.y=283;this._nextEffectLabel2.textColor=3478533;this._mainContainer.addChild(this._nextEffectLabel2);a=ResourceUtils.createBitmapFromSheet("item_split2");a.anchorX=a.anchorY=0.5;a.x=290;a.y=315;a.scaleX=0.65;a.scaleY=0.85;this._mainContainer.addChild(a);
b=ResourceUtils.createBitmapFromSheet("item_split2");b.anchorX=a.anchorY=0.5;b.x=290;b.y=368;b.scaleX=0.65;b.scaleY=0.85;this._mainContainer.addChild(b);this._btnContainer=new SimpleButton;this._btnContainer.anchorX=this._btnContainer.anchorY=0.5;a=ResourceUtils.createBitmapFromSheet("buy_btn","commonRes");this._btnContainer.addChild(a);this._btnContainer.x=310;this._btnContainer.y=470;this._btnTitle1=new egret.TextField;this._btnTitle1.text="\u62c6  \u89e3";this._btnTitle1.size=24;this._btnTitle1.x=
60;this._btnTitle1.y=18;this._btnTitle1.textColor=3478533;this._btnContainer.addChild(this._btnTitle1);this._btnContainer.useZoomOut(!0);this._btnContainer.addOnClick(this.btnClick,this);this._mainContainer.addChild(this._btnContainer);this._moneyContainer=new egret.DisplayObjectContainer;this._moneyContainer.x=240;this._moneyContainer.y=400;a=ResourceUtils.createBitmapFromSheet("consume_bg");a.anchorX=a.anchorY=0.5;a.x=80;a.y=10;this._moneyContainer.addChild(a);this._moneyLabel=new egret.TextField;
this._moneyLabel.text="\u6d88\u801799";this._moneyLabel.x=0;this._moneyLabel.y=0;this._moneyLabel.size=20;this._moneyContainer.addChild(this._moneyLabel);this._moneyCoin=ResourceUtils.createBitmapFromSheet("gold_icon","commonRes");this._moneyCoin.y=0;this._moneyCoin.scaleX=this._moneyCoin.scaleY=0.5;this._moneyCoin.x=this._moneyLabel.width+2;this._moneyContainer.addChild(this._moneyCoin);this._btnTitle2=new egret.TextField;this._btnTitle2.text="\u8fd4\u8fd840";this._btnTitle2.size=20;this._btnTitle2.x=
this._moneyLabel.width+0.5*this._moneyCoin.width+4;this._btnTitle2.y=0;this._moneyContainer.addChild(this._btnTitle2);this._holyCoin=ResourceUtils.createBitmapFromSheet("holy_icon","commonRes");this._holyCoin.y=-4;this._holyCoin.scaleX=this._holyCoin.scaleY=0.5;this._holyCoin.x=this._moneyLabel.width+0.5*this._moneyCoin.width+this._btnTitle2.width+6;this._moneyContainer.addChild(this._holyCoin);this._mainContainer.addChild(this._moneyContainer)};b.refreshView=function(a){this._nameLabel.text=a.config.name;
this._lvLabel.text=a.lv.toString();this._effectLabel1.text=a.getDes1();this._effectLabel2.text=a.getDes2();this._nextEffectLabel1.visible=!1;this._nextEffectLabel2.visible=!1;var b=a.lvLimit();0==b?(this._maxlvLabel.visible=!1,this._nextEffectLabel1.visible=!0,this._nextEffectLabel2.visible=!0,this._nextEffectLabel1.text=a.getDes1(a.lv+1),this._nextEffectLabel2.text=a.getDes2(a.lv+1),this._nextlvLabel.text="\u4e0b\u4e00\u7b49\u7ea7:"):(this._maxlvLabel.visible=!0,this._maxlvLabel.text="(\u6700\u5927\u7b49\u7ea7:"+
b+")",b>a.lv?(this._nextEffectLabel1.visible=!0,this._nextEffectLabel2.visible=!0,this._nextEffectLabel1.text=a.getDes1(a.lv+1),this._nextEffectLabel2.text=a.getDes2(a.lv+1),this._nextlvLabel.text="\u4e0b\u4e00\u7b49\u7ea7:"):this._nextlvLabel.text="\u7b49\u7ea7\u8fbe\u5230\u4e0a\u9650");this._skillModel=a;b=GuildModel.formatNum0(a.getNeedGc());a=GuildModel.formatNum0(a.getTotalCost());this._moneyLabel.text="\u6d88\u8017"+b;this._btnTitle2.text="\u8fd4\u8fd8"+a;this._skillCoin.removeChildren();a=
egret.DynamicBitmap.create(this._skillModel.getRes(),!1,null,null,"default_skill");this._skillCoin.addChild(a);this._moneyCoin.x=this._moneyLabel.width+2;this._btnTitle2.x=this._moneyLabel.width+0.5*this._moneyCoin.width+4;this._holyCoin.x=this._moneyLabel.width+0.5*this._moneyCoin.width+this._btnTitle2.width+6};b.btnClick=function(){DataCenter.getInstance().hasEnoughGc(this._skillModel.getNeedGc())?(DataCenter.getInstance().destroyRebornSkill(this._skillModel),this.onClickHandler()):GameMainLayer.instance.showPaymentRecommendLayer()};
b.onClickHandler=function(){GameMainLayer.instance.hideRebornSkillDetailLayer()};return d}(BoxContainer);RebornSkillDetailLayer.prototype.__class__="RebornSkillDetailLayer";
var CardAnimationLayer=function(c){function d(){c.call(this);this._isOver=!1;this._posList=[{x:120,y:100},{x:320,y:100},{x:520,y:100},{x:520,y:300},{x:520,y:500},{x:520,y:700},{x:320,y:700},{x:120,y:700},{x:120,y:500},{x:120,y:300}]}__extends(d,c);var b=d.prototype;b.refreshView=function(a){this._list=a;this._light=egret.DynamicBitmap.create("card_light");this.boxContainer.addChild(this._light);egret.Tween.get(this._light,{loop:!0}).to({alpha:0.5},1500).to({alpha:1},1500);this._cardList=[];this._cardDict=
{};1==a.length?(a=new Card,a.x=320,a.y=300,a.refreshView(this._list[0]),a.scaleX=a.scaleY=0,this.boxContainer.addChild(a),this._cardList.push(a),this._cardDict[this._list[0]]=1,egret.Tween.get(a).to({scaleX:1,scaleY:1},500,egret.Ease.backOut).call(function(){this._isOver=!0},this)):(this._idx=0,this.createCard())};b.createCard=function(){if(10>this._idx){var a=new Card;a.x=320;a.y=300;a.refreshView(this._list[this._idx]);a.scaleX=a.scaleY=0;this.boxContainer.addChild(a);this._cardList.push(a);this._cardDict[this._list[this._idx]]||
(this._cardDict[this._list[this._idx]]=0);this._cardDict[this._list[this._idx]]+=1;this.showAnimation(a,this._posList[this._idx],this.createCard,this)}else this._isOver=!0;this._idx+=1};b.onMaskHandler=function(){if(this._isOver){this._isOver=!1;egret.Tween.removeTweens(this._light);for(var a=GameUtils.getLayoutY(870),b=0;b<this._cardList.length;b++){var c=this._cardList[b];b==this._cardList.length-1?egret.Tween.get(c).to({x:320,y:a,scaleX:0.1,scaleY:0.1},500).call(this.realRemvoe,this):egret.Tween.get(c).to({x:320,
y:a,scaleX:0.1,scaleY:0.1},500)}}};b.realRemvoe=function(){var a=RES.getRes("cardConfig"),b;for(b in this._cardDict)doAction("show_card_tips",a[b].name+"X"+this._cardDict[b]);GameMainLayer.instance.hideCardAnimation();if(ActivityManager.getInstance().isActivityOpen(ActivityType.cardtoyu)&&1<this._cardList.length)for(a=0;2>a;a++)doAction(Const.SHOW_HOLYCOIN)};b.showAnimation=function(a,b,c,d){egret.Tween.get(a).to({x:b.x,y:b.y,scaleX:0.5,scaleY:0.5},200,egret.Ease.backOut).call(function(){a.cacheAsBitmap=
!0;c.call(d)},this)};b.dispose=function(){c.prototype.dispose.call(this)};return d}(BoxContainer);CardAnimationLayer.prototype.__class__="CardAnimationLayer";
var Card=function(c){function d(){c.call(this);this.anchorY=this.anchorX=0.5}__extends(d,c);d.prototype.refreshView=function(b){var a=egret.DynamicBitmap.create("card_"+b);this.addChild(a);a=ResourceUtils.createBitmapFromSheet("card_bg","cardRes");this.addChild(a);a=ResourceUtils.createBitmapFromSheet("card_name_bg","cardRes");a.x=210;a.y=10;this.addChild(a);b=ResourceUtils.createBitmapFromSheet("card_name_"+b,"cardRes");b.x=210;b.y=35;this.addChild(b)};return d}(egret.DisplayObjectContainer);
Card.prototype.__class__="Card";
var ChatMainPanel=function(c){function d(){c.call(this);ProxyUtils.getChatList(ChatManager.getInstace().lastGetListTime);ChatManager.getInstace().intervalGetMsg(!0);this.isFirstIn=!0;addAction(Const.Chat_refleshView,this.refleshView,this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=this,b=egret.DynamicBitmap.create("chatBg");b.x=30;b.y=30;b.scaleY=0;this.addChild(b);var c=ResourceUtils.createBitmapFromSheet("chatTitle");c.x=250;c.y=35;this.addChild(c);this.chatView=
new ChatAreaView;this.chatView.x=78;this.chatView.y=280;this.chatView.width=480;this.chatView.height=570;this.addChild(this.chatView);this.effectItem=this.createItemRenderer();this.effectItem.visible=!1;this.chatView.addChild(this.effectItem);egret.Tween.get(b).to({scaleY:1},600,egret.Ease.circOut).call(function(){egret.Tween.removeTweens(b);var c=new SimpleButton;c.addOnClick(a.close,a);c.x=580;c.y=75;c.anchorX=c.anchorY=0.5;c.useZoomOut(!0);c.addChild(ResourceUtils.createBitmapFromSheet("close_btn"));
a.addChild(c);c=ResourceUtils.createBitmapFromSheet("chatMaskLine");a.addChild(c);c.y=200;c.x=75;c=ResourceUtils.createBitmapFromSheet("chatMaskLine1");c.x=90;c.y=210;c.width=290;a.addChild(c);a.txtInput=new egret.TextField;a.txtInput.type=egret.TextFieldType.INPUT;a.txtInput.width=c.width-10;a.txtInput.x=95;a.txtInput.size=24;a.txtInput.y=217;a.addChild(a.txtInput);a.sendChatDiscontainer=new SendChatCost;a.sendChatDiscontainer.x=380;a.sendChatDiscontainer.y=220;a.addChild(a.sendChatDiscontainer);
c=new SimpleButton;c.addChild(ResourceUtils.createBitmapFromSheet("btnGuildBack"));c.x=450;c.y=210;c.setFontText("\u53d1\u9001",26);c.addOnClick(a.sendToShow,a);a.addChild(c);a.isFirstIn=!1;ChatManager.getInstace().isInitData&&(a.refleshView(2),a.chatView.showAnimation())})};b.refleshView=function(a){!this.isFirstIn&&this.visible&&(ChatManager.getInstace().isServerClose?(ChatManager.getInstace().curAtChatType=1,this.sendChatDiscontainer&&this.sendChatDiscontainer.setData(1),this.tabView||(this.tabView=
new ChatTbView,this.tabView.addOnClick(this.onTabSelect,this),this.tabView.y=160,this.tabView.x=160,this.addChild(this.tabView)),0<ChatManager.getInstace().myGldID?this.chatView&&(a=ChatManager.getInstace().getListByNum(ChatManager.getInstace().curAtChatType,6),this.chatView.setList(a,Direction.VERTICAL,this,this.chatView._viewWidth,160)):this.chatView.setList([],Direction.VERTICAL,this,this.chatView._viewWidth,160)):1==a&&0>=ChatManager.getInstace().myGldID?doAction(Const.SHOW_TIPS,"\u4f60\u5f53\u524d\u65e0\u5e2e\u4f1a"):
(this.tabView||(this.tabView=new ChatTbView,this.tabView.addOnClick(this.onTabSelect,this),this.tabView.y=160,this.tabView.x=160,this.addChild(this.tabView)),this.tabView.selectTabWithType(this.getStrKeyName(a)),this.sendChatDiscontainer&&this.sendChatDiscontainer.setData(a),this.chatView&&(a=ChatManager.getInstace().getListByNum(a,6),this.chatView.setList(a,Direction.VERTICAL,this,this.chatView._viewWidth,160))))};b.createItemRenderer=function(){return new ChatItem};b.updateItemRenderer=function(a,
b,c){a.setData(b)};b.sendToShow=function(){var a=this;ChatManager.getInstace().isCanSendSuc=!1;if(""==this.txtInput.text)doAction(Const.SHOW_TIPS,"\u8bf7\u8f93\u5165\u53d1\u9001\u5185\u5bb9");else{if(2==ChatManager.getInstace().curAtChatType){var b=DataCenter.getInstance().totalData.gcNum.getDataNum();if(1E3>b){doAction(Const.SHOW_TIPS,"\u5143\u5b9d\u4e0d\u8db3");return}ProxyUtils.worldChat(1,this.txtInput.text)}else if(0==ChatManager.getInstace().curAtChatType){if(0>=ChatManager.getInstace().leftNoramlFreeCout&&
(b=DataCenter.getInstance().totalData.gcNum.getDataNum(),100>b)){doAction(Const.SHOW_TIPS,"\u5143\u5b9d\u4e0d\u8db3");return}ProxyUtils.worldChat(2,this.txtInput.text)}else if(1==ChatManager.getInstace().curAtChatType){if(0>=ChatManager.getInstace().myGldID){doAction(Const.SHOW_TIPS,"\u4f60\u5f53\u524d\u65e0\u516c\u4f1a");return}ProxyUtils.guildChat(this.txtInput.text)}ChatManager.getInstace().isCanSendSuc&&(b=new ChatItemData,b.msgID="",b.uid=ProxyUtils.userId,b.playerName=ProxyUtils.nickName,b.chatContent=
this.txtInput.text,b.sendTime=(new Date).getTime(),b.playerIcon=ChatManager.getInstace().myHeadIcon,b.guildID=ChatManager.getInstace().myGldID,b.guildName=ChatManager.getInstace().myGldName,b.chatType=ChatManager.getInstace().curAtChatType,ChatManager.getInstace().addMsgItemWithNoReapeat(b),this.chatView.getItemList()&&1<this.chatView.getItemList().length?(this.effectItem&&(this.effectItem.visible=!0,this.effectItem.setData(b),this.effectItem.y=0,this.effectItem.x=600),this.chatView.showAnimationAtLastOne(function(){a.effectItem&&
egret.Tween.get(a.effectItem).to({x:6},300).call(function(){a.effectItem.visible=!1;a.refleshView(ChatManager.getInstace().curAtChatType)})},this)):this.refleshView(ChatManager.getInstace().curAtChatType),2==ChatManager.getInstace().curAtChatType&&(b.playerName?doAction(Const.Chat_jumpScreen,b.playerName+":"+this.txtInput.text):doAction(Const.Chat_jumpScreen,this.txtInput.text)),this.txtInput&&(this.txtInput.text=""))}};b.onTabSelect=function(a){if("guild"==a&&0>=ChatManager.getInstace().myGldID)doAction(Const.SHOW_TIPS,
"\u4f60\u5f53\u524d\u65e0\u5e2e\u4f1a"),this.tabView.selectTabWithType(this.getStrKeyName(ChatManager.getInstace().curAtChatType));else{switch(a){case "jumpscreen":ChatManager.getInstace().curAtChatType=2;break;case "normal":ChatManager.getInstace().curAtChatType=0;break;case "guild":ChatManager.getInstace().curAtChatType=1}this.refleshView(ChatManager.getInstace().curAtChatType)}};b.close=function(){GameMainLayer.instance.showChatPanel(!1)};b.getStrKeyName=function(a){return 1==a?"guild":2==a?"jumpscreen":
0==a?"normal":""};return d}(BoxContainer);ChatMainPanel.prototype.__class__="ChatMainPanel";
var ChatTbView=function(c){function d(){c.call(this);this.initView();this.init()}__extends(d,c);d.prototype.initView=function(){ChatManager.getInstace().isServerClose?(this.btnGuild=new TabButton,this.btnGuild.initButton("top_tab_2","top_tab_1",78),this.addChild(this.btnGuild),this.btnGuild.name="guild",this.btnGuild.x=150):(this.btnJumpScreen=new TabButton,this.btnJumpScreen.initButton("top_tab_2","top_tab_1",78),this.addChild(this.btnJumpScreen),this.btnJumpScreen.name="jumpscreen",this.btnJumpScreen.x=
0,this.btnJumpScreen.setWidthBmp(150),this.btnJumpScreen.addLabel("\u5f39\u5e55\u9891\u9053"),this.btnNormal=new TabButton,this.btnNormal.initButton("top_tab_2","top_tab_1",78),this.addChild(this.btnNormal),this.btnNormal.name="normal",this.btnNormal.x=150,this.btnNormal.setWidthBmp(150),this.btnNormal.addLabel("\u666e\u901a\u804a\u5929"),this.btnGuild=new TabButton,this.btnGuild.initButton("top_tab_2","top_tab_1",78),this.addChild(this.btnGuild),this.btnGuild.name="guild",this.btnGuild.x=300);this.btnGuild.setWidthBmp(150);
this.btnGuild.addLabel("\u5e2e\u6d3e\u804a\u5929")};return d}(TabView);ChatTbView.prototype.__class__="ChatTbView";
var SendChatCost=function(c){function d(){c.call(this);var a=ResourceUtils.createBitmapFromSheet("chatRectBg1");this.addChild(a);this.costTip=new egret.TextField;this.costTip.text="1000";this.costTip.anchorY=0.5;this.costTip.y=13;this.costTip.size=18;this.addChild(this.costTip);this.bmpCost=ResourceUtils.createBitmapFromSheet("gold_icon");this.bmpCost.x=39;this.bmpCost.y=15;this.bmpCost.anchorY=0.5;this.bmpCost.scaleX=this.bmpCost.scaleY=0.5;this.addChild(this.bmpCost)}__extends(d,c);var b=d.prototype;
b.setData=function(a){this.visible=!0;0==a?0<ChatManager.getInstace().leftNoramlFreeCout?(this.bmpCost.visible=!1,this.costTip.text="\u514d\u8d39:"+ChatManager.getInstace().leftNoramlFreeCout):(this.bmpCost.visible=!0,this.costTip.text="100",ActivityManager.getInstance().isActivityOpen(ActivityType.priceHalf)&&(this.costTip.text="50")):2==a?(this.bmpCost.visible=!0,this.costTip.text="1000",ActivityManager.getInstance().isActivityOpen(ActivityType.priceHalf)&&(this.costTip.text="500")):this.visible=
!1};b.changeIcon=function(a){this.bmpCost&&(this.bmpCost.texture=ResourceUtils.getTextureFromSheet(a))};return d}(egret.DisplayObjectContainer);SendChatCost.prototype.__class__="SendChatCost";
var GuildCreate=function(c){function d(){c.call(this);this.initView();this.initCreateView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("set_bg");this.boxContainer.addChild(a);a.x=34;a.y=160;a.height=440;var a=new SimpleButton,b=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");a.addChild(b);a.addOnClick(this.onClickHandler,this);a.x=510;a.y=130;a.useZoomOut(!0);this.boxContainer.addChild(a);this.descTF=new egret.TextField;this.boxContainer.addChild(this.descTF);
this.descTF.text="\u72ec\u81ea\u95ef\u8361\u592a\u4e45,\u6709\u5144\u5f1f,\u624d\u6709\u6c5f\u6e56!";this.descTF.x=110;this.descTF.y=250;this.descTF.textColor=0;this.descTF.textAlign="center";this.create=new SimpleButton;b=ResourceUtils.createBitmapFromSheet("top_tab_1","commonRes");this.create.addChild(b);this.create.y=this.descTF.y+100;this.create.x=250;this.create.setFontText("\u521b\u5efa\u5e2e\u6d3e");this.create.addOnClick(this.createGuild,this);this.boxContainer.addChild(this.create);this.join=
new SimpleButton;b=ResourceUtils.createBitmapFromSheet("top_tab_1","commonRes");this.join.addChild(b);this.join.y=this.create.y+100;this.join.x=this.create.x;this.join.setFontText("\u52a0\u5165\u5e2e\u6d3e");this.join.addOnClick(this.joinGuild,this);this.boxContainer.addChild(this.join)};b.reLoadView=function(){this.descTF&&(this.descTF.visible=!0);this.create&&(this.create.visible=!0);this.join&&(this.join.visible=!0);this.container&&(this.container.visible=!1);this.inputTxt&&(this.inputTxt.visible=
!1)};b.onClickHandler=function(){this.visible=!1};b.createGuild=function(){this.descTF&&(this.descTF.visible=!1);this.create&&(this.create.visible=!1);this.join&&(this.join.visible=!1);this.container&&(this.container.visible=!0);this.inputTxt&&(this.inputTxt.visible=!0)};b.initCreateView=function(){this.container=new egret.DisplayObjectContainer;this.boxContainer.addChild(this.container);var a=new egret.TextField;this.container.addChild(a);a.text="\u8bf7\u8f93\u5165\u5e2e\u6d3e\u540d\u79f0!";a.x=
220;a.y=250;a.textColor=0;a.textAlign="center";a.size=30;this.inputBg=ResourceUtils.createBitmapByName("share_input_bg");this.inputBg.x=150;this.inputBg.y=300;this.inputBg.scaleX=0.8;this.inputBg.scaleY=0.7;this.container.addChild(this.inputBg);var b=new egret.TextField;this.container.addChild(b);b.text="\u521b\u5efa\u5e2e\u6d3e\u9700\u89811000        !";b.x=200;b.y=this.inputBg.y+a.height+30;b.textColor=0;b.textAlign="center";b.size=24;a=ResourceUtils.createBitmapFromSheet("gold_icon","commonRes");
this.container.addChild(a);a.x=395;a.y=b.y;var a=new SimpleButton,c=ResourceUtils.createBitmapFromSheet("top_tab_1","commonRes");a.addChild(c);a.y=b.y+120;a.x=230;a.setFontText("\u521b\u5efa\u5e2e\u6d3e");a.addOnClick(this.createRequest,this);this.container.addChild(a);this.container.visible=!1;null==this.inputTxt&&(this.inputTxt=new egret.TextField,this.inputTxt.type=egret.TextFieldType.INPUT,this.inputTxt.x=this.inputBg.x+10,this.inputTxt.y=this.inputBg.y-10,this.inputTxt.width=this.inputBg.width,
this.inputTxt.height=this.inputBg.height,this.inputTxt.text="",this.boxContainer.addChild(this.inputTxt),this.inputTxt.visible=!1)};b.joinGuild=function(){ProxyUtils.joinGuild()};b.createRequest=function(){"\u8bf7\u8f93\u5165\u5e2e\u4f1a\u540d\u79f0..."==this.inputTxt.text||""==this.inputTxt.text?(doAction(Const.SHOW_TIPS,"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5e2e\u6d3e\u540d\u79f0"),EffectUtils.shakeObj(this.inputBg)):8<this.inputTxt.text.length?(doAction(Const.SHOW_TIPS,"\u5e2e\u6d3e\u540d\u79f0\u5fc5\u987b\u5c0f\u4e8e8\u4e2a\u5b57\u7b26"),
EffectUtils.shakeObj(this.inputBg)):1E3>DataCenter.getInstance().totalData.gcNum.getDataNum()?doAction(Const.SHOW_TIPS,"\u5143\u5b9d\u6570\u91cf\u4e0d\u591f"):ProxyUtils.createGuild(this.inputTxt.text)};return d}(BoxContainer);GuildCreate.prototype.__class__="GuildCreate";
var GuildDonateVeiw=function(c){function d(){c.call(this);this.myGldInfo=GuildDataManager.getInstance().getMyGldInfo();addAction(Const.Guild_donateView,this.reLoad,this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=ResourceUtils.createBitmapFromSheet("rectWidget","commonRes");this.addChild(a);a.height*=1.1;a.x=60;a.y=260;this.txtTipTitle=new egret.TextField;this.addChild(this.txtTipTitle);this.txtTipTitle.text="\u5e2e\u4f1a\u662f\u6211\u5bb6\uff0c\u53d1\u5c55\u9760\u5927\u5bb6\u3002";
this.txtTipTitle.size=35;this.txtTipTitle.textColor=14329120;this.txtTipTitle.x=115;this.txtTipTitle.y=280;this.txtmyCb=new egret.TextField;this.txtmyCb.size=26;this.txtmyCb.text="\u6211\u7684\u8d21\u732e\u503c:255";this.addChild(this.txtmyCb);this.txtmyCb.x=220;this.txtmyCb.y=340;this.txtWillGetTip1=new egret.TextField;this.addChild(this.txtWillGetTip1);this.txtWillGetTip1.text=GameUtils.parseFormat("\u6311\u6218\u5e2e\u6d3e\u5165\u4fb5BOSS\u83b7\u5f97$0\u8d21\u732e\u503c",10);this.txtWillGetTip1.size=
26;this.txtWillGetTip1.x=120;this.txtWillGetTip1.y=428;this.txtChanLeftCount=new egret.TextField;this.addChild(this.txtChanLeftCount);this.txtChanLeftCount.text=GameUtils.parseFormat("\u4eca\u65e5\u8fd8\u53ef\u6311\u6218$0\u6b21",5);this.txtChanLeftCount.size=26;this.txtChanLeftCount.x=200;this.txtChanLeftCount.y=464;this.btnChanBoss=new SimpleButton;a=ResourceUtils.createBitmapFromSheet("Chaboss","commonRes");this.btnChanBoss.addChild(a);this.addChild(this.btnChanBoss);this.btnChanBoss.x=175;this.btnChanBoss.y=
500;this.btnChanBoss.addOnClick(this.chanBoss,this);this.txtwillGetTip2=new egret.TextField;this.addChild(this.txtwillGetTip2);this.txtwillGetTip2.text=GameUtils.parseFormat("\u6350\u732e$0\u5143\u5b9d\u83b7\u5f97$1\u8d21\u732e\u503c",100,100);this.txtwillGetTip2.size=26;this.txtwillGetTip2.x=150;this.txtwillGetTip2.y=580;this.btnDonate=new SimpleButton;a=ResourceUtils.createBitmapFromSheet("donateGlod","commonRes");this.btnDonate.addChild(a);this.btnDonate.x=175;this.btnDonate.y=610;this.btnDonate.addOnClick(this.donateGlod,
this);this.addChild(this.btnDonate);ActivityManager.getInstance().isActivityOpen(ActivityType.guildrecharge)&&(this.txtRecvPack=new egret.TextField,this.addChild(this.txtRecvPack),this.txtRecvPack.size=26,this.txtRecvPack.x=320,this.txtRecvPack.y=720,this.txtRecvPack.anchorX=this.txtRecvPack.anchorY=0.5,this.recvPackBtn1=new SimpleButton,a=ResourceUtils.createBitmapFromSheet("guild_recvPack0","commonRes"),this.recvPackBtn1.addChild(a),this.recvPackBtn1.x=175,this.recvPackBtn1.y=750,this.recvPackBtn1.addOnClick(this.recvPack,
this),this.addChild(this.recvPackBtn1),this.recvPackBtn1.visible=!1,this.recvPackBtn2=new SimpleButton,a=ResourceUtils.createBitmapFromSheet("guild_recvPack1","commonRes"),this.recvPackBtn2.addChild(a),this.recvPackBtn2.x=175,this.recvPackBtn2.y=750,this.recvPackBtn2.addOnClick(this.recvPack,this),this.addChild(this.recvPackBtn2),this.bmpPack=ResourceUtils.createBitmapFromSheet("chaozhi"),this.bmpPack.x=440,this.bmpPack.y=720,this.addChild(this.bmpPack))};b.reLoad=function(){null!=this.alertPanel&&
(this.alertPanel.visible=!1);this.myGldInfo=GuildDataManager.getInstance().getMyGldInfo();this.txtmyCb.text="\u6211\u7684\u8d21\u732e\u503c:"+GuildModel.formatNum1(GuildModel.getMyInfoFromList(ProxyUtils.userId).mbCb);this.txtChanLeftCount.text=GameUtils.parseFormat("\u4eca\u65e5\u8fd8\u53ef\u6311\u6218$0\u6b21",this.myGldInfo.guildAcLeftCount);doAction(Const.Guild_refleshTopData);if(ActivityManager.getInstance().isActivityOpen(ActivityType.guildrecharge)){var a=GameUtils.getGuildRechData(),b=GameUtils.getNextDataStep(),
c=GameUtils.getNextStep();b?0<=GameUtils.getRechStepCanRecv()?this.txtRecvPack.text=GameUtils.parseFormat("\u9886\u53d6\u6863\u4f4d$0\u793c\u5305\u9700\u5145\u503c$1\u5143(\u539f\u4ef7$2\u5143),\n                    \u73b0\u5df2\u5145\u503c$3\u5143",c,b.discount,b.cost,a.payNum):this.txtRecvPack.text=GameUtils.parseFormat("\u4eca\u65e5\u793c\u5305\u9886\u53d6\u5b8c\u6bd5"):0>GameUtils.getRechStepCanRecv()&&(this.txtRecvPack.text=GameUtils.parseFormat("\u4eca\u65e5\u793c\u5305\u9886\u53d6\u5b8c\u6bd5"));
GameUtils.getCurisCanRecv()?(this.recvPackBtn1.visible=!0,this.recvPackBtn2.visible=!1):(this.recvPackBtn1.visible=!1,this.recvPackBtn2.visible=!0)}};b.recvPack=function(){var a=this;if(GameUtils.getCurisCanRecv())if(ActivityManager.getInstance().isActivityOpen(ActivityType.guildrecharge)){var b=GameUtils.getRechStepCanRecv();GameMainLayer.instance.showLoadingRotation(!0,"\u9886\u53d6\u4e2d");var c=Time.setTimeout(function(){Time.clearTimeout(c);GameMainLayer.instance.showLoadingRotation(!1)},this,
5E3);ProxyUtils.recvGuildRechReward(b,function(){a.myGldInfo=GuildDataManager.getInstance().getMyGldInfo();var c=GameUtils.getStepByStep(b);a.myGldInfo.guildCb+=c.contribute;GuildModel.getMyInfoFromList(ProxyUtils.userId).mbCb+=c.contribute;a.myGldInfo.reducePiceCount(c.meChip);a.reLoad();doAction(Const.Guild_refleshTopData);GameMainLayer.instance.showLoadingRotation(!1);var d=new GuildRechReward;d.reload(c);a.addChild(d);doAction("closeRedDot",!1)})}else doAction(Const.SHOW_TIPS,"\u5f88\u62b1\u6b49,\u6d3b\u52a8\u7ed3\u675f\u5566");
else doAction(Const.SHOW_TIPS,"\u6ca1\u6709\u793c\u5305\u53ef\u4ee5\u9886\u53d6\u5566")};b.chanBoss=function(){0<this.myGldInfo.guildAcLeftCount?(GuildDataManager.getInstance().isGuildBoss=!0,GameMainLayer.instance.setGuildLayer(!1),doAction(Const.Activity_FIGHT)):doAction(Const.SHOW_TIPS,"\u6311\u6218\u6b21\u6570\u4e0d\u8db3")};b.donateGlod=function(){100>DataCenter.getInstance().totalData.gcNum.getDataNum()?doAction(Const.SHOW_TIPS,"\u4f60\u7684\u5143\u5b9d\u4e0d\u591f"):(null==this.alertPanel&&
(this.alertPanel=new AlertPanel(2),this.alertPanel.setHandler(this.SureToDonate,this),this.addChild(this.alertPanel)),this.alertPanel.visible=!0,this.alertPanel.setData("\u63d0\u793a","\u786e\u5b9a\u6350\u732e\u4e48"))};b.SureToDonate=function(a){"ok"==a&&(100>DataCenter.getInstance().totalData.gcNum.getDataNum()?doAction(Const.SHOW_TIPS,"\u4f60\u7684\u5143\u5b9d\u4e0d\u591f"):ProxyUtils.donateMoney(2))};return d}(BaseContainer);GuildDonateVeiw.prototype.__class__="GuildDonateVeiw";
var GuildMainView=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this.myGldInfo=GuildDataManager.getInstance().getMyGldInfo();this.guildMbTable=new TableView;this.guildMbTable.y=300;this.guildMbTable.x=13;this.addChild(this.guildMbTable);this.guildMbTable.width=GameUtils.getWinWidth();this.guildMbTable.height=520};b.reLoad=function(){this.myGldInfo=GuildDataManager.getInstance().getMyGldInfo();null!=this.myGldInfo&&this.guildMbTable.setList(this.myGldInfo.gldMbList,
Direction.VERTICAL,this,GameUtils.getWinWidth(),60)};b.createItemRenderer=function(){return new GuildMbItem};b.updateItemRenderer=function(a,b,c){a.refreshView(b,c)};return d}(BaseContainer);GuildMainView.prototype.__class__="GuildMainView";
var GuildReView=function(c){function d(){c.call(this);this.myGldInfo=GuildDataManager.getInstance().getMyGldInfo();this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this.guildMbTable=new TableView;this.guildMbTable.y=300;this.guildMbTable.x=13;this.addChild(this.guildMbTable);this.guildMbTable.width=GameUtils.getWinWidth();this.guildMbTable.height=500;var a=ResourceUtils.createBitmapFromSheet("\u5206\u5272\u7ebf","commonRes");a.y=850;a.x=15;this.addChild(a);a=new egret.TextField;
a.text="\u7533\u8bf7\u4fe1\u606f\u53ea\u4fdd\u7559\u4e00\u5929";a.size=26;this.addChild(a);a.x=120;a.y=810;var a=new SimpleButton,b=ResourceUtils.createBitmapFromSheet("btn_red","commonRes");a.addChild(b);a.x=380;a.y=800;a.setFontText("\u89e3\u6563\u5e2e\u6d3e",26);a.addOnClick(this.dissolveGuild,this);this.addChild(a)};b.dissolveGuild=function(){GuildModel.isMyCharMain()&&(null==this.alertPanel&&(this.alertPanel=new AlertPanel(2),this.alertPanel.setHandler(this.sureToAction,this),this.addChild(this.alertPanel)),
this.alertPanel.visible=!0,this.alertPanel.setData("\u63d0\u793a","\u786e\u8ba4\u89e3\u6563\u5e2e\u6d3e?"))};b.sureToAction=function(a){"ok"==a&&ProxyUtils.dissolveGuild()};b.reLoad=function(){null!=this.alertPanel&&(this.alertPanel.visible=!1);this.myGldInfo=GuildDataManager.getInstance().getMyGldInfo();this.guildMbTable.setList(this.myGldInfo.gldAplyList,Direction.VERTICAL,this,GameUtils.getWinWidth(),60)};b.createItemRenderer=function(){return new guildReviewItem};b.updateItemRenderer=function(a,
b,c){a.refreshView(b,c)};return d}(BaseContainer);GuildReView.prototype.__class__="GuildReView";
var guildReviewItem=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this.splitLine=ResourceUtils.createBitmapFromSheet("\u5206\u5272\u7ebf","commonRes");this.addChild(this.splitLine);this.splitLine.x=3;this.splitLine.y=60;this.txtName=new egret.TextField;this.addChild(this.txtName);this.txtName.x=60;this.txtName.y=30;this.txtName.size=26;this.txtName.text="\u65e0\u540d";this.txtName.anchorY=0.5;this.txtCbValue=new egret.TextField;this.addChild(this.txtCbValue);
this.txtCbValue.size=26;this.txtCbValue.y=30;this.txtCbValue.x=300;this.txtCbValue.text="859";this.txtCbValue.anchorX=this.txtCbValue.anchorY=0.5;var a=new SimpleButton,b=ResourceUtils.createBitmapFromSheet("btn_yellow","commonRes");b.width=87;a.addChild(b);a.anchorX=a.anchorY=0.5;a.x=460;a.y=30;a.setFontText("\u901a\u8fc7");a.addOnClick(this.pass,this);this.addChild(a);a=new SimpleButton;b=ResourceUtils.createBitmapFromSheet("btn_red","commonRes");b.width=87;a.addChild(b);a.anchorX=a.anchorY=0.5;
a.x=557;a.y=30;a.setFontText("\u62d2\u7edd");a.addOnClick(this.refuse,this);this.addChild(a)};b.refreshView=function(a,b){this.data=a;this.txtName.text=GuildModel.ChangeTxtToDot(a.uName);this.txtCbValue.text=a.shenbin.toString()};b.pass=function(){ProxyUtils.actionToAplyer("1",this.data.aplyId)};b.refuse=function(){ProxyUtils.actionToAplyer("2",this.data.aplyId)};return d}(BaseContainer);guildReviewItem.prototype.__class__="guildReviewItem";
var GuildWuLin=function(c){function d(){c.call(this);this.myGldInfo=GuildDataManager.getInstance().getMyGldInfo();addAction(Const.Guild_refleshLeftTime,this.refleshTime,this);addAction(Const.Guild_UplevelWeapon,this.refleshWeaponView,this);addAction(Const.Guild_openGldRank,this.createGuildRankView,this);addAction(Const.Guild_openGldWonRank,this.createGuildWonRank,this)}__extends(d,c);var b=d.prototype;b.initView=function(){this.mainView=new egret.DisplayObjectContainer;this.addChild(this.mainView);
this.bmpBack=new SimpleButton;var a=ResourceUtils.createBitmapFromSheet("btnGuildBack","commonRes");this.bmpBack.addChild(a);this.bmpBack.x=12;this.bmpBack.y=110;this.bmpBack.setFontText("\u8fd4\u56de",26);this.bmpBack.visible=!1;this.addChild(this.bmpBack);this.bmpBack.addOnClick(this.clickToBack,this);a=new egret.TextField;this.mainView.addChild(a);a.text="\u6b66\u6797\u5927\u4f1a";a.size=40;a.textColor=14329120;a.x=240;a.y=260;var b=new SimpleButton,a=ResourceUtils.createBitmapFromSheet("talisman",
"iconRes");b.addChild(a);this.mainView.addChild(b);b.x=570;b.y=280;b.anchorX=b.anchorY=0.5;b.addOnClick(this.openWeapon,this);EffectUtils.loopScale(b);a=new egret.TextField;this.mainView.addChild(a);a.size=27;a.x=50;a.y=320;a.text="\u8fd1\u6765\u6b66\u6797\u4eba\u624d\u8f88\u51fa\uff0c\u7a76\u7adf\u8c01\u80fd\u6307\u638c\u6c5f\u6e56\uff1f\r\n\u6b66\u6797\u5927\u4f1a\uff0c\u6c47\u96c6\u5929\u4e0b\u8c6a\u6770\u3002\u51b3\u51fa\u5929\u4e0b\u7b2c\u4e00\uff01";a.textColor=14329120;a.lineSpacing=10;a=new egret.TextField;
this.mainView.addChild(a);a.size=24;a.x=35;a.y=400;a.lineSpacing=10;a.text="\u89c4\u5219:\r\n1.\u5e2e\u4e3b\u6bcf\u5468\u4e00\u3001\u4e09\u3001\u4e94\u4ee5\u5e2e\u6d3e\u4e3a\u5355\u4f4d\u62a5\u540d\u53c2\u52a0\u6b66\u6797\u5927\u4f1a\uff1b\r\n2.\u5728\u6b66\u6797\u5927\u4f1a\u65f6\u95f4\u5185\u4ee5\u5bf9NPC\u9020\u6210\u7684\u4f24\u5bb3\u591a\u5c11\u6392\u540d\uff0c\u6392\r\n\u540d\u8d8a\u9ad8\u5956\u52b1\u8d8a\u4e30\u539a\r\n3.\u6b66\u6797\u5927\u4f1a\u8fdb\u884c\u65f6\u95f4\u4e3a\u665a\u4e0a8\u70b9-9\u70b9\u3002\r\n4.\u62a5\u540d\u6b66\u6797\u5927\u4f1a\u9700\u89811000\u70b9\u8d21\u732e\u503c\uff1b\r\n5.\u5927\u4f1a\u5f00\u542f\u540e\u70b9\u51fb\u6b66\u6797\u5927\u4f1a\u5373\u53ef\u53c2\u52a0\uff0c\u4e2d\u9014\u53ef\u4ee5\u8fd4\u56de\u666e\r\n\u901a\u6e38\u620f\u754c\u9762";
this.txtIsEnroll=new egret.TextField;this.txtIsEnroll.text="\u5df2\u62a5\u540d";this.txtIsEnroll.textColor=14329120;this.txtIsEnroll.x=260;this.txtIsEnroll.y=690;this.txtIsEnroll.visible=!1;this.mainView.addChild(this.txtIsEnroll);this.txtNextOpenTime=new egret.TextField;this.txtNextOpenTime.text="\u4e0b\u6b21\u6b66\u6797\u5927\u4f1a\u5f00\u542f\u65f6\u95f4:";this.mainView.addChild(this.txtNextOpenTime);this.txtNextOpenTime.textColor=14329120;this.txtNextOpenTime.x=100;this.txtNextOpenTime.y=730;
this.txtLeftTime=new egret.TextField;this.mainView.addChild(this.txtLeftTime);this.txtLeftTime.x=this.txtNextOpenTime.x+this.txtNextOpenTime.width+10;this.txtLeftTime.y=this.txtNextOpenTime.y;this.txtLeftTime.text=GameUtils.formatTime1(this.myGldInfo.guildNextOpenTime);this.createBtn("\u7acb\u523b\u62a5\u540d",30).addOnClick(this.commitMyName,this);this.createBtn("\u5e2e\u6d3e\u6392\u540d",180).addOnClick(this.openGuildRank,this);this.createBtn("\u6211\u7684\u6392\u540d",330).addOnClick(this.myRank,
this);this.createBtn("\u9886\u53d6\u5956\u52b1",480).addOnClick(this.recvReward,this);this.txtNextOpenTime.visible=!1;this.txtLeftTime.visible=!1};b.clickToBack=function(){this.showmainView();doAction(Const.Guild_ChangeTitle,"gldTitle_0")};b.createBtn=function(a,b){var c=new SimpleButton,d=ResourceUtils.createBitmapFromSheet("btn_yellow","commonRes");c.addChild(d);this.mainView.addChild(c);c.setFontText(a,26);c.y=780;c.x=b;return c};b.refleshTime=function(){this.myGldInfo=GuildDataManager.getInstance().getMyGldInfo();
this.txtIsEnroll.visible=this.myGldInfo.guildIsEnRoll;this.txtLeftTime.text=GameUtils.formatTime1(this.myGldInfo.guildNextOpenTime);this.txtNextOpenTime.visible=!0;this.txtLeftTime.visible=!0};b.openWeapon=function(){this.hideView();null!=this.bmpBack&&(this.bmpBack.visible=!0);null==this.weaponView?this.createWeaponView():(this.weaponView.visible=!0,this.refleshWeaponView())};b.commitMyName=function(){GuildModel.checkisCanSingUp()&&ProxyUtils.signup()};b.openGuildRank=function(){this.hideView();
null!=this.bmpBack&&(this.bmpBack.visible=!0);doAction(Const.Guild_ChangeTitle,"gldTitle_1");ProxyUtils.repGetMyGldRank()};b.myRank=function(){this.hideView();null!=this.bmpBack&&(this.bmpBack.visible=!0);ProxyUtils.repGetWonRankList()};b.recvReward=function(){GuildDataManager.getInstance().getMyGldInfo();this.createGuildRewardView(!0)};b.showmainView=function(){this.hideView();null==this.mainView&&this.initView();this.mainView.visible=!0};b.hideView=function(){null!=this.mainView&&(this.mainView.visible=
!1);null!=this.weaponView&&(this.weaponView.visible=!1);null!=this.guildRank&&(this.guildRank.visible=!1);null!=this.bmpBack&&(this.bmpBack.visible=!1)};b.createWeaponView=function(){this.weaponView=new egret.DisplayObjectContainer;this.addChild(this.weaponView);var a=egret.DynamicBitmap.create("weapon_Bg");this.weaponView.addChild(a);a.x=50;a.y=250;a=new egret.TextField;this.weaponView.addChild(a);a.text="\u6cd5\u5b9d";a.size=36;a.textColor=14329120;a.x=280;a.y=255;var b=ResourceUtils.createBitmapFromSheet("inputBg",
"commonRes");this.weaponView.addChild(b);b.x=70;b.y=295;b.width=260;b.height=42;this.txtMyWeaponeLv=new egret.TextField;this.weaponView.addChild(this.txtMyWeaponeLv);this.txtMyWeaponeLv.x=75;this.txtMyWeaponeLv.y=300;this.txtMyWeaponeLv.size=26;this.txtMyWeaponeLv.text="\u6211\u7684\u6cd5\u5b9d\u7b49\u7ea7:Lv."+GuildDataManager.getInstance().weaponLevel;b=ResourceUtils.createBitmapFromSheet("inputBg","commonRes");this.weaponView.addChild(b);b.x=70;b.y=345;b.width=260;b.height=42;this.txtMyWeaponeCanAddDamg=
new egret.TextField;this.weaponView.addChild(this.txtMyWeaponeCanAddDamg);this.txtMyWeaponeCanAddDamg.x=75;this.txtMyWeaponeCanAddDamg.size=26;this.txtMyWeaponeCanAddDamg.y=352;a=GuildModel.computerWeaponCanAddBuff();b=new NumberModel;b.add(a);this.txtMyWeaponeCanAddDamg.text="\u589e\u52a0\u70b9\u51fb\u4f24\u5bb3:"+b.getNumer()+"%";b=ResourceUtils.createBitmapFromSheet("inputBg","commonRes");this.weaponView.addChild(b);b.x=380;b.y=295;b.width=188;b.height=42;a=new egret.TextField;a.text="\u6211\u7684    :";
a.y=300;a.x=400;this.weaponView.addChild(a);b=ResourceUtils.createBitmapFromSheet("pice","iconRes");this.weaponView.addChild(b);b.x=460;b.y=295;this.txtMyPiceCount=new egret.TextField;this.txtMyPiceCount.text=this.myGldInfo.guildPice.toString();this.txtMyPiceCount.x=a.x+a.width+10;this.txtMyPiceCount.y=a.y;this.weaponView.addChild(this.txtMyPiceCount);b=ResourceUtils.createBitmapFromSheet("inputBg","commonRes");this.weaponView.addChild(b);b.x=180;b.y=675;b.width=244;b.height=42;a=new egret.TextField;
a.text="\u5347\u7ea7\u9700\u8981    :";a.x=b.x+20;a.y=680;this.weaponView.addChild(a);b=ResourceUtils.createBitmapFromSheet("pice","iconRes");this.weaponView.addChild(b);b.x=320;b.y=675;this.txtUplevelNeedCount=new egret.TextField;this.txtUplevelNeedCount.text=GuildModel.computerUPWeaponNeed().toString();this.txtUplevelNeedCount.x=a.x+a.width+10;this.txtUplevelNeedCount.y=680;this.weaponView.addChild(this.txtUplevelNeedCount);a=new SimpleButton;b=ResourceUtils.createBitmapFromSheet("btn_yellow","commonRes");
a.addChild(b);a.setFontText("\u5347\u7ea7",26);a.x=250;a.y=720;a.addOnClick(this.upLevel,this);this.weaponView.addChild(a)};b.refleshWeaponView=function(){if(null!=this.weaponView&&this.weaponView.visible){this.txtMyPiceCount.text=this.myGldInfo.guildPice.toString();this.txtUplevelNeedCount.text=GuildModel.computerUPWeaponNeed().toString();this.txtMyWeaponeLv.text="\u6211\u7684\u6cd5\u5b9d\u7b49\u7ea7:Lv."+GuildDataManager.getInstance().weaponLevel;var a=GuildModel.computerWeaponCanAddBuff();this.txtMyWeaponeCanAddDamg.text=
"\u589e\u52a0\u70b9\u51fb\u4f24\u5bb3:"+a+"%"}};b.upLevel=function(){this.myGldInfo.guildPice<GuildModel.computerUPWeaponNeed()?doAction(Const.SHOW_TIPS,"\u788e\u7247\u4e0d\u8db3\u4ee5\u5347\u7ea7"):ProxyUtils.upLevelWeapon()};b.createGuildRankView=function(){null==this.guildRank&&(this.guildRank=new GuildRank,this.addChild(this.guildRank));this.guildRank.reLoad(1);this.mainView.visible||(this.guildRank.visible=!0)};b.createGuildWonRank=function(){null==this.guildRank&&(this.guildRank=new GuildRank,
this.addChild(this.guildRank));this.guildRank.reLoad(2);this.mainView.visible||(this.guildRank.visible=!0)};b.createGuildRewardView=function(a){null==this.guildReward&&(this.guildReward=new GuildReward,this.addChild(this.guildReward));this.guildReward.visible=a;this.guildReward.reLoad()};return d}(BaseContainer);GuildWuLin.prototype.__class__="GuildWuLin";
var JoinGldItem=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this.splitLine=ResourceUtils.createBitmapFromSheet("\u5206\u5272\u7ebf","commonRes");this.addChild(this.splitLine);this.splitLine.x=3;this.splitLine.y=60;this.txtName=new egret.TextField;this.addChild(this.txtName);this.txtName.x=80;this.txtName.y=30;this.txtName.size=26;this.txtName.anchorX=this.txtName.anchorY=0.5;this.txtName.text="\u65e0\u540d";this.txtCbValue=new egret.TextField;
this.addChild(this.txtCbValue);this.txtCbValue.size=26;this.txtCbValue.y=30;this.txtCbValue.x=300;this.txtCbValue.text="1/20";this.txtCbValue.anchorX=this.txtCbValue.anchorY=0.5;this.onLineTime=new egret.TextField;this.addChild(this.onLineTime);this.onLineTime.x=500;this.onLineTime.y=30;this.onLineTime.size=26;this.onLineTime.text="\u7533\u8bf7\u4e2d";this.onLineTime.anchorX=this.onLineTime.anchorY=0.5;this.btnApl=new SimpleButton;var a=ResourceUtils.createBitmapFromSheet("btn_yellow","commonRes");
this.btnApl.addChild(a);this.btnApl.visible=!1;this.btnApl.anchorX=this.btnApl.anchorY=0.5;this.btnApl.x=520;this.btnApl.y=32;this.btnApl.setFontText("\u7533\u8bf7");this.btnApl.addOnClick(this.AplyJoin,this);this.addChild(this.btnApl)};b.refreshView=function(a,b){this.data=a;this.txtName.text=GuildModel.ChangeTxtToDot(a.guildName);this.txtCbValue.text=a.guildCurMbCount+"/"+a.guildMaxMbCount;a.guildisApl?(this.btnApl.visible=!1,this.onLineTime.text="\u7533\u8bf7\u4e2d",this.onLineTime.visible=!0):
(this.btnApl.visible=!0,this.onLineTime.visible=!1)};b.AplyJoin=function(){null!=this.data&&this.data.guildCurMbCount>=this.data.guildMaxMbCount?doAction(Const.SHOW_TIPS,"\u5f53\u524d\u5e2e\u6d3e\u4eba\u6570\u5df2\u6ee1"):ProxyUtils.aplyToJoin(this.data)};return d}(BaseContainer);JoinGldItem.prototype.__class__="JoinGldItem";var AchieveData=function(){return function(){}}();AchieveData.prototype.__class__="AchieveData";
var CodeAwardLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this._container=new egret.DisplayObjectContainer;this.boxContainer.addChild(this._container);var a=egret.DynamicBitmap.create("paymen_recommend");this._container.addChild(a);a.x=35;a.y=200;a=ResourceUtils.createBitmapFromSheet("weixin_bg1");a.x=110;a.y=280;this._container.addChild(a);a=new SimpleButton;a.anchorX=a.anchorY=0.5;var b=ResourceUtils.createBitmapFromSheet("close_btn");
a.addChild(b);a.addOnClick(this.close,this);a.useZoomOut(!0);a.x=570;a.y=230;this.boxContainer.addChild(a);this._msgLabel=new egret.TextField;this._msgLabel.size=26;this._container.addChild(this._msgLabel);this._msgLabel.textFlow=(new egret.HtmlTextParser).parser(this.getMsg());this._msgLabel.lineSpacing=10;this._msgLabel.anchorX=0;this._msgLabel.anchorY=1;this._msgLabel.textColor=16777215;this._msgLabel.x=125;this._msgLabel.y=370;this._container.cacheAsBitmap=!0;this.boxContainer.addChild(GameUtils.createButton("\u4e0e\u5b98\u65b9\u4e92\u52a8",
"unlock_skill_btn",this.weixi.bind(this),310,500,170,69,2,0,0))};b.getMsg=function(){return"\u4e0e\u516c\u4f17\u53f7\u4e92\u52a8,\u83b7\u53d6\u6fc0\u6d3b\u7801,\u5373\u53ef\n\u83b7\u5f97\u5143\u5b9d\u548c\u94dc\u94b1\u5956\u52b1!"};b.weixi=function(){PlatformFactory.getPlatform().name==PlatformTypes.WEIXIN?GameUtils.notEmpty(ProxyUtils.winxinUrl)&&(location.href=ProxyUtils.winxinUrl):PlatformFactory.getPlatform().name==PlatformTypes.EGRET&&EgretH5Sdk.attention(ProxyUtils.egretAppId,ProxyUtils.platUserId)};
b.close=function(){GameMainLayer.instance.hideCodeAwardLayer()};return d}(BoxContainer);CodeAwardLayer.prototype.__class__="CodeAwardLayer";
var DaySigninAwardLayer=function(c){function d(){c.call(this);this._dataList=[{day:1,desc:"15\u5143\u5b9d",title:"\u7b2c\u4e00\u5929",icon:"icon_payment_6"},{day:2,desc:"30\u5143\u5b9d",title:"\u7b2c\u4e8c\u5929",icon:"icon_payment_7"},{day:3,desc:"\u4e00\u6307\u795e\u529f\u6280\u80fd\u4f7f\u7528\u4e00\u6b21",title:"\u7b2c\u4e09\u5929",icon:"icon_payment_2"},{day:4,desc:"\u4ed9\u5973\u51fa\u73b0\u6982\u7387X2",title:"\u7b2c\u56db\u5929",icon:"girl_little"},{day:5,desc:"\u514d\u8d39\u63d0\u5347\u4efb\u610f\u5175\u5668\u4e00\u6b21",
title:"\u7b2c\u4e94\u5929",icon:"holy_icon_0"}];this.init()}__extends(d,c);var b=d.prototype;b.init=function(){var a=DataCenter.getInstance().loginAwardModel.day,b=egret.DynamicBitmap.create("paymen_recommend");this.addChild(b);b.x=30;b.y=240;this._staticContainer=new egret.DisplayObjectContainer;this.addChild(this._staticContainer);b=new egret.TextField;b.textColor=0;b.text="\u606d\u559c\u4f60\u6311\u6218\u6210\u529f\uff01\u83b7\u5f97\u5956\u52b1";b.x=322;b.y=320;b.size=28;b.anchorX=b.anchorY=0.5;
this._staticContainer.addChild(b);this.createItem(this._dataList[a-1]);a=new SimpleButton;b=ResourceUtils.createBitmapFromSheet("hero_lvup_btn","commonRes");a.addChild(b);b=new egret.TextField;b.text="\u786e  \u5b9a";b.x=45;b.y=16;b.textColor=0;a.addChild(b);a.x=320;a.y=560;a.scaleX=a.scaleY=0.9;a.anchorX=a.anchorY=0.5;a.useZoomOut(!0);a.addOnClick(this.onClickHandler,this);this._staticContainer.addChild(a);this._staticContainer.cacheAsBitmap=!0};b.createItem=function(a){var b=new egret.DisplayObjectContainer;
b.x=200;b.y=350;var c=ResourceUtils.createBitmapFromSheet("daysignin_bg1","commonRes");b.addChild(c);c=new egret.TextField;c.x=112;c.y=23;c.size=24;c.text=a.title;c.anchorX=0.5;c.anchorY=0.5;b.addChild(c);c=new egret.TextField;c.x=112;c.y=138;c.size=21;c.text=a.desc;c.anchorX=0.5;c.anchorY=0.5;b.addChild(c);a=ResourceUtils.createBitmapFromSheet(a.icon,"iconRes");a.x=112;a.y=81;a.anchorX=0.5;a.anchorY=0.5;b.addChild(a);this._staticContainer.addChild(b)};b.onClickHandler=function(){if(1==DataCenter.getInstance().loginAwardModel.day&&
ProxyUtils.biaoji){DataCenter.getInstance().reduceGc(15,!0);var a={type:"diamond",award:15,updated:!0};doAction(Const.AWARD_EFFECT,a)}else 2==DataCenter.getInstance().loginAwardModel.day&&ProxyUtils.biaoji&&(DataCenter.getInstance().reduceGc(30,!0),a={type:"diamond",award:30,updated:!0},doAction(Const.AWARD_EFFECT,a));ProxyUtils.biaoji=!1;GameMainLayer.instance.hideDaySigninAwardLayer()};return d}(BoxContainer);DaySigninAwardLayer.prototype.__class__="DaySigninAwardLayer";
var DaySigninLayer=function(c){function d(){c.call(this);this._dataList=[{day:1,desc:"15\u5143\u5b9d",title:"\u7b2c\u4e00\u5929",icon:"icon_payment_6"},{day:2,desc:"30\u5143\u5b9d",title:"\u7b2c\u4e8c\u5929",icon:"icon_payment_7"},{day:3,desc:"\u4e00\u6307\u795e\u529f\u6280\u80fd\u4f7f\u7528\u4e00\u6b21",title:"\u7b2c\u4e09\u5929",icon:"icon_payment_2"},{day:4,desc:"\u4ed9\u5973\u51fa\u73b0\u6982\u7387X2",title:"\u7b2c\u56db\u5929",icon:"girl_little"},{day:5,desc:"\u514d\u8d39\u63d0\u5347\u4efb\u610f\u5175\u5668\u4e00\u6b21",
title:"\u7b2c\u4e94\u5929",icon:"holy_icon_0"}];this.init()}__extends(d,c);var b=d.prototype;b.init=function(){var a=egret.DynamicBitmap.create("day_signin");this.addChild(a);a.x=30;a.y=100;var a=new SimpleButton,b=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");a.addChild(b);a.addOnClick(this.onClickHandler,this);a.x=520;a.y=90;a.useZoomOut(!0);this.addChild(a);this._staticContainer=new egret.DisplayObjectContainer;this.addChild(this._staticContainer);a=ResourceUtils.createBitmapFromSheet("dailyFight_title");
a.x=200;a.y=105;this._staticContainer.addChild(a);for(var c in this._dataList)this.createItem(this._dataList[c]);this.createBtnItem();this._staticContainer.cacheAsBitmap=!0};b.createItem=function(a){var b=a.day,c=new egret.DisplayObjectContainer;c.x=1==b%2?80:330;c.y=200+165*Math.floor((b-1)/2);var d=ResourceUtils.createBitmapFromSheet("daysignin_bg1","commonRes");c.addChild(d);d=new egret.TextField;d.x=115;d.y=23;d.size=24;d.text=a.title;d.anchorX=0.5;d.anchorY=0.5;c.addChild(d);d=new egret.TextField;
d.x=115;d.y=138;d.size=21;d.text=a.desc;d.anchorX=0.5;d.anchorY=0.5;c.addChild(d);a=ResourceUtils.createBitmapFromSheet(a.icon,"iconRes");a.x=110;a.y=81;a.anchorX=0.5;a.anchorY=0.5;c.addChild(a);b==DataCenter.getInstance().loginAwardModel.day&&(b=ResourceUtils.createBitmapFromSheet("daysignin_selected","commonRes"),c.addChild(b));this._staticContainer.addChild(c)};b.createBtnItem=function(){var a=new egret.DisplayObjectContainer;a.x=330;a.y=530;var b=ResourceUtils.createBitmapFromSheet("daysignin_bg2",
"commonRes");a.addChild(b);var b=new SimpleButton,c=ResourceUtils.createBitmapFromSheet("hero_lvup_btn","commonRes");b.addChild(c);c=new egret.TextField;c.text="\u5f00\u59cb\u6311\u6218";c.x=25;c.y=17;c.textColor=0;b.addChild(c);a.addChild(b);b.x=112;b.y=60;b.scaleX=b.scaleY=0.9;b.anchorX=b.anchorY=0.5;b.useZoomOut(!0);b.addOnClick(this.startFight,this);b=new egret.TextField;b.text="\u6311\u6218\u5012\u8ba1\u65f6";b.x=20;b.y=107;b.size=21;a.addChild(b);this._timeText=new egret.TextField;this._timeText.text=
"00:00:00";this._timeText.x=130;this._timeText.y=107;this._timeText.size=21;a.addChild(this._timeText);this._staticContainer.addChild(a)};b.show=function(){this.refreshTime();this._timeId=Time.setInterval(this.refreshTime,this,1E3)};b.refreshTime=function(){this._timeText.text=GameUtils.formatTime1(ProxyUtils.leftTime)};b.startFight=function(){this.onClickHandler();doAction(Const.Activity_FIGHT)};b.onClickHandler=function(){Time.clearInterval(this._timeId);GameMainLayer.instance.hideDaySigninLayer()};
return d}(BoxContainer);DaySigninLayer.prototype.__class__="DaySigninLayer";
var EquipBuyConfirmLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("paymen_recommend");a.x=20;a.y=200;this.addChild(a);this._goldIcon=ResourceUtils.createBitmapFromSheet("gold_icon");this.addChild(this._goldIcon);this._goldIcon.x=232;this._goldIcon.y=305;this._goldIcon.scaleX=this._goldIcon.scaleY=0.7;this._goldIcon.anchorX=this._goldIcon.anchorY=0.5;a=new SimpleButton;a.anchorX=a.anchorY=0.5;var b=
ResourceUtils.createBitmapFromSheet("pay_btn");a.addChild(b);b=new egret.TextField;b.text="\u5426";b.size=24;b.textColor=2231302;b.x=70;b.y=20;a.addChild(b);a.useZoomOut(!0);a.addOnClick(this.onCloseHandler,this);a.x=180;a.y=500;this.addChild(a);a=new SimpleButton;a.anchorX=a.anchorY=0.5;b=ResourceUtils.createBitmapFromSheet("reborn_lvup_btn");a.addChild(b);b=new egret.TextField;b.text="\u662f";b.size=24;b.x=74;b.y=20;b.textColor=2231302;a.addChild(b);a.useZoomOut(!0);a.addOnClick(this.onOKHandler,
this);a.x=450;a.y=500;this.addChild(a);this._costLabel=new egret.TextField;this._costLabel.size=26;this._costLabel.x=80;this._costLabel.textColor=2231302;this._costLabel.y=290;this.addChild(this._costLabel);this._desLabel=new egret.TextField;this._desLabel.size=26;this._desLabel.x=80;this._desLabel.textColor=2231302;this._desLabel.y=350;this.addChild(this._desLabel)};b.refreshView=function(a){var b=a.getCost();this._model=a;this._costLabel.textFlow=(new egret.HtmlTextParser).parser('\u4f60\u60f3\u8981\u82b1\u8d39<font color="0xff0000">'+
b.toString()+"</font>      \u8d2d\u4e70"+a.config.name+"\u5417?");this._desLabel.textFlow=(new egret.HtmlTextParser).parser('\u8d2d\u4e70\u540e\u6548\u679c:<font color="0x00ff00">'+this._model.getDes()+"</font>");this._goldIcon.x=232+15*b.toString().length};b.onCloseHandler=function(){GameMainLayer.instance.hideBuyEquip()};b.buyEquipCallback=function(a){GameMainLayer.instance.showLoadingRotation(!1);0==a?(DataCenter.getInstance().buyEquip(this._model.configId),DataCenter.getInstance().saveLocalData(),
DataCenter.getInstance().saveData(),doAction(Const.CHANGE_EQUIP,this._model),this.onCloseHandler()):113==a&&doAction(Const.SHOW_TIPS,"\u5143\u5b9d\u4e0d\u8db3")};b.onOKHandler=function(){if(DataCenter.getInstance().hasEnoughGc(this._model.getCost())){DataCenter.getInstance().reduceGc(this._model.getCost(),!1,this._model.configId,this.buyEquipCallback,this);GameMainLayer.instance.showLoadingRotation(!0);var a=Time.setTimeout(function(){Time.clearTimeout(a);GameMainLayer.instance.showLoadingRotation(!1)},
this,5E3)}else GameMainLayer.instance.showPaymentRecommendLayer()};return d}(BoxContainer);EquipBuyConfirmLayer.prototype.__class__="EquipBuyConfirmLayer";
var EquipListLayer=function(c){function d(){c.call(this);this._isChange=!1;this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("equip_box_bg");this.addChild(a);a.y=GameUtils.getPosY(0);var a=new SimpleButton,b=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");a.addChild(b);a.addOnClick(this.onCloseHandler,this);a.x=550;a.y=GameUtils.getPosY(20);a.useZoomOut(!0);this.addChild(a);this.initDataSource();this.initMainHero();this.initGcLabel();
this.refreshView();this.initTableView();this.initTabView();addAction(Const.CHANGE_EQUIP,this.equipChangeHandler,this);addAction(Const.CHANGE_DIAMOND,this.refreshLabel,this);addAction(Const.REFRESH_EQUIP,this.refreshTableView,this)};b.initDataSource=function(){this._modelList1=[];this._modelList2=[];this._modelList3=[];var a=RES.getRes("equipConfig"),b;for(b in a)a=EquipModel.createByConfigID(b),1==a.getEffectType()?this._modelList1.push(a):5==a.getEffectType()?this._modelList2.push(a):3==a.getEffectType()&&
this._modelList3.push(a)};b.refreshView=function(){this._prevList=DataCenter.getInstance().totalData.heroEquip;this._afterList={};for(var a in this._prevList)this._afterList[a]=this._prevList[a];if(this._isChange&&this._currentType)this.onTabSelect(this._currentType);a=HeroController.getInstance().mainHero.lv.toString();this._lvLabel.text=a;this._nameLabel.text=GameUtils.getUserName()};b.refreshTableView=function(){this._isChange=!0;this.visible&&(d.selectedModel&&(this._afterList[d.selectedModel.getType()]=
d.selectedModel.configId),this.onTabSelect(this._currentType))};b.equipChangeHandler=function(a){this._afterList[a.getType()]&&this._afterList[a.getType()]==a.configId||(a.isOpen()&&(this._afterList[a.getType()]=a.configId),this._mainHero.changeEquipHandler(a.configId))};b.onCloseHandler=function(){var a=!1;this._prevList["1"]!=this._afterList["1"]&&(a=!0,doAction(Const.CHANGE_HOME_EQUIP,this._afterList["1"]));this._prevList["2"]!=this._afterList["2"]&&(a=!0,doAction(Const.CHANGE_HOME_EQUIP,this._afterList["2"]));
this._prevList["3"]!=this._afterList["3"]&&(a=!0,doAction(Const.CHANGE_HOME_EQUIP,this._afterList["3"]));a&&(DataCenter.getInstance().totalData.heroEquip=this._afterList,DataCenter.getInstance().saveData(),DataCenter.getInstance().saveLocalData());GameMainLayer.instance.hideEquipLayer()};b.initMainHero=function(){this._upContainer=new egret.DisplayObjectContainer;this.addChild(this._upContainer);this._upContainer.x=10;this._upContainer.y=GameUtils.getPosY(125);var a=ResourceUtils.createBitmapFromSheet("equip_hero_bg",
"equipRes");this._upContainer.addChild(a);a=HeroController.getInstance().mainHero;this._mainHero=new Hero(a);this._mainHero.x=200;this._mainHero.y=310;this._mainHero.hideNameLabel();this._upContainer.addChild(this._mainHero);this._nameLabel=new egret.TextField;this._nameLabel.x=300;this._upContainer.addChild(this._nameLabel);this._desLabel=new egret.TextField;this._desLabel.width=300;this._desLabel.x=300;this._desLabel.y=65;this._desLabel.size=26;this._desLabel.text="\u5e73\u9759\uff0c\u53ea\u662f\u6c5f\u6e56\u7684\u4e00\u79cd\u8868\u8c61\uff0c\u8d8a\u6765\u8d8a\u591a\u7684\u4eba\u5df2\u7ecf\u611f\u53d7\u5230\u4e86\u90a3\u80a1\u65e0\u5f62\u7684\u52bf\u529b\u3002\u66b4\u98ce\u96e8\u524d\u7684\u9759\u5bc2\u4e0d\u4f1a\u592a\u4e45\uff0c\u5927\u6218\u5df2\u7ecf\u4e0d\u53ef\u907f\u514d\u2026\u2026";
this._upContainer.addChild(this._desLabel);a=new egret.TextField;this._upContainer.addChild(a);a.text="Lv.";a.x=300;a.y=30;this._lvLabel=new egret.TextField;this._lvLabel.textColor=1763286;this._lvLabel.x=340;this._lvLabel.y=30;this._upContainer.addChild(this._lvLabel)};b.initGcLabel=function(){this._infoLabel=new egret.TextField;this._infoLabel.size=24;this._infoLabel.x=25;this._infoLabel.y=GameUtils.getPosY(355);this.addChild(this._infoLabel);this._infoLabel1=new egret.TextField;this._infoLabel1.size=
24;this._infoLabel1.bold=!0;this._infoLabel1.x=200;this._infoLabel1.y=GameUtils.getPosY(355);this._infoLabel1.textColor=65280;this.addChild(this._infoLabel1);this.infoTip=new egret.TextField;this.infoTip.size=24;this.infoTip.x=25;this.infoTip.text="(\u6240\u6709\u5c5e\u6027\u53ef\u53e0\u52a0)";this.infoTip.y=GameUtils.getPosY(355);this.addChild(this.infoTip);var a=ResourceUtils.createBitmapFromSheet("gold_icon");this.addChild(a);a.anchorX=a.anchorY=0.5;a.x=490;a.y=GameUtils.getPosY(370);this._gcLabel=
new egret.TextField;this._gcLabel.size=24;this._gcLabel.x=520;this._gcLabel.y=GameUtils.getPosY(355);this.addChild(this._gcLabel)};b.refreshLabel=function(){!1!=this.visible&&("type1"==this._currentType?(this._infoLabel.text="\u6240\u6709\u4f24\u5bb3\u5171\u63d0\u5347",this._infoLabel1.text=(100*(SkillController.getInstance().equipAdd-1)).toFixed(2)+"%"):"type2"==this._currentType?(this._infoLabel.text="\u6389\u843d\u94dc\u94b1\u5171\u63d0\u5347",this._infoLabel1.text=(100*(SkillController.getInstance().equipDropCoin-
1)).toFixed(2)+"%"):"type3"==this._currentType&&(this._infoLabel.text="\u66b4\u51fb\u4f24\u5bb3\u5171\u63d0\u5347",this._infoLabel1.text=(100*(SkillController.getInstance().equipAddCritHurt-1)).toFixed(2)+"%"),GameUtils.isAiWeiGame()?(this.infoTip.x=this._infoLabel1.x+this._infoLabel1.width,this.infoTip.visible=!0):this.infoTip.visible=!1,this._gcLabel.text=DataCenter.getInstance().getGcNum())};b.initTabView=function(){this._tabView=new EquipTabView;this._tabView.y=GameUtils.getPosY(430);this._tabView.x=
85;this._tabView.addOnClick(this.onTabSelect,this);this.addChild(this._tabView);this._tabView.selectTabWithType("type1")};b.initTableView=function(){null==this._tableView&&(this._tableView=new TableView,this._tableView.y=GameUtils.getPosY(470),this._tableView.x=16,this.addChild(this._tableView),this._tableView.width=GameUtils.getWinWidth(),this._tableView.height=460)};b.onTabSelect=function(a){this._isChange=!1;this._currentType=a;this.refreshLabel();d.selectedModel=null;"type1"==a?(this._dataSource=
this._modelList1,this._afterList["2"]&&(d.selectedModel=EquipModel.createByConfigID(this._afterList["2"]))):"type2"==a?(this._dataSource=this._modelList2,this._afterList["1"]&&(d.selectedModel=EquipModel.createByConfigID(this._afterList["1"]))):"type3"==a&&(this._dataSource=this._modelList3,this._afterList["3"]&&(d.selectedModel=EquipModel.createByConfigID(this._afterList["3"])));a=this._dataSource.filter(function(a){return a.isOpen()});var b=this._dataSource.filter(function(a){return!a.isOpen()});
this._dataSource=a.concat(b);null==this._collection&&(this._collection=new CollectionBase(this._tableView,3,Direction.VERTICAL),this._collection.itemWidth=200,this._collection.itemHeight=150,this._collection.paddingX=10,this._collection.setCreateCallback(function(){return new EquipIcon}));this._collection.bind(this._dataSource)};b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};return d}(BoxContainer);EquipListLayer.prototype.__class__="EquipListLayer";
var EquipIcon=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this._container=new egret.DisplayObjectContainer;this.addChild(this._container);var a=ResourceUtils.createBitmapFromSheet("equip_icon_bg","equipRes");this._container.addChild(a);a.anchorX=a.anchorY=0.5;this._selected=ResourceUtils.createBitmapFromSheet("equip_selected","equipRes");this._container.addChild(this._selected);this._selected.visible=!1;this._selected.anchorX=this._selected.anchorY=
0.5;this._light=ResourceUtils.createBitmapFromSheet("equip_select_light","equipRes");this._light.visible=!1;this._container.addChild(this._light);this._light.anchorX=this._light.anchorY=0.5;this._iconContainer=new egret.DisplayObjectContainer;this._iconContainer.y=-10;this._container.addChild(this._iconContainer);this._nameLabel=new egret.TextField;this._nameLabel.x=-90;this._nameLabel.y=-60;this._nameLabel.size=20;this._container.addChild(this._nameLabel);GameUtils.isAiWeiGame()?(this._lockContainer=
new egret.DisplayObjectContainer,this._container.addChild(this._lockContainer),this._desLabel=new egret.TextField,this._desLabel.size=20,this._desLabel.y=40,this._desLabel.anchorX=0.5,this._container.addChild(this._desLabel)):(this._desLabel=new egret.TextField,this._desLabel.size=20,this._desLabel.y=40,this._desLabel.anchorX=0.5,this._container.addChild(this._desLabel),this._lockContainer=new egret.DisplayObjectContainer,this._container.addChild(this._lockContainer));var b=ResourceUtils.createBitmapFromSheet("equip_icon_bg_mask",
"equipRes");this._lockContainer.addChild(b);b.anchorX=b.anchorY=0.5;b=ResourceUtils.createBitmapFromSheet("equip_condition_bg","equipRes");this._lockContainer.addChild(b);b.y=50;b.anchorX=b.anchorY=0.5;this._goldContainer=new egret.DisplayObjectContainer;this._goldContainer.y=45;this._lockContainer.addChild(this._goldContainer);b=ResourceUtils.createBitmapFromSheet("gold_icon");this._goldContainer.addChild(b);b.x=-20;b.y=15;b.anchorX=b.anchorY=0.5;b.scaleX=b.scaleY=0.8;this._priceLabel=new egret.TextField;
this._priceLabel.size=20;this._priceLabel.x=10;this._goldContainer.addChild(this._priceLabel);GameUtils.isAiWeiGame()&&(this._goldContainer.x=30,this._goldContainer.y=-60);this._conditionLabel=new egret.TextField;this._conditionLabel.size=20;GameUtils.isAiWeiGame()?(this._conditionLabel.anchorX=1,this._conditionLabel.y=-60,this._conditionLabel.x=90):(this._conditionLabel.anchorX=0.5,this._conditionLabel.y=45,this._conditionLabel.x=0);this._lockContainer.addChild(this._conditionLabel);b=ResourceUtils.createBitmapFromSheet("equip_question_icon",
"equipRes");this._lockContainer.addChild(b);b.anchorX=b.anchorY=0.5;this._container.cacheAsBitmap=!0;a.touchEnabled=!0;a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this);addAction("unselect",this.unSelect,this)};b.onClickHandler=function(){this._data.isOpen()?(doAction("unselect"),EquipListLayer.selectedModel=this._data,this.setSelect(!0),doAction(Const.CHANGE_EQUIP,this._data)):this._data.needGc()?(this.onBuyHandler(),doAction("unselect"),EquipListLayer.selectedModel=this._data,
this.setSelect(!0),doAction(Const.CHANGE_EQUIP,this._data)):doAction(Const.SHOW_TIPS,"\u9700\u8981"+this._data.getCondition())};b.onBuyHandler=function(){!this._data.isOpen()&&this._data.needGc()&&GameMainLayer.instance.showBuyEquip(this._data)};b.unSelect=function(){this.setSelect(!1)};b.setSelect=function(a){this._selected.visible=a;this._light.visible=a};Object.defineProperty(b,"data",{get:function(){return this._data},enumerable:!0,configurable:!0});b.updateView=function(a){this._data=a;this._iconContainer.removeChildren();
a=ResourceUtils.createBitmapFromSheet(this._data.getRes(),"equipRes");a.anchorX=a.anchorY=0.5;this._iconContainer.addChild(a);this._nameLabel.text=this._data.config.name;this._desLabel.text=this._data.getDes();this._lockContainer.visible=!this._data.isOpen();this._desLabel.visible=this._data.isOpen();GameUtils.isAiWeiGame()&&(this._desLabel.visible=!0);EquipListLayer.selectedModel&&EquipListLayer.selectedModel.configId==this._data.configId?this.setSelect(!0):this.setSelect(!1);this._data.needGc()?
(this._goldContainer.visible=!0,this._conditionLabel.visible=!1,this._priceLabel.text=this._data.getCost()):(this._goldContainer.visible=!1,this._conditionLabel.visible=!0,this._conditionLabel.text=this._data.getCondition())};return d}(BaseContainer);EquipIcon.prototype.__class__="EquipIcon";
var FriendDetailLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("paymen_recommend");this.boxContainer.addChild(a);a.x=24;a.y=115;var a=new SimpleButton,b=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");a.addChild(b);a.addOnClick(this.onCloseHandler,this);a.x=510;a.y=90;a.useZoomOut(!0);this.boxContainer.addChild(a);this.container1=new egret.TextField;this.container1.text="\u6bcf\u540d\u73a9\u5bb6\u4e00\u5929\u5185\u53ea\u80fd\u88ab\u4e00\u540d\u597d\u53cb\u9080\u8bf7\u5171\u6218\u6c5f\u6e56;\n\u82e5\u8be5\u73a9\u5bb6\u7d2f\u8ba1\u5145\u503c30\u5143\u5219\u53ef\u4ee5\u88ab\u4e94\u540d\u73a9\u5bb6\u9080\u8bf7,\n\u82e5\u8be5\u73a9\u5bb6\u7d2f\u8ba1\u5145\u503c98\u5143\u5219\u53ef\u4ee5\u88ab\u4e8c\u5341\u540d\u73a9\u5bb6\u9080\u8bf7,\n\u82e5\u8be5\u73a9\u5bb6\u7d2f\u8ba1\u5145\u503c294\u5143\u5219\u53ef\u4ee5\u88ab\u4e94\u5341\u540d\u73a9\u5bb6\u9080\u8bf7,\n\u82e5\u8be5\u73a9\u5bb6\u7d2f\u8ba1\u5145\u503c490\u5143\u5219\u53ef\u4ee5\u88ab\u4e24\u767e\u540d\u73a9\u5bb6\u9080\u8bf7,\n\u82e5\u8be5\u73a9\u5bb6\u7d2f\u8ba1\u5145\u503c686\u5143\u5219\u53ef\u4ee5\u88ab\u4e94\u767e\u540d\u73a9\u5bb6\u9080\u8bf7,\n";
this.container1.textColor=0;this.container1.size=22;this.container1.x=80;this.container1.y=200;this.container1.width=474;this.container1.lineSpacing=5;this.boxContainer.addChild(this.container1);this.container2=new egret.DisplayObjectContainer;this.boxContainer.addChild(this.container2);this.label2=new egret.TextField;this.label2.textColor=0;this.label2.x=80;this.label2.y=200;this.label2.width=474;this.label2.lineSpacing=5;this.container2.addChild(this.label2);a=new FriendItemButton;a.x=310;a.y=420;
a.initButton("hero_lvup_btn","hero_lvup_btn");a.useZoomOut(!0);a.addLabel("\u9886\u53d6");a.addOnClick(this.onCloseHandler,this);this.container2.addChild(a);this.container3=new egret.DisplayObjectContainer;this.boxContainer.addChild(this.container3);this.label3=new egret.TextField;this.label3.size=28;this.label3.textColor=0;this.label3.x=80;this.label3.y=200;this.label3.width=474;this.label3.lineSpacing=5;this.container3.addChild(this.label3);this.container3.addChild(GameUtils.createButton("\u53d6\u6d88",
"pay_btn",this.onCloseHandler.bind(this),180,420,170,69,2,0,0));this.container3.addChild(GameUtils.createButton("\u9886\u53d6","hero_lvup_btn",this.awardHandler.bind(this),430,420,170,69,2,0,0));this.container4=new egret.DisplayObjectContainer;this.boxContainer.addChild(this.container4);this.label4=new egret.TextField;this.label4.size=28;this.label4.textColor=0;this.label4.x=100;this.label4.y=185;this.label4.width=474;this.label4.lineSpacing=5;this.container4.addChild(this.label4);a=new egret.TextField;
a.size=28;a.textColor=0;a.x=120;a.y=275;a.text="\u5206\u4eab\u5fc3\u5f97,\u9a6c\u4e0a\u4e0e\u597d\u53cb\u5171\u6218\u6c5f\u6e56!";this.container4.addChild(a);a=egret.DynamicBitmap.create("share_weibo_bg");a.x=85;a.y=310;a.height=90;this.container4.addChild(a);this.inputLabel=new egret.TextField;this.inputLabel.x=95;this.inputLabel.y=320;this.inputLabel.size=24;this.inputLabel.width=350;this.inputLabel.height=100;this.inputLabel.textColor=12632256;this.inputLabel.text="\u8bf4\u8bf4\u5206\u4eab\u5fc3\u5f97";
this.inputLabel.type=egret.TextFieldType.INPUT;this.inputLabel.multiline=!0;this.container4.addChild(this.inputLabel);this.inputLabel.addEventListener(egret.Event.CHANGE,this.changeInputCallback,this);this.container4.addChild(GameUtils.createButton("\u5206\u4eab","hero_lvup_btn",this.shareHandler.bind(this),310,440,170,69,2,0,0))};b.changeInputCallback=function(a){0==this.inputLabel.text.indexOf("\u8bf4\u8bf4\u5206\u4eab\u5fc3\u5f97")&&(a=this.inputLabel.text.split("\u8bf4\u8bf4\u5206\u4eab\u5fc3\u5f97")[1],
this.inputLabel.text=a,this.inputLabel.textColor=0)};b.test=function(){ProxyUtils.fightTogether(this._data.data.uId,function(a){0==a.s?(this.onCloseHandler(),doAction(Const.SHOW_TIPS,"\u5206\u4eab\u6210\u529f"),FriendController.getInstance().setTogetherInfo(this._data.data.uId),doAction(Const.FRIEND_INFO_CHANGE),doAction(Const.FRIEND_ITEM_REFRESH)):doAction(Const.SHOW_TIPS,"\u5206\u4eab\u5931\u8d25")},this)};b.shareHandler=function(){var a=this.inputLabel.text;if(0==a.length||"\u8bf4\u8bf4\u5206\u4eab\u5fc3\u5f97"==
a)doAction(Const.SHOW_TIPS,"\u8bf7\u8f93\u5165\u5206\u4eab\u5fc3\u5f97~");else{PlatformFactory.getPlatform().name==PlatformTypes.EGRET&&(a=a+"@"+this._data.data.name);var b=this;EgretH5Sdk.setShareDefaultText("\u7d2b\u91d1\u4e4b\u5dc5\uff0c\u4e00\u5251\u897f\u6765\uff0c\u5feb\u4e0e\u6211\u5171\u6218\u6c5f\u6e56\uff01");EgretH5Sdk.share(ProxyUtils.egretAppId,ProxyUtils.platUserId,a,function(a){b.onCloseHandler();1==a.status?ProxyUtils.fightTogether(this._data.data.uId,function(a){0==a.s?(doAction(Const.SHOW_TIPS,
"\u5206\u4eab\u6210\u529f"),FriendController.getInstance().setTogetherInfo(this._data.data.uId),doAction(Const.FRIEND_ITEM_REFRESH)):405==a.s?doAction(Const.SHOW_TIPS,"\u5171\u6218ing"):406==a.s?doAction(Const.SHOW_TIPS,"\u4f60\u4eca\u5929\u5df2\u7ecf\u548c\u4ed6\u5171\u6218\u8fc7\u5566"):407==a.s?doAction(Const.SHOW_TIPS,"\u4ed6\u4eca\u5929\u592a\u7d2f\u4e86,\u6362\u4e2a\u4eba\u6218\u5427"):doAction(Const.SHOW_TIPS,"\u5206\u4eab\u5931\u8d25")},this):doAction(Const.SHOW_TIPS,"\u5206\u4eab\u5931\u8d25")},
this)}};b.awardHandler=function(){FriendController.getInstance().getBuff()};b.refreshView=function(a){this._data=a;this.container1.visible=1==a.t;this.container2.visible=2==a.t;this.container3.visible=3==a.t;this.container4.visible=4==a.t;if(2==a.t){var b=a.data.level;b>DataCenter.getInstance().totalData.currentLevel&&(b=DataCenter.getInstance().totalData.currentLevel);b=FriendController.getInstance().getAwardCoin(b);this.label2.text="\u597d\u53cb"+a.data.name+"\u83b7\u5f97\u4e86\u4f60\u7684\u4f20\u529f,\u529f\u529b\u5927\u6da8,\u4e3a\u4e86\u7b54\u8c22\u4f60,\u6177\u6168\u5730\u8d60\u9001\u4e86\u4f60"+
b.getNumer()+"\u94dc\u94b1";DataCenter.getInstance().changeSc(b.getData())}else 3==a.t?this.label3.text="\u4f60\u5c06\u83b7\u5f97"+FriendController.getInstance().getEffect()+"\u500d\u7684\u94dc\u94b1\u83b7\u5f97\u901f\u5ea6\u52a0\u6210,\u6b64\u6548\u679c\u5c06\u6301\u7eed\u534a\u5c0f\u65f6,\u786e\u8ba4\u73b0\u5728\u9886\u53d6\u5417?\n      (\u9886\u53d6\u540e\u6211\u5730\u4f20\u529f\u8fdb\u5ea6\u5c06\u6e05\u7a7a)":4==a.t&&(this.label4.text="\u4e0e\u4fa0\u58eb"+a.data.name+"\u4e00\u54c1\u6c5f\u6e56\u4efb\u900d\u9065!\n\u70b9\u51fb\u4f24\u5bb3\u5c06\u589e\u52a0"+
a.data.level.toString().length+"%(\u6301\u7eed1\u5c0f\u65f6)")};b.onCloseHandler=function(){GameMainLayer.instance.hideFriendDetail()};b.dispose=function(){c.prototype.dispose.call(this)};return d}(BoxContainer);FriendDetailLayer.prototype.__class__="FriendDetailLayer";
var GameNameLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("name_bg");this.addChild(a);a.x=23;a.y=120;a=new egret.TextField;a.text="  \u5e73\u9759\uff0c\u53ea\u662f\u6c5f\u6e56\u7684\u4e00\u79cd\u8868\u8c61\uff0c\u8d8a\u6765\u8d8a\u591a\u7684\u4eba\u5df2\u7ecf\u611f\u53d7\u5230\u4e86\u90a3\u80a1\u65e0\u5f62\u7684\u52bf\u529b\u3002\u66b4\u98ce\u96e8\u524d\u7684\u9759\u5bc2\u4e0d\u4f1a\u592a\u4e45\uff0c\u5927\u6218\u5df2\u7ecf\u4e0d\u53ef\u907f\u514d\u2026\u2026";
a.width=460;a.x=80;a.y=280;a.size=22;a.lineSpacing=10;this.addChild(a);a=ResourceUtils.createBitmapFromSheet("name_icon","commonRes");a.x=90;a.y=420;this.addChild(a);this._nameLabel=new egret.TextField;this._nameLabel.type=egret.TextFieldType.INPUT;this._nameLabel.x=180;this._nameLabel.y=455;this._nameLabel.width=200;this._nameLabel.maxChars=7;this.addChild(this._nameLabel);var b=new SimpleButton,a=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");b.addChild(a);b.addOnClick(this.onCloseHandler,
this);b.x=510;b.y=100;b.useZoomOut(!0);this.addChild(b);b=new SimpleButton;a=ResourceUtils.createBitmapFromSheet("shaizi","commonRes");b.addChild(a);b.addOnClick(this.random,this);b.x=450;b.y=435;b.useZoomOut(!0);this.addChild(b);this._okBtnContainer=new SimpleButton;this._okBtnContainer.x=310;this._okBtnContainer.y=580;a=ResourceUtils.createBitmapFromSheet("reborn_lvup_btn","commonRes");this._okBtnContainer.addChild(a);this._okbtnText=new egret.TextField;this._okbtnText.x=82;this._okbtnText.y=30;
this._okBtnContainer.anchorX=this._okBtnContainer.anchorY=0.5;this._okbtnText.anchorX=0.5;this._okbtnText.anchorY=0.5;this._okbtnText.size=24;this._okbtnText.text="\u4f7f\u7528\u6b64\u540d\u79f0";this._okbtnText.textColor=1641740;this._okBtnContainer.addChild(this._okbtnText);this._okBtnContainer.useZoomOut(!0);this._okBtnContainer.addOnClick(this.nameNation,this);this.addChild(this._okBtnContainer);this._noBtnContainer=new SimpleButton;this._noBtnContainer.x=130;this._noBtnContainer.y=720;this._noBtnContainer.anchorX=
this._noBtnContainer.anchorY=0.5;a=ResourceUtils.createBitmapFromSheet("pay_btn","commonRes");this._noBtnContainer.addChild(a);this._nobtnText=new egret.TextField;this._nobtnText.x=88;this._nobtnText.y=30;this._nobtnText.anchorX=0.5;this._nobtnText.anchorY=0.5;this._nobtnText.size=24;this._nobtnText.text="\u53d6\u6d88";this._nobtnText.textColor=1641740;this._noBtnContainer.addChild(this._nobtnText);this._noBtnContainer.useZoomOut(!0);this._noBtnContainer.addOnClick(this.cancelHandler,this);this.addChild(this._noBtnContainer)};
b.random=function(){var a=nameConfig1.split(","),b=nameConfig2.split(","),c=GameUtils.random(0,a.length-1),d=GameUtils.random(0,b.length-1),g=GameUtils.random(0,999);ProxyUtils.defaultNickName=0==g?a[c]+b[d]:a[c]+b[d]+g;7<ProxyUtils.defaultNickName.length?this.random():this._nameLabel.text=ProxyUtils.defaultNickName};b.nameShow=function(){""==ProxyUtils.nickName?(this._noBtnContainer.visible=!1,this.random(),this._okbtnText.text="\u4f7f\u7528\u6b64\u540d\u79f0",this._okBtnContainer.x=310,this._okBtnContainer.y=
580):(this._nameLabel.text=ProxyUtils.nickName,this._okbtnText.text="\u91cd\u65b0\u547d\u540d",this._noBtnContainer.visible=!0,this._okBtnContainer.x=410,this._okBtnContainer.y=580,this._noBtnContainer.x=200,this._noBtnContainer.y=580)};b.updateView=function(){this.nameShow()};b.okHandler=function(){};b.onCloseHandler=function(){GameMainLayer.instance.hideNameLayer()};b.cancelHandler=function(){GameMainLayer.instance.hideNameLayer()};b.nameNation=function(){""!=this._nameLabel.text&&"\u8bf7\u8f93\u5165\u540d\u5b57"!=
this._nameLabel.text&&ProxyUtils.nameNation(this._nameLabel.text)};return d}(BoxContainer);GameNameLayer.prototype.__class__="GameNameLayer";
var GameNoticeLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("buff_bg");a.touchEnabled=!0;this.boxContainer.addChild(a);a.x=30;a.y=30;a=ResourceUtils.createBitmapFromSheet("title_notice");this.boxContainer.addChild(a);a.x=220;a.y=30;a=new SimpleButton;a.anchorX=a.anchorY=0.5;var b=ResourceUtils.createBitmapFromSheet("close_btn");a.addChild(b);a.addOnClick(this.onCloseHandler,this);a.useZoomOut(!0);
a.x=560;a.y=72;this.boxContainer.addChild(a);this._msgLabel=new egret.TextField;a="";a=ProxyUtils.strNotice;this._msgLabel.lineSpacing=12;this._msgLabel.textColor=0;this._msgLabel.width=470;b=new egret.HtmlTextParser;this._msgLabel.textFlow=b.parser(a);this._msgLabel.x=0;this._msgLabel.y=0;this.boxContainer.addChild(this._msgLabel);a=new egret.ScrollView(this._msgLabel);a.horizontalScrollPolicy="off";a.verticalScrollPolicy="on";a.width=470;a.height=660;a.x=85;a.y=175;this.addChild(a);this._msgLabel.cacheAsBitmap=
!0};b.onCloseHandler=function(){GameMainLayer.instance.hideNoticeLayer()};b.dispose=function(){c.prototype.dispose.call(this)};return d}(BoxContainer);GameNoticeLayer.prototype.__class__="GameNoticeLayer";
var GetAwardLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this._container=new egret.DisplayObjectContainer;this.boxContainer.addChild(this._container);var a=egret.DynamicBitmap.create("paymen_recommend");this._container.addChild(a);a.x=35;a.y=200;a=ResourceUtils.createBitmapFromSheet("weixin_bg2");a.x=80;a.y=280;this._container.addChild(a);a=new SimpleButton;a.anchorX=a.anchorY=0.5;var b=ResourceUtils.createBitmapFromSheet("close_btn");
a.addChild(b);a.addOnClick(this.close,this);a.useZoomOut(!0);a.x=570;a.y=230;this.boxContainer.addChild(a);a=ResourceUtils.createBitmapFromSheet("weixin_award_icon");a.x=90;a.y=290;this._container.addChild(a);this._awardLabel=new egret.TextField;this._container.addChild(this._awardLabel);this._awardLabel.x=170;this._awardLabel.y=315;this._awardLabel.size=22;this._awardLabel.textColor=16777215;this._awardLabel.text="\u53c2\u52a0\u6d3b\u52a8\u5373\u53ef\u83b7\u5f97\u5143\u5b9d\u6216\u94dc\u94b1\u5956\u52b1";
a=ResourceUtils.createBitmapByName("share_input_bg");a.x=125;a.y=400;a.scaleX=0.8;a.scaleY=0.7;this._container.addChild(a);this._inputLabel=new egret.TextField;this._inputLabel.type=egret.TextFieldType.INPUT;this._inputLabel.width=400;this._inputLabel.height=50;this._inputLabel.text="";this._inputLabel.x=140;this._inputLabel.y=400;this._inputLabel.size=26;this.boxContainer.addChild(this._inputLabel);this.boxContainer.addChild(GameUtils.createButton("\u9886\u53d6\u5956\u52b1","buy_btn",this.awardHandler.bind(this),
310,500,170,69,0,0,0))};b.awardHandler=function(){""!=this._inputLabel.text&&PlatformFactory.getPlatform().codeAward(this._inputLabel.text)};b.close=function(){GameMainLayer.instance.hideAwardLayer()};b.dispose=function(){c.prototype.dispose.call(this)};return d}(BoxContainer);GetAwardLayer.prototype.__class__="GetAwardLayer";
var HeroDieLayer=function(c){function d(){c.call(this);this.init()}__extends(d,c);var b=d.prototype;b.init=function(){var a=egret.DynamicBitmap.create("die_bg");this.addChild(a);a.x=24;a.y=120;this._mainContainer=new egret.DisplayObjectContainer;this.addChild(this._mainContainer);this._mainContainer.x=24;this._mainContainer.y=153;this._mainContainer.width=592;a=ResourceUtils.createBitmapFromSheet("item_split2");a.anchorX=a.anchorY=0.5;a.scaleX=a.scaleY=0.75;a.x=290;a.y=310;this._mainContainer.addChild(a);
a=ResourceUtils.createBitmapFromSheet("item_split2");a.anchorX=a.anchorY=0.5;a.x=290;a.y=240;a.scaleX=a.scaleY=0.75;this._mainContainer.addChild(a);a=ResourceUtils.createBitmapFromSheet("consume_bg");a.x=155;a.y=368;this._mainContainer.addChild(a);var a=new SimpleButton,b=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");a.addChild(b);a.addOnClick(this.onClickHandler,this);a.x=500;a.y=-30;a.useZoomOut(!0);this._mainContainer.addChild(a);this._heroIconContainer=new egret.DisplayObjectContainer;
this._mainContainer.addChild(this._heroIconContainer);this._killLabel=new egret.TextField;this._killLabel.textFlow=(new egret.HtmlTextParser).parser('<font color="0x1D82BB">\u8c01</font>\u88ab<font color="0xAD0811">\u8c01</font>\u6740\u6389\u4e86\uff01');this._killLabel.textColor=5386262;this._killLabel.x=125;this._killLabel.y=30;this._killLabel.size=25;this._mainContainer.addChild(this._killLabel);this._descLabel=new egret.TextField;this._descLabel.text="\u6ca1\u6709\u4fa0\u5ba2\u7684\u8bdd\uff0c\u83b7\u5f97\u7684\u94dc\u94b1\u6570\u91cf\u548c\u9020\u6210\u7684\u4f24\u5bb3\u90fd\u4f1a\u5927\u5e45\u51cf\u5c11\uff01";
this._descLabel.size=20;this._descLabel.textColor=5386262;this._descLabel.x=80;this._descLabel.width=420;this._descLabel.y=120;this._descLabel.lineSpacing=5;this._mainContainer.addChild(this._descLabel);this._dpsLabel=new egret.TextField;this._dpsLabel.textColor=5292278;this._dpsLabel.textFlow=(new egret.HtmlTextParser).parser('\u79d2\u4f24\uff1a<font color="0xAD0811">-10.60B/\u79d2</font>');this._dpsLabel.size=22;this._dpsLabel.y=190;this._dpsLabel.x=220;this._dpsLabel.textColor=1934011;this._mainContainer.addChild(this._dpsLabel);
this._btnContainer=new egret.DisplayObjectContainer;a=ResourceUtils.createBitmapFromSheet("big_long_btn","commonRes");a.x=0;a.y=0;this._btnContainer.x=200;this._btnContainer.y=400;this._btnContainer.addChild(a);this._btnTitle1=new egret.TextField;this._btnTitle1.text="\u73b0\u5728\u590d\u6d3b \uff01";this._btnTitle1.size=28;this._btnTitle1.x=30;this._btnTitle1.y=20;this._btnTitle1.textColor=0;this._btnContainer.addChild(this._btnTitle1);this._moneyCoin=ResourceUtils.createBitmapFromSheet("gold_icon",
"commonRes");this._moneyCoin.x=90;this._moneyCoin.y=-30;this._moneyCoin.scaleX=this._moneyCoin.scaleY=0.75;this._btnContainer.addChild(this._moneyCoin);this._moneyLabel=new egret.TextField;this._moneyLabel.text="50";this._moneyLabel.x=80;this._moneyLabel.y=-30;this._moneyLabel.size=25;this._moneyLabel.anchorX=1;this._btnContainer.addChild(this._moneyLabel);this._touchArea=ResourceUtils.createBitmapByName("mask");this._touchArea.alpha=0;this._touchArea.width=this._btnContainer.width;this._touchArea.height=
this._btnContainer.height;this._touchArea.touchEnabled=!0;this._btnContainer.addChild(this._touchArea);this._touchArea.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this);this._mainContainer.addChild(this._btnContainer);this._timeLabel=new egret.TextField;this._timeLabel.x=130;this._timeLabel.y=265;this._timeLabel.size=21;this._timeLabel.textColor=5386262;this._mainContainer.addChild(this._timeLabel)};b.refreshView=function(a){this._hero=a;this._dpsLabel.textFlow=(new egret.HtmlTextParser).parser('\u79d2\u4f24\uff1a<font color="0xAD0811">-'+
a.dps+"/\u79d2</font>");this.tickTime();this._timeID=Time.setInterval(this.tickTime,this,1E3);this.setHeroInfo()};b.setHeroInfo=function(){var a=egret.DynamicBitmap.create(this._hero.getRes(),!1,null,null,Const.default_hero_icon);this._heroIconContainer.removeChildren();this._heroIconContainer.addChild(a);this._heroIconContainer.x=38;this._heroIconContainer.y=7;this._hero.isHero()?(this._killLabel.textFlow=(new egret.HtmlTextParser).parser('<font color="0x1D82BB">'+this._hero.config.name+'</font>\u88ab<font color="0xAD0811">'+
Const.bossName+"</font>\u6740\u6389\u4e86\uff01"),this._descLabel.text="\u6ca1\u6709\u4fa0\u5ba2\u7684\u8bdd\uff0c\u83b7\u5f97\u7684\u94dc\u94b1\u6570\u91cf\u548c\u9020\u6210\u7684\u4f24\u5bb3\u90fd\u4f1a\u5927\u5e45\u51cf\u5c11\uff01",this._btnTitle1.text="\u73b0\u5728\u590d\u6d3b \uff01"):(this._killLabel.textFlow=(new egret.HtmlTextParser).parser('<font color="0x1D82BB">'+this._hero.config.name+'</font>\u88ab<font color="0xAD0811">'+Const.bossName+"</font>\u5c01\u5370\u4e86\uff01"),this._descLabel.text=
"\u6ca1\u6709\u6b66\u5b66\u7684\u8bdd\uff0c\u83b7\u5f97\u7684\u94dc\u94b1\u6570\u91cf\u548c\u9020\u6210\u7684\u4f24\u5bb3\u90fd\u4f1a\u5927\u5e45\u51cf\u5c11\uff01",this._btnTitle1.text="\u73b0\u5728\u89e3\u5370 \uff01")};b.checkMoney=function(a){this._needMoney=a=Math.ceil(a/600);this._moneyLabel.text=a.toString()};b.tickTime=function(){var a=this._hero.getRebornTime();if(0>=a)this.onClickHandler();else this.checkMoney(a),this._hero.isHero()?this._timeLabel.textFlow=(new egret.HtmlTextParser).parser('\u8ddd\u79bb\u4f60\u5f97\u82f1\u96c4\u590d\u6d3b\u8fd8\u6709\uff1a<font color="0xAD0811">'+
GameUtils.formatTime1(a)+"</font>"):this._timeLabel.textFlow=(new egret.HtmlTextParser).parser('\u8ddd\u79bb\u4f60\u5f97\u6b66\u5b66\u89e3\u5370\u8fd8\u6709\uff1a<font color="0xAD0811">'+GameUtils.formatTime1(a)+"</font>")};b.btnClick=function(){DataCenter.getInstance().hasEnoughGc(this._needMoney)?(DataCenter.getInstance().reduceGc(this._needMoney,!1,3),this._hero.reborn(),DataCenter.getInstance().saveLocalData(),DataCenter.getInstance().saveData(),this.onClickHandler()):GameMainLayer.instance.showPaymentRecommendLayer()};
b.onClickHandler=function(){GameMainLayer.instance.hideDieLayer();this._timeID&&Time.clearInterval(this._timeID)};return d}(BoxContainer);HeroDieLayer.prototype.__class__="HeroDieLayer";
var HolyAnimationLayer=function(c){function d(){c.call(this);this._curIdx=1;this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=new egret.Bitmap;a.width=GameUtils.getWinWidth();a.height=GameUtils.getWinHeight();this.addChild(a);a.touchEnabled=!0;a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this);this._container=new egret.DisplayObjectContainer;this.addChild(this._container)};b.refreshAnimation=function(a){this._model=a;this._container.removeChildren();
this._curIdx=1;GameUtils.preloadAnimation("buy_reborn_json",this.addAnimation,this)};b.addAnimation=function(){this._action=new Movie("buy_reborn_json","buy_reborn");this._action.x=GameUtils.getWinWidth()/2;this._action.y=GameUtils.getWinHeight()/2-250;this._container.addChild(this._action);this._action.autoRemove=!1;this._action.setCallback(this.onMoveCallback,this);this._action.play("1");this.addBones()};b.addBones=function(){var a=new egret.TextField;a.text=this._model.config.name;a.anchorX=a.anchorY=
0.5;a.textColor=2040361;a.size=35;this._action.addBoneDisplay("NameContainer",a);a=egret.DynamicBitmap.create(this._model.getRes(),!1,null,null,"default_skill");a.x=-35;a.y=-35;this._action.addBoneDisplay("IconContainer",a)};b.onMoveCallback=function(a,b){if(a==Movie.PLAY_COMPLETE&&(1==this._curIdx&&(this._action.play("2"),this.addBones(),this._curIdx+=1),3==this._curIdx))this.onCloseHandler()};b.onCloseHandler=function(){GameMainLayer.instance.hideHolyAnimation()};b.onClickHandler=function(){2==
this._curIdx&&(this._action.play("3"),this._curIdx=3)};return d}(BaseContainer);HolyAnimationLayer.prototype.__class__="HolyAnimationLayer";
var LanternActivityLayer=function(c){function d(){c.call(this);this._itemList=[];this.init()}__extends(d,c);var b=d.prototype;b.init=function(){var a=egret.DynamicBitmap.create("buff_bg");a.touchEnabled=!0;this.boxContainer.addChild(a);a.x=23;a.y=23;var b=new egret.Bitmap,a=ResourceUtils.getImgUrl(ActivityDrop.VERSION+"_title_mid");RES.getResByUrl(a,function(a){b.texture=a},this);this.boxContainer.addChild(b);b.x=180;b.y=30;a=new SimpleButton;a.anchorX=a.anchorY=0.5;var c=ResourceUtils.createBitmapFromSheet("close_btn");
a.addChild(c);a.addOnClick(this.onClickHandler,this);a.useZoomOut(!0);a.x=560;a.y=72;this.addChild(a);a=new egret.TextField;c=ActivityDrop.msg;a.textFlow=(new egret.HtmlTextParser).parser(c);a.lineSpacing=10;a.width=450;a.bold=!0;a.textColor=3808268;a.size=21;a.x=75;a.y=160;this.addChild(a);a=new egret.TextField;this.boxContainer.addChild(a);a.size=24;a.textColor=3808268;a.text="\u73b0\u6709"+ActivityDrop.dropName+":";a.x=340;a.y=230;this._hasLabel=new egret.TextField;this._hasLabel.size=24;this._hasLabel.textColor=
16711680;this.boxContainer.addChild(this._hasLabel);this._hasLabel.x=470;this._hasLabel.y=230;a=[{res:"icon_lantern_0",des:"100\u4e2a"+ActivityDrop.dropName+"\n\u82b1\u8d3950\u5143\u5b9d\u53ef\u8d2d\u4e70",cost:50,idx:0},{res:"icon_lantern_1",des:"\u5c0f\u578b\u5b9d\u85cf\n\u94dc\u94b1\u83b7\u53d6\u901f\u5ea6\u63d0\u5347\u81f32\u500d!",cost:500,idx:1},{res:"icon_lantern_2",des:"\u4e2d\u578b\u5b9d\u85cf\n\u94dc\u94b1\u83b7\u53d6\u901f\u5ea6\u63d0\u5347\u81f33\u500d!",cost:700,idx:2},{res:"icon_lantern_3",
des:"\u5927\u578b\u5b9d\u85cf\n\u94dc\u94b1\u83b7\u53d6\u901f\u5ea6\u63d0\u5347\u81f35\u500d!",cost:1E3,idx:3}];for(c=0;4>c;c++){var d=new LanternItemLayer(a[c]);this.boxContainer.addChild(d);d.x=50;d.y=260+115*c;this._itemList.push(d)}this.refreshNumLabel();addAction(Const.CHANGE_LANTERN_NUM,this.refreshNumLabel,this)};b.refreshNumLabel=function(){this._hasLabel.text=DataCenter.getInstance().lanternModel.itemNum+"\u4e2a";for(var a=0;4>a;a++)this._itemList[a].refreshView()};b.onClickHandler=function(){GameMainLayer.instance.hideLanternLayer()};
b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};return d}(BoxContainer);LanternActivityLayer.prototype.__class__="LanternActivityLayer";
var LanternItemLayer=function(c){function d(a){c.call(this);this._data={};this.init(a)}__extends(d,c);var b=d.prototype;b.init=function(a){this._data=a;this._container=new egret.DisplayObjectContainer;this.addChild(this._container);var b=ResourceUtils.createBitmapFromSheet("buff_item_bg");this._container.addChild(b);var c=new egret.Bitmap;ResourceUtils.hasNetImage(a.res)?(b=ResourceUtils.getImgUrl(ActivityDrop.VERSION+"_"+a.res),RES.getResByUrl(b,function(a){c.texture=a},this)):c.texture=ResourceUtils.getTextureFromSheet(a.res,
"iconRes");c.anchorX=c.anchorY=0.5;c.x=63;c.y=58;this._container.addChild(c);b=new egret.TextField;b.width=290;b.text=a.des;b.x=105;b.y=30;b.size=24;b.lineSpacing=5;b.bold=!0;b.textColor=3808268;this._container.addChild(b);var d=new egret.Bitmap;0==this._data.idx?(d.texture=ResourceUtils.getTextureFromSheet("gold_icon"),d.scaleX=d.scaleY=0.6,d.x=400,d.y=25):(b=ResourceUtils.getImgUrl(ActivityDrop.VERSION+"_qixi_image"),RES.getResByUrl(b,function(a){d.texture=a},this),d.scaleX=d.scaleY=0.7,d.x=390,
d.y=10);this._container.addChild(d);b=new egret.TextField;b.text=a.cost;b.x=435;b.y=25;b.size=18;b.strokeColor=0;b.stroke=1.5;this._container.addChild(b);this._button=new LanternButton;this._button.x=430;this._button.y=70;this._button.refresh(this._data);this._button.useZoomOut(!0);this._button.addOnClick(this.onBuyHandler,this);this._container.addChild(this._button);this._container.cacheAsBitmap=!0};b.refreshView=function(){this._button.refresh(this._data)};b.onBuyHandler=function(){if(0==this._data.idx)if(DataCenter.getInstance().hasEnoughGc(this._data.cost)){DataCenter.getInstance().reduceGc(this._data.cost,
!1,4,this.buyCallback,this);GameMainLayer.instance.showLoadingRotation(!0);var a=Time.setTimeout(function(){Time.clearInterval(a);GameMainLayer.instance.showLoadingRotation(!1)},this,5E3)}else GameMainLayer.instance.showPaymentRecommendLayer();else ProxyUtils.UserStat("buyWork"+this._data.idx),DataCenter.getInstance().changeLanternNum(-this._data.cost),DataCenter.getInstance().lanternModel.addEffectByType(this._data.idx),this._button.refresh(this._data)};b.buyCallback=function(a){GameMainLayer.instance.showLoadingRotation(!1);
0==a&&(DataCenter.getInstance().changeLanternNum(100),DataCenter.getInstance().saveLocalData(),DataCenter.getInstance().saveData())};return d}(BaseContainer);LanternItemLayer.prototype.__class__="LanternItemLayer";
var LanternButton=function(c){function d(){c.call(this);this._data={};this._leftTime=0;this._timeid=null;this.init();this.anchorX=this.anchorY=0.5}__extends(d,c);var b=d.prototype;b.init=function(){this._container=new egret.DisplayObjectContainer;this._label=new egret.TextField;this._label.text="\u7acb\u5373\u8d2d\u4e70";this._label.size=20;this._label.anchorX=this._label.anchorY=0.5;this._container.addChild(this._label);this._label.x=70;this._label.y=25;this._label.textColor=2495759;this.addChild(this._container);
this._normal=ResourceUtils.createBitmapFromSheet("hero_lvup_btn");this._container.addChildAt(this._normal,0);this._disabled=ResourceUtils.createBitmapFromSheet("hero_lvup_disable");this._disabled.visible=!1;this._container.addChildAt(this._disabled,0);this._normal.scaleX=this._normal.scaleY=0.8;this._disabled.scaleX=this._disabled.scaleY=0.8;this._container.cacheAsBitmap=!0};b.refreshTime=function(){0!=this._data.idx&&(this._leftTime=DataCenter.getInstance().lanternModel.getLastTimeByType(this._data.idx),
0<this._leftTime?(Time.clearTimeout(this._timeid),this.timeRefresh(),this._timeid=Time.setInterval(this.timeRefresh,this,1E3)):(Time.clearTimeout(this._timeid),this._label.text="\u7acb\u5373\u8d2d\u4e70"),this.setEnabled(0==this._leftTime&&DataCenter.getInstance().hasEnoughLantern(this._data.cost)&&0==DataCenter.getInstance().lanternModel.getEffectType()))};b.timeRefresh=function(){this._leftTime-=1;0==this._leftTime?this.refreshTime():this._label.text=GameUtils.formatTime(this._leftTime)};b.setEnabledState=
function(){this._normal.visible=this._enabled;this._disabled.visible=!this._enabled};b.refresh=function(a){this._data=a;this.refreshTime()};return d}(SimpleButton);LanternButton.prototype.__class__="LanternButton";
var MainSkillCDLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("paymen_recommend");a.x=20;a.y=200;this.addChild(a);this._goldIcon=ResourceUtils.createBitmapFromSheet("gold_icon");this.addChild(this._goldIcon);this._goldIcon.x=232;this._goldIcon.y=305;this._goldIcon.scaleX=this._goldIcon.scaleY=0.7;this._goldIcon.anchorX=this._goldIcon.anchorY=0.5;a=new SimpleButton;a.anchorX=a.anchorY=0.5;var b=ResourceUtils.createBitmapFromSheet("pay_btn");
a.addChild(b);b=new egret.TextField;b.text="\u5426";b.size=24;b.textColor=2231302;b.x=70;b.y=20;a.addChild(b);a.useZoomOut(!0);a.addOnClick(this.onCloseHandler,this);a.x=180;a.y=500;this.addChild(a);a=new SimpleButton;a.anchorX=a.anchorY=0.5;b=ResourceUtils.createBitmapFromSheet("reborn_lvup_btn");a.addChild(b);b=new egret.TextField;b.text="\u662f";b.size=24;b.x=70;b.y=20;b.textColor=2231302;a.addChild(b);a.useZoomOut(!0);a.addOnClick(this.onOKHandler,this);a.x=450;a.y=500;this.addChild(a);this._costLabel=
new egret.TextField;this._costLabel.size=26;this._costLabel.x=80;this._costLabel.textColor=2231302;this._costLabel.y=290;this._costLabel.textFlow=(new egret.HtmlTextParser).parser('\u4f60\u60f3\u8981\u82b1\u8d39<font color="#ff0000">0</font>     \u91cd\u7f6e\u6b64\u6280\u80fd\u51b7\u5374\u5417?');this.addChild(this._costLabel)};b.refreshView=function(a){var b=SkillModel.createByConfigId(a).getCDTime(),c=DataCenter.getInstance().totalData.mainSkillCD[a],d=(new Date).getTime(),b=2*Math.ceil((b-Math.floor((d-
c)/1E3))/60);this._costLabel.textFlow=(new egret.HtmlTextParser).parser('\u4f60\u60f3\u8981\u82b1\u8d39<font color="0xff0000">'+b.toString()+"</font>      \u91cd\u7f6e\u6b64\u6280\u80fd\u51b7\u5374\u5417?");this._goldIcon.x=232+15*b.toString().length;this._configId=a;this._costNum=b;0>=this._costNum&&(doAction(Const.CLEAN_SKILL_CD,this._configId),DataCenter.getInstance().saveLocalData(),DataCenter.getInstance().saveData(),this.onCloseHandler())};b.onCloseHandler=function(){GameMainLayer.instance.hideSkillCDLayer()};
b.onOKHandler=function(){DataCenter.getInstance().hasEnoughGc(this._costNum)?(DataCenter.getInstance().reduceGc(this._costNum,!1,1),doAction(Const.CLEAN_SKILL_CD,this._configId),DataCenter.getInstance().saveLocalData(),DataCenter.getInstance().saveData(),this.onCloseHandler()):GameMainLayer.instance.showPaymentRecommendLayer()};return d}(BoxContainer);MainSkillCDLayer.prototype.__class__="MainSkillCDLayer";
var MaskLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=ResourceUtils.createBitmapByName("mask");this.addChild(a);a.touchEnabled=!0;this._text=new egret.TextField;this._text.x=320;this._text.y=480;this._text.anchorX=0.5;this.addChild(this._text)};b.refreshView=function(a){this._text.text=a};return d}(BaseContainer);MaskLayer.prototype.__class__="MaskLayer";
var QQGroupLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("paymen_recommend");a.x=20;a.y=200;this.boxContainer.addChild(a);a=new egret.TextField;a.text="\u52a0\u5165QQ\u7fa4:";this.boxContainer.addChild(a);a.x=140;a.y=360;a=new egret.TextField;a.text="144342402";this.boxContainer.addChild(a);a.textColor=16711680;a.x=300;a.y=360;var a=new SimpleButton,b=ResourceUtils.createBitmapFromSheet("close_btn",
"commonRes");a.addChild(b);a.addOnClick(this.onCloseHandler,this);a.x=510;a.y=170;a.useZoomOut(!0);this.boxContainer.addChild(a)};b.onCloseHandler=function(){GameMainLayer.instance.hideQQGroupLayer()};return d}(BoxContainer);QQGroupLayer.prototype.__class__="QQGroupLayer";
var ReLoginLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);d.prototype.initView=function(){var b=ResourceUtils.createBitmapByName("mask");this.addChild(b);b.touchEnabled=!0;b=new egret.TextField;b.x=320;b.y=480;b.anchorX=0.5;this.addChild(b);b.text="\u5f02\u5730\u767b\u9646\u6216\u8005\u591a\u5165\u53e3\u767b\u9646,\u8bf7\u786e\u4fdd\u5e10\u53f7\u5b89\u5168";MainTickController.getInstance().isPause=!0};return d}(BaseContainer);ReLoginLayer.prototype.__class__="ReLoginLayer";
var ResetGameConfirmLayer=function(c){function d(){c.call(this);this._data={};this._awardNum=0;this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("reborn_confirm");this.addChild(a);a.x=30;a.y=75;var b=new SimpleButton,c=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");b.addChild(c);b.addOnClick(this.onCloseHandler,this);b.x=533;b.y=50;b.useZoomOut(!0);this.addChild(b);this._mainContainer=new egret.DisplayObjectContainer;this._mainContainer.x=
24;this._mainContainer.y=110;this._mainContainer.width=a.width;this.addChild(this._mainContainer);this._littleCoin=ResourceUtils.createBitmapFromSheet("reborn_little_icon","commonRes");this._littleCoin.x=100;this._littleCoin.y=25;this._mainContainer.addChild(this._littleCoin);this._title=new egret.TextField;this._title.text="\u91cd\u751f";this._title.size=30;this._mainContainer.addChild(this._title);this._title.x=150;this._title.y=30;this._bigCoin=ResourceUtils.createBitmapFromSheet("reborn_big_icon",
"iconRes");this._bigCoin.x=60;this._bigCoin.y=77;this._mainContainer.addChild(this._bigCoin);this._descLabel=new egret.TextField;this._descLabel.text="\u91cd\u751f\u540e\uff0c\u94dc\u5e01\u3001\u89d2\u8272\u7b49\u7ea7\u3001\u4fa0\u5ba2\u7b49\u7ea7\u6e05\u96f6\u5e76\u83b7\u5f97\u9b42\u7389\uff0c\u9b42\u7389\u53ef\u5151\u6362\u795e\u5175\u3002";this._descLabel.size=21;this._mainContainer.addChild(this._descLabel);this._descLabel.x=240;this._descLabel.y=100;this._descLabel.width=275;this._descLabel.lineSpacing=
5;a=new egret.TextField;a.text="\u5c0f\u63d0\u793a\uff1a\u7b49\u7ea7\u8d8a\u9ad8\u3001\u5173\u5361\u8d8a\u591a\u91cd\u751f\u83b7\u5f97\u7684\u9b42\u7389\u8d8a\u591a\uff0c\u5168\u90e8\u6280\u80fd&\u4fa0\u5ba2\u672a\u88ab\u5c01\u5370\u5c06\u83b7\u5f97\u989d\u5916\u5956\u52b1\uff01";a.size=18;a.textColor=65280;this._mainContainer.addChild(a);a.x=240;a.y=180;a.width=275;a.lineSpacing=5;this._heroLvTitleLabel=new egret.TextField;this._heroLvTitleLabel.text="\u4f63 \u5175 \u7b49 \u7ea7 \u5956 \u52b1:";
this._heroLvTitleLabel.size=21;this._mainContainer.addChild(this._heroLvTitleLabel);this._heroLvTitleLabel.x=300-this._heroLvTitleLabel.width;this._heroLvTitleLabel.y=305;this._stageTitleLabel=new egret.TextField;this._stageTitleLabel.text="\u5173 \u5361 \u5b8c \u6210 \u5956 \u52b1:";this._stageTitleLabel.size=21;this._mainContainer.addChild(this._stageTitleLabel);this._stageTitleLabel.x=300-this._stageTitleLabel.width;this._stageTitleLabel.y=335;this._teamTitleLabel=new egret.TextField;this._teamTitleLabel.text=
"\u5168 \u961f \u5b58 \u6d3b \u5956 \u52b1:";this._teamTitleLabel.size=21;this._mainContainer.addChild(this._teamTitleLabel);this._teamTitleLabel.x=300-this._teamTitleLabel.width;this._teamTitleLabel.y=365;this._rebornTitleLabel=new egret.TextField;this._rebornTitleLabel.text="\u91cd \u751f \u6280 \u80fd \u5956 \u52b1:";this._rebornTitleLabel.size=21;this._mainContainer.addChild(this._rebornTitleLabel);this._rebornTitleLabel.x=300-this._rebornTitleLabel.width;this._rebornTitleLabel.y=395;this._totalTitleLabel=
new egret.TextField;this._totalTitleLabel.text="\u5171                    \u8ba1:";this._totalTitleLabel.size=21;this._mainContainer.addChild(this._totalTitleLabel);this._totalTitleLabel.x=300-this._totalTitleLabel.width;this._totalTitleLabel.y=425;this._tipsLabel=new egret.TextField;this._tipsLabel.text="\u5c11\u4fa0\u52e4\u5b66\u82e6\u7ec3\uff0c\u5df2\u7ecf\u91cd\u751f\u7b2cN\u6b21\u3002";this._tipsLabel.textColor=65280;this._tipsLabel.size=21;this._mainContainer.addChild(this._tipsLabel);this._tipsLabel.x=
135;this._tipsLabel.y=460;this._holyCoin1=ResourceUtils.createBitmapFromSheet("holy_icon","commonRes");this._mainContainer.addChild(this._holyCoin1);this._holyCoin1.x=460-this._holyCoin1.width;this._holyCoin1.y=295;this._heroLvLabel=new egret.TextField;this._heroLvLabel.text="10";this._heroLvLabel.size=18;this._mainContainer.addChild(this._heroLvLabel);this._heroLvLabel.x=this._holyCoin1.x-this._heroLvLabel.width-5;this._heroLvLabel.y=305;this._heroLvLabel.anchorX=1;this._holyCoin2=ResourceUtils.createBitmapFromSheet("holy_icon",
"commonRes");this._mainContainer.addChild(this._holyCoin2);this._holyCoin2.x=460-this._holyCoin2.width;this._holyCoin2.y=325;this._stageLabel=new egret.TextField;this._stageLabel.text="20";this._stageLabel.size=18;this._mainContainer.addChild(this._stageLabel);this._stageLabel.x=this._holyCoin2.x-this._stageLabel.width-5;this._stageLabel.y=335;this._stageLabel.anchorX=1;this._holyCoin3=ResourceUtils.createBitmapFromSheet("holy_icon","commonRes");this._mainContainer.addChild(this._holyCoin3);this._holyCoin3.x=
460-this._holyCoin3.width;this._holyCoin3.y=355;this._teamLabel=new egret.TextField;this._teamLabel.text="30";this._teamLabel.size=18;this._mainContainer.addChild(this._teamLabel);this._teamLabel.x=this._holyCoin3.x-this._stageLabel.width-5;this._teamLabel.y=365;this._teamLabel.anchorX=1;this._holyCoin4=ResourceUtils.createBitmapFromSheet("holy_icon","commonRes");this._mainContainer.addChild(this._holyCoin4);this._holyCoin4.x=460-this._holyCoin4.width;this._holyCoin4.y=385;this._rebornLabel=new egret.TextField;
this._rebornLabel.text="40";this._rebornLabel.size=18;this._mainContainer.addChild(this._rebornLabel);this._rebornLabel.x=this._holyCoin4.x-this._rebornLabel.width-5;this._rebornLabel.y=395;this._rebornLabel.anchorX=1;this._holyCoin5=ResourceUtils.createBitmapFromSheet("holy_icon","commonRes");this._mainContainer.addChild(this._holyCoin5);this._holyCoin5.x=460-this._holyCoin5.width;this._holyCoin5.y=415;this._holyCoin1.scaleX=this._holyCoin1.scaleY=0.65;this._holyCoin2.scaleX=this._holyCoin2.scaleY=
0.65;this._holyCoin3.scaleX=this._holyCoin3.scaleY=0.65;this._holyCoin4.scaleX=this._holyCoin4.scaleY=0.65;this._holyCoin5.scaleX=this._holyCoin5.scaleY=0.65;this._totalLabel=new egret.TextField;this._totalLabel.text="50";this._totalLabel.size=18;this._mainContainer.addChild(this._totalLabel);this._totalLabel.x=this._holyCoin5.x-this._totalLabel.width-5;this._totalLabel.y=425;this._totalLabel.anchorX=1;this._btnNoContainer=new SimpleButton;this._btnNoContainer.anchorX=this._btnNoContainer.anchorY=
0.5;this._mainContainer.addChild(this._btnNoContainer);this._btnNoContainer.x=160;this._btnNoContainer.y=530;this._btnNoContainer.useZoomOut(!0);this._btnNoContainer.addOnClick(this.refuseHandler,this);a=ResourceUtils.createBitmapFromSheet("pay_btn","commonRes");this._btnNoContainer.addChild(a);this._btnNoTitle=new egret.TextField;this._btnNoTitle.text="\u53d6 \u6d88";this._btnNoTitle.size=28;this._btnNoTitle.textColor=0;this._btnNoTitle.x=Math.floor((this._btnNoContainer.width-this._btnNoTitle.width)/
2);this._btnNoTitle.y=18;this._btnNoContainer.addChild(this._btnNoTitle);this._btnYesContainer=new SimpleButton;this._btnYesContainer.anchorX=this._btnYesContainer.anchorY=0.5;this._mainContainer.addChild(this._btnYesContainer);this._btnYesContainer.x=430;this._btnYesContainer.y=530;this._btnYesContainer.useZoomOut(!0);this._btnYesContainer.addOnClick(this.onConfirmHandler,this);a=ResourceUtils.createBitmapFromSheet("big_long_btn","commonRes");this._btnYesContainer.addChild(a);this._btnYesTitle=new egret.TextField;
this._btnYesTitle.text="\u91cd \u751f";this._btnYesTitle.size=28;this._btnYesTitle.textColor=0;this._btnYesTitle.x=Math.floor((this._btnYesContainer.width-this._btnYesTitle.width)/2);this._btnYesTitle.y=18;this._btnYesContainer.addChild(this._btnYesTitle)};b.refreshView=function(){var a=HeroController.getInstance().getHeroList(),b=0,c=DataCenter.getInstance().totalData.currentLevel,d=0;80<c&&(d=Math.floor((1+Math.floor(c-80)/15)*Math.floor((c-80)/15)/2));for(var c=2,g=0;g<a.length;g++)if(b+=Math.floor(a[g].lv/
1E3),a[g].isDead()){c=1;break}a=applyFilters(Const.GET_HOLY_EFFECT,getApplyString(19));g=0;g=a!=getApplyString(19)?g+a:0;this._tipsLabel.text="\u5c11\u4fa0\u52e4\u5b66\u82e6\u7ec3\uff0c\u5df2\u7ecf\u91cd\u751f\u7b2c"+DataCenter.getInstance().totalData.currentLife+"\u6b21\u3002";this._heroLvLabel.text=b.toString();this._stageLabel.text=d.toString();this._teamLabel.text=2==c?""+(b+d):"0";ActivityManager.getInstance().isActivityOpen(ActivityType.yuMore)?(this._totalLabel.text=Math.floor(c*(b+d)*(1+g)*
1.2).toString(),this._awardNum=Math.floor(c*(b+d)*(1+g)*1.2)):(this._totalLabel.text=Math.floor(c*(b+d)*(1+g)).toString(),this._awardNum=Math.floor(c*(b+d)*(1+g)));this._rebornLabel.text=0==g?"0":""+Math.floor(c*(b+d)*g)};b.refuseHandler=function(){this.onCloseHandler()};b.onConfirmHandler=function(){for(var a={},b=DataCenter.getInstance().totalData.rebornSkillList,c=0;c<b.length;c++)a[b[c].id]=b[c].lv;a.life=DataCenter.getInstance().totalData.currentLife;this._data.lvs=a;this._data.o=DataCenter.getInstance().getHolyNum();
this._data.a=this._awardNum;ProxyUtils.reborn(this._data,this.realReborn,this)};b.realReborn=function(a){DataCenter.getInstance().totalData.hyList.push(this._awardNum);10<DataCenter.getInstance().totalData.hyList.length&&DataCenter.getInstance().totalData.hyList.shift();DataCenter.getInstance().statistics.addValue(StatisticsType.rechargeHolyNum,this._awardNum.toString());a&&a.num?(DataCenter.getInstance().SaveHolyNum(a.num),DataCenter.getInstance().addALog("rebornSet"+a.num)):(DataCenter.getInstance().changeHolyNum(this._awardNum),
DataCenter.getInstance().addALog("reborn"+this._awardNum));DataCenter.getInstance().resetGame();GameUtils.setRebornAward();this.onCloseHandler()};b.onCloseHandler=function(){GameMainLayer.instance.hideResetGameLayer()};return d}(BoxContainer);ResetGameConfirmLayer.prototype.__class__="ResetGameConfirmLayer";
var SeriesRechargeLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=ResourceUtils.createBitmapByName("achieve_bg");a.touchEnabled=!0;a.y=GameUtils.getPosY(0);this.addChild(a);this.initTableView();a=new SimpleButton;a.addOnClick(this.onCloseHandler,this);a.x=610;a.y=GameUtils.getPosY(75);a.anchorX=a.anchorY=0.5;a.useZoomOut(!0);a.addChild(ResourceUtils.createBitmapFromSheet("close_btn"));this.addChild(a);this.initUpContainer();
addAction("recharge_series_change",this.refreshView,this)};b.initUpContainer=function(){var a=new egret.DisplayObjectContainer;this.addChild(a);a.y=GameUtils.getPosY(298);var b=ResourceUtils.createBitmapFromSheet("everyRechger","commonRes");b.x=210;b.y=-173;a.addChild(b);b=ResourceUtils.createBitmapFromSheet("item_split","commonRes");b.x=5;b.y=-40;a.addChild(b);this._label1=new egret.TextField;this._label1.size=24;this._label1.x=20;this._label1.y=-110;this._label1.text="\u6d3b\u52a8\u5269\u4f59\u65f6\u95f4:";
a.addChild(this._label1);this._timeLabel=new egret.TextField;this._timeLabel.size=24;this._timeLabel.x=200;this._timeLabel.y=-110;this._timeLabel.textColor=4834056;a.addChild(this._timeLabel);this._label2=new egret.TextField;this._label2.size=24;this._label2.x=20;this._label2.y=-70;this._label2.text="\u8fde\u7eed\u5145\u503c\u5929\u6570:";a.addChild(this._label2);this._seriesLabel=new egret.TextField;this._seriesLabel.size=24;this._seriesLabel.x=200;this._seriesLabel.y=-70;this._seriesLabel.textColor=
15883252;a.addChild(this._seriesLabel);this._tipsLabel=new egret.TextField;this._tipsLabel.size=20;this._tipsLabel.bold=!0;this._tipsLabel.x=20;this._tipsLabel.y=-60;this._tipsLabel.textColor=16711680;this._tipsLabel.text="\u5355\u5929\u7d2f\u8ba1\u5145\u503c\u8fbe6\u5143\u5373\u53ef\u9886\u53d6\u5956\u52b1";a.addChild(this._tipsLabel);this._rechargeBtn=new NormalButton;this._rechargeBtn.setLabel("\u5145\u503c");this._rechargeBtn.x=500;this._rechargeBtn.y=-70;this._rechargeBtn.addOnClick(this.onRechargeHandler,
this);a.addChild(this._rechargeBtn);this._rechargeBtn.setEnable(!0);a.cacheAsBitmap=!0;addAction(Const.RECHARGE_DAY_CHANGE,this.dayChange,this);this._timeID=Time.setInterval(this.countDown,this,6E4);this.countDown();this.dayChange();this.setLabelStatus()};b.setLabelStatus=function(){1==ProxyUtils.rechargeActivityType?(this._label1.y=this._timeLabel.y=-110,this._label2.y=this._seriesLabel.y=-70,this._tipsLabel.visible=!1):(this._label1.y=this._timeLabel.y=-120,this._label2.y=this._seriesLabel.y=-90,
this._tipsLabel.visible=!0)};b.initTableView=function(){this._tableView=new TableView;this._tableView.y=GameUtils.getPosY(280);this._tableView.x=5;this.addChild(this._tableView);this._tableView.width=GameUtils.getWinWidth();this._tableView.height=650;this.refreshView()};b.refreshView=function(){for(var a=[{id:"1000011",num:1,coin:1E4,name:"\u7d2b\u6676\u706b",day:1},{id:1E3,num:5,coin:2E4,name:"\u9b42\u7389",day:2},{id:"1000026",num:1,coin:3E4,name:"\u91d1\u87fe",day:3},{id:1E3,num:10,coin:4E4,name:"\u9b42\u7389",
day:4},{id:"1000041",num:1,coin:5E4,name:"\u96fe\u96e8",day:5},{id:1E3,num:15,coin:8E4,name:"\u9b42\u7389",day:6},{id:1E3,num:20,coin:1E6,name:"\u9b42\u7389",day:7}],b=parseInt(ProxyUtils.rechargeData.status).toString(2);8>b.length;)b="0"+b;var c=a.filter(function(a){return"1"==b.charAt(7-a.day)}),a=a.filter(function(a){return"0"==b.charAt(7-a.day)});this._tableView.setList(a.concat(c),Direction.VERTICAL,this,GameUtils.getWinWidth(),160)};b.createItemRenderer=function(){return new SeriesItemLayer};
b.updateItemRenderer=function(a,b,c){a.refreshView(b,c)};b.countDown=function(){var a=(new Date).getTime()-DataCenter.getInstance().gameStartTime;this._timeLabel.text=GameUtils.formatTime4(ProxyUtils.rechargeEndTime-(ProxyUtils.currentTime+a))};b.dayChange=function(){this._seriesLabel.text=ProxyUtils.rechargeData.days.toString()};b.onRechargeHandler=function(){GameMainLayer.instance.showPaymentRecommendLayer()};b.onCloseHandler=function(){GameMainLayer.instance.hideSeriesLayer()};b.dispose=function(){c.prototype.dispose.call(this);
removeEventsByTarget(this)};return d}(BoxContainer);SeriesRechargeLayer.prototype.__class__="SeriesRechargeLayer";
var SeriesItemLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=new egret.DisplayObjectContainer;this.addChild(a);var b=ResourceUtils.createBitmapFromSheet("bg_seriesRecharge");a.addChild(b);this._btn=new NormalButton;this._btn.x=510;this._btn.y=100;this._btn.addOnClick(this.awardHandler,this);a.addChild(this._btn);this._spr=ResourceUtils.createBitmapFromSheet("achieve_fh");this._spr.x=480;this._spr.y=40;a.addChild(this._spr);
this._label=new egret.TextField;this._label.x=50;this._label.y=10;this._label.size=26;a.addChild(this._label);this._iconContainer=new egret.DisplayObjectContainer;a.addChild(this._iconContainer);this._iconContainer.x=80;this._iconContainer.y=70;b=ResourceUtils.createBitmapFromSheet("coin_icon");a.addChild(b);b.x=220;b.y=50;this._numLabel=new egret.TextField;this._numLabel.x=90;this._numLabel.y=110;this._numLabel.size=26;this._numLabel.anchorX=0.5;a.addChild(this._numLabel);this._coinLabel=new egret.TextField;
this._coinLabel.x=200;this._coinLabel.y=110;this._coinLabel.size=26;a.addChild(this._coinLabel);a.cacheAsBitmap=!0};b.awardHandler=function(){ProxyUtils.getRechargeAward(this._data.day,this.awardDone,this)};b.awardDone=function(){ProxyUtils.rechargeData.status+=Math.pow(2,this._data.day);DataCenter.getInstance().changeSc(this._data.coin);1E3==this._data.id?(DataCenter.getInstance().changeHolyNum(this._data.num),DataCenter.getInstance().addALog("series"+this._data.num)):(DataCenter.getInstance().buyEquip(this._data.id),
DataCenter.getInstance().saveLocalData(),DataCenter.getInstance().saveData());doAction(Const.SHOW_TIPS,"\u9886\u5956\u6210\u529f");doAction("recharge_series_change")};b.refreshView=function(a,b){this._data=a;this._idx=b;for(var c=parseInt(ProxyUtils.rechargeData.status).toString(2);8>c.length;)c="0"+c;this._spr.visible=!1;this._btn.visible=!0;"1"==c.charAt(7-this._data.day)?(this._spr.visible=!0,this._btn.visible=!1):ProxyUtils.rechargeData.days>=this._data.day?(this._btn.setLabel("\u9886\u53d6"),
this._btn.setEnable(!0)):(this._btn.setLabel("\u672a\u8fbe\u6210"),this._btn.setEnable(!1));this._label.text="\u8fde\u7eed\u5145\u503c"+this._data.day+"\u5929,\u53ef\u9886\u53d6:";this._coinLabel.text="x"+a.coin;this._numLabel.text=a.name+"x"+a.num;this._iconContainer.removeChildren();1E3==a.id?c=ResourceUtils.createBitmapFromSheet("holy_icon"):(c=ResourceUtils.createBitmapFromSheet("equip_"+a.id,"equipRes"),c.scaleX=c.scaleY=0.5);c.anchorX=c.anchorY=0.5;this._iconContainer.addChild(c)};return d}(BaseContainer);
SeriesItemLayer.prototype.__class__="SeriesItemLayer";
var StatisticsLayer=function(c){function d(){c.call(this);this._currentList=[];this._totalList=[];this._timeID=-1;this.initView()}__extends(d,c);var b=d.prototype;b.close=function(){Time.clearInterval(this._timeID);GameMainLayer.instance.hideStatisticsLayer()};b.initView=function(){var a=ResourceUtils.createBitmapByName("achieve_bg");a.touchEnabled=!0;a.y=GameUtils.getPosY(0);this.addChild(a);var b=ResourceUtils.createBitmapFromSheet("data_statistics","commonRes");b.x=210;b.y=GameUtils.getPosY(52);
this.addChild(b);this._scrollView=new ScrollView;this._scrollView.width=a.width;this._scrollView.height=750;this._scrollView.x=0;this._scrollView.y=GameUtils.getPosY(180);this._scrollView.direction=Direction.VERTICAL;this.addChild(this._scrollView);b=new SimpleButton;b.addOnClick(this.close,this);b.x=610;b.y=GameUtils.getPosY(75);b.anchorX=b.anchorY=0.5;b.useZoomOut(!0);b.addChild(ResourceUtils.createBitmapFromSheet("close_btn"));this.addChild(b);this._currentContainer=new egret.DisplayObjectContainer;
this.addChild(this._currentContainer);this._currentContainer.y=GameUtils.getPosY(0);this._currentTitle=new egret.TextField;this._currentTitle.text="\u5f53\u524d";this._currentTitle.x=30;this._currentTitle.y=0;this._currentTitle.size=34;this._currentContainer.addChild(this._currentTitle);this._allHeroTitle=new egret.TextField;this._allHeroTitle.text="\u6240\u6709\u82f1\u96c4\u7b49\u7ea7\uff1a";this._currentList.push(this._allHeroTitle);this._allHeroLabel=new egret.TextField;this._allHeroLabel.text=
"100";this._currentList.push(this._allHeroLabel);this._crlRateTitle=new egret.TextField;this._crlRateTitle.text="\u66b4\u51fb\u7387\uff1a";this._currentList.push(this._crlRateTitle);this._crlRateLabel=new egret.TextField;this._crlRateLabel.text="0.01";this._currentList.push(this._crlRateLabel);this._dpsAddTitle=new egret.TextField;this._dpsAddTitle.text="\u79d2\u4f24\u52a0\u6210";this._currentList.push(this._dpsAddTitle);this._dpsAddLabel=new egret.TextField;this._dpsAddLabel.text="100";this._currentList.push(this._dpsAddLabel);
this._crlAddTitle=new egret.TextField;this._crlAddTitle.text="\u66b4\u51fb\u52a0\u6210";this._currentList.push(this._crlAddTitle);this._crlAddLabel=new egret.TextField;this._crlAddLabel.text="100";this._currentList.push(this._crlAddLabel);this._allscTitle=new egret.TextField;this._allscTitle.text="\u6240\u6709\u94dc\u94b1\u52a0\u6210";this._currentList.push(this._allscTitle);this._allscLabel=new egret.TextField;this._allscLabel.text="100";this._currentList.push(this._allscLabel);this._exholyTitle=
new egret.TextField;this._exholyTitle.text="\u4e0a\u6b21\u5151\u6362\u9b42\u7389\u540e\u65f6\u95f4";this._currentList.push(this._exholyTitle);this._exholyLabel=new egret.TextField;this._exholyLabel.text="00:00";this._currentList.push(this._exholyLabel);this.initContainer(this._currentList,60,this._currentContainer);b=ResourceUtils.createBitmapFromSheet("item_split","commonRes");b.x=5;b.y=298;this._currentContainer.addChild(b);this._totalTitle=new egret.TextField;this._totalTitle.text="\u7d2f\u8ba1";
this._totalTitle.x=30;this._totalTitle.y=320;this._totalTitle.size=34;this._currentContainer.addChild(this._totalTitle);this._totalScTitle=new egret.TextField;this._totalScTitle.text="\u6240\u6709\u94dc\u94b1\uff1a";this._totalList.push(this._totalScTitle);this._totalScLabel=new egret.TextField;this._totalScLabel.text="100";this._totalList.push(this._totalScLabel);this._totalClickTitle=new egret.TextField;this._totalClickTitle.text="\u6240\u6709\u70b9\u51fb\uff1a";this._totalList.push(this._totalClickTitle);
this._totalClickLabel=new egret.TextField;this._totalClickLabel.text="100";this._totalList.push(this._totalClickLabel);this._killEnemyTitle=new egret.TextField;this._killEnemyTitle.text="\u51fb\u6740\u654c\u4eba\u603b\u6570";this._totalList.push(this._killEnemyTitle);this._killEnemyLabel=new egret.TextField;this._killEnemyLabel.text="100";this._totalList.push(this._killEnemyLabel);this._killBossTitle=new egret.TextField;this._killBossTitle.text="\u51fb\u6740\u5934\u76ee\u603b\u6570";this._totalList.push(this._killBossTitle);
this._killBossLabel=new egret.TextField;this._killBossLabel.text="100";this._totalList.push(this._killBossLabel);this._totalCrlTitle=new egret.TextField;this._totalCrlTitle.text="\u66b4\u51fb\u603b\u6570";this._totalList.push(this._totalCrlTitle);this._totalCrlLabel=new egret.TextField;this._totalCrlLabel.text="1000";this._totalList.push(this._totalCrlLabel);this._boxTitle=new egret.TextField;this._boxTitle.text="\u5f00\u542f\u5b9d\u7bb1";this._totalList.push(this._boxTitle);this._boxLabel=new egret.TextField;
this._boxLabel.text="100";this._totalList.push(this._boxLabel);this._maxLvTitle=new egret.TextField;this._maxLvTitle.text="\u6700\u9ad8\u7b49\u7ea7";this._totalList.push(this._maxLvTitle);this._maxLvLabel=new egret.TextField;this._maxLvLabel.text="111";this._totalList.push(this._maxLvLabel);this._totalExholyTitle=new egret.TextField;this._totalExholyTitle.text="\u5171\u8ba1\u5151\u6362\u9b42\u7389";this._totalList.push(this._totalExholyTitle);this._totalExholyLabel=new egret.TextField;this._totalExholyLabel.text=
"100";this._totalList.push(this._totalExholyLabel);this._exholyLostScTitle=new egret.TextField;this._exholyLostScTitle.text="\u5151\u6362\u9b42\u7389\u5931\u53bb\u7684\u94dc\u94b1\u603b\u6570";this._totalList.push(this._exholyLostScTitle);this._exholyLostScLabel=new egret.TextField;this._exholyLostScLabel.text="100";this._totalList.push(this._exholyLostScLabel);this._exholyLostDpsTitle=new egret.TextField;this._exholyLostDpsTitle.text="\u5151\u6362\u9b42\u7389\u5931\u53bb\u7684\u79d2\u4f24\u603b\u6570";
this._totalList.push(this._exholyLostDpsTitle);this._exholyLostDpsLabel=new egret.TextField;this._exholyLostDpsLabel.text="100";this._totalList.push(this._exholyLostDpsLabel);this._playDayTitle=new egret.TextField;this._playDayTitle.text="\u6e38\u620f\u5929\u6570";this._totalList.push(this._playDayTitle);this._playDayLabel=new egret.TextField;this._playDayLabel.text="100";this._totalList.push(this._playDayLabel);this._playTimeTitle=new egret.TextField;this._playTimeTitle.text="\u6e38\u620f\u65f6\u95f4";
this._totalList.push(this._playTimeTitle);this._playTimeLabel=new egret.TextField;this._playTimeLabel.text="48:00:21";this._totalList.push(this._playTimeLabel);this._shengwuTitle=new egret.TextField;this._shengwuTitle.text="\u795e\u5175";this._totalList.push(this._shengwuTitle);this._shengwuLabel=new egret.TextField;this._shengwuLabel.text="100";this._totalList.push(this._shengwuLabel);this._girlTitle=new egret.TextField;this._girlTitle.text="\u4ed9\u5973\u5b9d\u7bb1";this._totalList.push(this._girlTitle);
this._girlLabel=new egret.TextField;this._girlLabel.text="100";this._totalList.push(this._girlLabel);this.initContainer(this._totalList,380,this._currentContainer);this._currentContainer.cacheAsBitmap=!0;this._scrollView.setContainer(this._currentContainer,a.width,1050);this._idLabel=new egret.TextField;this._idLabel.x=80;this._idLabel.y=GameUtils.getPosY(130);this._idLabel.size=28;this.addChild(this._idLabel);this._idLabel.text="\u73a9\u5bb6ID:"+ProxyUtils.userId};b.initContainer=function(a,b,c){for(var d in a){var g=
Math.floor(d/2);1==d%2?(a[d].x=610,a[d].anchorX=1,a[d].size=28,a[d].textColor=14447689):(a[d].x=30,a[d].size=28,a[d].textColor=16777215);a[d].y=b+30*g+10*g;c.addChild(a[d])}};b.createLabelContainer=function(){this._labelContainer=new egret.DisplayObjectContainer};b.refreshView=function(){this._allHeroLabel.text=this.getTotalHeroLevel().toString();this._crlRateLabel.text=this.getCritPro();this._dpsAddLabel.text=this.getDPSAdd();this._crlAddLabel.text=this.getCritAdd();this._allscLabel.text=this.getGoldAdd();
this._exholyLabel.text=this.getLastReborn();this._totalScLabel.text=this.getTotalSc();this._totalClickLabel.text=this.getClickNum().toString();this._killEnemyLabel.text=this.killMonsterNum().toString();this._killBossLabel.text=this.killBossNum().toString();this._totalCrlLabel.text=this.getCritNum().toString();this._boxLabel.text=this.getBoxNum().toString();this._maxLvLabel.text=this.getMaxLv().toString();this._totalExholyLabel.text=this.getTotalRechargeHolyNum().toString();this._exholyLostScLabel.text=
this.getLoseGoldNum().toString();this._exholyLostDpsLabel.text=this.getLoseDPS().toString();this._playDayLabel.text=this.getGameDay();this._playTimeLabel.text=this.getOnlineTime();this._shengwuLabel.text=this.getHolyNum().toString();this._girlLabel.text=this.getGiftNum().toString();this._timeID=Time.setInterval(this.refreshTime,this,1E3)};b.refreshTime=function(){this._exholyLabel.text=this.getLastReborn();this._playTimeLabel.text=this.getOnlineTime()};b.getTotalHeroLevel=function(){var a=DataCenter.getInstance().totalData.heroList,
b=0,c;for(c in a)b+=a[c].lv;return b};b.getCritPro=function(){var a=HeroController.getInstance().mainHero.critPro;return 10<(100*a).toString().length?(100*a).toFixed(2)+"%":100*a+"%"};b.getDPSAdd=function(){for(var a=HeroController.getInstance().mainHero,a=SkillController.getInstance().getAdditionByHeroModel(a),b=0,c=0;c<a.length;c++)4==a[c].getEffectType()&&(b+=a[c].getValue());return 10<b.toString().length?(100*b).toFixed(2)+"%":100*b+"%"};b.getCritAdd=function(){return 100*HeroController.getInstance().mainHero.critHurt+
"%"};b.getGoldAdd=function(){return(100*(DataCenter.getInstance().getDropCoinAdd()-1)).toFixed(0)+"%"};b.getLastReborn=function(){var a=DataCenter.getInstance().statistics.getDataByType(StatisticsType.rebornTime);if(0==a)return"0";var b=(new Date).getTime();return GameUtils.formatTime1(Math.floor((b-a)/1E3))};b.getTotalSc=function(){return DataCenter.getInstance().getScNum()};b.getClickNum=function(){return DataCenter.getInstance().statistics.getValue(StatisticsType.tap)};b.killMonsterNum=function(){return DataCenter.getInstance().statistics.getValue(StatisticsType.enemy)};
b.killBossNum=function(){return DataCenter.getInstance().statistics.getValue(StatisticsType.boss)};b.getCritNum=function(){return DataCenter.getInstance().statistics.getValue(StatisticsType.crit)};b.getBoxNum=function(){return DataCenter.getInstance().statistics.getValue(StatisticsType.openbox)};b.getMaxLv=function(){var a=DataCenter.getInstance().statistics.getValue(StatisticsType.maxLv);if("0"==a)return"1";var b=new NumberModel;b.add(a);return b.getData()};b.getTotalRechargeHolyNum=function(){return DataCenter.getInstance().statistics.getValue(StatisticsType.rechargeHolyNum)};
b.getLoseGoldNum=function(){return DataCenter.getInstance().statistics.getValue(StatisticsType.loseSc)};b.getLoseDPS=function(){return DataCenter.getInstance().statistics.getValue(StatisticsType.loseDPS)};b.getGameDay=function(){var a=DataCenter.getInstance().totalData.gameTime;return GameUtils.formatDay(a)};b.getOnlineTime=function(){var a=DataCenter.getInstance().statistics.getDataByType(StatisticsType.onLineTime);return GameUtils.formatTime4(1E3*a)};b.getHolyNum=function(){return DataCenter.getInstance().getHolyNum()};
b.getGiftNum=function(){return DataCenter.getInstance().statistics.getValue(StatisticsType.gift)};b.shareFriend=function(){console.log("\u5206\u4eab\u5fae\u4fe1")};return d}(BoxContainer);StatisticsLayer.prototype.__class__="StatisticsLayer";
var StopServiceLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){MainTickController.getInstance().isPause=!0;var a=egret.DynamicBitmap.create("paymen_recommend");this.boxContainer.addChild(a);a.x=24;a.y=300;this._label=new egret.TextField;this.boxContainer.addChild(this._label);this._label.width=500;this._label.size=24;this._label.x=75;this._label.y=400;this._label.textColor=0;this._label.lineSpacing=10};b.refreshView=function(a){this._label.text=
a};b.dispose=function(){c.prototype.dispose.call(this)};return d}(BoxContainer);StopServiceLayer.prototype.__class__="StopServiceLayer";
var SupriseLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this._container=new egret.DisplayObjectContainer;var a=egret.DynamicBitmap.create("suprise_bg");a.x=18;a.y=-100;this._container.addChild(a);this.boxContainer.addChild(this._container);a=new egret.TextField;a.text="\u606d\u559c\u60a8\u83b7\u5f97 \u201c\u7545\u68a6\u6e38\u620f\u201d \u65b0\u6625\u5927\u793c\u5305";a.size=26;a.x=60;a.y=300;this._container.addChild(a);this._label1=
new egret.TextField;this._label1.textFlow=(new egret.HtmlTextParser).parser('\u5173\u6ce8\u5fae\u4fe1\u53f7:<font color="0xff0000">changmengyouxi</font>');this._label1.size=26;this._label1.x=60;this._label1.y=350;this._container.addChild(this._label1);this._label2=new egret.TextField;this._label2.size=26;this._label2.x=60;this._label2.y=400;this._container.addChild(this._label2);this._label3=new egret.TextField;this._label3.size=26;this._label3.x=60;this._label3.y=450;this._container.addChild(this._label3);
this._label3.text="\u9886\u53d6\u65b9\u5f0f\u975e\u5e38\u7b80\u5355\uff1a";a=new egret.TextField;a.size=22;a.text="1\u3001\u9a6c\u4e0a\u5c06\u672c\u5c4f\u5e55\u622a\u56fe\n2\u3001\u5173\u6ce8\u6211\u4eec\u5fae\u4fe1\u516c\u4f17\u53f7\uff0c\u5e76\u7ed9\u6211\u4eec\u53d1\u9001\u201c\u65b0\u6625\u5927\u793c\u5305\u201d\n\u5c31\u53ef\u4ee5\u5566\uff0c\u7b80\u5355\u5427~";a.x=60;a.lineSpacing=10;a.y=500;this._container.addChild(a);this._container.cacheAsBitmap=!0;var a=new SimpleButton,b=ResourceUtils.createBitmapFromSheet("close_btn",
"commonRes");a.addChild(b);a.addOnClick(this.onClickHandler,this);a.x=543;a.y=170;a.useZoomOut(!0);this.boxContainer.addChild(a);this.boxContainer.addChild(GameUtils.createButton("\u53bb\u9886\u5956\u5566","unlock_skill_btn",this.gotoAward,165,650,171,69,0,-5,0));this.boxContainer.addChild(GameUtils.createButton("\u5206\u4eab\u7ed9\u670b\u53cb","share_btn_2",this.shareFriend,440,650,250,83,32,-3))};b.gotoAward=function(){GameUtils.notEmpty(ProxyUtils.boxUrl)&&(location.href=ProxyUtils.boxUrl)};b.shareFriend=
function(){doAction(Const.AWARD_BOX_TIP)};b.onClickHandler=function(){GameMainLayer.instance.hideSupriseLayer()};b.refreshView=function(a){this._label1.textFlow=(new egret.HtmlTextParser).parser('\u5956\u54c1\uff1a<font color="0xff0000">'+ProxyUtils.awdTo.awddes+"</font>");this._label2.textFlow=(new egret.HtmlTextParser).parser('\u5151\u6362\u7801\uff1a<font color="0xff0000">'+ProxyUtils.awdTo.code+"</font>")};return d}(BoxContainer);SupriseLayer.prototype.__class__="SupriseLayer";
var TipsContainer=function(c){function d(){c.call(this)}__extends(d,c);d.prototype.showMessage=function(b){for(var a=0;a<this.numChildren;a++)this.getChildAt(a).y-=50;a=new TipsLabel;a.showAnimation(b);this.addChild(a)};return d}(BaseContainer);TipsContainer.prototype.__class__="TipsContainer";
var TipsLabel=function(c){function d(){c.call(this);this.anchorX=0.5}__extends(d,c);d.prototype.showAnimation=function(b){var a=this;this.x=0;var c=ResourceUtils.createBitmapByName("share_input_bg");c.scaleX=0.8;c.scaleY=0.8;c.alpha=0.5;this.addChild(c);c=new egret.TextField;c.anchorX=0.5;c.x=188;c.y=10;this.addChild(c);c.text=b;egret.Tween.get(this).to({x:320},200,egret.Ease.backOut).wait(5E3).call(function(){GameUtils.removeFromParent(a)})};return d}(egret.DisplayObjectContainer);
TipsLabel.prototype.__class__="TipsLabel";var CardTipsContainer=function(c){function d(){c.call(this)}__extends(d,c);d.prototype.showMessage=function(b){for(var a=0;a<this.numChildren;a++)this.getChildAt(a).y-=50;a=new TipsLabel;a.showAnimation(b);this.addChild(a)};return d}(BaseContainer);CardTipsContainer.prototype.__class__="CardTipsContainer";
var TopListLayer=function(c){function d(){c.call(this);this._tabList={};this._topType="lv";this.isFirstEnter=this.isDefalut=!0;this.listBtnTxt=[];this.timeCount=0;this.listBtn=[];this.init()}__extends(d,c);var b=d.prototype;b.close=function(){GameMainLayer.instance.hideTopListLayer()};b.init=function(){var a=egret.DynamicBitmap.create("achieve_bg");a.touchEnabled=!0;a.y=GameUtils.getPosY(0);this.addChild(a);a=new SimpleButton;a.addOnClick(this.close,this);a.x=610;a.y=GameUtils.getPosY(75);a.anchorX=
a.anchorY=0.5;a.useZoomOut(!0);a.addChild(ResourceUtils.createBitmapFromSheet("close_btn"));this.addChild(a);this._infoContainer=new egret.DisplayObjectContainer;this.addChild(this._infoContainer);this._infoContainer.y=GameUtils.getPosY(0);a=ResourceUtils.createBitmapFromSheet("top_rank","commonRes");a.x=325;a.y=65;a.anchorX=a.anchorY=0.5;this._infoContainer.addChild(a);this._desc=new egret.TextField;this._desc.text="\u95ef\u5173\u6700\u9ad8\u7684\u524d10\u540d";this._desc.textColor=16777215;this._desc.size=
28;this._desc.x=30;this._desc.y=130;this._infoContainer.addChild(this._desc);this._refreshBtn=new SimpleButton;this._refreshBtn.x=520;this._refreshBtn.y=GameUtils.getPosY(114);this._refreshBtn.anchorX=this._refreshBtn.anchorX=0.5;this._refreshBtn.useZoomOut(!0);this._refreshBtn.addOnClick(this.refreshHandler,this);a=ResourceUtils.createBitmapFromSheet("top_refresh","commonRes");this._refreshBtn.addChild(a);this._btnLabel=new egret.TextField;this._btnLabel.text="\u5237  \u65b0";this._btnLabel.x=520;
this._btnLabel.y=GameUtils.getPosY(140);this._btnLabel.anchorX=this._btnLabel.anchorY=0.5;this._btnLabel.textColor=16777215;this._btnLabel.size=26;this.addChild(this._refreshBtn);this.addChild(this._btnLabel);this._lvTab=new SimpleButton;this._lvTab.addOnClick(this.pressTab,this);this._scTab=new SimpleButton;this._scTab.addOnClick(this.pressTab,this);this._dpsTab=new SimpleButton;this._dpsTab.addOnClick(this.pressTab,this);this._gloryTab=new SimpleButton;this._gloryTab.addChild(ResourceUtils.createBitmapFromSheet("pay_btn"));
this._gloryTab.setFontText("\u6392\u884c\u699c",26);this._gloryTab.addOnClick(this.changeRank,this);this.listBtn.push(this._lvTab);this.listBtn.push(this._scTab);this.listBtn.push(this._dpsTab);this._lvTab.y=this._scTab.y=this._dpsTab.y=this._gloryTab.y=GameUtils.getPosY(190);this._lvTab.x=35;this._scTab.x=180;this._dpsTab.x=325;this._gloryTab.x=470;this._lvTab.scaleX=this._lvTab.scaleY*=0.8;this._scTab.scaleX=this._scTab.scaleY*=0.8;this._dpsTab.scaleX=this._dpsTab.scaleY*=0.8;this._gloryTab.scaleX=
this._gloryTab.scaleY*=0.8;this.createTopTabItem(this._lvTab,0);this.createTopTabItem(this._scTab,0);this.createTopTabItem(this._dpsTab,0);this.isDefalut=!1;this.changeRank();this.isFirstEnter=!1;this._splitSpr1=ResourceUtils.createBitmapFromSheet("item_split","commonRes");this._splitSpr1.x=5;this._splitSpr1.y=GameUtils.getPosY(270);this.addChild(this._splitSpr1);this.addChild(this._lvTab);this.addChild(this._scTab);this.addChild(this._dpsTab);this.addChild(this._gloryTab);this._selfItem=new TopItemLayer("self");
this._selfItem.x=13;this._selfItem.y=GameUtils.getPosY(290);this._splitSpr=ResourceUtils.createBitmapFromSheet("item_split","commonRes");this._splitSpr.x=5;this._splitSpr.y=GameUtils.getPosY(393);this.addChild(this._selfItem);this.addChild(this._splitSpr);this._topTable=new TableView;this._topTable.y=GameUtils.getPosY(415);this._topTable.x=13;this.addChild(this._topTable);this._topTable.width=GameUtils.getWinWidth();this._topTable.height=550};b.changeRank=function(){var a=this;if(!(0<this.timeCount||
(this._topType="",this.listBtnTxt=[],this.isDefalut?(this.isDefalut=!1,this.createTopTabItem(this._lvTab,1),this.createTopTabItem(this._scTab,1),this.createTopTabItem(this._dpsTab,1),this.pressTab(this._lvTab),this._gloryTab.setFontText("\u8363\u8000\u699c",26)):(this.isDefalut=!0,this.createTopTabItem(this._lvTab,2),this.createTopTabItem(this._scTab,2),this.createTopTabItem(this._dpsTab,2),this.pressTab(this._lvTab),this._gloryTab.setFontText("\u6392\u884c\u699c",26)),this.isFirstEnter))){this.timeCount=
3;this._gloryTab.setFontText(this.timeCount.toString(),26);var b=Time.setInterval(function(){--a.timeCount;a._gloryTab.setFontText(a.timeCount.toString(),26);0==a.timeCount&&(Time.clearInterval(b),a.isDefalut?a._gloryTab.setFontText("\u6392\u884c\u699c",26):a._gloryTab.setFontText("\u8363\u8000\u699c",26))},this,1E3)}};b.createTopTabItem=function(a,b){void 0===b&&(b=0);if(0==b){var c=ResourceUtils.createBitmapFromSheet("top_tab_2","commonRes"),d=ResourceUtils.createBitmapFromSheet("top_tab_1","commonRes"),
g=new egret.TextField;g.name="btnName";g.size=30;g.textColor=0;a.addChild(c);a.addChild(d);a.addChild(g);g.anchorX=g.anchorY=0.5;g.x=a.width/2;g.y=a.height/2}else 1==b?(c=a.getChildByName("btnName"),c instanceof egret.TextField&&(this._lvTab==a?(c.text="\u95ef\u5173",this._tabList.lv=c.text):this._scTab==a?(c.text="\u94dc\u94b1",this._tabList.sc=c.text):this._dpsTab==a&&(c.text="\u79d2\u4f24",this._tabList.dps=c.text),this.listBtnTxt.push(c.text))):2==b&&(c=a.getChildByName("btnName"),c instanceof
egret.TextField&&(this._lvTab==a?(c.text="\u7d2f\u8ba1\u5145\u503c",this._tabList.money=c.text):this._scTab==a?(c.text="\u7d2f\u8ba1\u767b\u9646",this._tabList.days=c.text):this._dpsTab==a&&(c.text="\u91cd\u751f\u6b21\u6570",this._tabList.life=c.text),this.listBtnTxt.push(c.text)))};b.reload=function(){var a=new SingleProxy({mod:"Top","do":"getList",p:{type:this._topType}});a.addEventListener(ProxyEvent.RESPONSE_SUCCEED,this.refreshView,this);a.load()};b.refreshHandler=function(){this._refreshBtn.setEnabled(!1);
this._timeDown=10;this.timeDown();this._timeId=Time.setInterval(this.timeDown,this,1E3);this.reload()};b.timeDown=function(){this._btnLabel.text=this._timeDown.toString();0>=this._timeDown?(Time.clearInterval(this._timeId),this._refreshBtn.setEnabled(!0),this._btnLabel.text="\u5237  \u65b0"):this._timeDown-=1};b.refreshView=function(a){DataCenter.getInstance().topList=a.responseData.l;var b={};b.pic=ProxyUtils.playerHead;b.name=ProxyUtils.nickName?ProxyUtils.nickName:ProxyUtils.defaultNickName;b.top=
a.responseData.i.top;b.life=a.responseData.i.life;b.num=a.responseData.i.num;this._selfItem.refreshView(b,-1,this._topType);this._topTable.setList(DataCenter.getInstance().topList,Direction.VERTICAL,this,GameUtils.getWinWidth(),110);this.isDefalut?"money"==this._topType?this._desc.text="\u7d2f\u8ba1\u5145\u503c\u6700\u591a\u7684\u524d10\u540d":"days"==this._topType?this._desc.text="\u7d2f\u8ba1\u767b\u9646\u6700\u957f\u7684\u524d10\u540d":"life"==this._topType&&(this._desc.text="\u91cd\u751f\u6b21\u6570\u6700\u591a\u7684\u524d10\u540d"):
"lv"==this._topType?this._desc.text="\u95ef\u5173\u6700\u9ad8\u7684\u524d10\u540d":"sc"==this._topType?this._desc.text="\u6536\u96c6\u94dc\u94b1\u6700\u591a\u7684\u524d10\u540d":"dps"==this._topType&&(this._desc.text="\u4fa0\u5ba2\u79d2\u4f24\u6700\u9ad8\u7684\u524d10\u540d");this.showTab()};b.pressTab=function(a){var b=this;if(!(0<this.pressCountcodown)){var c="",d;for(d in this._tabList)if(this._tabList[d]==a.getChildByName("btnName").text){c=a.getChildByName("btnName").text;if(d==this._topType)return;
this._topType=d;break}this.pressCountcodown=3;var g=Time.setInterval(function(){b.setBtnTxt(c);--b.pressCountcodown;b.setBtnTxt(c);0>=b.pressCountcodown&&Time.clearInterval(g)},this,1E3);this.reload()}};b.showTab=function(){for(var a in this._tabList)if(a==this._topType)for(var b=0;b<this.listBtn.length;b++){var c=this.listBtn[b],d=c.getChildByName("btnName");d.text==this._tabList[a]?(c.getChildAt(0).visible=!1,c.getChildAt(1).visible=!0):(c.getChildAt(0).visible=!0,c.getChildAt(1).visible=!1);d.textColor=
0}};b.setBtnTxt=function(a){for(var b=0;b<this.listBtn.length;b++){var c=this.listBtn[b].getChildByName("btnName");c.text!=a&&(c.text=0<this.pressCountcodown?this.pressCountcodown.toString():this.listBtnTxt[b])}};b.createItemRenderer=function(){return new TopItemLayer};b.updateItemRenderer=function(a,b,c){a.refreshView(b,c,this._topType)};b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};return d}(BoxContainer);TopListLayer.prototype.__class__="TopListLayer";
var VuPlatformShareLayer=function(c){function d(){c.call(this);this._isShow=!1;this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("day_signin");this.boxContainer.addChild(a);a.x=30;a.y=100;var a=new SimpleButton,b=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");a.addChild(b);a.addOnClick(this.close,this);a.x=520;a.y=90;a.useZoomOut(!0);this.boxContainer.addChild(a);a=ResourceUtils.createBitmapFromSheet("vutime_title");a.x=200;a.y=105;
this.boxContainer.addChild(a);this.createItem();this.createItem1();a=new NormalButton;this.boxContainer.addChild(a);a.setLabel("\u8fd4\u56de");a.setEnable(!0);a.x=320;a.y=650;a.addOnClick(this.close,this);addAction("vutimes_share_change",this.refreshView,this)};b.createItem=function(){var a=new egret.DisplayObjectContainer,b=ResourceUtils.createBitmapFromSheet("vutime_item_bg");a.addChild(b);b=new egret.TextField;b.text="\u5173\u6ce8\u793c\u5305";b.x=45;b.y=13;b.textColor=15789859;a.addChild(b);b=
ResourceUtils.createBitmapFromSheet("icon_payment_6","iconRes");a.addChild(b);b.x=75;b.y=80;b=new egret.TextField;b.text="\u5956\u52b1";b.x=14;b.y=170;a.addChild(b);b=new egret.TextField;b.text="200\u5143\u5b9d";b.x=88;b.y=170;b.textColor=16776960;a.addChild(b);this._button1=new NormalButton;this._button1.x=110;this._button1.y=270;this._button1.addOnClick(this.onButton1Handler,this);a.addChild(this._button1);a.x=85;a.y=230;this.boxContainer.addChild(a)};b.createItem1=function(){var a=new egret.DisplayObjectContainer,
b=ResourceUtils.createBitmapFromSheet("vutime_item_bg");a.addChild(b);b=new egret.TextField;b.text="\u5206\u4eab\u5fae\u4fe1";b.x=45;b.y=13;b.textColor=15789859;a.addChild(b);b=ResourceUtils.createBitmapFromSheet("icon_wx_award","iconRes");a.addChild(b);b.x=85;b.y=90;b.scaleX=b.scaleY=0.5;b=new egret.TextField;b.text="\u5206\u4eab\u9001";b.x=14;b.y=170;a.addChild(b);b=new egret.TextField;b.text="30\u5143\u5b9d";b.x=115;b.y=170;b.textColor=16776960;a.addChild(b);this._button2=new NormalButton;this._button2.x=
110;this._button2.y=270;this._button2.addOnClick(this.onButton2Handler,this);a.addChild(this._button2);a.x=320;a.y=230;this.boxContainer.addChild(a)};b.onButton1Handler=function(){VuTimesShareData.getInstance().getAttention()?ProxyUtils.getVuAttentionAward(this.awardHandler1,this):EgretH5Sdk.attention(ProxyUtils.egretAppId,ProxyUtils.platUserId,this.attentionHandler,this)};b.attentionHandler=function(a){a&&1==a.status&&(VuTimesShareData.getInstance().setAttention(!0),this.show())};b.awardHandler1=
function(a){0===a.s&&(a.gc&&(doAction(Const.SHOW_TIPS,"\u83b7\u5f97"+a.gc+"\u5143\u5b9d"),DataCenter.getInstance().changeGc(a.gc)),VuTimesShareData.getInstance().setAttentionAwarded());this.show()};b.onButton2Handler=function(){VuTimesShareData.getInstance().isCounting()?GameMainLayer.instance.showVuTip():GameMainLayer.instance.showWeixinTip("\u70b9\u51fb\u6b64\u5904\u5206\u4eab")};b.close=function(){this._isShow=!1;GameMainLayer.instance.hideVUShare()};b.refreshView=function(){this._isShow&&this.show()};
b.show=function(){this._isShow=!0;VuTimesShareData.getInstance().isAttentionAwarded()?(this._button1.setLabel("\u5df2\u9886\u53d6"),this._button1.setEnable(!1)):(VuTimesShareData.getInstance().getAttention()?this._button1.setLabel("\u9886\u5956"):this._button1.setLabel("\u5173\u6ce8"),this._button1.setEnable(!0));VuTimesShareData.getInstance().isMaxAwarded()?(this._button2.setLabel("\u5df2\u9886\u53d6"),this._button2.setEnable(!1)):(this._button2.setLabel("\u5206\u4eab"),this._button2.setEnable(!0))};
b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};return d}(BoxContainer);VuPlatformShareLayer.prototype.__class__="VuPlatformShareLayer";
var VuPlatformTipLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("paymen_recommend");this.boxContainer.addChild(a);a.x=35;a.y=200;a=new SimpleButton;a.anchorX=a.anchorY=0.5;var b=ResourceUtils.createBitmapFromSheet("close_btn");a.addChild(b);a.addOnClick(this.close,this);a.useZoomOut(!0);a.x=570;a.y=230;this.boxContainer.addChild(a);a=new egret.TextField;a.text="\u5206\u4eab\u9891\u7387\u592a\u5feb\u5566!";
a.textColor=3276800;this.boxContainer.addChild(a);a.x=210;a.y=280;a=new egret.TextField;a.text="\u8ddd\u79bb\u4e0b\u4e00\u6b21\u5206\u4eab\u9886\u5956\u8fd8\u6709:";a.textColor=3276800;this.boxContainer.addChild(a);a.x=150;a.y=330;this._timeLabel=new egret.TextField;this._timeLabel.textColor=16711680;this.boxContainer.addChild(this._timeLabel);this._timeLabel.x=250;this._timeLabel.y=380;a=new NormalButton;a.addOnClick(this.close,this);a.setLabel("\u786e\u8ba4");a.setEnable(!0);a.x=310;a.y=500;this.boxContainer.addChild(a)};
b.show=function(){this.countDown();this._timeID=Time.setInterval(this.countDown,this,1E3)};b.countDown=function(){var a=VuTimesShareData.getInstance().getLeftTime();0<a?this._timeLabel.text=GameUtils.formatTime1(a):this.close()};b.close=function(){Time.clearInterval(this._timeID);GameMainLayer.instance.hideVuTip()};b.dispose=function(){c.prototype.dispose.call(this)};return d}(BoxContainer);VuPlatformTipLayer.prototype.__class__="VuPlatformTipLayer";
var WeiXinTipLayer=function(c){function d(){c.call(this);this.init()}__extends(d,c);var b=d.prototype;b.init=function(){var a=egret.DynamicBitmap.create("paymen_recommend");a.x=20;a.y=200;this.boxContainer.addChild(a);a=new SimpleButton;a.anchorX=a.anchorY=0.5;var b=ResourceUtils.createBitmapFromSheet("close_btn");a.addChild(b);a.addOnClick(this.onCloseHandler,this);a.useZoomOut(!0);a.x=560;a.y=220;this.boxContainer.addChild(a);a=new egret.TextField;a.textFlow=(new egret.HtmlTextParser).parser('\u5173\u6ce8\u5fae\u4fe1\u516c\u4f17\u53f7"<font color="0xff0000">gulong51</font>",\u5c31\u6709\u673a\u4f1a\u83b7\u5f97\n\u5fae\u4fe1\u7ea2\u5305\u54e6!');
a.size=24;a.x=90;a.y=300;a.textColor=0;this.boxContainer.addChild(a);a=egret.DynamicBitmap.create("hongbao");a.x=70;a.y=470;this.boxContainer.addChild(a)};b.onCloseHandler=function(){GameMainLayer.instance.hideCodeAwardLayer()};return d}(BoxContainer);WeiXinTipLayer.prototype.__class__="WeiXinTipLayer";
var WeixinAwardLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){this._container=new egret.DisplayObjectContainer;this.boxContainer.addChild(this._container);var a=egret.DynamicBitmap.create("paymen_recommend");this._container.addChild(a);a.x=35;a.y=200;a=ResourceUtils.createBitmapFromSheet("weixin_bg2");a.x=80;a.y=280;this._container.addChild(a);a=new SimpleButton;a.anchorX=a.anchorY=0.5;var b=ResourceUtils.createBitmapFromSheet("close_btn");
a.addChild(b);a.addOnClick(this.close,this);a.useZoomOut(!0);a.x=570;a.y=230;this.boxContainer.addChild(a);a=ResourceUtils.createBitmapFromSheet("weixin_award_icon");a.x=90;a.y=290;this._container.addChild(a);this._awardLabel=new egret.TextField;this._container.addChild(this._awardLabel);this._awardLabel.x=170;this._awardLabel.y=315;this._awardLabel.size=22;this._awardLabel.textColor=16777215;PlatformFactory.getPlatform().name==PlatformTypes.QQBROWSER?(this._awardLabel.text="\u5c06\u6e38\u620f\u53d1\u9001\u684c\u9762,\u4e0b\u6b21\u66f4\u65b9\u4fbf\u8fdb\u5165\u6e38\u620f\u54e6~",
a=new egret.TextField,a.width=400,a.height=50,a.textColor=0,a.text="\u9996\u6b21\u53d1\u9001\u5956\u52b1100\u5143\u5b9d!",a.x=180,a.y=405,a.size=26,this._container.addChild(a),this.qqButton=new FriendItemButton,this.qqButton.x=310,this.qqButton.y=500,this.qqButton.initButton("buy_btn","buy_btn"),this.qqButton.useZoomOut(!0),this.qqButton.addOnClick(this.onClickHandler,this),this.boxContainer.addChild(this.qqButton)):(PlatformFactory.getPlatform().name==PlatformTypes.WANBA?(this._awardLabel.text=ProxyUtils.wanbaAwardTxt.replace("\\n",
"\n"),this._awardLabel.y=308):GameUtils.isFanQie()?this._awardLabel.text="\u4e0e\u5b98\u65b9\u4e92\u52a8\u83b7\u53d6\u9080\u8bf7\u7801":1==ProxyUtils.canOpenAttention||3==ProxyUtils.canOpenAttention?this._awardLabel.text="\u4e0e\u5b98\u65b9\u4e92\u52a8\u83b7\u53d6\u9080\u8bf7\u7801":2==ProxyUtils.canOpenAttention&&(this._awardLabel.text=ProxyUtils.attentionText,this._awardLabel.y=308),a=ResourceUtils.createBitmapByName("share_input_bg"),a.x=125,a.y=400,a.scaleX=0.8,a.scaleY=0.7,this._container.addChild(a),
this._inputLabel=new egret.TextField,this._inputLabel.type=egret.TextFieldType.INPUT,this._inputLabel.width=400,this._inputLabel.height=50,this._inputLabel.text="",this._inputLabel.x=140,this._inputLabel.y=400,this._inputLabel.size=26,this.boxContainer.addChild(this._inputLabel),this.boxContainer.addChild(GameUtils.createButton("\u9886\u53d6\u5956\u52b1","buy_btn",this.awardHandler.bind(this),310,500,170,69,0,0,0)))};b.onClickHandler=function(){0==ProxyUtils.toDesktop?PlatformFactory.getPlatform().sendToDesktop(this.sendCallback,
this):1==ProxyUtils.toDesktop&&ProxyUtils.sendToDesktop(2,this.sendDone,this)};b.sendCallback=function(a){0==a.result&&ProxyUtils.sendToDesktop(1,this.sendDone,this)};b.sendDone=function(){ProxyUtils.toDesktop+=1;doAction(Const.SEND_STATUS_CHANGE);if(1==ProxyUtils.toDesktop)this.refreshView();else{this.close();var a=new NumberModel(100),b={};b.coins=a.pieces(4);b.type=2;b.updated=!0;doAction(Const.DROP_COIN,b);egret.localStorage.setItem(ProxyUtils.userId+"send_desktop_ok","done")}};b.refreshView=
function(){PlatformFactory.getPlatform().name==PlatformTypes.QQBROWSER&&(0==ProxyUtils.toDesktop?this.qqButton.addLabel("\u53d1\u9001\u684c\u9762"):1==ProxyUtils.toDesktop&&this.qqButton.addLabel("\u9886\u53d6\u5956\u52b1"))};b.awardHandler=function(){""!=this._inputLabel.text&&PlatformFactory.getPlatform().codeAward(this._inputLabel.text)};b.close=function(){GameMainLayer.instance.hideWeixinAwardLayer()};b.dispose=function(){c.prototype.dispose.call(this)};return d}(BoxContainer);
WeixinAwardLayer.prototype.__class__="WeixinAwardLayer";
var AdLayer=function(c){function d(){c.call(this);this._d=this._conf=null;this.init()}__extends(d,c);var b=d.prototype;b.init=function(){this._container=new egret.DisplayObjectContainer;this.addChild(this._container);var a=ResourceUtils.createBitmapByName("mask");this._container.addChild(a);a.touchEnabled=!0;a=new SimpleButton;a.anchorX=a.anchorY=0.5;var b=ResourceUtils.createBitmapFromSheet("close_btn");a.addChild(b);a.addOnClick(this.close,this);a.useZoomOut(!0);a.x=560;a.y=80;this.addChild(a)};
b.close=function(){GameMainLayer.instance.hideAdLayer()};b.show=function(a){this._conf=a;this.showUrl();GameMainLayer.instance.hideAdLayer()};b.showVideo=function(){var a=this,b=document.createElement("DIV");b.style.zIndex="1000";b.style.width="100%";b.style.height="100%";b.style.position="absolute";b.style.left="0px";b.style.top="0px";b.style.overflow="scroll";b.style.backgroundColor="#aaaaaa";document.body.appendChild(b);var c=document.createElement("VIDEO");c.style.width="100%";c.style.position=
"absolute";c.style.top="30%";c.style.left="0";c.src="resource/assets/ad/ad.mp4";c.onended=function(){var c=document.createElement("DIV");c.style.position="absolute";c.style.zIndex="10000";c.style.right="20px";c.style.top="30%";c.onclick=function(){document.body.removeChild(b)};var d=document.createElement("IMG");d.src="resource/assets/ad_close.png";d.width=60;d.height=60;c.appendChild(d);b.appendChild(c);delete a._conf.ad;doAction(Const.SHOW_AD_DONE,a._conf)};c.autoplay=!0;c.controls=!0;b.appendChild(c)};
b.showUrl=function(){var a=this,b=document.createElement("DIV");b.style.zIndex="1000";b.style.position="absolute";b.style.left="0px";b.style.top="0px";b.style.overflow="scroll";b.style.width="640px";b.style.height="1235px";document.body.appendChild(b);b.style["-webkit-transform-origin"]="0% 0% 0px";b.style.transform="scale("+window.innerWidth/640+")";b.style["-webkit-transform"]="scale("+window.innerWidth/640+")";b.style.height=640*window.innerHeight/window.innerWidth+"px";var c=document.createElement("IFRAME");
c.src="http://mole.51.com/?from=19&";c.width="640px";c.height="1235px";c.onload=function(){var c=document.createElement("DIV");c.style.position="absolute";c.style.zIndex="10000";c.style.right="20px";c.style.top="20px";c.onclick=function(){document.body.removeChild(b)};var d=document.createElement("IMG");d.src="resource/assets/ad_close.png";c.appendChild(d);b.appendChild(c);delete a._conf.ad;doAction(Const.SHOW_AD_DONE,a._conf)};b.appendChild(c)};return d}(BaseContainer);
AdLayer.prototype.__class__="AdLayer";
var EgretShareLayer=function(c){function d(){c.call(this);this.initView()}__extends(d,c);var b=d.prototype;b.initView=function(){var a=egret.DynamicBitmap.create("paymen_recommend");this.boxContainer.addChild(a);a.x=24;a.y=250;var a=new SimpleButton,b=ResourceUtils.createBitmapFromSheet("close_btn","commonRes");a.addChild(b);a.addOnClick(this.onCloseHandler,this);a.x=510;a.y=225;a.useZoomOut(!0);this.boxContainer.addChild(a);a=new egret.TextField;a.size=24;a.textColor=0;a.text="\u9996\u6b21\u6210\u529f\u8f6c\u53d1\u5373\u53ef\u83b7\u5f97100\u5143\u5b9d\u5956\u52b1\u54e6~";
a.x=100;a.y=320;a.width=450;a.height=100;this.boxContainer.addChild(a);a=egret.DynamicBitmap.create("share_weibo_bg");a.x=85;a.y=350;this.boxContainer.addChild(a);this.inputLabel=new egret.TextField;this.inputLabel.x=95;this.inputLabel.y=365;this.inputLabel.size=24;this.inputLabel.width=350;this.inputLabel.height=100;this.inputLabel.textColor=12632256;this.inputLabel.text="\u8bf4\u8bf4\u5206\u4eab\u5fc3\u5f97";this.inputLabel.type=egret.TextFieldType.INPUT;this.inputLabel.multiline=!0;this.boxContainer.addChild(this.inputLabel);
this.inputLabel.addEventListener(egret.Event.CHANGE,this.changeInputCallback,this);this.boxContainer.addChild(GameUtils.createButton("\u8f6c\u53d1\u9886\u5956","reborn_lvup_btn",this.shareClick.bind(this),310,570,170,69,2,0,0))};b.shareClick=function(){var a=this.inputLabel.text;if(0==a.length||"\u8bf4\u8bf4\u5206\u4eab\u5fc3\u5f97"==a)doAction(Const.SHOW_TIPS,"\u8bf7\u8f93\u5165\u5206\u4eab\u5fc3\u5f97~");else{var b=this;if(GameUtils.isQQBOfChannel()){var c={title:"\u5206\u4eab\u6e38\u620f\u5f97\u5143\u5b9d\uff01"};
c.description=ProxyUtils.shareInfo.description;c.img_title=ProxyUtils.shareInfo.img_title;c.img_url=ProxyUtils.shareInfo.img_url;c.url=ProxyUtils.shareInfo.url;c.cusTxt=a;PlatformFactory.getPlatform().doShareQQB(c,this.shareCallback,this)}else EgretH5Sdk.setShareDefaultText("\u7d2b\u91d1\u4e4b\u5dc5\uff0c\u4e00\u5251\u897f\u6765\uff0c\u5feb\u4e0e\u6211\u5171\u6218\u6c5f\u6e56\uff01"),EgretH5Sdk.share(ProxyUtils.egretAppId,ProxyUtils.platUserId,a,function(a){b.onCloseHandler();1==a.status?0<ProxyUtils.leftShareNum?
ProxyUtils.getShareReward(function(a){if(0==a){doAction(Const.SHOW_TIPS,"\u5206\u4eab\u6210\u529f\uff0c\u83b7\u5f97100\u5143\u5b9d!");ProxyUtils.leftShareNum-=1;a=new NumberModel(100);var b={};b.coins=a.pieces(4);b.type=2;b.updated=!0;doAction(Const.DROP_COIN,b);doAction(Const.SHARE_INITED)}else doAction(Const.SHOW_TIPS,"\u5206\u4eab\u6210\u529f")},this):doAction(Const.SHOW_TIPS,"\u5206\u4eab\u6210\u529f"):doAction(Const.SHOW_TIPS,"\u5206\u4eab\u5931\u8d25")},this)}};b.onCloseHandler=function(){GameMainLayer.instance.hideEgretShareLayer()};
b.changeInputCallback=function(a){0==this.inputLabel.text.indexOf("\u8bf4\u8bf4\u5206\u4eab\u5fc3\u5f97")&&(a=this.inputLabel.text.split("\u8bf4\u8bf4\u5206\u4eab\u5fc3\u5f97")[1],this.inputLabel.text=a,this.inputLabel.textColor=0)};b.shareCallback=function(a){this.onCloseHandler();1==a.status?0<ProxyUtils.leftShareNum?ProxyUtils.getShareReward(function(a){if(0==a){doAction(Const.SHOW_TIPS,"\u5206\u4eab\u6210\u529f\uff0c\u83b7\u5f97100\u5143\u5b9d!");ProxyUtils.leftShareNum-=1;a=new NumberModel(100);
var b={};b.coins=a.pieces(4);b.type=2;b.updated=!0;doAction(Const.DROP_COIN,b);doAction(Const.SHARE_INITED)}else doAction(Const.SHOW_TIPS,"\u5206\u4eab\u6210\u529f")},this):doAction(Const.SHOW_TIPS,"\u5206\u4eab\u6210\u529f"):doAction(Const.SHOW_TIPS,"\u5206\u4eab\u5931\u8d25")};b.dispose=function(){c.prototype.dispose.call(this)};return d}(BoxContainer);EgretShareLayer.prototype.__class__="EgretShareLayer";
var GameLayer=function(c){function d(){c.call(this);this._bossTime=this._tickTime=30;this._skillAnimationIdx=1;this._hasBegin=!1;this._touchNum=0;this._skillTimeID=-1;this._skillTickNum=0;this._mv=null;this.isOpen=!1;this.twChat=null;this.listBtn=[];this.init()}__extends(d,c);var b=d.prototype;b.init=function(){var a=this;this.refreshHome();this.initBossTimer();GameUtils.isLieBao()&&0>=ProxyUtils.playerRech&&Advertisement.getInstace();this.initTouchArea();this.initTickText();this.initBossStatus();
this.initHero();this.initCoinView();this.createBtnActive();this.createLoopBuyButton();this.initSetButton();this.initChatBtn();this.initButtons();this.createBtnGuild();this.initBtn();this.initOfflineView();this.initElfView();this.initEffect();this.initBoxEffect();addAction(Const.REFRESH_BOSS,this.refreshBoss,this,1);addAction(Const.REFRESH_HOME_BG,this.refreshHome,this);addAction(Const.ADD_HERO,this.addHero,this);addAction(Const.REBORN_HERO,this.addHero1,this);addAction(Const.LEAVE_BATTLE,this.leaveBattle,
this);addAction(Const.FIGHT_BOSS,this.fightBoss,this);addAction(Const.BOSS_KILLED,this.bossKilled,this);addAction(Const.HERO_ATTACK,this.heroAttack,this);addAction(Const.BEGIN_MAIN_SKILL_1,this.beginMainSkill1,this);addAction(Const.BEGIN_MAIN_SKILL_2,this.beginMainSkill2,this);addAction(Const.BEGIN_MAIN_SKILL_3,this.beginMainSkill3,this);addAction(Const.BEGIN_MAIN_SKILL_4,this.beginMainSkill4,this);addAction(Const.BEGIN_MAIN_SKILL_5,this.beginMainSkill5,this);addAction(Const.STOP_MAIN_SKILL_2,this.stopMainSkill2,
this);addAction(Const.STOP_MAIN_SKILL_VALUE_2,this.stopMainSkillValue,this);addAction(Const.STOP_MAIN_SKILL_3,this.stopAnimation3,this);addAction(Const.STOP_MAIN_SKILL_4,this.stopAnimation4,this);addAction(Const.STOP_MAIN_SKILL_5,this.stopAnimation5,this);addAction(Const.HIT_HERO,this.hitHeroHandler,this);addAction(Const.Activity_FIGHT,this.activityFight,this);addAction(Const.ACTIVITY_BOSS_KILLED,this.activityBossKilled,this);addAction(Const.hide_login_btn,this.hideLoginBtn,this);addAction(Const.SHOWBOXDESC,
this.showOpenBoxEffect,this);addAction(Const.RESET_GAME,this.resetGame,this);addAction(Const.FLY_COIN,this.flyCoin,this,99);addFilter(Const.MAIN_LAYER,this.mainLayer,this);addAction(Const.USE_PAYMENT_SKILL,this.usePaymentSkill,this);addAction(Const.HERO_UPGRADE,this.heroUpgradeHandler,this);addAction(Const.SEND_STATUS_CHANGE,this.sendStatusChange,this);addAction(Const.FRIEND_EVENT,this.friendShow,this);addAction(Const.SHOW_HURT_TEXT,this.addHurtText,this);addAction(Const.FRIEND_EVENT_DONE,this.friendHide,
this);addAction("loading_resize",this.resizeScreen,this);addAction("clearnReborn",this.stopAllAanimation,this);addAction(Const.Guild_StartData,this.guildActionCallBack,this);addAction(Const.Guild_refleshWulinLeftTime,this.refleshWulinLeftTime,this);addAction(Const.Guild_ShowEnterDoor,this.createBtnActive,this);addAction("attackedHp",this.createBossDamg,this);addAction("hideBtn",this.hideListBtn,this);addAction("lala",function(b){a.addHurtText(b.dmg,b.crit)},this)};b.resizeScreen=function(){this._boxEffectContainer.y=
GameUtils.getLayoutY(510);this._leftIconContainer.y=GameUtils.getLayoutY(475);this._shareBtn&&(this._shareBtn.y=GameUtils.getLayoutY(475));this._springButton&&(this._springButton.y=GameUtils.getLayoutY(475));null!=this.guildBtn&&(this.guildBtn.y=GameUtils.getLayoutY(475))};b.showAwardBtn=function(){if(GameUtils.isAiWeiGame())return ProxyUtils.canOpenAttention=1,!0;if(PlatformFactory.getPlatform().name==PlatformTypes.QQBROWSER)return 2>ProxyUtils.toDesktop;if(PlatformFactory.getPlatform().name==PlatformTypes.WEIBORUNTIME)return!1;
if(PlatformFactory.getPlatform().name==PlatformTypes.EGRET)return GameUtils.isFanQie()?!0:1==ProxyUtils.canOpenAttention||2==ProxyUtils.canOpenAttention||3==ProxyUtils.canOpenAttention;if(PlatformFactory.getPlatform().name==PlatformTypes.WANBA)return!0};b.sendStatusChange=function(){this.showAwardBtn()||(this._buttonAnimationContainer.removeChildren(),this._wxAwardBtn&&(this._wxAwardBtn.visible=!1))};b.friendShow=function(){this._friendBtn&&(this._friendBtn.visible=!0);egret.Tween.get(this._leftIconContainer).to({x:100},
500,egret.Ease.circInOut)};b.friendHide=function(){egret.Tween.get(this._leftIconContainer).to({x:0},500,egret.Ease.circInOut).call(function(){this._friendBtn&&(this._friendBtn.visible=!1)},this)};b.initButtons=function(){this._payAwardBtn=new PayAwardButton;this._payAwardBtn.addOnClick(this.payAward,this);this._payAwardBtn.x=300;this._payAwardBtn.y=180;this._payAwardBtn.width=66;this._payAwardBtn.height=66;this.listBtn.push(this._payAwardBtn);this.addChild(this._payAwardBtn);this._buffButton=new BuffIconButton;
this._buffButton.useZoomOut(!0);this._buffButton.addOnClick(this.buffHandler,this);this._buffButton.x=385;this._buffButton.y=46;this.addChild(this._buffButton);this._wxAwardBtn=new WeixinAwardButton;this._wxAwardBtn.useZoomOut(!0);this._wxAwardBtn.addOnClick(this.showWxAwardLayer,this);this._wxAwardBtn.x=500;this._wxAwardBtn.y=180;this.listBtn.push(this._wxAwardBtn);this.addChild(this._wxAwardBtn);this._wxAwardBtn.visible=this.showAwardBtn();if(PlatformFactory.getPlatform().name==PlatformTypes.QQBROWSER&&
!GameUtils.isAiWeiGame()){var a=new WeixinAwardButton;a.useZoomOut(!0);a.addOnClick(this.showAwardLayer,this);a.x=470;a.y=GameUtils.getLayoutY(475);this.listBtn.push(a)}this._daySigninBtn=new DaySigninButton;this._daySigninBtn.useZoomOut(!0);this._daySigninBtn.addOnClick(this.daySigninHandler,this);this._daySigninBtn.x=460;this._daySigninBtn.y=180;this._daySigninBtn.width=66;this._daySigninBtn.height=66;this.listBtn.push(this._daySigninBtn);this.addChild(this._daySigninBtn);this._equipIcon=new EquipButton;
this._equipIcon.useZoomOut(!0);this._equipIcon.addOnClick(this.showEquipLayer,this);this._equipIcon.x=270;this._equipIcon.y=46;this.addChild(this._equipIcon);GameUtils.isInActivity()&&(this._springButton=new SpringIconButton,this._springButton.useZoomOut(!0),this._springButton.addOnClick(this.springHandler,this),this._springButton.x=470,this._springButton.y=GameUtils.getLayoutY(475),this.addChild(this._springButton));PlatformFactory.getPlatform().name==PlatformTypes.EGRET&&(addAction(Const.SHARE_INITED,
this.shareChange,this),this._shareBtn=new ShareButton,this._shareBtn.useZoomOut(!0),this._shareBtn.addOnClick(this.showShareLayer,this),this._shareBtn.x=470,this._shareBtn.y=GameUtils.getLayoutY(475),this.addChild(this._shareBtn),this.shareChange());this._leftIconContainer=new egret.DisplayObjectContainer;this.addChild(this._leftIconContainer);this._leftIconContainer.y=GameUtils.getLayoutY(475);PlatformFactory.getPlatform().isFriendOpen()&&(this._friendBtn=new FriendButton,this._friendBtn.visible=
!1,this._friendBtn.useZoomOut(!0),this._friendBtn.addOnClick(this.onFriendClick,this),this._friendBtn.x=-45,this._leftIconContainer.addChild(this._friendBtn),egret.Tween.get(this._friendBtn,{loop:!0}).to({scaleX:1.2,scaleY:1.2},500).to({scaleX:1,scaleY:1},500),NewFriendController.getInstance().start());if(GameUtils.isAiWeiGame()||GameUtils.is1758())this._vuTime=new VuTimesButton,this._vuTime.useZoomOut(!0),this._vuTime.addOnClick(this.vuTimeShareHandler,this),this._vuTime.x=55,this._leftIconContainer.addChild(this._vuTime),
VuTimesShareData.getInstance().init();this.hideLoginBtn();addAction("attantion_inited",this.attentionInited,this)};b.vuTimeShareHandler=function(){VuTimesShareData.getInstance().isInited()?VuTimesShareData.getInstance().isMaxAwarded()?doAction(Const.SHOW_TIPS,"\u4eca\u5929\u5df2\u7ecf\u9886\u8fc7\u5956\u4e86\uff01"):GameMainLayer.instance.showVUShare():VuTimesShareData.getInstance().init()};b.attentionInited=function(){this._wxAwardBtn.visible=this.showAwardBtn();this._buttonAnimationContainer.visible=
this.showAwardBtn();this.isShowWxBtn()&&null==this.wxbtn&&(this.wxbtn=new WeixinButton,this.wxbtn.x=590,this.wxbtn.y=270,this.addChild(this.wxbtn));this.wxbtn&&(this.wxbtn.visible=this.isShowWxBtn());this._vuTime&&(this._vuTime.visible=1==ProxyUtils.canOpenAttention)};b.springHandler=function(){GameMainLayer.instance.showLanternLayer()};b.onFriendClick=function(){0<NewFriendController.getInstance().getCurEvent()&&GameMainLayer.instance.showFriendSuprise()};b.showEquipLayer=function(){GameMainLayer.instance.showEquipLayer()};
b.showShareLayer=function(){GameMainLayer.instance.showEgretShareLayer()};b.shareChange=function(){PlatformFactory.getPlatform().name==PlatformTypes.QQBROWSER?this._shareBtn.visible=1==ProxyUtils.inviteOpen&&ProxyUtils.isShareOpen&&0<ProxyUtils.leftShareNum:this._shareBtn.visible=ProxyUtils.isShareOpen&&0<ProxyUtils.leftShareNum;this._shareBtn.visible?this._springButton&&(this._springButton.x=360):this._springButton&&(this._springButton.x=470)};b.showWxAwardLayer=function(){GameMainLayer.instance.showWeixinAwardLayer()};
b.showAwardLayer=function(){GameMainLayer.instance.showAwardLayer()};b.hideLoginBtn=function(){this._daySigninBtn.visible=!DataCenter.getInstance().loginAwardModel.todayKilled()};b.daySigninHandler=function(){GameMainLayer.instance.showDaySigninLayer()};b.buffHandler=function(){GameMainLayer.instance.showBuffLayer()};b.payAward=function(){GameMainLayer.instance.showPayAwardLayer()};b.usePaymentSkill=function(a){var b=this,c=this;"blood"==a&&GameUtils.preloadAnimation("hero_skill_6_json",function(){var a=
new Movie("hero_skill_6_json","hero_skill_6");b.addChild(a);a.play("1");a.setCallback(function(a){if("attack"==a){a=new ShakeAnimation(100,10,5);this.setShakeAni(a);a.run(this._bg);a=applyFilters(Const.GET_PAYMENT_EFFECT);var b=c._boss.attacked(a.dmg);""!=b&&c.addHurtText(b,a.crit)}},b);a.x=320;a.y=500})};b.mainLayer=function(){return this};b.resetGame=function(){this.refreshHome();this.refreshBoss();this._fightStatusBtn.setStatus(3);this._heroContainer.removeChildren();this._heroContainer1.removeChildren();
this._heroContainer2.removeChildren();this._heroContainer3.removeChildren();this._heroContainer4.removeChildren();this._heroContainer5.removeChildren();this.initHero();this._tickID&&Time.clearInterval(this._tickID);this._tickTxt.visible=!1;this._bossTimeBar.visible=!1};b.flyCoin=function(a){var b=this;if(a.parent){var c=(new Date).getTime(),d=a.parent.localToGlobal(a.x,a.y),d=this.globalToLocal(d.x,d.y,d);GameUtils.preloadAnimation("coin_star_json",function(){if(2E3>(new Date).getTime()-c){var a=
new Movie("coin_star_json","coin_star");a.play("1");a.x=d.x;a.y=d.y;b.addChild(a)}})}};b.initBossTimer=function(){this._bossTimeBar=ResourceUtils.createBitmapFromSheet("boss_tick_progress","commonRes");this._bossTimeBar.anchorX=0;this._bossTimeBar.anchorY=0.5;this._bossTimeBar.x=165;this._bossTimeBar.y=130;this._bossTimeBar.visible=!1;this.addChild(this._bossTimeBar)};b.initOfflineView=function(){var a=(new Date).getTime(),b=DataCenter.getInstance().currentTime;DataCenter.getInstance().currentTime=
a;a=Math.floor((a-b)/1E3);a=Math.min(a,14400);if(60<a){var c=HeroController.getInstance().currentDPS,b=new NumberModel;b.add(c);b.times(a/65);c=applyFilters(Const.GET_HOLY_EFFECT,getApplyString(29));c!=getApplyString(29)&&b.times(c+1);b.times(FateController.getInstance().getEffectByType(29));"0"!=b.getNumer()&&(this._offlineView=new OfflineView(a,b),this._offlineView.x=-40,PlatformFactory.getPlatform().isFriendOpen()?PlatformFactory.getPlatform().name==PlatformTypes.QQBROWSER?egret.Tween.get(this._offlineView).to({x:155},
500,egret.Ease.circInOut):egret.Tween.get(this._offlineView).to({x:55},500,egret.Ease.circInOut):GameUtils.isAiWeiGame()||GameUtils.is1758()?egret.Tween.get(this._offlineView).to({x:155},500,egret.Ease.circInOut):egret.Tween.get(this._offlineView).to({x:55},500,egret.Ease.circInOut),this._leftIconContainer.addChild(this._offlineView))}};b.initElfView=function(){this._elfView=new ElfView;this.addChild(this._elfView)};b.initBoxEffect=function(){this._boxEffectContainer=new egret.DisplayObjectContainer;
this._boxEffectContainer.x=120;this._boxEffectContainer.y=GameUtils.getLayoutY(510);var a=ResourceUtils.createBitmapFromSheet("box_skill_bg","commonRes");this._boxEffectContainer.addChild(a);this._boxIconContainer=new egret.DisplayObjectContainer;this._boxEffectContainer.addChild(this._boxIconContainer);this._boxIconContainer.y=10;this._boxLabel=new egret.TextField;this._boxLabel.text="\u4f60\u91ca\u653e\u4e86\u4e00\u4e2a\u6280\u80fd";this._boxLabel.size=18;this._boxLabel.y=8;this._boxEffectContainer.addChild(this._boxLabel);
this._boxTimeLabel=new egret.TextField;this._boxTimeLabel.text="\u4f60\u91ca\u653e\u4e86\u4e00\u4e2a\u6280\u80fd";this._boxTimeLabel.size=18;this._boxTimeLabel.y=8;this._boxTimeLabel.x=this._boxLabel.width+30;this._boxEffectContainer.addChild(this._boxTimeLabel);this._boxEffectContainer.visible=!1;this.addChild(this._boxEffectContainer)};b.showOpenBoxEffect=function(a){var b,c;this._boxIconContainer.removeChildren();var d;a.id?(c=a.id%10,b=ResourceUtils.createBitmapFromSheet("skill_icon_"+c,"iconRes"),
c=HeroController.getInstance().mainHero.skillList[c-1].getDes(),b.scaleX=b.scaleY=0.5,b.y=-15,d=0.5):1==a.type?(b=ResourceUtils.createBitmapFromSheet("coin_icon","commonRes"),b.scaleX=b.scaleY=0.75,b.y=-8,c="\u83b7\u5f97\u4e86 "+a.total+" \u94dc\u94b1",d=0.75):2==a.type&&(b=ResourceUtils.createBitmapFromSheet("gold_icon","commonRes"),b.scaleX=b.scaleY=0.75,b.y=-8,c="\u83b7\u5f97\u4e86"+a.one+"\u5143\u5b9d",d=0.75);this._boxIconContainer.addChild(b);this._boxLabel.text=c;this._boxLabel.x=b.width*d+
20;this._boxEffectContainer.visible=!0;if(a.id)this._boxTimeLabel.x=this._boxLabel.x+this._boxLabel.width+20,this._boxTimeLabel.text="00:15",this._boxTimeLabel.visible=!0,Time.setTimeout(this.updateBoxTime,this,1E3,14);else{this._boxTimeLabel.visible=!1;var g=this;Time.setTimeout(function(){g._boxEffectContainer.visible=!1},this,2E3)}};b.updateBoxTime=function(a){this._boxTimeLabel.text=9<a?"00:"+a:"00:0"+a;0<a?(a--,Time.setTimeout(this.updateBoxTime,this,1E3,a)):this._boxEffectContainer.visible=
!1};b.beginMainSkill1=function(a){GameUtils.preloadAnimation("hero_skill_1_json",this.showAnimation1,this,a)};b.showAnimation1=function(a){var b=this,c=new Movie("hero_skill_1_json","hero_skill_1");c.play("1");c.x=320;c.y=530;c.setCallback(function(c){if("attack"==c){SoundManager.getInstance().playEffect("swingSound");c=DataCenter.getInstance().getTheDamage(a);var d=new ShakeAnimation(100,20,10);this.setShakeAni(d);d.run(this._bg);d=b._boss.attacked(c.dmg);b._mainHero.attack();b.addHurtText(d,c.crit)}},
this);this.addChild(c)};b.showAnimation2=function(){this._skillAnimationIdx=1;this._skillAnimation=new Movie("hero_skill_2_json","hero_skill_2");this._skillAnimation.play("1");this._skillAnimation.x=320;this._skillAnimation.y=530;this._skillAnimation.autoRemove=!1;this._skillAnimation.setCallback(this.onMoveCallback,this);this.addChild(this._skillAnimation)};b.showAnimation3=function(){this._skillAnimation3=new Movie("hero_skill_3_json","hero_skill_3");this._skillAnimation3.play("1");this._skillAnimation3.x=
320;this._skillAnimation3.y=530;this.addChild(this._skillAnimation3)};b.showAnimation4=function(){this._skillAnimation4=new Movie("hero_skill_4_json","hero_skill_4");this._skillAnimation4.play("1");this._skillAnimation4.x=310;this._skillAnimation4.y=530;this.addChild(this._skillAnimation4)};b.beginMainSkill3=function(){GameUtils.preloadAnimation("hero_skill_3_json",this.showAnimation3,this)};b.beginMainSkill4=function(){GameUtils.preloadAnimation("hero_skill_4_json",this.showAnimation4,this)};b.beginMainSkill5=
function(){RES.hasRes("hero_skill_5_json")&&(this._skillAnimation5=new Movie("hero_skill_5_json","hero_skill_5"),this._skillAnimation5.play("1"),this._skillAnimation5.x=320,this._skillAnimation5.y=530,this.addChild(this._skillAnimation5))};b.stopAnimation3=function(){this._skillAnimation3&&(this.removeChild(this._skillAnimation3),this._skillAnimation3.dispose(),this._skillAnimation3=null)};b.stopAnimation4=function(){this._skillAnimation4&&(this.removeChild(this._skillAnimation4),this._skillAnimation4.dispose(),
this._skillAnimation4=null)};b.stopAnimation5=function(){this._skillAnimation5&&(this.removeChild(this._skillAnimation5),this._skillAnimation5.dispose(),this._skillAnimation5=null)};b.stopAnimation2=function(){this._skillAnimationIdx=3;this._skillAnimation&&this._skillAnimation.play("3")};b.stopAllAanimation=function(){this.stopAnimation2();this.stopAnimation3();this.stopAnimation4();this.stopMainSkill2();this.stopAnimation5();this.stopMainSkillValue()};b.onMoveCallback=function(a,b){a==Movie.PLAY_COMPLETE&&
(1==this._skillAnimationIdx&&(this._skillAnimationIdx=2,this._skillAnimation.play("2")),3==this._skillAnimationIdx&&(this.removeChild(this._skillAnimation),this._skillAnimation.dispose(),this._skillAnimation=null))};b.beginMainSkill2=function(a){null==this._skillAnimation&&GameUtils.preloadAnimation("hero_skill_2_json",this.showAnimation2,this);this._tickSplit=Math.ceil(a/10);4<=this._tickSplit&&(this._tickSplit=3);this._tickNum=0;this._tickTimeSkill2=Time.setInterval(this.autoHit,this,1E3/a)};b.autoHit=
function(){this._tickNum+=1;SoundManager.getInstance().playEffect("swingSound");var a=DataCenter.getInstance().getAttackInfo();if(a.crit){var b=new ShakeAnimation(100,10,5);this.setShakeAni(b);b.run(this._bg)}0==this._tickNum%this._tickSplit?(b=this._boss.attacked(a.dmg),""!=b&&this.addHurtText(b,a.crit)):this._boss.attackedWithoutAction(a.dmg)};b.stopMainSkill2=function(){this.stopAnimation2();Time.clearInterval(this._tickTimeSkill2)};b.stopMainSkillValue=function(){Time.clearInterval(this._tickTimeSkill2)};
b.initTickText=function(){this._tickTxt=new egret.BitmapText;var a=RES.getRes("boss_countdown_fnt_fnt");this._tickTxt.font=a;this.addChild(this._tickTxt);this._tickTxt.x=165;this._tickTxt.y=150;this._tickTxt.text="10.00";this._tickTxt.visible=!1};b.heroAttack=function(a){this._boss.attackedWithoutAction(a)};b.initBossStatus=function(){GameUtils.isBoss()?(this.initBoss(!1),this.leaveBattle()):(this.initBoss(),this._fightStatusBtn.setStatus(3),this._lvView.showLevel())};b.activityFight=function(){4==
this._fightStatusBtn.getStatus()?doAction(Const.SHOW_TIPS,"\u6b63\u5728\u6253\u6d3b\u52a8boss"):(last_battle_status=this._fightStatusBtn.getStatus(),this._fightStatusBtn.setStatus(4),this._lvView.hideLevel(),this._boss.refreshBoss(!1,!0),this._lvView.refreshView(),this.showTick())};b.activityBossKilled=function(){GuildDataManager.getInstance().isGuildBoss&&GuildDataManager.getInstance().isBossKillSuc&&ProxyUtils.donateMoney(1);1==last_battle_status?this.leaveBattle():2==last_battle_status?this.fightBoss():
3==last_battle_status&&this.bossKilled();GuildDataManager.getInstance().isGuildBoss=!1};b.leaveBattle=function(){this._fightStatusBtn.setStatus(1);this._boss.refreshBoss(!1);this._lvView.hideLevel();this._tickID&&Time.clearInterval(this._tickID);this._tickTxt.visible=!1;this._bossTimeBar.visible=!1;DataCenter.getInstance().showDieLayer()};b.fightBoss=function(){this._fightStatusBtn.setStatus(2);this._lvView.hideLevel();this.refreshBoss();this.showTick();this.showBossTip(0==DataCenter.getInstance().totalData.currentLevel%
5?"2":"1")};b.bossKilled=function(){this._fightStatusBtn.setStatus(3);this._lvView.showLevel();this.refreshBoss();this._tickID&&Time.clearInterval(this._tickID);this._tickTxt.visible=!1;this._bossTimeBar.visible=!1};b.showTick=function(){this._tickID&&Time.clearInterval(this._tickID);this._tickTime=30;var a=applyFilters(Const.GET_HOLY_EFFECT,getApplyString(25));a!=getApplyString(25)&&(this._tickTime*=1+a);this._bossTime=this._tickTime;this._tickTxt.visible=!0;this._bossTimeBar.visible=!0;this._bossTimeBar.scaleX=
1;this._tickID=Time.setInterval(this.tick,this,100)};b.tick=function(){this._tickTime-=0.1;this._tickTxt.text=this._tickTime.toFixed(1);this._bossTimeBar.scaleX=this._tickTime/this._bossTime;0>=this._tickTime&&(Time.clearInterval(this._tickID),4==this._fightStatusBtn.getStatus()?this.activityBossKilled():doAction(Const.LEAVE_BATTLE))};b.showBossTip=function(a){var b=this;GameUtils.preloadAnimation("boss_json",function(){null==b._bossMC&&(b._bossMC=new Movie("boss_json","boss"),b._bossMC.autoRemove=
!1,b._bossMC.x=320,b._bossMC.y=270,b.addChild(b._bossMC));b._bossMC.play(a)})};b.initTouchArea=function(){this._touchArea=ResourceUtils.createBitmapByName("mask");this._touchArea.alpha=0;this._touchArea.width=GameUtils.getWinWidth();this._touchArea.height=640;this._touchArea.touchEnabled=!0;this.addChild(this._touchArea);this._touchArea.addEventListener(egret.TouchEvent.TOUCH_TAP,this.hitHero,this);this._touchArea.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this);this._touchArea.addEventListener(egret.TouchEvent.TOUCH_END,
this.touchEnd,this);this._touchArea.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)};b.touchBegin=function(){this._touchNum+=1;1<this._touchNum||!DataCenter.getInstance().hasPaymentCountdown("touch")||(DataCenter.getInstance().statistics.addValue(StatisticsType.tap),this._skillTickNum=0,this._skillTimeID=Time.setInterval(this.autoHit1,this,1E3/33))};b.autoHit1=function(){if(DataCenter.getInstance().hasPaymentCountdown("touch")){this._skillTickNum+=1;SoundManager.getInstance().playEffect("swingSound");
var a=DataCenter.getInstance().getAttackInfo();if(a.crit){var b=new ShakeAnimation(100,10,5);this.setShakeAni(b);b.run(this._bg)}0==this._skillTickNum%3?(b=this._boss.attacked(a.dmg),""!=b&&this.addHurtText(b,a.crit)):this._boss.attackedWithoutAction(a.dmg)}else this.touchEnd()};b.touchEnd=function(){this._touchNum-=1;0>=this._touchNum&&Time.clearInterval(this._skillTimeID)};b.showClickAction=function(a){RES.isGroupLoaded("group_click_json")&&(null==this._mv&&(this._mv=new Movie("click_json","click"),
this._mv.autoRemove=!1,this.addChild(this._mv)),this._mv.play("1"),this._mv.x=a.stageX,this._mv.y=a.stageY)};b.hitHero=function(a){this.showClickAction(a);this.hitToBoss("touch",0,!0)};b.hitHeroHandler=function(a,b){this.hitToBoss(a,b)};b.hitToBoss=function(a,b,c){void 0===a&&(a="touch");void 0===b&&(b=0);void 0===c&&(c=!1);doAction(Guide.CLICK_HOME);SoundManager.getInstance().playEffect("swingSound");var d=null,g=null;"sword"==a?(g=new NumberModel(HeroController.getInstance().currentDPS),g.times(b),
g={crit:!1,dmg:g.getNumer()}):"leaf"==a?g={crit:!1,dmg:b}:(c?MainTickController.getInstance().clickTouchTime():MainTickController.getInstance().clickOneTime(),DataCenter.getInstance().statistics.addValue(StatisticsType.tap),g=DataCenter.getInstance().getAttackInfo(a),d=this._mainHero,HeroSkillManager.getInstance().execute());g.crit&&(b=new ShakeAnimation(100,10,5),this.setShakeAni(b),b.run(this._bg));GuildDataManager.getInstance().isGuildWulinStart?(b=this._boss.attacked(g.dmg),d&&d.attack(!0)):(b=
this._boss.attacked(g.dmg),d&&d.attack());""!=b&&this.addHurtText(b,g.crit);GameUtils.isInActivity()&&DataCenter.getInstance().checkDrop()};b.addHurtText=function(a,b){var c=GameUtils.getHurtTxt(a);c.x=520;c.y=300;c.start(b);this.addChild(c)};b.initSetButton=function(){this._setButton=new SetButton;this.addChild(this._setButton);this._setButton.x=490;this._setButton.y=40;this._setButton.anchorX=this._setButton.anchorY=0.5;this._achieveButton=new AchieveEntryButton;this.addChild(this._achieveButton);
this._achieveButton.x=160;this._achieveButton.y=40;this._topButton=new SimpleButton;this._topButton.anchorX=this._topButton.anchorY=0.5;this._topButton.x=50;this._topButton.y=40;var a=ResourceUtils.createBitmapFromSheet("order","commonRes");this._topButton.addChild(a);this._topButton.addOnClick(this.topClickHandler,this);this._topButton.useZoomOut(!0);this.addChild(this._topButton);this.isShowWxBtn()&&(this.wxbtn=new WeixinButton,this.wxbtn.x=590,this.wxbtn.y=270,this.wxbtn.width=66,this.wxbtn.height=
66,this.listBtn.push(this.wxbtn),this.addChild(this.wxbtn));PlatformFactory.getPlatform().name==PlatformTypes.QQBROWSER&&(this._loginAwardBtn=new LoginAwardButton,this._loginAwardBtn.x=595,this._loginAwardBtn.y=40,this.addChild(this._loginAwardBtn),this._loginAwardBtn.width=66,this._loginAwardBtn.height=66,this.listBtn.push(this._loginAwardBtn),this._loginAwardBtn.addOnClick(this.loginAwardHandler,this));GameUtils.isInRechargeActivity()&&(this._rechargeBtn=new RechargeButton,this._rechargeBtn.x=400,
this._rechargeBtn.y=180,this._rechargeBtn.width=66,this._rechargeBtn.height=66,this.addChild(this._rechargeBtn),this._rechargeBtn.addOnClick(this.rechargeHandler,this),this.listBtn.push(this._rechargeBtn))};b.rechargeHandler=function(){GameMainLayer.instance.showSeriesLayer()};b.loginAwardHandler=function(){GameMainLayer.instance.showLoginAwardLayer()};b.hideListBtn=function(a){void 0===a&&(a=!0);for(var b=0;b<this.listBtn.length;b++)this.listBtn[b].visible=a;this._daySigninBtn.visible=!DataCenter.getInstance().loginAwardModel.todayKilled();
this.actionBtn.visible=a;this._leftIconContainer.visible=a;this._lvView.visible=a;this.initEffect();null!=this.guildBtn&&(this.guildBtn.visible=a);this._elfView.visible=a;this.txtWulinLeftTime&&(this.txtWulinLeftTime.visible=!a);a?this._shareBtn&&this.shareChange():this._shareBtn&&(this._shareBtn.visible=!1);null==this.wulinDamgeCon&&this.createBossDamg();this.wulinDamgeCon.visible=!a};b.isShowWxBtn=function(){if(!ProxyUtils.showWeixinBtn)return!1;if(PlatformFactory.getPlatform().name==PlatformTypes.WEIXIN)return!0;
if(PlatformFactory.getPlatform().name==PlatformTypes.EGRET)return 1==ProxyUtils.canOpenAttention||2==ProxyUtils.canOpenAttention;PlatformFactory.getPlatform();return!1};b.topClickHandler=function(){GameMainLayer.instance.showTopListLayer()};b.initCoinView=function(){this._coinView=new CoinView;this.addChild(this._coinView);this._coinView.x=230;this._coinView.y=80};b.initHeroContainer=function(){this._heroContainer=new egret.DisplayObjectContainer;this.addChild(this._heroContainer);this._heroContainer.y=
530;this._heroContainer.x=320;this._heroContainer1=new egret.DisplayObjectContainer;this.addChild(this._heroContainer1);this._heroContainer1.y=530;this._heroContainer1.x=320;this._heroContainer2=new egret.DisplayObjectContainer;this.addChild(this._heroContainer2);this._heroContainer2.y=530;this._heroContainer2.x=320;this._heroContainer3=new egret.DisplayObjectContainer;this.addChild(this._heroContainer3);this._heroContainer3.y=530;this._heroContainer3.x=320;this._heroContainer4=new egret.DisplayObjectContainer;
this.addChild(this._heroContainer4);this._heroContainer4.y=530;this._heroContainer4.x=320;this._heroContainer5=new egret.DisplayObjectContainer;this.addChild(this._heroContainer5);this._heroContainer5.y=530;this._heroContainer5.x=320};b.initHero=function(){this._actionContainer=new egret.DisplayObjectContainer;this.addChild(this._actionContainer);this.initHeroContainer();if(GuildDataManager.getInstance().isGuildWulinStart){var a=GuildWuLinDataManager.getInstance().mainHero;this._mainHero=new Hero(a);
this._heroContainer.addChild(this._mainHero)}else{a=HeroController.getInstance().mainHero;this._mainHero=new Hero(a);this._heroContainer.addChild(this._mainHero);for(var b=HeroController.getInstance().getAliveHero(),c=0;c<b.length;c++)if(a=b[c],a.isHero()){var d=new Hero(a);this.addHeroToContainer(a,d)}}};b.refreshHome=function(){this._bgContainer||(this._bgContainer=new egret.DisplayObjectContainer,this.addChild(this._bgContainer));this._bgContainer.removeChildren();null==this._default&&(this._default=
ResourceUtils.createBitmapByName("home_scene_default"));this._bgContainer.addChild(this._default);var a=GameUtils.getMapRes();this._bg=egret.DynamicBitmap.create("home_scene_"+a,!1,this.loadComplete,this);this._bgContainer.addChild(this._bg)};b.loadComplete=function(){this._default&&this._default.parent&&this._bgContainer.removeChild(this._default)};b.initBoss=function(a){void 0===a&&(a=!0);null==this._boss&&(this._boss=new Boss,this._boss.y=-105,this.addChild(this._boss));null==this._lvView&&(this._lvView=
new BossLevelView,this.addChild(this._lvView),this._lvView.x=300,this._lvView.y=70);null==this._fightStatusBtn&&(this._fightStatusBtn=new BattleStatusButton,this._fightStatusBtn.initView(),this._fightStatusBtn.x=80,this._fightStatusBtn.y=115,this.addChild(this._fightStatusBtn));a&&this._boss.refreshBoss()};b.refreshBoss=function(){this.initBoss();this._lvView.refreshView()};b.addHero=function(a){this.showAnimation(a)};b.showAnimation=function(a){if(a.isHero()){var b=this;if(RES.isGroupLoaded("group_hero_upgrade_json")){var c=
HeroActionPos[a.configId],d=new Movie("hero_upgrade_json","hero_upgrade");this._actionContainer.addChild(d);d.setCallback(function(){var c=new Hero(a);b.addHeroToContainer(a,c)},this);d.play("3");d.x=c.x;d.y=c.y}else c=new Hero(a),this.addHeroToContainer(a,c)}};b.addHeroToContainer=function(a,b){({1001:this._heroContainer4,1007:this._heroContainer5,1013:this._heroContainer2,1019:this._heroContainer1,1025:this._heroContainer3})[a.configId].addChild(b)};b.heroUpgradeHandler=function(a){if(a.isHero()&&
RES.isGroupLoaded("group_hero_upgrade_json")){a=HeroActionPos[a.configId];var b=new Movie("hero_upgrade_json","hero_upgrade");this._actionContainer.addChild(b);b.play("1");b.x=a.x;b.y=a.y}};b.createLoopBuyButton=function(){this._loopBtn=new LoopBuyButton;this._loopBtn.anchorX=this._loopBtn.anchorY=0.5;this.addChild(this._loopBtn);this._loopBtn.addOnClick(this.loopBuyClick,this);this._loopBtn.x=50;this._loopBtn.y=GameUtils.getLayoutY(375)};b.loopBuyClick=function(){GameMainLayer.instance.showLoopBuy()};
b.addHero1=function(a){this.addHero(a)};b.dispose=function(){c.prototype.dispose.call(this);removeEventsByTarget(this)};b.createBtnActive=function(){null==GuildDataManager.getInstance().isHaveGid||null==DataCenter.getInstance().totalData||40>DataCenter.getInstance().totalData.currentLevel||null!=this.guildBtn||(this.guildBtn=new GuildBtn,this.guildBtn.anchorX=this.guildBtn.anchorY=0.5,this.addChild(this.guildBtn),this.guildBtn.addOnClick(this.enterGuild,this),this.guildBtn.x=590,this.guildBtn.y=GameUtils.getLayoutY(475))};
b.createBtnPackage=function(){var a=new SimpleButton,b=ResourceUtils.createBitmapFromSheet("togglePackAge","iconRes");a.addChild(b);a.addOnClick(this.togglePackAge,this);this.addChild(a);a.x=530;a.y=220};b.togglePackAge=function(){this.isOpen=!this.isOpen;DataCenter.getInstance().loginAwardModel.todayKilled()&&this.isOpen&&this.listBtn.erase(this._daySigninBtn);this.showAwardBtn()||this.listBtn.erase(this._wxAwardBtn);GuildModel.playBtnPackEffect(this.listBtn,this.isOpen,590);DataCenter.getInstance().loginAwardModel.todayKilled()&&
this.isOpen&&this.listBtn.push(this._daySigninBtn);this.showAwardBtn()||this.listBtn.push(this._wxAwardBtn)};b.initEffect=function(){this.isOpen=!1;GuildModel.playBtnPackEffect(this.listBtn,this.isOpen,590,0)};b.createBtnGuild=function(){this.actionBtn=new ActionPackBtn;this.actionBtn.anchorX=this.actionBtn.anchorY=0.5;this.addChild(this.actionBtn);this.actionBtn.addOnClick(this.togglePackAge,this);this.actionBtn.x=590;this.actionBtn.y=200};b.enterGuild=function(){GuildDataManager.getInstance().isHaveGuild?
ProxyUtils.repMyGuildInfo():ProxyUtils.joinGuild()};b.guildActionCallBack=function(){GameMainLayer.instance.showCreateGuild()};b.initBtn=function(){for(var a=0;a<this.listBtn.length;a++)this.listBtn[a].anchorX=this.listBtn[a].anchorY=0.5,this.listBtn[a].y=this.actionBtn.y,this.listBtn[a].x=this.actionBtn.x-80*(a+1)};b.refleshWulinLeftTime=function(){null==this.txtWulinLeftTime&&(this.txtWulinLeftTime=new egret.TextField,this.txtWulinLeftTime.x=20,this.txtWulinLeftTime.y=100,this.txtWulinLeftTime.size=
26,this.addChild(this.txtWulinLeftTime));if(GuildDataManager.getInstance().isGuildWulinStart){var a=GuildDataManager.getInstance().getMyGldInfo();null!=a&&(this.txtWulinLeftTime.text=GameUtils.formatTime1(a.guildAcDuiTime))}};b.createBossDamg=function(){null==this.wulinDamgeCon&&(this.wulinDamgeCon=new egret.DisplayObjectContainer,this.addChild(this.wulinDamgeCon));null==this.txtDamgBg&&(this.txtDamgBg=ResourceUtils.createBitmapFromSheet("share_input_bg"),this.txtDamgBg.x=100,this.txtDamgBg.alpha=
0.8,this.txtDamgBg.width=430,this.txtDamgBg.y=GameUtils.getLayoutY(465),this.wulinDamgeCon.addChild(this.txtDamgBg));null==this.txtBossDamgTip&&(this.txtBossDamgTip=new egret.TextField,this.txtBossDamgTip.x=120,this.txtBossDamgTip.y=GameUtils.getLayoutY(480),this.txtBossDamgTip.text="\u5f53\u524d\u9020\u6210\u4f24\u5bb3:",this.wulinDamgeCon.addChild(this.txtBossDamgTip));if(null==this.txtDamge){this.txtDamge=new egret.BitmapText;var a=RES.getRes("battle_num_fnt_fnt");this.txtDamge.font=a;this.txtDamge.x=
this.txtBossDamgTip.x+this.txtBossDamgTip.width+5;this.txtDamge.y=GameUtils.getLayoutY(480);this.wulinDamgeCon.addChild(this.txtDamge)}this.txtDamge.text=GuildWuLinDataManager.getInstance().getCurBossDamg()};b.initChatBtn=function(){null==this.chatBtn&&(this.chatBtn=new ChatBtn,this.chatBtn.anchorX=this.chatBtn.anchorY=0.5,this.chatBtn.y=45,this.chatBtn.x=590,this.chatBtn.addOnClick(this.clickToOpenChatPanel,this),this.addChild(this.chatBtn));ChatManager.getInstace()};b.clickToOpenChatPanel=function(){GameMainLayer.instance.showChatPanel()};
b.showJumpMsgPanel=function(){GameMainLayer.instance.showJumpMsgPanel()};b.setShakeAni=function(a){var b=this;a&&a.setComplete(function(){b._bg.x=b._bg.y=0},this)};return d}(BaseContainer);GameLayer.prototype.__class__="GameLayer";
var HeroActionPos={1E3:{x:300,y:400},1001:{x:180,y:460},1007:{x:80,y:490},1013:{x:180,y:340},1019:{x:85,y:305},1025:{x:80,y:400}},DefaultHeroPos={1E3:{x:-20,y:-110},1001:{x:-140,y:-65},1007:{x:-250,y:-35},1013:{x:-150,y:-180},1019:{x:-240,y:-210},1025:{x:-250,y:-120}},testHero=null,ShareLayer=function(c){function d(){c.call(this);this.init()}__extends(d,c);var b=d.prototype;b.init=function(){this._container=new egret.DisplayObjectContainer;this.addChild(this._container);this._awardContainer=new egret.DisplayObjectContainer;
this._awardContainer.y=20;this._awardContainer.x=-40;var a=egret.DynamicBitmap.create("share_bg");this._container.addChild(a);a.x=25;a.y=200;a=new SimpleButton;a.anchorX=a.anchorY=0.5;var b=ResourceUtils.createBitmapFromSheet("close_btn");a.addChild(b);a.addOnClick(this.close,this);a.useZoomOut(!0);a.x=560;a.y=220;this._container.addChild(a);a=ResourceUtils.createBitmapFromSheet("award_icon");this._container.addChild(a);a.x=80;a.y=260;this._msgLabel=new egret.TextField;this._container.addChild(this._msgLabel);
this._msgLabel.text="CONTENT";this._msgLabel.anchorX=0;this._msgLabel.anchorY=0;this._msgLabel.textColor=16777215;this._msgLabel.x=210;this._msgLabel.y=320;this._msgLabel.width=300;this._msgLabel.size=24;this._msgLabel.lineSpacing=10;this._tipLabel=new egret.TextField;this._container.addChild(this._tipLabel);this._tipLabel.textAlign=egret.HorizontalAlign.CENTER;this._tipLabel.textColor=0;this._tipLabel.anchorX=this._tipLabel.anchorY=0.5;this._tipLabel.text="\u597d\u53cb\u70b9\u51fb\u5206\u4eab\u4fe1\u606f\u5c06\u53ef\u4ee5\u7acb\u5373\u4f7f\u7528\u6280\u80fd";
this._tipLabel.x=320;this._tipLabel.y=445;this._awardLabel=new egret.TextField;this._awardContainer.addChild(this._awardLabel);this._awardLabel.x=250;this._awardLabel.y=485;this._awardLabel.textColor=0;this._awardLabel.text="\u5956\u52b1\uff1a100\u5143\u5b9d";this._container.cacheAsBitmap=!0;this._iconContainer=new egret.DisplayObjectContainer;this._awardContainer.addChild(this._iconContainer);this._iconContainer.x=190;this._iconContainer.y=495;this._buttons=new egret.DisplayObjectContainer;this.addChild(this._buttons);
this._container.addChild(this._awardContainer)};b.createButton=function(a,b,c,d,g,l,k,m,n){var p=new egret.DisplayObjectContainer,r=new SimpleButton;r.width=l;r.height=k;r.x=d;r.y=g;r.useZoomOut(!0);r.addOnClick(c,this);r.anchorX=r.anchorY=0.5;r.addChild(p);p.cacheAsBitmap=!0;b=ResourceUtils.createBitmapFromSheet(b);b.anchorX=b.anchorY=0.5;p.addChild(b);b.x=l/2;b.y=k/2;b=new egret.TextField;b.anchorX=b.anchorY=0.5;p.addChild(b);b.text=a;b.x=l/2+m;b.y=k/2+n;b.size=25;b.textColor=0;this._buttons.addChild(r)};
b.refreshView=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);this._selector=b;this._context=c;this._conf=a;this._msgLabel.text=a.title;this._tipLabel.text=a.tip||"";GameUtils.removeAllChildren(this._buttons);this.showGold(a);this.showDiamond(a);a.ad?this.createAdButttons():"diamond"==a.type?this.createDiamondButtons():"gold"==a.type&&this.createGoldButtons()};b.showGold=function(a){if("gold"==a.type){var b=new NumberModel;b.add(a.award);this._awardLabel.text="\u5956\u52b1:"+b.getNumer()+
"\u94dc\u94b1";GameUtils.removeAllChildren(this._iconContainer);a=ResourceUtils.createBitmapFromSheet("gold_border");a.anchorX=a.anchorY=0.5;this._iconContainer.addChild(a);a=ResourceUtils.createBitmapFromSheet("icon_payment_1","iconRes");a.anchorX=a.anchorY=0.5;this._iconContainer.addChild(a)}};b.createGoldButtons=function(){this.createButton("\u9886\u53d6\u5956\u52b1","reborn_lvup_btn",this.close,315,633,180,70,0,-3)};b.createAdButttons=function(){this.createButton("\u4e0d\u4e86\uff0c\u8c22\u8c22",
"pay_btn",this.close.bind(this,!1),200,633,180,70,0,-3);this.createButton("\u89c2\u770b\u5e7f\u544a","fight_boss",this.showAdLayer,440,633,180,70,0,-3)};b.showAdLayer=function(){this.close(!1);GameMainLayer.instance.showAdLayer(this._conf)};b.showDiamond=function(a){"diamond"==a.type&&(this._awardLabel.text="\u5956\u52b1:"+a.award+"\u5143\u5b9d",GameUtils.removeAllChildren(this._iconContainer),a=ResourceUtils.createBitmapFromSheet("gold_border"),a.anchorX=a.anchorY=0.5,this._iconContainer.addChild(a),
a=ResourceUtils.createBitmapFromSheet("icon_payment_8","iconRes"),a.anchorX=a.anchorY=0.5,this._iconContainer.addChild(a))};b.createDiamondButtons=function(){this.createButton("\u9886\u53d6\u5956\u52b1","reborn_lvup_btn",this.close,315,633,180,70,0,-3)};b.close=function(a){void 0===a&&(a=!0);GameMainLayer.instance.hideShareLayer();this._selector&&this._selector.call(this._context,"close");a&&doAction(Const.AWARD_EFFECT,this._conf)};b.share=function(){this._selector&&this._selector.call(this._context)};
return d}(BoxContainer);ShareLayer.prototype.__class__="ShareLayer";
var ShareTipLayer=function(c){function d(){c.call(this);this.init()}__extends(d,c);var b=d.prototype;b.init=function(){this._container=new egret.DisplayObjectContainer;this.addChild(this._container);this._container.cacheAsBitmap=!0;this._bgContainer=new egret.DisplayObjectContainer;this._container.addChild(this._bgContainer);var a=new egret.DisplayObjectContainer,b=new SimpleButton;b.useZoomOut(!0);b.addOnClick(this.close,this);b.anchorX=b.anchorY=0.5;b.width=90;b.height=87;b.x=450;b.y=170;b.addChild(a);
a.cacheAsBitmap=!0;var c=ResourceUtils.createBitmapFromSheet("share_tip_btn");c.anchorX=c.anchorY=0.5;a.addChild(c);c.x=45;c.y=43;this.addChild(b)};b.close=function(){GameMainLayer.instance.hideShareTipLayer();doAction(Const.CLOSE_SHARE_TIP)};b.show=function(a){"awardbox"==a?(GameUtils.removeAllChildren(this._bgContainer),a=ResourceUtils.createBitmapFromSheet("share_0","shareRes"),this._bgContainer.addChild(a),a=new egret.TextField,a.textFlow=(new egret.HtmlTextParser).parser('\u201c\u6211\u73a9\u6e38\u620f\u83b7\u5f97\u4e86<font color="0xff0000">'+
ProxyUtils.awdTo.awddes+"</font>\uff0c\n\u8fd8\u6709iPhone\u3001iPad\uff0c\u662f\u670b\u53cb\u624d\u544a\u8bc9\u4f60\uff0c\n\u8fd8\u4e0d\u8d76\u7d27\u6765\uff01\u201d"),this._bgContainer.addChild(a),a.y=250,a.size=35,a.x=14,a.lineSpacing=10,a.textAlign=egret.HorizontalAlign.CENTER,a.bold=!0,a.textColor=0):(GameUtils.removeAllChildren(this._bgContainer),a=ResourceUtils.createBitmapFromSheet(a,"shareRes"),this._bgContainer.addChild(a))};return d}(BoxContainer);ShareTipLayer.prototype.__class__="ShareTipLayer";
var HeroSkill=function(){function c(b){this._isProcessing=!1;this._heroId=b}var d=c.prototype;Object.defineProperty(d,"isProcessing",{get:function(){return this._isProcessing},enumerable:!0,configurable:!0});Object.defineProperty(d,"heroId",{get:function(){return this._heroId},enumerable:!0,configurable:!0});d.getQuality=function(){return ProxyUtils.heroCards[this._heroId]};d.execute=function(){if(0<this.getQuality()){var b=this.getHero();if(b!=this._heroId&&!b.isDead())return this.onExecute(),!0}return!1};
d.getHeroList=function(){for(var b=[],a=1;6>=a;a++){var c=applyFilters(Const.GET_HERO,a);c&&c!=a&&!c.isDead()&&b.push(c)}return b};d._getUsePercentage=function(){return 1};Object.defineProperty(d,"usePercentage",{get:function(){return this._getUsePercentage()},enumerable:!0,configurable:!0});d.onExecute=function(){};d.getHero=function(){return applyFilters(Const.GET_HERO,this._heroId)};c.effectPositions={1:{x:-20,y:-130},2:{x:-140,y:-80},3:{x:-250,y:-70},4:{x:-150,y:-200},5:{x:-240,y:-230},6:{x:-250,
y:-130}};return c}();HeroSkill.prototype.__class__="HeroSkill";
var FanSkill=function(c){function d(){c.apply(this,arguments)}__extends(d,c);var b=d.prototype;b.onExecute=function(){this.getHero().setAttackLock(!0);this._isProcessing=!0;addFilter(Const.FORMAT_ATTACK_CRIT,this.formatCrit,this);addFilter(Const.FORMAT_ATTACK_DMG,this.formatDmg,this);this.getHero().play("skill_"+this.getQuality(),this.onActionEnd,this)};b.formatCrit=function(a,b){return"fan"==b?!0:a};b.formatDmg=function(a,b){if("fan"==b){var c=new NumberModel(a);c.times(d.dmgValues[this.getQuality()]);
return c.getNumer()}return a};b.onActionEnd=function(a){a==Movie.PLAY_COMPLETE?(this.getHero().play("stand"),this.getHero().setAttackLock(!1),this._isProcessing=!1,removeEventsByTarget(this)):-1<a.indexOf("attack")&&doAction(Const.HIT_HERO,"fan")};d.dmgValues={1:1.05,2:1.1,3:1.15};return d}(HeroSkill);FanSkill.prototype.__class__="FanSkill";
var PoisonSkill=function(c){function d(){c.apply(this,arguments)}__extends(d,c);var b=d.prototype;b.onExecute=function(){var a=this;this._isProcessing=!0;GameUtils.preloadHeroSkillMovieResource(this.heroId,function(){a._effect=new Movie("heroskill_"+a.heroId+"_json","heroskill_"+a.heroId);a._effect.play(a.getQuality()+"");a._effect.x=550;a._effect.y=480;applyFilters(Const.GET_BOSS).addChild(a._effect);a._tickId=Time.setTimeout(a.onKillOneBoss,a,1E4);addAction(Const.KILL_ONE_BOSS,a.onKillOneBoss,a);
addFilter(Const.FORMAT_BOSS_ATTACK_HP,a.formatBossAttackHp,a)})};b.formatBossAttackHp=function(a){a=new NumberModel(a);a.times(d.hpValues[this.getQuality()]);return a.getNumer()};b.onKillOneBoss=function(){GameUtils.removeFromParent(this._effect);this._effect=null;removeEventsByTarget(this);Time.clearTimeout(this._tickId);this._isProcessing=!1};d.hpValues={1:1.1,2:1.2,3:1.3};return d}(HeroSkill);PoisonSkill.prototype.__class__="PoisonSkill";
var SpeedSkill=function(c){function d(){c.apply(this,arguments);this._heros=null;this._effects=[];this._speeds=[]}__extends(d,c);var b=d.prototype;b.onExecute=function(){var a=this;this._isProcessing=!0;GameUtils.preloadHeroSkillMovieResource(3,function(){a._heros=a.getHeroList().filter(function(a){return a instanceof Hero});for(var b=0;b<a._heros.length;b++){var c=a._heros[b].getCurrentSpeed();a._speeds.push(c);var h=new Movie("heroskill_"+a.heroId+"_json","heroskill_"+a.heroId);h.play(a.getQuality()+
"");var g=HeroSkill.effectPositions[a._heros[b].heroId];h.x=g.x;h.y=g.y;a._effects.push(h);a._heros[b].addChild(h);a._heros[b].setCurrentSpeed(c/d.timeValues[a.getQuality()])}Time.setTimeout(a.onTick,a,5E3)})};b.onTick=function(){for(this._isProcessing=!1;this._effects.length;)GameUtils.removeFromParent(this._effects.shift());for(;this._heros.length;)this._heros.shift().setCurrentSpeed(this._speeds.shift())};d.timeValues={1:1.5,2:2,3:2.5};return d}(HeroSkill);SpeedSkill.prototype.__class__="SpeedSkill";
var LeafSkill=function(c){function d(){c.apply(this,arguments)}__extends(d,c);var b=d.prototype;b.onExecute=function(){var a=this,b=applyFilters(Const.GET_BOSS).curHP.getNumer(),b=new NumberModel(b);b.times(d.dmgValues[this.getQuality()]);b.times(0.2);this._oneAtkVal=b.getNumer();this._isProcessing=!0;GameUtils.preloadHeroSkillMovieResource(this.heroId,function(){var b=new Movie("heroskill_"+a.heroId+"_json","heroskill_"+a.heroId);b.setCallback(a.onMovieHandler,a);var c=applyFilters(Const.GET_BOSS);
b.play("1");b.x=560;b.y=470;c.addChild(b)})};b.onMovieHandler=function(a){a==Movie.PLAY_COMPLETE?this._isProcessing=!1:-1<a.indexOf("attack")&&doAction(Const.HIT_HERO,"leaf",this._oneAtkVal)};d.dmgValues={1:0.1,2:0.2,3:0.3};return d}(HeroSkill);LeafSkill.prototype.__class__="LeafSkill";
var ShadowSkill=function(c){function d(){c.apply(this,arguments);this._effects={};this._heros=[]}__extends(d,c);var b=d.prototype;b.onExecute=function(){this._isProcessing=!0;var a=this.getHeroList();this._heros=a;for(var b=0;b<a.length;b++){var c=new Movie("hero_"+a[b].heroId+"_json","hero_"+a[b].heroId);c.play("attack_Double");c.autoRemove=!1;a[b].parent.addChild(c);this._effects[a[b].heroId]=c}this._tickId=Time.setInterval(this.onTick,this,d.clickTimes[this.getQuality()]);Time.setTimeout(this.onEnd,
this,3E3)};b.atk=function(a){var b=new NumberModel;applyFilters(Const.ISBOSS,!1)?b.add(a.bossDps):b.add(a.dps);console.log(b.getNumer());a=b.getNumer();applyFilters(Const.GET_BOSS).attackedWithoutAction(a)};b.onTick=function(){for(var a=0;a<this._heros.length;a++)this.atk(this._heros[a]),this._effects[this._heros[a].heroId].play("attack_Double")};b.onEnd=function(){Time.clearInterval(this._tickId);for(var a in this._effects)GameUtils.removeFromParent(this._effects[a]),delete this._effects[a];this._isProcessing=
!1};d.clickTimes={1:200,2:100,3:66};return d}(HeroSkill);ShadowSkill.prototype.__class__="ShadowSkill";
var BigSwordSkill=function(c){function d(){c.apply(this,arguments)}__extends(d,c);var b=d.prototype;b.onExecute=function(){var a=this;this._isProcessing=!0;GameUtils.preloadHeroSkillMovieResource(this.heroId,function(){var b=new Movie("heroskill_"+a.heroId+"_json","heroskill_"+a.heroId);b.play(a.getQuality()+"");applyFilters(Const.GET_BOSS).addChild(b);b.x=550;b.y=360;b.setCallback(a.onActionHandler,a)})};b.onActionHandler=function(a){a==Movie.PLAY_COMPLETE?this._isProcessing=!1:-1<a.indexOf("attack")&&
doAction(Const.HIT_HERO,"sword",d.doubleValues[this.getQuality()])};d.doubleValues={1:20,2:40,3:60};return d}(HeroSkill);BigSwordSkill.prototype.__class__="BigSwordSkill";
var HeroSkillManager=function(){function c(){this._skills=[];this._skills.push(new BigSwordSkill(6));this._skills.push(new ShadowSkill(5));this._skills.push(new LeafSkill(4));this._skills.push(new SpeedSkill(3));this._skills.push(new PoisonSkill(2));this._skills.push(new FanSkill(1))}var d=c.prototype;d.hasProcessing=function(){return this._skills.some(function(b){return b.isProcessing})};d.execute=function(){for(var b=0;b<this._skills.length&&!(!this._skills[b].isProcessing&&GameUtils.random(0,100)<=
this._skills[b].usePercentage&&this._skills[b].execute());b++);};c.getInstance=function(){null==this._inst&&(this._inst=new c);return this._inst};return c}();HeroSkillManager.prototype.__class__="HeroSkillManager";
